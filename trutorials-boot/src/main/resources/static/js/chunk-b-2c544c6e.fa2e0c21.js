"use strict";(self["webpackChunkoinone_frontend_starter"]=self["webpackChunkoinone_frontend_starter"]||[]).push([[942],{1673:(e,t,i)=>{var r=i(15215),o=i(70164),n=i(83247),a=i(30717),l=i(68691);const s="activeRecord.workbookDefinition.id",d="activeRecord.file.id",c="activeRecord.file.url";let u=class extends l.Sk{getWorkbookId(){return this.executeExpression(this.getDsl().workbookId||s)}getUrl(){return(0,r.sH)(this,void 0,void 0,function*(){const e=this.getWorkbookId();if(e)return(yield(0,a.fEv)(e)).redirectUri})}};u=(0,r.Cg)([n.DF.ClassFactory(l.jk.Token({name:o.qh.$$internal_DownloadImportWorkbook}))],u);var p=i(67774),h=i(39277),g=i(16022),v=i(47444);const m="file";var f,y,b,C=i(78422),x=i(9703);class w extends l.Os{doTask(e,t,i){return(0,r.sH)(this,void 0,void 0,function*(){let r,o;if(this.sync){r=yield this.generatorGQLByTask(t,i);const e={path:this.getSessionPath()};window.open(g._$.appendBasePath(`/pamirs/${this.moduleName}?query=${encodeURIComponent(r)}&variables=${encodeURIComponent(JSON.stringify(e))}`),"_blank"),o=!0}else r=yield this.createTask(e,t,i),o=!!r.id;return this.processResponseResult(e,t,o)})}processResponseResult(e,t,i){return i?(a.$xc.success(this.translate("kunlun.common.success")),!0):(a.$xc.error(this.translate("kunlun.common.error")),!1)}seekSearchRuntimeContext(){var e;const t=null===(e=this.metadataRuntimeContext.parentContext)||void 0===e?void 0:e.handle;if(!t)return;const i=C.HxA.getOthers(t).find(e=>{var t;return(null===(t=e.view)||void 0===t?void 0:t.type)===o.qi.Search});return i||void 0}seekParentMetadataRuntimeContext(){var e;const t=null===(e=this.metadataRuntimeContext.parentContext)||void 0===e?void 0:e.handle;if(!t)return;const i=v.x0.select(t);return i.metadataRuntimeContext}executeSearchExpression(e,t){var i,r,o;return(0,C.AEW)(t,(null===(i=null===e||void 0===e?void 0:e.activeRecords)||void 0===i?void 0:i[0])||{},(null===(r=null===e||void 0===e?void 0:e.rootData)||void 0===r?void 0:r[0])||{},(null===(o=null===e||void 0===e?void 0:e.openerActiveRecords)||void 0===o?void 0:o[0])||{},(null===e||void 0===e?void 0:e.scene)||"")}buildSearchConditions(){let e;const{searchBody:t,searchConditions:i}=this,r=this.seekSearchRuntimeContext();if(r){const o=v.x0.select(r.handle),n=Object.assign({},t);Object.keys(n).forEach(e=>{const t=n[e];if((0,x.A)(t)){const i=t;n[e]=this.executeSearchExpression(o,i)}}),e=(0,C.if5)(r,{},n||{},i||[])}let o=this.viewFilter;if(o){const{activeRecords:t,rootData:i,openerActiveRecords:r,scene:n,parentViewActiveRecords:a}=this;o=(0,C.GsW)(o,(null===t||void 0===t?void 0:t[0])||{},(null===i||void 0===i?void 0:i[0])||{},(null===r||void 0===r?void 0:r[0])||{},n,(null===a||void 0===a?void 0:a[0])||{}),e?e.and(new p.kWY(o)):e=new p.kWY(o)}if(e)return{runtimeContext:r||this.rootRuntimeContext,condition:e}}getSessionPath(){var e;return this.action.sessionPath||(null===(e=this.viewAction)||void 0===e?void 0:e.sessionPath)||(0,p.cA5)()}}(function(e){e.ExcelWorkbookDefinitionModel="$$excel_workbook_definition_model",e.ExcelWorkbookDefinitionModelName="$$excel_workbook_definition_model",e.ExcelWorkbookDefinition={model:e.ExcelWorkbookDefinitionModel,name:e.ExcelWorkbookDefinitionModelName,module:o.hQ.FILE,moduleName:o.vL.FILE,modelActions:[],modelFields:[C.Mxx.buildSimpleModelField(e.ExcelWorkbookDefinitionModel,e.ExcelWorkbookDefinitionModelName,{data:"id",ttype:o.m1.Long})]},e.ExcelExportTaskModel="$$export_task_model",e.ExcelExportTaskModelName="$$export_task_model",e.ExcelExportTask={model:e.ExcelExportTaskModel,name:e.ExcelExportTaskModelName,module:o.hQ.FILE,moduleName:o.vL.FILE,modelActions:[],modelFields:[C.Mxx.buildSimpleModelField(e.ExcelExportTaskModel,e.ExcelExportTaskModelName,{data:"id",ttype:o.m1.Long}),C.Mxx.buildSimpleModelField(e.ExcelExportTaskModel,e.ExcelExportTaskModelName,{data:"name",ttype:o.m1.String}),C.Mxx.buildSimpleModelField(e.ExcelExportTaskModel,e.ExcelExportTaskModelName,{data:"workbookDefinition",ttype:o.m1.ManyToOne,references:e.ExcelWorkbookDefinitionModel,referencesModel:e.ExcelWorkbookDefinition}),C.Mxx.buildSimpleModelField(e.ExcelExportTaskModel,e.ExcelExportTaskModelName,{data:"conditionWrapper",ttype:o.m1.ManyToOne,references:C.QuJ.QueryWrapperModel,referencesModel:C.QuJ.QueryWrapper})]},e.REQUEST_ID_FIELD=C.Mxx.buildSimpleModelField(e.ExcelExportTaskModel,e.ExcelExportTaskModelName,{data:"requestId",ttype:o.m1.String})})(f||(f={})),function(e){e.CREATE_EXPORT_TASK_NAME="createExportTask",e.createExportTask={type:[C.RKz.CREATE],namespace:f.ExcelExportTaskModel,name:e.CREATE_EXPORT_TASK_NAME,fun:e.CREATE_EXPORT_TASK_NAME,argumentList:[{name:"data",ttype:o.m1.ManyToOne,model:f.ExcelExportTaskModel,modelDefinition:f.ExcelExportTask}],returnType:{ttype:o.m1.ManyToOne,model:f.ExcelExportTaskModel,modelDefinition:Object.assign(Object.assign({},f.ExcelExportTask),{modelFields:[f.ExcelExportTask.modelFields[0]]})}}}(y||(y={}));class S{static createExportTask(e,t,i,r){return S.createExportTaskByTask(e,{workbookDefinition:{id:t}},i,r)}static createExportTaskByTask(e,t,i,o){return(0,r.sH)(this,void 0,void 0,function*(){return S.createExportTask0("createExportTask",e,t,i,o)})}static prepareCreateExportTask(e,t,i,o){return(0,r.sH)(this,void 0,void 0,function*(){return S.createExportTask0("prepareCreateExportTask",e,t,i,Object.assign(Object.assign({},o||{}),{responseFields:[{field:f.REQUEST_ID_FIELD}]}))})}static createExportTask0(e,t,i,o,n){var a;return(0,r.sH)(this,void 0,void 0,function*(){let r;o instanceof p.kWY&&(r=o.getConditionBodyData(),o=o.toString());const l=Object.assign(Object.assign({},i),{conditionWrapper:{rsql:o,queryData:r}});(null===(a=null===n||void 0===n?void 0:n.requestFields)||void 0===a?void 0:a.length)||null===n||void 0===n||delete n.requestFields;const s=yield C.Zku.INSTANCE.executeByFun(t.model,e,Object.assign({deep:1},n),l);if(!s)throw new Error("创建导出任务失败");return s})}}(function(e){e["TEMPLATE"]="TEMPLATE",e["SELECT_TEMPLATE_FIELD"]="SELECT_TEMPLATE_FIELD",e["SELECT_FIELD"]="SELECT_FIELD"})(b||(b={}));let T=class extends w{get moduleName(){return m}get sync(){var e,t;return g.TM.isTrue(null===(t=null===(e=this.metadataRuntimeContext.viewAction)||void 0===e?void 0:e.template)||void 0===t?void 0:t.sync)}generatorGQLByTask(e,t){let i="{}",r=t;if(t instanceof p.kWY){const e=t.getConditionBodyData();e&&Object.keys(e).length&&(i=g.sK.serializableObject(e)),r=t.toString()}const o=t?{rsql:r,queryData:i}:void 0,n=this.model.name||"excelExportTask";return p.t98.mutation(`${n}Mutation`,"createExportTask").buildRequest(t=>{t.buildObjectParameter("data",t=>{const{workbookDefinition:i,exportMethod:r,selectedFields:n}=e;t.stringParameter("model",e.model),t.booleanParameter("sync",!0),i&&t.buildObjectParameter("workbookDefinition",e=>{e.stringParameter("id",i.id)}),o&&t.buildObjectParameter("conditionWrapper",e=>{e.stringParameter("rsql",o.rsql),e.stringParameter("queryData",o.queryData)}),r&&t.enumerationParameter("exportMethod",r),(null===n||void 0===n?void 0:n.length)&&t.buildArrayParameter("selectedFields",n,(e,t)=>{e.stringParameter("field",t.field),e.stringParameter("displayName",t.displayName)})})}).buildResponse(e=>{e.parameter("id")}).toString()}createTask(e,t,i){return(0,r.sH)(this,void 0,void 0,function*(){return S.createExportTaskByTask(this.model,t,i,{requestFields:this.metadataRuntimeContext.getRequestModelFields(),variables:{path:this.getSessionPath()}})})}getWorkbookId(){return this.executeExpression(this.getDsl().workbookId||s)}executeAction(e,t){var i;return(0,r.sH)(this,void 0,void 0,function*(){const e=(null===(i=this.activeRecords)||void 0===i?void 0:i[0])||{};let{exportMethod:t}=e;t||(t=b.TEMPLATE);let r,o,n,a=!1;switch(t){case b.TEMPLATE:{const t=yield this.getWorkbookId();if(!t)return!1;r=Object.assign(Object.assign({},e),{exportMethod:void 0,selectedFields:void 0,workbookDefinition:{id:t}});break}case b.SELECT_TEMPLATE_FIELD:{const t=yield this.getWorkbookId();if(!t)return!1;r=Object.assign(Object.assign({},e),{workbookDefinition:{id:t}});break}case b.SELECT_FIELD:r=Object.assign(Object.assign({},e),{workbookDefinition:void 0}),a=!0;break;default:return!1}if(!r)return!1;const l=this.openerActiveRecords;if(l&&l.length)o=`id =in= (${l.map(e=>e.id).join(",")})`;else{const e=this.buildSearchConditions();e&&(o=e.condition,n=e.runtimeContext)}return o||(o=h.fh),n||(n=this.seekSearchRuntimeContext()||this.rootRuntimeContext),a?this.doTaskByPrepare(n,r,o):this.doTask(n,r,o)})}doTaskByPrepare(e,t,i){return(0,r.sH)(this,void 0,void 0,function*(){let r,o=!1;if(this.sync){const e=yield S.prepareCreateExportTask(this.model,Object.assign(Object.assign({},t),{sync:!0}),i,{requestFields:this.metadataRuntimeContext.getRequestModelFields(),variables:{path:this.getSessionPath()}}),{requestId:n}=e;if(!n)return a.$xc.error(this.translate("kunlun.common.error")),!1;r=yield this.generatorGQLByTaskByPrepare(n);const l={path:this.getSessionPath()};window.open(g._$.appendBasePath(`/pamirs/${this.moduleName}?query=${encodeURIComponent(r)}&variables=${encodeURIComponent(JSON.stringify(l))}`),"_blank"),o=!0}else r=yield this.createTask(e,t,i),o=!!r.id;return this.processResponseResult(e,t,o)})}generatorGQLByTaskByPrepare(e){const t=this.model.name||"excelExportTask";return p.t98.mutation(t,"createExportTask").buildRequest(t=>{t.buildObjectParameter("data",t=>{t.stringParameter("requestId",e),t.booleanParameter("sync",!0)})}).buildResponse(e=>{e.parameter("id")}).toString()}getSessionPath(){var e;return this.action.sessionPath||(null===(e=this.viewAction)||void 0===e?void 0:e.sessionPath)||(0,p.cA5)()}get syncExport(){return this.sync}getUploadBodyGql(e,t){let i="{}",r=t;if(t instanceof p.kWY){const e=t.getConditionBodyData();e&&Object.keys(e).length&&(i=g.sK.serializableObject(e)),r=t.toString()}const o=t?`,conditionWrapper:{\n            rsql: "${r}",\n            queryData: "${i}"\n          }`:"",n=this.model.name||"excelExportTask",a=`mutation {\n      ${n}Mutation {\n        createExportTask(data: {sync: true, workbookDefinition: {id: ${e}}${o}}) {\n          id\n          name\n          state\n        }\n      }\n    }`;return a}getUploadBodyGqlByTask(e,t){return(0,r.sH)(this,void 0,void 0,function*(){return this.generatorGQLByTask(e,t)})}doExport(e,t,i){return(0,r.sH)(this,void 0,void 0,function*(){return this.doTask(e,t,i)})}};(0,r.Cg)([v.x0.Reactive()],T.prototype,"sync",null),(0,r.Cg)([v.x0.Reactive()],T.prototype,"syncExport",null),T=(0,r.Cg)([n.DF.ClassFactory(l.jk.Token({name:o.qh.$$internal_ExportWorkbook}))],T);var E=i(25195),A=i(89610);let k=class extends l.Os{constructor(){super(...arguments),this.list=[]}getWorkbookId(){return this.executeExpression(this.getDsl().workbookId||s)}getFileId(){return this.executeExpression(this.getDsl().fileId||d)}getFileUrl(){return this.executeExpression(this.getDsl().fileUrl||c)}executeWithTableField({workbookId:e,fileId:t,fileUrl:i,ttype:n}){return(0,r.sH)(this,void 0,void 0,function*(){const r=n===o.m1.OneToMany?"o2mImport":"m2mImport",a=yield(0,E.B8l)({id:e,file:{id:t,url:i},methodName:r},{path:this.getSessionPath()});this.list=a.importDataList.map(e=>JSON.parse(e)),(0,A.A)(this.onSubmit)&&this.onSubmit({parameters:{showRecords:this.list,submitRecords:this.list},action:this.action})})}executeAction(e,t){var i,n,l;return(0,r.sH)(this,void 0,void 0,function*(){const e=this.getWorkbookId();if(!e)return!1;const t=this.getFileId();if(!t)return!1;const r=this.getFileUrl();if(!r)return!1;const s=null===(l=null===(n=null===(i=this.metadataRuntimeContext.parentContext)||void 0===i?void 0:i.parentContext)||void 0===n?void 0:n.field)||void 0===l?void 0:l.ttype;return s&&[o.m1.OneToMany,o.m1.ManyToMany].includes(s)?yield this.executeWithTableField({ttype:s,workbookId:e,fileId:t,fileUrl:r}):yield(0,E.xLZ)(e,{id:t,url:r},{path:this.getSessionPath()}),a.$xc.success(this.translate("kunlun.common.success")),!0})}getSessionPath(){var e;return this.action.sessionPath||(null===(e=this.viewAction)||void 0===e?void 0:e.sessionPath)||(0,p.cA5)()}};k=(0,r.Cg)([n.DF.ClassFactory(l.jk.Token({name:o.qh.$$internal_ImportWorkbook}))],k);const D="activeRecord.documentDefinition.id",F="print";class R{static createPrintTask(e,t,i,r){return R.createPrintTaskByTask(e,{documentDefinitionId:t},i,r)}static createPrintTaskByTask(e,t,i,o){return(0,r.sH)(this,void 0,void 0,function*(){let r;i instanceof p.kWY&&(r=i.getConditionBodyData(),i=i.toString());const o=Object.assign(Object.assign({},t),{conditionWrapper:{rsql:i,queryData:r}}),n=yield C.Zku.INSTANCE.executeByFun(e.model,"createPrintTask",{deep:1},o);if(!n)throw new Error("创建打印任务失败");return n})}}let O=class extends w{get moduleName(){return F}get sync(){var e,t;return!g.TM.isFalse(null===(t=null===(e=this.metadataRuntimeContext.viewAction)||void 0===e?void 0:e.template)||void 0===t?void 0:t.sync)}generatorGQLByTask(e,t){return(0,r.sH)(this,void 0,void 0,function*(){let i="{}",r=t;if(t instanceof p.kWY){const e=t.getConditionBodyData();e&&Object.keys(e).length&&(i=g.sK.serializableObject(e)),r=t.toString()}const o=t?{rsql:r,queryData:i}:void 0;return p.t98.mutation(this.model.name||"pdfPrintTask","createPrintTask").buildRequest(t=>{t.buildObjectParameter("data",t=>{const{documentDefinitionId:i}=e;t.stringParameter("model",e.model),t.booleanParameter("sync",!0),i&&t.stringParameter("documentDefinitionId",i),o&&t.buildObjectParameter("conditionWrapper",e=>{e.stringParameter("rsql",o.rsql),e.stringParameter("queryData",o.queryData)})})}).buildResponse(e=>{e.parameter("id","state")}).toString()})}createTask(e,t,i){return R.createPrintTaskByTask(this.model,t,i,{requestFields:e.getRequestModelFields()})}getDocumentDefinitionId(){return this.executeExpression(this.getDsl().documentDefinitionId||D)}executeAction(e,t){var i;return(0,r.sH)(this,void 0,void 0,function*(){const e=(null===(i=this.activeRecords)||void 0===i?void 0:i[0])||{},t=yield this.getDocumentDefinitionId();if(!t)return!1;const r=Object.assign(Object.assign({},e),{documentDefinitionId:t});let o,n;const a=this.openerActiveRecords;if(a&&a.length)o=`id =in= (${a.map(e=>e.id).join(",")})`;else{const e=this.buildSearchConditions();e&&(o=e.condition,n=e.runtimeContext)}return o||(o=h.fh),n||(n=this.seekSearchRuntimeContext()||this.rootRuntimeContext),this.doTask(n,r,o)})}};var N;(0,r.Cg)([v.x0.Reactive()],O.prototype,"sync",null),O=(0,r.Cg)([n.DF.ClassFactory(l.jk.Token({name:o.qh.$$internal_PrintPdfDocument}))],O),function(e){e["A0"]="A0",e["A1"]="A1",e["A2"]="A2",e["A3"]="A3",e["A4"]="A4",e["A5"]="A5",e["B3"]="B3",e["B5"]="B5",e["CUSTOM"]="CUSTOM"}(N||(N={}));N.A0,N.A1,N.A2,N.A3,N.A4,N.A5,N.B3,N.B5,N.CUSTOM;var $,M,I,L,_;(function(e){e["VERTICAL"]="VERTICAL",e["HORIZONTAL"]="HORIZONTAL"})($||($={})),function(e){e["GENERAL"]="GENERAL",e["LEFT"]="LEFT",e["CENTER"]="CENTER",e["RIGHT"]="RIGHT",e["JUSTIFIED"]="JUSTIFIED"}(M||(M={})),function(e){e["TOP"]="TOP",e["MIDDLE"]="MIDDLE",e["BOTTOM"]="BOTTOM",e["JUSTIFIED"]="JUSTIFIED"}(I||(I={})),function(e){e["PROCESSING"]="PROCESSING",e["SUCCESS"]="SUCCESS",e["FAILURE"]="FAILURE"}(L||(L={})),function(e){e["TIP"]="TIP",e["INFO"]="INFO",e["WARNING"]="WARNING",e["ERROR"]="ERROR"}(_||(_={}));class P{constructor(){}static mm2px(e){const t=P.getDPI();return e*t/P.MM_PX_RATIO}static getDPI(){return P.BASIC_DPI}}P.BASIC_DPI=96,P.MM_PX_RATIO=25.4},3746:(e,t,i)=>{i.d(t,{EW:()=>u,Ni:()=>p,_y:()=>s,bJ:()=>l,c_:()=>d,gw:()=>h,wj:()=>c,xg:()=>a});var r=i(15215),o=i(67774);const n=o.Qq5.getInstance();function a(e){return(0,r.sH)(this,void 0,void 0,function*(){const t="\n  query{\n    resourceIconGroupQuery {\n      queryAllGroupData {\n        name\n        id\n        sys\n        iconNum\n      }\n    }\n}",i=yield n.query(e,t);return i.data.resourceIconGroupQuery.queryAllGroupData})}function l(e){return(0,r.sH)(this,void 0,void 0,function*(){const t="\n  query{\n    resourceIconGroupQuery {\n      queryGroupData {\n        name\n        id\n        sys\n      }\n    }\n}",i=yield n.query(e,t);return i.data.resourceIconGroupQuery.queryGroupData})}function s(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=`\n  query {\n    resourceIconQuery {\n      queryPage(\n        page: { currentPage: ${e.pagination.current}, size: ${e.pagination.pageSize} }\n        queryWrapper: {\n          rsql: "${e.condition.toString()}"\n          queryData: { type: "ICONFONT" }\n        }\n      ) {\n        size\n        aggs\n        totalElements\n        totalPages\n        content{\n          id\n          outId\n\t\t\t\t  displayName\n\t\t\t\t  fullFontClass\n\t\t\t\t  sys\n          show\n\t\t\t\t  groupId\n        }\n      }\n    }\n  }`,i=yield n.query(e.model,t);return i.data.resourceIconQuery.queryPage})}function d(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=`\n  query {\n  \tresourceIconUploadQuery {\n  \t\tuploads(\n  \t\t\tuploadUrl: {\n  \t\t\t\turls: [${e.urls.join(",")}]\n  \t\t\t\tsys: false\n  \t\t\t}\n  \t\t) {\n  \t\t\tcssUrls\n  \t\t\tjsUrls\n  \t\t\tfontUrls\n        libId\n\t\t\t  iconGroupList {\n\t\t\t\t  name\n\t\t\t\t  id\n\t\t\t  }\n  \t\t}\n  \t}\n  }\n  `,i=yield n.query(e.model,t);return i.data.resourceIconUploadQuery.uploads})}function c(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=`\n  mutation {\n    resourceIconGroupMutation {\n      create(data: { name: "${e.name}"}) {\n        name\n        sys\n        id\n      }\n    }\n  }\n  `,i=yield n.query(e.model,t);return i.data})}function u(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=`\n  mutation{\n    resourceIconGroupMutation{\n      update(data: {name: "${e.name}",id: "${e.id}"}) {\n        name\n      }\n    }\n  }\n  `,i=yield n.query(e.model,t);return i.data})}function p(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=`\n  mutation {\n    resourceIconGroupMutation {\n      deleteOne(data: {name: "${e.name}" , id: "${e.id}"}){\n        name\n      }\n    }\n  }\n  `,i=yield n.query(e.model,t);return i.data})}function h(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=`\n  query {\n    resourceIconQuery {\n      queryIconWithFullFontClass(fullFontClass: "${e.fullFontClass}"){\n        id\n        fullFontClass\n        groupId\n      }\n    }\n  }\n  `,i=yield n.query(e.model,t);return i.data.resourceIconQuery.queryIconWithFullFontClass})}},4093:(e,t,i)=>{i.d(t,{Du:()=>ro,Ij:()=>er,lS:()=>Zi,mz:()=>to,wE:()=>Kr,l0:()=>so,tM:()=>wa.t,Cg:()=>ne,vh:()=>Vo,yf:()=>Jo,lA:()=>hn,nu:()=>gn,PV:()=>mn,bR:()=>tn,$H:()=>xn.$H,AO:()=>xn.AO,px:()=>xn.px,Dd:()=>xn.Dd,lm:()=>Qn,Zb:()=>wn,Q3:()=>Sn,bP:()=>Nn,vM:()=>$n,Hr:()=>Pn,l:()=>qn,ib:()=>De,wu:()=>ge.w,bk:()=>nt,it:()=>et,pl:()=>ei,Gm:()=>Zt,I9:()=>bi,NG:()=>ir,h2:()=>or,oW:()=>_e});var r=i(15215),o=i(70164),n=i(83247),a=i(91702),l=i(20641),s=i(90033);const d={class:"form-bool-switch"},c={key:1},u={key:2,class:"empty-value"};function p(e,t,i,r,o,n){const a=(0,l.g2)("oio-switch");return(0,l.uX)(),(0,l.CE)("div",d,[!e.readonly||e.readonly&&e.disabled?((0,l.uX)(),(0,l.Wv)(a,{key:0,checked:e.booleanValue,disabled:e.disabled,onChange:e.changeHandler},null,8,["checked","disabled","onChange"])):e.readonly&&void 0!==e.booleanValue?((0,l.uX)(),(0,l.CE)("div",c,(0,s.v_)(e.booleanValue?e.boolTranslate("kunlun.fields.boolean.true"):e.boolTranslate("kunlun.fields.boolean.false")),1)):e.readonly&&void 0===e.booleanValue?((0,l.uX)(),(0,l.CE)("div",u,"-")):(0,l.Q3)("",!0)])}var h=i(30717);const g=(0,l.pM)({components:{OioSwitch:h.GR6},props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:[Boolean,String],default:void 0},defaultValue:{type:[Boolean,String]}}),setup(e){const{realValue:t,readonly:i,disabled:r}=(0,a.P1)(e);void 0===t.value&&(t.value=!1);const o=(0,l.EW)(()=>h.TMe.toBoolean(t.value)),n=(e,t={})=>{const i=Reflect.get(window,"translate"),r=i?i(e):"";if(r===e||0===Object.keys(t).length)return r;const o=/\{\s*([A-Z0-9_]+)\s*\}/gi;return r.replace(o,(e,i)=>t[i])},s=t=>{e.change&&e.change(t),e.blur&&e.blur()};return{readonly:i,disabled:r,realValue:t,booleanValue:o,boolTranslate:n,changeHandler:s}}});var v=i(66262);const m=(0,v.A)(g,[["render",p]]),f=m;let y=class extends a.d4{initialize(e){return super.initialize(e),this.setComponent(f),this}validator(){return(0,r.sH)(this,void 0,void 0,function*(){return this.validatorSuccess()})}};y=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.Boolean}))],y);const b={key:0};function C(e,t,i,r,o,n){const a=(0,l.g2)("a-checkbox");return(0,l.uX)(),(0,l.CE)("div",null,[e.readonly?((0,l.uX)(),(0,l.CE)("span",b,(0,s.v_)(e.realLabel),1)):((0,l.uX)(),(0,l.Wv)(a,{key:1,checked:e.currentValue,"onUpdate:checked":e.change},null,8,["checked","onUpdate:checked"]))])}var x=i(16022),w=i(63225),S=i(71928);const T=(0,l.pM)({props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:[Boolean,String]}}),components:{ACheckbox:w.Ay},setup(e){const t=(0,l.EW)(()=>"false"!==e.value&&e.value),i=(0,l.EW)(()=>x.TM.toBoolean(e.readonly)),r=(0,l.EW)(()=>x.TM.toBoolean(e.disabled)),{realLabel:o}=(0,S.C)(e);return{readonly:i,disabled:r,currentValue:t,realLabel:o}}}),E=(0,v.A)(T,[["render",C]]),A=E;let k=class extends a.d4{initialize(e){return super.initialize(e),this.setComponent(A),this}validator(){return(0,r.sH)(this,void 0,void 0,function*(){return this.validatorSkip()})}};k=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search,o.qi.Detail],ttype:o.m1.Boolean,widget:"Checkbox"}))],k);var D=i(78422),F=i(47444),R=i(48182),O=i(66401),N=i(97859),$=i(77679),M=i(68706),I=i(21879),L=i(9703),_=i(41361);function P(e,t,i,r,o,n){const a=(0,l.g2)("input-pre-suffix"),s=(0,l.g2)("oio-input-number");return(0,l.uX)(),(0,l.Wv)(s,{value:e.realValue,"default-value":e.defaultValue,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,precision:0,min:e.min,max:e.max,"min-safe-integer":e.minSafeInteger,"max-safe-integer":e.maxSafeInteger,hiddenStepHandle:e.hiddenStepHandle,step:e.step,"add-step":e.addStep,"reduce-step":e.reduceStep,unit:e.unit,"show-thousandth":e.showThousandth,autocorrection:e.autocorrection,"onUpdate:value":e.change,onFocus:e.focus,onBlur:e.blur},(0,l.eX)({_:2},[e.prefix?{name:"prefix",fn:(0,l.k6)(()=>[(0,l.bF)(a,{"content-type":e.prefixType,content:e.prefix},null,8,["content-type","content"])]),key:"0"}:void 0,e.suffix?{name:"suffix",fn:(0,l.k6)(()=>[(0,l.bF)(a,{"content-type":e.suffixType,content:e.suffix},null,8,["content-type","content"])]),key:"1"}:void 0]),1032,["value","default-value","placeholder","readonly","disabled","min","max","min-safe-integer","max-safe-integer","hiddenStepHandle","step","add-step","reduce-step","unit","show-thousandth","autocorrection","onUpdate:value","onFocus","onBlur"])}var j=i(25195),V=i(68890),B=i(45383);function H(e){const t=(0,a.P1)(e),i=(0,l.EW)(()=>{const t=x.A5.toBigNumber(e.min);return(0,N.A)(t)?t:t.toString()}),r=(0,l.EW)(()=>{const t=x.A5.toBigNumber(e.max);return(0,N.A)(t)?t:t.toString()}),o=(0,l.EW)(()=>{const t=x.A5.toNumber(e.precision);if(!(0,N.A)(t))return t});return Object.assign(Object.assign({},t),{min:i,max:r,precision:o})}const W=(0,l.pM)({name:"DefaultInteger",components:{OioInputNumber:h.z2u,InputPreSuffix:B.A},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},j.HeV),a.jW),a.R7),V.V5),{min:{type:[Number,String]},max:{type:[Number,String]}}),setup(e){return Object.assign({},H(e))}}),U=(0,v.A)(W,[["render",P]]),q=U;let z=class extends _.e{constructor(){super(...arguments),this.minSafeInteger="-9223372036854775808",this.maxSafeInteger="9223372036854775807"}initialize(e){return super.initialize(e),this.setComponent(q),this}get min(){if((0,M.HB)(this.getDsl().min))return this.getDsl().min;let e=this.executeExpression(this.getDsl().min);return(0,I.A)(e)||(0,O.A)(e)&&(e=(0,R.A)(this.field.min),(0,O.A)(e)&&(e=this.computeNumericFieldMin(this.size,this.precision))),e}get max(){if((0,M.HB)(this.getDsl().max))return this.getDsl().max;let e=this.executeExpression(this.getDsl().max);return(0,I.A)(e)||((0,L.A)(e)?(0,O.A)(e)&&(e=(0,R.A)(this.field.max),(0,O.A)(e)&&(e=this.computeNumericFieldMax(this.size,this.precision))):(0,N.A)(e)&&(e=this.computeNumericFieldMax(this.size,this.precision))),e}get step(){return this.getDsl().step}get addStep(){return this.getDsl().addStep}get reduceStep(){return this.getDsl().reduceStep}get unit(){return this.executeExpression(this.getDsl().unit)}get autocorrection(){return x.Xx.ofNullable(this.getDsl().autocorrection).map(e=>x.TM.toBoolean(e)).orElse(!1)}validator(){return super.validator().then(e=>{if(!(0,$.mO)(e))return e;const{value:t}=this;if(e=this.checkValue(t,e),!(0,$.mO)(e))return e;const i=(0,R.A)(t);if((0,O.A)(i))return e;const r=new x.gH(i);return r.isInteger()?e:this.validatorError((0,D.cAb)("输入的不是一个整数"))})}rawValidator(){return super.validator()}checkValue(e,t){if((0,N.A)(e))return t;const i=new x.gH(e);if(i.isNaN())return this.validatorError((0,D.cAb)("输入的不是一个数字"));const r=(0,x.U9)(this.min,this.minSafeInteger);if(!(0,N.A)(r)&&i.comparedTo(r.value)<0)return this.validatorError(r.isSafeInteger?`${(0,D.cAb)("不能输入超过最小安全值的数")}${this.minSafeInteger}`:`${(0,D.cAb)("不能小于")}${r.value}${(0,D.cAb)("最小值")}`);const o=(0,x.U9)(this.max,this.maxSafeInteger);return!(0,N.A)(o)&&i.comparedTo(o.value)>0?this.validatorError(o.isSafeInteger?`${(0,D.cAb)("不能输入超过最大安全值的数")}${this.maxSafeInteger}`:`${(0,D.cAb)("不能大于")}${o.value}${(0,D.cAb)("最大值")}`):t}computeNumericFieldMax(e,t){if((0,N.A)(e))return(0,R.A)(this.maxSafeInteger);let i=this._computeNumericFieldMax(e,t);const r=new x.gH(this.maxSafeInteger);return null!==r&&r.comparedTo(i)<0&&(i=r),i.toString()}computeNumericFieldMin(e,t){if((0,N.A)(e))return(0,R.A)(this.minSafeInteger);let i=new x.gH(0).minus(this._computeNumericFieldMax(e,t));const r=new x.gH(this.minSafeInteger);return null!=r&&r.comparedTo(i)>0&&(i=r),i.toString()}_computeNumericFieldMax(e,t){const i=e;let r=t;if((0,N.A)(i))return new x.gH(0);(0,N.A)(r)&&(r=0);let o=new x.gH(10).pow(i-r);return o=o.minus(new x.gH("0.1").pow(r)),o}};(0,r.Cg)([F.x0.Reactive()],z.prototype,"min",null),(0,r.Cg)([F.x0.Reactive()],z.prototype,"max",null),(0,r.Cg)([F.x0.Reactive()],z.prototype,"step",null),(0,r.Cg)([F.x0.Reactive()],z.prototype,"minSafeInteger",void 0),(0,r.Cg)([F.x0.Reactive()],z.prototype,"maxSafeInteger",void 0),(0,r.Cg)([F.x0.Reactive()],z.prototype,"addStep",null),(0,r.Cg)([F.x0.Reactive()],z.prototype,"reduceStep",null),(0,r.Cg)([F.x0.Reactive()],z.prototype,"unit",null),(0,r.Cg)([F.x0.Reactive()],z.prototype,"autocorrection",null),z=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Integer}))],z);var G=i(77500),K=i(53751);const X=["placeholder","maxlength","value"],Q={key:0,class:"clear"};function Y(e,t,i,r,o,n){const a=(0,l.g2)("CloseOutlined"),d=(0,l.g2)("a-tag"),c=(0,l.g2)("CloseCircleFilled");return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["form-multi-string-tag",[e.readonly&&"readonly",e.disabled&&"disabled"]])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.tags,(t,i)=>((0,l.uX)(),(0,l.Wv)(d,{title:t,visible:!0,closable:!e.readonly,key:i},{closeIcon:(0,l.k6)(()=>[(0,l.bF)(a,{onClick:t=>e.delTag(i)},null,8,["onClick"])]),default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(t)+" ",1)]),_:2},1032,["title","closable"]))),128)),(0,l.Lk)("input",{class:(0,s.C4)(["input",[0===e.tags.length&&"tags-empty",e.readonly&&"readonly",e.disabled&&"disabled"]]),placeholder:e.tags.length>0?"":e.placeholder,maxlength:e.unitValueLength,value:e.current,onChange:t[0]||(t[0]=(0,K.D$)((...t)=>e.currentChange&&e.currentChange(...t),["stop"])),onKeyup:t[1]||(t[1]=(0,K.jR)((...t)=>e.addTag&&e.addTag(...t),["enter"])),onBlur:t[2]||(t[2]=(...t)=>e.addTag&&e.addTag(...t))},null,42,X),e.clearStatus?((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.bF)(c,{class:"anticon anticon-close-circle ant-input-clear-icon",onClick:e.clearTag},null,8,["onClick"])])):(0,l.Q3)("",!0)],2)}var J=i(59975),Z=i(8974),ee=i(43248),te=i(50953);const ie=(0,l.pM)({props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:Array},inputRegular:{type:[String,RegExp]},tagChange:{type:Function},blur:{type:Function},placeholder:{type:String},defaultValue:{type:Array},unitValueLength:{type:Number},allowClear:{type:Boolean},allowRepeat:{type:Boolean,default:!1},rootViewType:{type:String}}),components:{CloseCircleFilled:J.A,CloseOutlined:Z.A,ATag:ee.Ay},setup(e){const t=(0,te.KR)(""),i=(0,te.KR)(e.defaultValue||[]),r=(0,l.EW)(()=>e.rootViewType===o.qi.Detail||x.TM.toBoolean(e.readonly)),n=(0,l.EW)(()=>e.rootViewType===o.qi.Detail||x.TM.toBoolean(e.disabled)),s=(0,l.EW)(()=>!r.value&&!n.value&&i.value.length>0&&e.allowClear),d=e=>{t.value=e.target.value},c=r=>{var o,n,a;let l=r.target.value;if(l)if(e.inputRegular&&(l=l.replace(e.inputRegular,"")),!i.value.includes(l)||e.allowRepeat){if(!l)return null===(n=e.blur)||void 0===n||n.call(e),void(t.value="");i.value.push(l),t.value="",null===(a=e.tagChange)||void 0===a||a.call(e,i.value)}else h.$xc.error((0,D.cAb)("错误"),(0,D.cAb)("标签已经存在，不可重复"));else null===(o=e.blur)||void 0===o||o.call(e)},u=t=>{var r;i.value.splice(t,1),null===(r=e.tagChange)||void 0===r||r.call(e,i.value)},p=()=>{var r;i.value=[],null===(r=e.tagChange)||void 0===r||r.call(e,i.value),t.value=""};(0,l.wB)(()=>e.value,e=>{i.value=null===e?[]:e||[]},{immediate:!0});const{placeholder:g}=(0,a.n$)(e);return{placeholder:g,current:t,tags:i,readonly:r,disabled:n,clearStatus:s,currentChange:d,addTag:c,delTag:u,clearTag:p}}}),re=(0,v.A)(ie,[["render",Y]]),oe=re;let ne=class extends z{initialize(e){return super.initialize(e),this.setComponent(oe),this}get inputRegular(){return this.getDsl().inputRegular||/[^\d]/g}get limit(){const e=this.field.limit||this.getDsl().limit;return e||0}get allowRepeat(){const e=this.getDsl().allowRepeat;return e||!1}get unitValueLength(){return this.getDsl().unitValueLength||(0,G.A)(this.field,"attributes.unitValueLength")}validator(){return(0,r.sH)(this,void 0,void 0,function*(){const e=yield this.validatorSpecific(this.value);if(!(0,$.mO)(e))return e;if(this.value&&this.value.length){if(this.limit&&this.value.length>this.limit)return this.validatorError(`${(0,D.cAb)("超出标签最大个数")}:${this.limit}`);for(let t=0;t<this.value.length;t++){const i=this.checkValue(this.value[t],e);if(!(0,$.mO)(i))return i}}return e})}tagChange(e){Array.isArray(e)&&0===e.length&&(e=null),this.change(e),this.blur()}};(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],ne.prototype,"inputRegular",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],ne.prototype,"limit",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],ne.prototype,"allowRepeat",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],ne.prototype,"unitValueLength",null),(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],ne.prototype,"tagChange",null),ne=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:[o.m1.Integer],multi:!0}))],ne);var ae=i(54908);const le={class:"default-slider"};function se(e,t,i,r,o,n){const a=(0,l.g2)("oio-slider"),d=(0,l.g2)("a-form-item-rest"),c=(0,l.g2)("oio-input-number");return(0,l.uX)(),(0,l.CE)("div",le,[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(a,{value:e.realValue,"default-value":e.defaultValue,min:e.min,max:e.max,step:e.step,direction:e.direction,reverse:e.reverse,"tooltip-formatter":e.tooltipFormatter,"onUpdate:value":e.change,onFocus:e.focus,onBlur:e.blur},null,8,["value","default-value","min","max","step","direction","reverse","tooltip-formatter","onUpdate:value","onFocus","onBlur"])]),_:1}),(0,l.bF)(c,{value:e.inputValue,"default-value":e.defaultValue,min:e.min,max:e.max,autocorrection:!0,"hidden-step-handle":!0,"onUpdate:value":e.onUpdateInputValue,onBlur:e.onInputBlur},{suffix:(0,l.k6)(()=>[(0,l.Lk)("span",null,"/ "+(0,s.v_)(e.max),1)]),_:1},8,["value","default-value","min","max","onUpdate:value","onBlur"])])}var de=i(74390);const ce=(0,l.pM)({name:"DefaultSlider",components:{OioSlider:h.dr8,OioInputNumber:h.z2u,AFormItemRest:de.Ay},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:Number},defaultValue:{type:Number},min:{type:Number},max:{type:Number},step:{type:Number,default:1},direction:{type:[String,Object],default:h.P9S.HORIZONTAL},reverse:{type:Boolean,default:!1},hasTooltip:{type:Boolean,default:!0},tooltipFormatter:{type:String}}),setup(e){const{realValue:t,readonly:i,disabled:r}=(0,a.P1)(e),o=(0,l.EW)(()=>{if(e.hasTooltip)return t=>(e.tooltipFormatter,`${t}`)}),n=(0,te.KR)();(0,l.wB)(t,e=>{n.value=x.A5.toNumber(e)},{immediate:!0});const s=e=>{n.value=x.A5.toNumber(e)},d=()=>{var t,i;null===(t=e.change)||void 0===t||t.call(e,n.value),null===(i=e.blur)||void 0===i||i.call(e)};return{realValue:t,readonly:i,disabled:r,tooltipFormatter:o,inputValue:n,onUpdateInputValue:s,onInputBlur:d}}}),ue=(0,v.A)(ce,[["render",se]]),pe=ue;let he=class extends z{initialize(e){return super.initialize(e),this.setComponent(pe),(0,N.A)(this.value)&&this.setValue(this.min),this}get min(){let e=x.A5.toNumber(this.getDsl().min);return(0,N.A)(e)&&(e=0),e}get max(){let e=x.A5.toNumber(this.getDsl().max);return(0,N.A)(e)&&((0,ae.Cu)()&&console.warn("滑动输入框必须配置最大值"),e=100),e}get step(){let e=x.A5.toNumber(this.getDsl().step);return(0,N.A)(e)&&(e=1),e}get direction(){var e,t;let i=null===(t=null===(e=this.getDsl().direction)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e);return(0,N.A)(i)&&(i=j.P9S.HORIZONTAL),i}get reverse(){let e=x.TM.toBoolean(this.getDsl().reverse);return(0,N.A)(e)&&(e=!1),e}get hasTooltip(){let e=x.TM.toBoolean(this.getDsl().hasTooltip);return(0,N.A)(e)&&(e=!!this.tooltipFormatter),e}get tooltipFormatter(){return this.getDsl().tooltipFormatter}};(0,r.Cg)([F.x0.Reactive()],he.prototype,"min",null),(0,r.Cg)([F.x0.Reactive()],he.prototype,"max",null),(0,r.Cg)([F.x0.Reactive()],he.prototype,"step",null),(0,r.Cg)([F.x0.Reactive()],he.prototype,"direction",null),(0,r.Cg)([F.x0.Reactive()],he.prototype,"reverse",null),(0,r.Cg)([F.x0.Reactive()],he.prototype,"hasTooltip",null),(0,r.Cg)([F.x0.Reactive()],he.prototype,"tooltipFormatter",null),he=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:[o.m1.Integer],widget:"Slider"}))],he);var ge=i(4792),ve=i(92049);function me(e,t,i,r,o,n){const a=(0,l.g2)("oio-color-picker");return(0,l.uX)(),(0,l.Wv)(a,{class:"default-color-picker",value:e.realValue,"default-value":e.defaultValue,"has-input":e.hasInput,"input-placeholder":e.placeholder,disabled:e.disabled,readonly:e.readonly,predefine:e.predefine,onChange:e.change,onFocus:e.focus,onBlur:e.blur},null,8,["value","default-value","has-input","input-placeholder","disabled","readonly","predefine","onChange","onFocus","onBlur"])}var fe=i(81220);const ye=(0,l.pM)({name:"DefaultColorPicker",components:{OioColorPicker:fe.dzx},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:String},defaultValue:{type:String},colorFormat:{type:[String,Object],default:j.NVY.RGB},hasInput:{type:Boolean,default:!0},placeholder:{type:String,default:(0,D.cAb)("请选择颜色")},inputPlacement:{type:[String,Object],default:j.X45.BEFORE},predefine:{type:Array,default:j.rkC}}),setup(e){return Object.assign({},(0,a.P1)(e))}}),be=(0,v.A)(ye,[["render",me]]),Ce=be;let xe=class extends a.d4{initialize(e){return super.initialize(e),this.setComponent(Ce),this}get predefine(){const{predefine:e}=this.getDsl();if(e)try{const t=JSON.parse(e),i=[];return(0,ve.A)(t)&&t.forEach(e=>{(0,L.A)(e)&&i.push(e)}),i}catch(t){console.error("predefine error.",t)}return j.rkC}change(e){super.change(e),this.blur()}};(0,r.Cg)([F.x0.Reactive()],xe.prototype,"predefine",null),(0,r.Cg)([F.x0.Reactive()],xe.prototype,"change",null),xe=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:"ColorPicker"}))],xe);const we={key:0,class:"default-download__prefix"},Se=["href"];function Te(e,t,i,r,o,n){return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["default-download",{"default-download--disabled":e.disabled}])},[e.linkDisplayTextPrefix?((0,l.uX)(),(0,l.CE)("span",we,(0,s.v_)(e.$translate(e.linkDisplayTextPrefix)),1)):(0,l.Q3)("",!0),(0,l.Lk)("a",{class:"default-download__link",href:e.value,onClick:t[0]||(t[0]=(...t)=>e.onDownload&&e.onDownload(...t))},(0,s.v_)(e.$translate(e.linkDisplayText)),9,Se)],2)}const Ee=(0,l.pM)({name:"DefaultDownload",props:{value:{type:String},linkDisplayTextPrefix:{type:String},linkDisplayText:{type:String},disabled:{type:Boolean},onDownload:{type:Function}}}),Ae=(0,v.A)(Ee,[["render",Te]]),ke=Ae;let De=class extends ge.w{initialize(e){return super.initialize(e),this.setComponent(ke),this}get linkDisplayTextPrefix(){return this.getDsl().linkDisplayTextPrefix}get linkDisplayText(){return this.getDsl().linkDisplayText||this.value}get downloadFileName(){return(0,D.cAb)(this.getDsl().downloadFileName)}onDownload(e){return(0,r.sH)(this,void 0,void 0,function*(){if(e.preventDefault(),this.value&&!this.disabled)try{const e=yield fetch(this.value,{mode:"cors"});if(!e.ok)throw new Error("网络响应错误");const t=yield e.blob(),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=this.downloadFileName||this.value.substring(this.value.lastIndexOf("/")+1),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)}catch(t){console.error("下载文件失败：",t)}})}};(0,r.Cg)([F.x0.Reactive()],De.prototype,"linkDisplayTextPrefix",null),(0,r.Cg)([F.x0.Reactive()],De.prototype,"linkDisplayText",null),(0,r.Cg)([F.x0.Reactive()],De.prototype,"downloadFileName",null),(0,r.Cg)([F.x0.Method()],De.prototype,"onDownload",null),De=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:"Download"}))],De);let Fe=class extends ge.w{validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);return(0,$.mO)(t)?(0,o.Po)(this.value)||/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]+$/.test(this.value)?this.validatorSuccess():this.validatorError((0,D.cAb)("邮箱格式错误")):t})}};Fe=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Email}))],Fe);let Re=class extends Fe{};Re=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String,widget:"Email"}))],Re);var Oe=i(81427),Ne=i(98916);class $e extends a.d4{constructor(){super(...arguments),this.type=Oe.O$K.OPERATION,this.sourceCode="",this.hasChangeSourceCode=!1,this.isFrontend=!1,this.expressionItemList=[]}initialize(e){return this.setExpressionItemList([(0,Oe.lrF)(this.type)]),super.initialize(e),this}get valueList(){return this.getExpressionItemList()}set valueList(e){this.setExpressionItemList(e)}getExpressionItemList(){return this.expressionItemList}setExpressionItemList(e){JSON.stringify(e)!==JSON.stringify(this.expressionItemList)&&(e=(null===e||void 0===e?void 0:e.length)?e:[(0,Oe.lrF)(this.type)],this.expressionItemList=e)}get changeVariableOnSelect(){const{changeVariableOnSelect:e}=this.getDsl();return!(0,N.A)(e)&&((0,Ne.A)(e)?e:!(!(0,L.A)(e)||!x.TM.isStringBoolean(e))&&!!x.TM.toBoolean(e))}get isLowCode(){var e,t;return null===(t=null===(e=this.rootData)||void 0===e?void 0:e[0])||void 0===t?void 0:t.isLowCode}get title(){const{title:e}=this.getDsl();return this.executeExpression(e)||this.field.displayName||this.field.label}get expDisplayNameField(){const{expDisplayNameField:e}=this.getDsl();return e}get expItemsField(){const{expItemsField:e}=this.getDsl();return e}get expDefinitionField(){const{expDefinitionField:e}=this.getDsl();return e}onChangeList(e){this.customOnChangeList(e)}onChangeSourceCode(e){"string"===typeof e?(this.sourceCode=e,this.hasChangeSourceCode=!0):(this.sourceCode=(0,Oe.uAc)(e,this.createExpressionOption()),this.hasChangeSourceCode=!1)}customOnChangeList(e){if(this.hasChangeSourceCode)return this.setExpressionItemList(e),this.setValue(this.sourceCode),(0,o.Po)(this.value)&&(0,o.Po)(this.getExpressionItemList())&&this.setExpressionItemList([(0,Oe.lrF)(this.type)]),void(this.expDisplayNameField&&(this.formData[this.expDisplayNameField]=D.syF.translate(this.sourceCode)));this.setExpressionItemList(e),this.setValue((0,Oe.uAc)(this.getExpressionItemList(),this.createExpressionOption())),(0,o.Po)(this.value)&&(0,o.Po)(this.getExpressionItemList())&&this.setExpressionItemList([(0,Oe.lrF)(this.type)]),this.expDisplayNameField&&(this.formData[this.expDisplayNameField]=(0,Oe.C6$)(this.getExpressionItemList(),this.createExpressionOption()))}get expressionOption(){return this.createExpressionOption()}createExpressionOption(){return{variableContextItems:this.contextItems,models:this.models,type:this.type,ttypes:this.ttypes,quoteType:this.quoteType,leftJoinTtype:this.leftJoinTtype,leftJoinField:this.leftJoinField,showVariableType:this.showVariableType,modelModel:this.modelModel,variableCustomMethod:this.variableCustomMethod}}get modelModel(){return this.models&&this.models[0]}get ttypes(){const{ttypes:e}=this.getDsl();return e?e.split(","):[]}get leftJoinTtype(){return this.getDsl().leftJoinTtype}get leftJoinField(){return null}get showVariableType(){const{showVariableType:e=!0}=this.getDsl();return!!(0,N.A)(e)||x.TM.toBoolean(e)}get isFieldStore(){const{isFieldStore:e}=this.getDsl();return!!(0,N.A)(e)||x.TM.toBoolean(e)}get showFooter(){const{showFooter:e=!0}=this.getDsl();return!!(0,N.A)(e)||x.TM.toBoolean(e)}get quoteType(){const{quoteType:e}=this.getDsl();return e||Oe.KhG.SINGLE}get contextItems(){const{contextItems:e,workflowModelExp:t,expModel:i}=this.getDsl();return(0,Oe.MJu)(e,this.formData.model,this.executeExpression(i||t,null)||this.field.model)}get isSimpleMode(){return this.contextItems&&1===this.contextItems.length&&this.contextItems[0].models&&1===this.contextItems[0].models.length}get models(){if(!this.contextItems)return[];const e=[];return this.contextItems.forEach(t=>{t.models&&t.models.forEach(t=>e.includes(t)||e.push(t))}),e}filterMethod(e){return!0}variableCustomMethod(e,t,i){return e}numberCustomMethod(e,t){return e}submit(e){const t=Object.create(null,{submit:{get:()=>super.submit}});return(0,r.sH)(this,void 0,void 0,function*(){return yield this.customSubmit(),t.submit.call(this,e)})}customSubmit(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=(0,Oe.KJU)(e||this.queryExpressionParam,this.valueList,this.createExpressionOption());yield(0,Oe.ok6)(t)})}watchId(){return(0,r.sH)(this,void 0,void 0,function*(){yield this.initData()})}initExpressionItemList(){return(0,r.sH)(this,void 0,void 0,function*(){return this.initData()})}initData(){return(0,r.sH)(this,void 0,void 0,function*(){if(this.value){const e=yield this.queryExpression();if(e){(0,Oe.uFj)(e,this.createExpressionOption());const t=e.itemList;this.setExpressionItemList((null===t||void 0===t?void 0:t.length)?t:[(0,Oe.lrF)(this.type)]),this.sourceCode=this.value;const i=t||[];i.length&&this.sourceCode&&!i.some(e=>{var t;return!!(null===(t=e.valueList)||void 0===t?void 0:t.find(e=>e.value))})&&(this.hasChangeSourceCode=!0)}else this.setExpressionItemList([(0,Oe.lrF)(this.type)]),this.sourceCode=this.value,this.hasChangeSourceCode=!0}return this.getExpressionItemList()})}get queryExpressionParam(){var e,t,i;return{model:null===(e=this.field)||void 0===e?void 0:e.model,field:null===(t=this.field)||void 0===t?void 0:t.name,key:null===(i=this.formData)||void 0===i?void 0:i.id}}queryExpression(){return(0,r.sH)(this,void 0,void 0,function*(){return(0,Oe.NuT)(this.queryExpressionParam)})}}(0,r.Cg)([F.x0.Reactive()],$e.prototype,"type",void 0),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"sourceCode",void 0),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"hasChangeSourceCode",void 0),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"expressionItemList",void 0),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"valueList",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"changeVariableOnSelect",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"isLowCode",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"title",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"expDisplayNameField",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"expItemsField",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"expDefinitionField",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"onChangeList",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"onChangeSourceCode",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"expressionOption",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"modelModel",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"ttypes",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"leftJoinTtype",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"leftJoinField",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"showVariableType",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"isFieldStore",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"showFooter",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"quoteType",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"contextItems",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"isSimpleMode",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"models",null),(0,r.Cg)([F.x0.Method()],$e.prototype,"filterMethod",null),(0,r.Cg)([F.x0.Watch("formData.id",{deep:!0,immediate:!0})],$e.prototype,"watchId",null),(0,r.Cg)([F.x0.Method()],$e.prototype,"initExpressionItemList",null),(0,r.Cg)([F.x0.Reactive()],$e.prototype,"queryExpressionParam",null);class Me extends $e{constructor(){super(...arguments),this.fieldOptions=[]}initialize(e){return this.setExpressionItemList((0,Oe.P4J)(this.type)),super.initialize(e),this}createExpressionOption(){return{variableContextItems:this.contextItems,models:this.models,type:this.type,isFrontend:this.isFrontend,ttypes:this.ttypes,isBetweenInBrackets:!0,quoteType:this.quoteType,showVariableType:this.showVariableType,modelModel:this.modelModel,variableCustomMethod:this.variableCustomMethod,numberCustomMethod:this.numberCustomMethod}}customOnChangeList(e){if(this.hasChangeSourceCode)return this.setExpressionItemList(e),this.setValue(this.sourceCode),void(this.expDisplayNameField&&(this.formData[this.expDisplayNameField]=D.syF.translate(this.sourceCode)));this.setExpressionItemList(e),this.formData[this.itemData]=(0,Oe.F0q)(this.getExpressionItemList(),this.createExpressionOption()),this.expDisplayNameField&&(this.formData[this.expDisplayNameField]=(0,Oe.BKN)(this.getExpressionItemList(),this.createExpressionOption()))}initData(){return(0,r.sH)(this,void 0,void 0,function*(){const e=yield this.queryExpression();if(e){(0,Oe.uFj)(e,this.createExpressionOption());const t=e.itemList;this.setExpressionItemList((null===t||void 0===t?void 0:t.length)?t:[(0,Oe.lrF)(this.type)]),this.sourceCode=this.value;const i=t||[];if(i.length&&this.sourceCode){const e=i[0].valueList||[];e.some(e=>e.value)||(this.hasChangeSourceCode=!0)}}else this.setExpressionItemList((0,Oe.LmG)(this.fieldOptions,0,this.type)),this.value&&(this.sourceCode=this.value,this.hasChangeSourceCode=!0);return this.getExpressionItemList()})}createFieldOptions(){return(0,r.sH)(this,void 0,void 0,function*(){if(!this.models||!this.models.length)return[];const e=yield(0,Oe.EI4)(this.models[0]),t=(0,Oe.gb1)(e,this.ttypes,this.isFieldStore,!0,!0,this.filterMethod);return t.filter(e=>e.show===Oe.CpS.ACTIVE)})}}(0,r.Cg)([F.x0.Reactive()],Me.prototype,"fieldOptions",void 0);let Ie=class extends Me{constructor(){super(...arguments),this.type=Oe.O$K.BOOLEAN_CONDITION}initialize(e){return super.initialize(e),this.setComponent(Oe.h9k),this}};(0,r.Cg)([F.x0.Reactive()],Ie.prototype,"type",void 0),Ie=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:"BooleanConditionInputControl"}))],Ie);let Le=class extends Me{constructor(){super(...arguments),this.type=Oe.O$K.RSQL_CONDITION}initialize(e){return super.initialize(e),this.setComponent(Oe.h9k),this}};(0,r.Cg)([F.x0.Reactive()],Le.prototype,"type",void 0),Le=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:"RsqlConditionInputControl"}))],Le);let _e=class extends Le{initialize(e){return super.initialize(e),this.setComponent(Oe.EBW),this}};_e=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:"RsqlConditionPanel"}))],_e);var Pe=i(67774);const je=[Pe.JhY.LIKE,Pe.JhY.STARTS,Pe.JhY.ENDS].map(e=>e.toString());let Ve=class extends Le{constructor(){super(...arguments),this.isFrontend=!0}numberCustomMethod(e,t){return(0,Oe._1_)(t)?(0,Oe.T01)(e,Oe.KhG.SINGLE):e}variableCustomMethod(e,t,i){const r="${"+e+"}",{operator:o}=i||{};return je.includes(o)?r:"'"+r+"'"}};Ve=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail],ttype:[o.m1.String,o.m1.Text],widget:"FrontRsqlConditionInputControl"}))],Ve);class Be extends $e{initialize(e){return this.setExpressionItemList([(0,Oe.lrF)(this.type)]),super.initialize(e),Be.preCacheBuildInFunction(),this}static preCacheBuildInFunction(){(0,Oe.NkY)()}get ttypes(){return super.ttypes.length?1===super.ttypes.length&&"ALL"===super.ttypes[0].toString()?Oe.nDy:super.ttypes:this.leftJoinTtype?(0,o.CG)(this.leftJoinTtype)?[o.m1.UID,o.m1.ID,o.m1.Integer,o.m1.Long,o.m1.Float,o.m1.Currency]:(0,o.aw)(this.leftJoinTtype)?[o.m1.String,o.m1.Text,o.m1.HTML,o.m1.Phone,o.m1.Email]:[this.leftJoinTtype]:Oe.nDy}}(0,r.Cg)([F.x0.Reactive()],Be.prototype,"ttypes",null);let He=class extends Be{initialize(e){return super.initialize(e),this.setComponent(Oe.MG),this}};He=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:"ExpressionInputControl"}))],He);let We=class extends Be{initialize(e){return super.initialize(e),this.setComponent(Oe.CVk),this}};We=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:"ExpressionTagControl"}))],We);const Ue=[o.m1.String,o.m1.Text,o.m1.HTML,o.m1.Phone,o.m1.Email];class qe extends a.d4{constructor(){super(...arguments),this.variableItemList=(0,Oe.pGB)(),this.isInitData=!1,this.isFieldMode=!1,this.isFieldStore=void 0,this.minVariableNum=1,this.maxVariableNum=1,this.pagination={total:0,pageSize:10,current:1},this.modelList=[],this.options=[],this.variableMaxStringLength=10,this.keyword="",this.filterMethod=e=>Ue.includes(e.ttype)}initialize(e){this.setVariableItemList((0,Oe.pGB)()),super.initialize(e);const{isFieldMode:t,isFieldStore:i}=this.getDsl();return this.isFieldMode=t,this.isFieldStore=i,this}get quoteType(){const{quoteType:e}=this.getDsl();return e||Oe.KhG.SINGLE}get useContextName(){const{useContextName:e}=this.getDsl();return(0,N.A)(e)?void 0:!!e}get valueList(){return this.getVariableItemList()}set valueList(e){this.setVariableItemList(e)}getVariableItemList(){return this.variableItemList}setVariableItemList(e){(0,Oe.aTJ)(e)||(this.variableItemList=e)}get ttypes(){const{ttypes:e}=this.getDsl();return e?e.split(","):[]}get contextItems(){var e;const{contextItems:t,model:i}=this.getDsl();return(0,Oe.MJu)(t,null===(e=this.formData)||void 0===e?void 0:e.model,this.executeExpression(i,null)||this.field.model)}get isSimpleMode(){return this.contextItems&&1===this.contextItems.length&&this.contextItems[0].models&&1===this.contextItems[0].models.length}get models(){if(!this.contextItems)return[];const e=[];return this.contextItems.forEach(t=>{t.models&&t.models.forEach(t=>t&&(e.includes(t)||e.push(t)))}),e}fetchModelData(){return(0,r.sH)(this,void 0,void 0,function*(){if(!this.models.length)return;const e=yield(0,Oe.aCB)(this.models,this.keyword,this.pagination);this.modelList=e.content,this.options=(0,Oe.CmV)(this.modelList,this.ttypes,this.isFieldStore,void 0,!1,this.filterMethod),this.isSimpleMode&&(this.options=this.options&&this.options[0]&&this.options[0].children||[]),this.pagination.total=e.totalElements})}fetchChildren(e){return(0,r.sH)(this,void 0,void 0,function*(){yield(0,Oe.Qsb)(e,this.options,{})})}onPaginationChange(e,t){return(0,r.sH)(this,void 0,void 0,function*(){this.pagination.current=e,this.pagination.pageSize=t,this.fetchModelData()})}onChangeValueList(e){this.setVariableItemList(e),this.change((0,Oe.z5Z)(e,{variableContextItems:this.contextItems,isBetweenInBrackets:!1,quoteType:this.quoteType,useContextName:this.useContextName})),(0,Oe.aTJ)(e)&&this.blur()}onKeywordChange(e){this.keyword=e,this.pagination.current=1,this.fetchModelData()}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);return(0,$.mO)(t)?this.invisible?this.validatorSuccess():this.required&&this.isInitData&&this.minVariableNum>=1&&this.getVariableItemList().filter(e=>e.type===Oe.wk2.VARIABLE).length<this.minVariableNum?this.validatorError((0,D.cAb)("至少要有一个字段")):this.validatorSuccess():t})}get queryExpressionParam(){return{model:this.field.model,field:this.field.name,key:this.formData.id}}submit(e){const t=Object.create(null,{submit:{get:()=>super.submit}});return(0,r.sH)(this,void 0,void 0,function*(){return yield this.customSubmit(),t.submit.call(this,e)})}customSubmit(){return(0,r.sH)(this,void 0,void 0,function*(){if(this.queryExpressionParam.key){const e=[Object.assign(Object.assign({},(0,Oe.lrF)(Oe.O$K.OPERATION)),{valueList:this.getVariableItemList()})],t=(0,Oe.KJU)(this.queryExpressionParam,e,{variableContextItems:this.contextItems,type:Oe.O$K.OPERATION});yield(0,Oe.ok6)(t)}})}watchModel(){return(0,r.sH)(this,void 0,void 0,function*(){this.formData.model&&this.fetchModelData()})}initData(){return(0,r.sH)(this,void 0,void 0,function*(){if(this.formData.id){const e=yield(0,Oe.NuT)(this.queryExpressionParam);if(e){(0,Oe.uFj)(e,{variableContextItems:this.contextItems,type:Oe.O$K.OPERATION});let t=e.itemList;return t=t&&t.length?t:[(0,Oe.lrF)(Oe.O$K.OPERATION)],this.setVariableItemList(t[0].valueList),this.isInitData=!0,this.getVariableItemList()}}return this.setVariableItemList((0,Oe.pGB)()),this.isInitData=!0,this.getVariableItemList()})}watchId(){this.initData()}mounted(){super.mounted(),this.fetchModelData(),this.watchId()}}(0,r.Cg)([F.x0.Reactive()],qe.prototype,"quoteType",null),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"useContextName",null),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"variableItemList",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"valueList",null),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"isInitData",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"isFieldMode",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"isFieldStore",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"minVariableNum",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"maxVariableNum",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"pagination",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"modelList",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"options",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"variableMaxStringLength",void 0),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"ttypes",null),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"contextItems",null),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"isSimpleMode",null),(0,r.Cg)([F.x0.Method()],qe.prototype,"fetchChildren",null),(0,r.Cg)([F.x0.Method()],qe.prototype,"onPaginationChange",null),(0,r.Cg)([F.x0.Method()],qe.prototype,"onChangeValueList",null),(0,r.Cg)([F.x0.Method()],qe.prototype,"onKeywordChange",null),(0,r.Cg)([F.x0.Reactive()],qe.prototype,"queryExpressionParam",null),(0,r.Cg)([F.x0.Watch("formData.model",{deep:!0})],qe.prototype,"watchModel",null),(0,r.Cg)([F.x0.Watch("formData.id",{deep:!0})],qe.prototype,"watchId",null);let ze=class extends qe{initialize(e){return super.initialize(e),this.setComponent(Oe.Afd),this}};ze=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({widget:"FieldSelectControl",viewType:o.qi.Form,ttype:o.m1.String}))],ze);var Ge,Ke,Xe=i(13193);let Qe=class extends a.d4{constructor(){super(...arguments),this.contextItems=[],this.isCanSelectComplexField=!0,this.isSimpleMode=!0,this.isCanSelectRelationField=!1}initialize(e){return super.initialize(e),this.setComponent(Oe.VtC),this}fillContextItems(){let{workflowModelExp:e="",expModel:t="",canSelectComplexField:i=!0,canSelectRelationField:r=!1}=this.getDsl();this.isCanSelectComplexField=i,this.isCanSelectRelationField=r,t=this.executeExpression(t||e,""),this.contextItems=t?[{name:Xe.A8.activeRecord,displayName:Oe.nqU.activeRecord,models:[t]}]:[]}get size(){const{size:e="default"}=this.getDsl();return e}get changeOnSelect(){let{changeOnSelect:e}=this.getDsl();return!(0,N.A)(e)&&((0,Ne.A)(e)?e:!(!(0,L.A)(e)||!x.TM.isStringBoolean(e))&&!!x.TM.toBoolean(e))}filterMethod(e){return!(!this.isCanSelectRelationField&&e.systemSource==o.Ry.RELATION)&&!e.multi}mounted(){this.fillContextItems(),super.mounted()}change(e){super.change(e&&e.apiName)}};(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object)],Qe.prototype,"contextItems",void 0),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object)],Qe.prototype,"isCanSelectComplexField",void 0),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object)],Qe.prototype,"isSimpleMode",void 0),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object)],Qe.prototype,"isCanSelectRelationField",void 0),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Qe.prototype,"size",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Qe.prototype,"changeOnSelect",null),(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",["function"===typeof(Ge="undefined"!==typeof o.IModelField&&o.IModelField)?Ge:Object]),(0,r.Sn)("design:returntype",void 0)],Qe.prototype,"filterMethod",null),(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",["function"===typeof(Ke="undefined"!==typeof Oe.IVariableItem&&Oe.IVariableItem)?Ke:Object]),(0,r.Sn)("design:returntype",void 0)],Qe.prototype,"change",null),Qe=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({widget:"ModelFieldSelectControl",viewType:o.qi.Form,ttype:o.m1.String}))],Qe);let Ye=class extends qe{constructor(){super(...arguments),this.isVariableWidget=!0}initialize(e){return super.initialize(e),this.setComponent(Oe.NZQ),this}};(0,r.Cg)([F.x0.Reactive()],Ye.prototype,"isVariableWidget",void 0),Ye=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:"VariableInputFormFieldControl"}))],Ye);let Je=class extends qe{initialize(e){return super.initialize(e),this.setComponent(Oe.Rr5),this}};Je=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:"VariableTagFormFieldControl"}))],Je);var Ze=i(32093);let et=class extends ge.w{submit(e){let t=this.value;return this.crypto&&t&&(t=(0,Ze.w)(t)),D.pFK.DEFAULT(this.field,this.itemName,e,t)}get translation(){return!!this.getDsl().translation}validator(){return(0,r.sH)(this,void 0,void 0,function*(){const e=yield this.validatorSpecific(this.value);return(0,$.mO)(e)?null==this.value?this.validatorSuccess():this.validateLength(this.value):e})}};(0,r.Cg)([F.x0.Reactive()],et.prototype,"translation",null),et=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String}))],et);var tt=i(67376);const it=(0,l.pM)({name:"DefaultHyperlinks",inheritAttrs:!1,props:Object.assign(Object.assign({},V.F6),{text:{type:String},target:{type:String}}),setup(e){const{realValue:t}=(0,a.P1)(e,!1);return{realValue:t}},render(){const e=Object.assign(Object.assign({},this.$props),{"onUpdate:value":this.change,onFocus:this.focus,onBlur:this.blur});return this.mode===j.Mmj.DYNAMIC?(0,l.bF)(tt.A,e):(0,l.bF)("div",{class:"form-string-hyperlinks",title:this.realValue},[this.text||this.realValue?(0,l.bF)("a",{href:this.realValue,target:this.target},this.text||this.realValue):(0,l.bF)("span",{class:"oio-empty"},"-")])}}),rt=it,ot=rt;let nt=class extends et{initialize(e){return super.initialize(e),this.setComponent(ot),this}get text(){return this.getDsl().text}get target(){const{target:e}=this.getDsl();if(e)switch(e){case o.jq.Router:return D.nHy.SELF;case o.jq.OpenWindow:return D.nHy.BLANK;default:return D.nHy.BLANK}return D.nHy.BLANK}};(0,r.Cg)([F.x0.Reactive()],nt.prototype,"text",null),(0,r.Cg)([F.x0.Reactive()],nt.prototype,"target",null),nt=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:"Hyperlinks"}))],nt);const at={class:"default-icon-select"},lt={key:0,class:"default-icon-select-icon"};function st(e,t,i,r,o,n){const a=(0,l.g2)("oio-icon"),d=(0,l.g2)("oio-button"),c=(0,l.g2)("icon-select"),u=(0,l.g2)("oio-modal");return(0,l.uX)(),(0,l.CE)("div",at,[e.isSelected?((0,l.uX)(),(0,l.CE)("div",lt,[(0,l.bF)(a,{icon:e.value,size:"18px",color:"var(--oio-primary-color)"},null,8,["icon"])])):(0,l.Q3)("",!0),(0,l.bF)(d,{onClick:e.showModal},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.$translate("选择图标")),1)]),_:1},8,["onClick"]),(0,l.bF)(u,{data:e.editValue,visible:e.visible,"onUpdate:visible":t[0]||(t[0]=t=>e.visible=t),loading:e.loading,"confirm-loading":e.loading,title:e.$translate(e.modalTitle)||e.$translate("选择图标"),width:"small","destroy-on-close":!0,enterCallback:e.enterCallback},{default:(0,l.k6)(({data:t})=>[(0,l.bF)(c,{value:t.value,"onUpdate:value":e=>t.value=e,data:e.showDataSource},null,8,["value","onUpdate:value","data"])]),_:1},8,["data","visible","loading","confirm-loading","title","enterCallback"])])}var dt=i(67068);const ct=(0,l.pM)({name:"DefaultIconSelect",components:{OioIcon:h.Lky,OioButton:h._5z,OioModal:h.NHb,IconSelect:dt.Ex},inheritAttrs:!1,props:{value:{type:String},icons:{type:[String,Array]},modalTitle:{type:String,default:""},loading:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},change:{type:Function}},setup(e){const t=(0,te.KR)(!1),i=(0,te.KR)({}),r=(0,l.EW)(()=>!(0,O.A)(e.value)),o=(0,l.EW)(()=>{const t=e.icons;return(0,L.A)(t)?Object.keys(dt.je).includes(t)?t:t.split(",").filter(e=>!!e):t}),n=()=>{i.value.value=e.value,t.value=!0},a=(i,r)=>{var o;null===(o=e.change)||void 0===o||o.call(e,r.value),t.value=!1};return{visible:t,editValue:i,isSelected:r,showDataSource:o,showModal:n,enterCallback:a}}}),ut=(0,v.A)(ct,[["render",st]]),pt=ut;let ht=class extends ge.w{initialize(e){return super.initialize(e),this.setComponent(pt),this}get modalTitle(){return this.getDsl().modalTitle}get icons(){return this.getDsl().icons}};(0,r.Cg)([F.x0.Reactive()],ht.prototype,"modalTitle",null),(0,r.Cg)([F.x0.Reactive()],ht.prototype,"icons",null),ht=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String,widget:"IconSelect"}))],ht);const gt=(0,l.pM)({props:Object.assign({},V.F6),render(){const e=Object.assign(Object.assign({},this.$props),{"onUpdate:value":this.change,onFocus:this.focus,onBlur:this.blur});if(this.mode===j.Mmj.DYNAMIC)return(0,l.bF)(tt.A,e);const t=(0,l.bF)("div",{class:"form-iframe-area-design"},(0,D.cAb)("示例iframe网页")),i=(0,l.bF)("span",{class:"oio-empty"},"-"),r=(0,l.bF)("iframe",{class:"form-iframe-area",frameborder:"0",src:this.value});let o;return o=this.defaultValue&&!this.value?t:this.defaultValue||this.value?r:i,(0,l.bF)("div",{class:"form-iframe"},[o])}}),vt=gt,mt=vt;let ft=class extends et{initialize(e){return super.initialize(e),this.setComponent(mt),this}};ft=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:["Iframe"]}))],ft);const yt={class:"default-keyboard-input"};function bt(e,t,i,r,o,n){const a=(0,l.g2)("oio-input");return(0,l.uX)(),(0,l.CE)("div",yt,[(0,l.bF)(a,{placeholder:e.placeholder,value:e.displayValue,"allow-clear":!0,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus,onKeydown:(0,K.D$)(e.onKeydown,["prevent","stop"])},null,8,["placeholder","value","onUpdate:value","onBlur","onFocus","onKeydown"])])}var Ct=i(48798);const xt=(0,l.pM)({name:"DefaultKeyboardInput",components:{OioInput:h.Gzk},inheritAttrs:!1,props:Object.assign(Object.assign({},a.jW),{value:{type:String},displayValue:{type:String},placeholder:{type:String},onKeypress:{type:Function}}),setup(e){const t=t=>{if(e.onKeypress){const i=x.my.newInstance(t);if(i.isStateKey())return;e.onKeypress({category:Ct.hB.html,type:"keydown",origin:t,code:t.code,key:t.key,ctrl:i.isPressCtrl(),alt:i.isPressAlt(),shift:i.isPressShift()})}};return{onKeydown:t}}}),wt=(0,v.A)(xt,[["render",bt]]),St=wt;let Tt=class extends a.d4{initialize(e){return super.initialize(e),this.setComponent(St),this}get displayValue(){const{value:e,ctrlKey:t,altKey:i,shiftKey:r}=this;if(!e)return"";const o=[];return t&&this.formData[t]&&o.push("Ctrl"),i&&this.formData[i]&&o.push("Alt"),r&&this.formData[r]&&o.push("Shift"),o.push(e),o.join(" + ")}get ctrlKey(){return this.getDsl().ctrl}get altKey(){return this.getDsl().alt}get shiftKey(){return this.getDsl().shift}onKeypress(e){const{key:t,ctrl:i,alt:r,shift:o}=e,{ctrlKey:n,altKey:a,shiftKey:l}=this;this.change(t),n&&(this.formData[n]=i||null),a&&(this.formData[a]=r||null),l&&(this.formData[l]=o||null)}change(e){e||(e=null),super.change(e);const{ctrlKey:t,altKey:i,shiftKey:r}=this;e||(t&&(this.formData[t]=null),i&&(this.formData[i]=null),r&&(this.formData[r]=null))}};(0,r.Cg)([F.x0.Reactive()],Tt.prototype,"displayValue",null),(0,r.Cg)([F.x0.Reactive()],Tt.prototype,"ctrlKey",null),(0,r.Cg)([F.x0.Reactive()],Tt.prototype,"altKey",null),(0,r.Cg)([F.x0.Reactive()],Tt.prototype,"shiftKey",null),(0,r.Cg)([F.x0.Method()],Tt.prototype,"onKeypress",null),(0,r.Cg)([F.x0.Method()],Tt.prototype,"change",null),Tt=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:"KeyboardInput"}))],Tt);var Et=i(6668),At=i(25873);const kt=(0,l.pM)({props:Object.assign(Object.assign({},V.F6),At.Vs),render(){const e=Object.assign(Object.assign({},this.$props),{"onUpdate:value":this.change,onFocus:this.focus,onBlur:this.blur});return this.mode===j.Mmj.DYNAMIC?"UPLOAD"===this.fileSource?(0,l.bF)(At.f1,e):(0,l.bF)(tt.A,e):(0,l.bF)(Et.A,{value:this.value,defaultValue:this.defaultValue,emptyStyle:this.emptyStyle})}}),Dt=kt,Ft=Dt;var Rt;(function(e){e["UPLOAD"]="UPLOAD",e["INPUT"]="INPUT"})(Rt||(Rt={}));let Ot=class extends et{initialize(e){return super.initialize(e),this.setComponent(Ft),this}get fileSource(){return this.getDsl().fileSource}get partSize(){return this.getDsl().partSize||j.c$b.partSize}get chunkUploadThreshold(){return this.getDsl().chunkUploadThreshold||j.c$b.chunkUploadThreshold}get parallel(){return this.getDsl().parallel||j.c$b.parallel}get validateTrigger(){return this.fileSource===Rt.UPLOAD?[j.N0$.CHANGE]:super.validateTrigger}change(e){this.fileSource===Rt.UPLOAD&&e&&(e=this.field.multi?(0,ve.A)(e)?e.map(e=>e.url):[e.url]:(0,ve.A)(e)&&e.length>=1?e[0].url:e.url),super.change(e)}remove(e){if(e){const t=e.url;if(this.field.multi){const i=[...this.value||[]],r=i.findIndex(e=>e===t);r>=0&&i.splice(r,1),e=i}else e=""}super.change(e)}get limit(){const e=Number(this.getDsl().limit||this.field.limit||-1);return(0,I.A)(e)?e:-1}get limitSize(){const e=Number(this.getDsl().limitSize);return(0,I.A)(e)?e:-1}get allLimitSize(){return this.getDsl().allLimitSize||""}get multiple(){const e=this.getDsl().multi;return!0===e}get limitFileExtensions(){return this.getDsl().limitFileExtensions}validateLength(e){if(!this.field.store)return this.validatorSuccess();const t=this.field.size;if(t&&e){const i=JSON.stringify(e).length;if(i>t)return this.validatorError(`${(0,D.cAb)("链接总长度")}${i}${(0,D.cAb)("超出字段大小")}: ${t}`)}return this.validatorSuccess()}defaultConstructDataTrigger(){return[j.HCy.CHANGE]}defaultClearFieldsTrigger(){return[j.HCy.CHANGE]}};(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"fileSource",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"partSize",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"chunkUploadThreshold",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"parallel",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Array),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"validateTrigger",null),(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],Ot.prototype,"change",null),(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],Ot.prototype,"remove",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Number),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"limit",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Number),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"limitSize",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"allLimitSize",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Boolean),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"multiple",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Ot.prototype,"limitFileExtensions",null),Ot=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.String,widget:["MediaPlayer"]}))],Ot);var Nt=i(79258);let $t=class extends ge.w{initialize(e){return super.initialize(e),this.setComponent(Nt.A),this}defaultConstructDataTrigger(){return[j.HCy.CHANGE]}defaultClearFieldsTrigger(){return[j.HCy.CHANGE]}};$t=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail,o.qi.Table],ttype:o.m1.String,multi:!0,widget:["MediaPlayer"]}))],$t);const Mt={class:"form-input-password"};function It(e,t,i,r,o,n){const a=(0,l.g2)("oio-input-password");return(0,l.uX)(),(0,l.CE)("div",Mt,[(0,l.bF)(a,{value:e.value,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","onUpdate:value","onBlur","onFocus"])])}const Lt=(0,l.pM)({props:["value","change","blur","focus"],components:{OioInputPassword:h.RRB}}),_t=(0,v.A)(Lt,[["render",It]]),Pt=_t;let jt=class extends ge.w{initialize(e){return super.initialize(e),this.setComponent(Pt),this}validator(){return(0,r.sH)(this,void 0,void 0,function*(){const e=yield this.validatorSpecific(this.value);return(0,$.mO)(e)?null==this.value?this.validatorSuccess():this.validateLength(this.value):e})}submit(e){let t=this.value;return this.crypto&&t&&(t=(0,Ze.w)(t)),D.pFK.DEFAULT(this.field,this.itemName,e,t)}};jt=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search,o.qi.Detail],ttype:o.m1.String,widget:["Password"]}))],jt);let Vt=class extends ge.w{validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);return(0,$.mO)(t)?(0,o.Po)(this.value)||/^1[3456789]\d{9}$/.test(this.value)?this.validatorSuccess():this.validatorError((0,D.cAb)("手机号格式错误")):t})}};Vt=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Phone}))],Vt);let Bt=class extends Vt{};Bt=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String,widget:"Phone"}))],Bt);const Ht={class:"default-signature"},Wt={class:"default-signature__container"},Ut={class:"canvas-signature",ref:"signatureCanvas"},qt=["src"],zt={class:"default-signature__actionbar"};function Gt(e,t,i,r,o,n){const a=(0,l.g2)("oio-button"),d=(0,l.g2)("oio-spin");return(0,l.uX)(),(0,l.CE)("div",Ht,[(0,l.bF)(d,{loading:e.loading},{default:(0,l.k6)(()=>[(0,l.Lk)("div",Wt,[(0,l.bo)((0,l.Lk)("span",{class:"signature-container__placeholder"},(0,s.v_)(e.$translate(e.placeholder)),513),[[K.aG,e.showPlaceholder]]),(0,l.Lk)("canvas",Ut,null,512),e.value?((0,l.uX)(),(0,l.CE)("img",{key:0,class:"signature-container__img",src:e.value,alt:""},null,8,qt)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",zt,[e.showClearButton?((0,l.uX)(),(0,l.Wv)(a,{key:0,class:"signature-action__clear",onClick:e.onClear},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.$translate(e.clearButtonText)),1)]),_:1},8,["onClick"])):(0,l.Q3)("",!0),e.showSaveButton?((0,l.uX)(),(0,l.Wv)(a,{key:1,class:"signature-action__submit",onClick:e.onSaveSignature},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.$translate(e.saveButtonText)),1)]),_:1},8,["onClick"])):(0,l.Q3)("",!0)])]),_:1},8,["loading"])])}var Kt=i(29543),Xt=i.n(Kt);const Qt=(0,l.pM)({name:"FormStringSignatureField",components:{OioSpin:h.MEy,OioButton:h._5z},props:{value:{type:String,default:""},loading:{type:Boolean,default:!1},showPlaceholder:{type:Boolean,default:!0},placeholder:{type:String},showClearButton:{type:Boolean,default:!0},clearButtonText:{type:String,default:"清除"},showSaveButton:{type:Boolean,default:!0},saveButtonText:{type:String,default:"保存"},signatureFontColor:{type:String,default:"black"},signatureBackGroundColor:{type:String,default:"white"},setSmoothSignature:{type:Function,default:()=>{}},onClear:{type:Function,default:()=>{}},onSaveSignature:{type:Function,default:()=>{}},onStart:{type:Function,default:()=>{}}},setup(e){const t=(0,te.KR)(),i=(0,te.KR)(void 0);return(0,l.sV)(()=>{(0,l.dY)(()=>{t.value&&(i.value=new(Xt())(t.value,{color:e.signatureFontColor,bgColor:e.signatureBackGroundColor,onStart:e.onStart}),e.setSmoothSignature(i.value))})}),{signatureCanvas:t}}}),Yt=(0,v.A)(Qt,[["render",Gt]]),Jt=Yt;let Zt=class extends et{constructor(){super(...arguments),this.smoothSignature=void 0,this.showPlaceholder=!0}initialize(e){return super.initialize(e),this.setComponent(Jt),this}getSmoothSignature(){return this.smoothSignature}setSmoothSignature(e){this.smoothSignature=e}get showClearButton(){var e;return null===(e=this.getDsl().showClearButton)||void 0===e||e}get clearButtonText(){return this.getDsl().clearButtonText||"清除"}get showSaveButton(){var e;return null===(e=this.getDsl().showClearButton)||void 0===e||e}get saveButtonText(){return this.getDsl().saveButtonText||"保存"}get signatureFontColor(){return this.getDsl().signatureFontColor||"black"}get signatureBackGroundColor(){return this.getDsl().signatureBackGroundColor||"white"}onStart(){this.showPlaceholder=!1}onClear(){var e;null===(e=this.smoothSignature)||void 0===e||e.clear(),this.change(""),this.showPlaceholder=!0}onSaveSignature(){return(0,r.sH)(this,void 0,void 0,function*(){return this.load(()=>(0,r.sH)(this,void 0,void 0,function*(){var e,t;const i=(null===(t=null===(e=this.smoothSignature)||void 0===e?void 0:e.getPNG())||void 0===t?void 0:t.split(",")[1])||"",r=atob(i),o=new Uint8Array(r.length);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);const n=new File([new Blob([o],{type:"image/png"})],"FormStringSignatureField",{type:"image/png"});yield(0,j.nH$)({file:n,uploadMethod:j.So0.Multipart,onSuccess:(e,t)=>{const i=e;i&&i.url&&this.change(i.url)}})}))})}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){this.value||(yield this.onSaveSignature());let t=this.value;return this.crypto&&t&&(t=(0,Ze.w)(t)),D.pFK.DEFAULT(this.field,this.itemName,e,t)})}mounted(){super.mounted(),this.clearFormStringSignatureFieldSubject.subject.closed||this.clearFormStringSignatureFieldSubject.subscribe(e=>{this.onClear()})}unmounted(){super.unmounted(),this.clearFormStringSignatureFieldSubject.subject.unsubscribe()}};(0,r.Cg)([F.x0.Method()],Zt.prototype,"setSmoothSignature",null),(0,r.Cg)([F.x0.Reactive()],Zt.prototype,"showClearButton",null),(0,r.Cg)([F.x0.Reactive()],Zt.prototype,"clearButtonText",null),(0,r.Cg)([F.x0.Reactive()],Zt.prototype,"showSaveButton",null),(0,r.Cg)([F.x0.Reactive()],Zt.prototype,"saveButtonText",null),(0,r.Cg)([F.x0.Reactive()],Zt.prototype,"signatureFontColor",null),(0,r.Cg)([F.x0.Reactive()],Zt.prototype,"signatureBackGroundColor",null),(0,r.Cg)([F.x0.Reactive()],Zt.prototype,"showPlaceholder",void 0),(0,r.Cg)([F.x0.Method()],Zt.prototype,"onStart",null),(0,r.Cg)([F.x0.Method()],Zt.prototype,"onClear",null),(0,r.Cg)([F.x0.SubContext(Symbol("$$CLEAR"))],Zt.prototype,"clearFormStringSignatureFieldSubject",void 0),(0,r.Cg)([F.x0.Method()],Zt.prototype,"onSaveSignature",null),Zt=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:"Signature"}))],Zt);let ei=class extends a.d4{initialize(e){return super.initialize(e),this.setComponent(oe),this}get limit(){return this.field.limit}get allowRepeat(){const e=this.getDsl().allowRepeat;return e||!1}get unitValueLength(){return this.getDsl().unitValueLength||(0,G.A)(this.field,"attributes.unitValueLength")}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);return(0,$.mO)(t)?this.limit&&this.value&&this.value.length>0&&this.limit&&this.value.length>this.limit?this.validatorError(`${(0,D.cAb)("超出标签最大个数")}:${this.limit}`):this.validatorSuccess():t})}tagChange(e){Array.isArray(e)&&0===e.length&&(e=null),this.change(e),this.blur()}};(0,r.Cg)([F.x0.Reactive()],ei.prototype,"limit",null),(0,r.Cg)([F.x0.Reactive()],ei.prototype,"allowRepeat",null),(0,r.Cg)([F.x0.Reactive()],ei.prototype,"unitValueLength",null),(0,r.Cg)([F.x0.Method()],ei.prototype,"tagChange",null),ei=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String,multi:!0}))],ei);let ti=class extends a.d4{constructor(){super(...arguments),this.defaultValidateTrigger=[j.N0$.CHANGE]}getMultipartUploadConfig(){return D.JPl.getConfig(o.Bi.getConfig("multipartUpload"))}initialize(e){return super.initialize(e),this.setComponent(At.f1),this}defaultConstructDataTrigger(){return[j.HCy.CHANGE]}defaultClearFieldsTrigger(){return[j.HCy.CHANGE]}get uploadPlaceholder(){return this.getDsl().uploadPlaceholder}get uploadIcon(){return this.getDsl().uploadIcon}get partSize(){return this.getDsl().partSize||j.c$b.partSize}get chunkUploadThreshold(){return this.getDsl().chunkUploadThreshold||j.c$b.chunkUploadThreshold}get parallel(){return this.getDsl().parallel||j.c$b.parallel}get uploadIconText(){return this.getDsl().uploadIconText}change(e){e&&(e=this.field.multi?(0,ve.A)(e)?e.map(e=>e.url):[e.url]:(0,ve.A)(e)&&e.length>=1?e[0].url:e.url),super.change(e),this.blur()}remove(e){if(e){const t=e.url;if(this.field.multi){const i=[...this.value||[]],r=i.findIndex(e=>e===t);r>=0&&i.splice(r,1),e=i}else e=""}super.change(e),this.blur()}get limit(){const e=Number(this.getDsl().limit||this.field.limit||-1);return(0,I.A)(e)?e:-1}get limitSize(){const e=Number(this.getDsl().limitSize);return(0,I.A)(e)?e:-1}get allLimitSize(){return this.getDsl().allLimitSize||""}get multiple(){const e=this.getDsl().multi;return!0===e}get limitFileExtensions(){return this.getDsl().limitFileExtensions}get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return x.TM.toBoolean(this.getDsl().privateLink)}get fileDisplayPrefixText(){return this.getDsl().displayPrefixText||"prefix："}get fileDisplayText(){return this.getDsl().fileDisplayText||"fileDisplayText"}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);if(!(0,$.mO)(t))return t;if(!this.field.store)return this.validatorSuccess();if(this.field.size&&this.value){const e=JSON.stringify(this.value).length;if(e>this.field.size)return this.validatorError(`${(0,D.cAb)("链接总长度")}${e}${(0,D.cAb)("超出字段大小")}: ${this.field.size}`)}return this.validatorSuccess()})}};(0,r.Cg)([F.x0.Reactive()],ti.prototype,"uploadPlaceholder",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"uploadIcon",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"partSize",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"chunkUploadThreshold",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"parallel",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"uploadIconText",null),(0,r.Cg)([F.x0.Method()],ti.prototype,"change",null),(0,r.Cg)([F.x0.Method()],ti.prototype,"remove",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"limit",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"limitSize",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"allLimitSize",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"multiple",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"limitFileExtensions",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"cdnKey",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"privateLink",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"fileDisplayPrefixText",null),(0,r.Cg)([F.x0.Reactive()],ti.prototype,"fileDisplayText",null),ti=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:"Upload"}))],ti);let ii=class extends ti{initialize(e){return super.initialize(e),this.setComponent(At.r_),this}get draggableIcon(){return this.getDsl().draggableIcon||"oinone-shangchuan1"}get draggableTipText(){return this.getDsl().draggableTipText||"点击 或 拖拽文件到这里上传"}get showDraggableExtendsionsText(){var e;return null===(e=this.getDsl().showDraggableExtendsionsText)||void 0===e||e}get draggableExtendsionsText(){const e=this.limitFileExtensions||(0,D.cAb)("全部");return(0,D.cAb)("支持拓展名: ")+e}};(0,r.Cg)([F.x0.Reactive()],ii.prototype,"draggableIcon",null),(0,r.Cg)([F.x0.Reactive()],ii.prototype,"draggableTipText",null),(0,r.Cg)([F.x0.Reactive()],ii.prototype,"showDraggableExtendsionsText",null),(0,r.Cg)([F.x0.Reactive()],ii.prototype,"draggableExtendsionsText",null),ii=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:"UploadDraggable"}))],ii);let ri=class extends ti{initialize(e){return super.initialize(e),this.setComponent(At._A),this}};ri=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:o.qi.Form,ttype:[o.m1.String,o.m1.Text],widget:["UploadImg"]}))],ri);var oi=i(39277);const ni={class:"form-verification-code-input",style:{display:"flex"}},ai=["src"];function li(e,t,i,r,o,n){const a=(0,l.g2)("oio-input");return(0,l.uX)(),(0,l.CE)("div",ni,[(0,l.bF)(a,{value:e.value,"onUpdate:value":e.change,class:"input",onBlur:e.blur,onFocus:e.focus},null,8,["value","onUpdate:value","onBlur","onFocus"]),(0,l.Lk)("img",{src:e.imageSrc,onClick:t[0]||(t[0]=(...t)=>e.reload&&e.reload(...t))},null,8,ai)])}const si=(0,l.pM)({props:["imageSrc","reload","change","value","blur","focus"],components:{OioInput:h.Gzk}}),di=(0,v.A)(si,[["render",li]]),ci=di;let ui=class extends ge.w{constructor(){super(...arguments),this.imageSrc="",this.reload=()=>{this.getOperator().imageSrc="",setTimeout(()=>{this.getOperator().imageSrc=this.genPath()})}}initialize(e){return super.initialize(e),this.setComponent(ci),this}get picCodeScene(){const e=this.getDsl().picCodeScene;return e?`&picCodeScene=${e}`:""}get imagePath(){const e=this.getDsl().imagePath;return e||"/pamirs/api/refreshPicCode"}mounted(){super.mounted(),this.imageSrc=this.genPath()}genPath(){return`${oi.LV.getBaseURL()}${this.imagePath}?time=${Date.now()}${this.picCodeScene}`}};(0,r.Cg)([F.Lw.Reactive()],ui.prototype,"imageSrc",void 0),(0,r.Cg)([F.x0.Reactive()],ui.prototype,"picCodeScene",null),(0,r.Cg)([F.x0.Reactive()],ui.prototype,"imagePath",null),(0,r.Cg)([F.x0.Reactive()],ui.prototype,"reload",void 0),ui=(0,r.Cg)([n.DF.ClassFactory(ge.w.Token({viewType:o.qi.Form,widget:"VerificationCode"}))],ui);var pi=i(429);const hi={class:"form-text-area"},gi={key:0,class:"clear"};function vi(e,t,i,r,o,n){const a=(0,l.g2)("oio-textarea"),s=(0,l.g2)("CloseCircleFilled");return(0,l.uX)(),(0,l.CE)("div",hi,[(0,l.bF)(a,{ref:"formTextArea",value:e.realValue,"default-value":e.defaultValue,placeholder:e.placeholder,minlength:e.minLength,truncateMaxLength:e.maxLength,"auto-size":e.autoSize,"show-count":e.showCount,disabled:e.disabled,readonly:e.readonly&&!e.disabled,"onUpdate:value":e.change,onFocus:e.focus,onBlur:e.blur},null,8,["value","default-value","placeholder","minlength","truncateMaxLength","auto-size","show-count","disabled","readonly","onUpdate:value","onFocus","onBlur"]),e.clearStatus?((0,l.uX)(),(0,l.CE)("div",gi,[(0,l.bF)(s,{class:"anticon anticon-close-circle ant-input-clear-icon",onClick:(0,K.D$)(e.clearContent,["stop"])},null,8,["onClick"])])):(0,l.Q3)("",!0)])}const mi=(0,l.pM)({name:"DefaultTextarea",components:{OioTextarea:h.icl,CloseCircleFilled:J.A},inheritAttrs:!1,props:Object.assign(Object.assign({},a.R7),{value:{type:String},defaultValue:{type:String},placeholder:{type:String},rows:{type:Number,default:3},allowClear:{type:Boolean},showCount:{type:Boolean},maxLength:{type:Number},minLength:{type:Number},change:{type:Function},focus:{type:Function},blur:{type:Function}}),setup(e){const t=(0,te.KR)(),i=(0,l.EW)(()=>x.TM.toBoolean(e.readonly)),r=(0,l.EW)(()=>x.TM.toBoolean(e.disabled)),o=(0,te.KR)(e.value||e.defaultValue),n=(0,l.EW)(()=>{const{rows:t}=e;return!!(0,N.A)(t)||{minRows:t}});(0,l.wB)(()=>e.value,e=>{(0,N.A)(e)?o.value=void 0:o.value=e}),(0,l.wB)(()=>e.defaultValue,e=>{(0,N.A)(e)?o.value=void 0:o.value=e});const s=()=>{o.value="",e.change&&e.change(o),t.value.focus()},d=(0,l.EW)(()=>!e.readonly&&!e.disabled&&o.value&&e.allowClear),{placeholder:c}=(0,a.n$)(e);return{placeholder:c,formTextArea:t,readonly:i,disabled:r,realValue:o,autoSize:n,clearContent:s,clearStatus:d}}}),fi=(0,v.A)(mi,[["render",vi]]),yi=fi;let bi=class extends ge.w{initialize(e){return super.initialize(e),this.setComponent(yi),this}get rows(){const e=Number(this.getDsl().rows);return(0,pi.A)(e)?3:e}get maxLength(){const e=this.getDsl().maxLength;if(e){const e=this.getLimitLength("maxLength");if((0,I.A)(e))return e}return this.field.store?this.field.size||16383:e||16383}validator(){return(0,r.sH)(this,void 0,void 0,function*(){const e=yield this.validatorSpecific(this.value);return(0,$.mO)(e)?null==this.value?this.validatorSuccess():this.validateLength(this.value):e})}};function Ci(e,t,i,r,o,n){const a=(0,l.g2)("a-select-option"),d=(0,l.g2)("a-select"),c=(0,l.g2)("oio-form-item"),u=(0,l.g2)("exp-item"),p=(0,l.g2)("oio-button"),h=(0,l.g2)("oio-form");return(0,l.uX)(),(0,l.Wv)(h,{"label-col":{span:5},"wrapper-col":{span:12}},{default:(0,l.k6)(()=>[(0,l.bF)(c,{label:e.translateValueByKey("权限条件"),required:""},{default:(0,l.k6)(()=>[(0,l.bF)(d,{class:"oio-select","dropdown-class-name":"oio-select-dropdown",value:e.exps.connect,onChange:e.changeConnect},{default:(0,l.k6)(()=>[(0,l.bF)(a,{value:"and",key:"and"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.translateValueByKey("满足全部")),1)]),_:1}),(0,l.bF)(a,{value:"or",key:"or"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.translateValueByKey("满足任一")),1)]),_:1})]),_:1},8,["value","onChange"])]),_:1},8,["label"]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.exps.exps,(t,i)=>((0,l.uX)(),(0,l.Wv)(u,{key:i,exp:t,fields:e.fields,onChangeField:t=>e.changeField(i,t),onChangeOpt:t=>e.changeOpt(i,t),onChangeValue:t=>e.changeValue(i,t),onDelete:t=>e.deleteExp(i)},null,8,["exp","fields","onChangeField","onChangeOpt","onChangeValue","onDelete"]))),128)),(0,l.bF)(c,{label:" "},{default:(0,l.k6)(()=>[(0,l.bF)(p,{type:"primary",onClick:e.newExp},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.translateValueByKey("新增条件")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})}(0,r.Cg)([F.x0.Reactive()],bi.prototype,"rows",null),(0,r.Cg)([F.x0.Reactive()],bi.prototype,"maxLength",null),bi=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Text}))],bi);var xi=i(38367);function wi(e,t,i,r,o,n){const a=(0,l.g2)("a-select-option"),d=(0,l.g2)("a-select"),c=(0,l.g2)("exp-right"),u=(0,l.g2)("oio-button"),p=(0,l.g2)("oio-form-item");return(0,l.uX)(),(0,l.Wv)(p,{label:" "},{default:(0,l.k6)(()=>[(0,l.bF)(d,{class:"oio-select","dropdown-class-name":"oio-select-dropdown",value:e.exp.left.val,style:{width:"20%","margin-right":"var(--oio-margin)"},onChange:e.fieldChange},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fields,(e,t)=>((0,l.uX)(),(0,l.Wv)(a,{key:t,value:e.name},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.label||e.displayName||e.name)+"("+(0,s.v_)(e.ttype)+") ",1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"]),(0,l.bF)(d,{class:"oio-select","dropdown-class-name":"oio-select-dropdown",style:{width:"20%","margin-right":"var(--oio-margin)"},value:e.exp.operator.val,onChange:e.optChange},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.operators,(e,t)=>((0,l.uX)(),(0,l.Wv)(a,{key:t,value:e.val},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"]),"=null=true"!==e.exp.operator.val&&"=notnull=true"!==e.exp.operator.val?((0,l.uX)(),(0,l.Wv)(c,{key:0,style:{width:"20%","margin-right":"var(--oio-margin)"},exp:e.exp,field:e.field,onChangeValue:t[0]||(t[0]=t=>e.$emit("change-value",t))},null,8,["exp","field"])):(0,l.Q3)("",!0),(0,l.bF)(u,{style:{"vertical-align":"top","margin-left":"var(--oio-margin)"},onClick:t[1]||(t[1]=t=>e.$emit("delete"))},{default:(0,l.k6)(()=>[(0,l.eW)("-")]),_:1})]),_:1})}function Si(e,t,i,r,o,n){const a=(0,l.g2)("a-select-option"),d=(0,l.g2)("a-select"),c=(0,l.g2)("oio-input"),u=(0,l.g2)("oio-button"),p=(0,l.g2)("oio-textarea"),h=(0,l.g2)("oio-date-time-picker"),g=(0,l.g2)("oio-date-picker"),v=(0,l.g2)("oio-time-picker"),m=(0,l.g2)("oio-year-picker");return(0,l.uX)(),(0,l.CE)(l.FK,null,[!e.field||"M2O"!==e.field.ttype&&"M2M"!==e.field.ttype&&"O2M"!==e.field.ttype&&"O2O"!==e.field.ttype?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(d,{key:0,class:"oio-select","dropdown-class-name":"oio-select-dropdown",mode:"O2M"===e.field.ttype||"M2M"===e.field.ttype?"multiple":"default",value:e.exp.right.val,onChange:e.changeValue,style:{width:"20%"}},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,(e,t)=>((0,l.uX)(),(0,l.Wv)(a,{value:e.value,key:t},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["mode","value","onChange"])),e.field&&"STRING"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(c,{key:1,value:e.exp.right.val,"onUpdate:value":t[0]||(t[0]=t=>e.changeValue({val:t})),style:{width:"20%"}},null,8,["value"])):(0,l.Q3)("",!0),e.field&&["INTEGER","FLOAT","MONEY"].includes(e.field.ttype)?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[e.showContextItem?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:0,value:e.exp.right.val,"onUpdate:value":t[1]||(t[1]=t=>e.changeValue({val:t})),style:{width:"20%"}},null,8,["value"])),e.showContextItem?((0,l.uX)(),(0,l.Wv)(d,{key:1,class:"oio-select","dropdown-class-name":"oio-select-dropdown",value:e.exp.right.val,onChange:e.changeContextItemValue,style:{width:"20%"}},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.contextItemOptions,(e,t)=>((0,l.uX)(),(0,l.Wv)(a,{value:e.val,key:t},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])):(0,l.Q3)("",!0),(0,l.bF)(u,{style:{"margin-left":"var(--oio-margin)"},type:"link",onClick:e.changeShowContextItem},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.showContextItem?e.translateValueByKey("直接输入"):e.translateValueByKey("选择变量")),1)]),_:1},8,["onClick"])],64)):(0,l.Q3)("",!0),e.field&&"TEXT"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(p,{key:3,value:e.exp.right.val,"onUpdate:value":t[2]||(t[2]=t=>e.changeValue({val:t})),style:{width:"20%"}},null,8,["value"])):(0,l.Q3)("",!0),e.field&&"ENUM"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(d,{key:4,class:"oio-select","dropdown-class-name":"oio-select-dropdown",value:e.exp.right.val,onChange:t[3]||(t[3]=t=>e.changeValue({val:t})),style:{width:"20%"}},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.field.options,e=>((0,l.uX)(),(0,l.Wv)(a,{key:e.value,value:e.value},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.displayName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])):(0,l.Q3)("",!0),e.field&&"BOOLEAN"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(d,{key:5,class:"oio-select","dropdown-class-name":"oio-select-dropdown",value:e.exp.right.val,onChange:t[4]||(t[4]=t=>e.changeValue({val:t})),style:{width:"20%"}},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)(a,{key:!0,value:!0},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.translateValueByKey("是")),1)]),_:1})),((0,l.uX)(),(0,l.Wv)(a,{key:!0,value:!1},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.translateValueByKey("否")),1)]),_:1}))]),_:1},8,["value"])):(0,l.Q3)("",!0),e.field&&"DATETIME"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(h,{key:6,style:{width:"20%"},onChange:t[5]||(t[5]=t=>e.changeValue({val:t})),value:e.exp.right.val},null,8,["value"])):(0,l.Q3)("",!0),e.field&&"DATE"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(g,{key:7,style:{width:"20%"},onChange:t[6]||(t[6]=t=>e.changeValue({val:t})),value:e.exp.right.val},null,8,["value"])):(0,l.Q3)("",!0),e.field&&"TIME"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(v,{key:8,style:{width:"20%"},onChange:t[7]||(t[7]=t=>e.changeValue({val:t})),value:e.exp.right.val},null,8,["value"])):(0,l.Q3)("",!0),e.field&&"YEAR"===e.field.ttype?((0,l.uX)(),(0,l.Wv)(m,{key:9,style:{width:"20%"},onChange:t[8]||(t[8]=t=>e.changeValue({val:t})),value:e.exp.right.val},null,8,["value"])):(0,l.Q3)("",!0)],64)}const Ti=(0,l.pM)({name:"ExpRight",components:{OioInput:h.Gzk,OioButton:h._5z,OioInputNumber:h.z2u,OioTextarea:h.icl,OioDateTimePicker:h.N25,OioDatePicker:h.MdV,OioTimePicker:h.v7I,OioYearPicker:h.NAl,ASelect:xi.Ay,ASelectOption:xi.Ay.Option},props:["exp","field"],emits:["change-value"],setup(e,t){const i=(0,te.KR)([]);(0,l.wB)(()=>e.field,()=>(0,r.sH)(this,void 0,void 0,function*(){const t=e.field;if(t&&t.references){const e=yield(0,oi.E1)(t.references),r=e.labelFields[0],n=t.referenceFields[0];switch(t.ttype){case o.m1.OneToOne:case o.m1.OneToMany:case o.m1.ManyToMany:case o.m1.ManyToOne:{const e=(yield(0,oi.Gu)(t.references,{pageSize:500})).content;i.value=e.map(e=>({name:e[r],value:e[n]}));break}default:}}}),{deep:!0});const n=[{key:"currentUser",name:"当前登录用户id",val:"${currentUser}",label:"当前登录用户id"}],a=(0,te.KR)(!1),s=n.find(t=>t.val===e.exp.right.val);s&&(a.value=!0);const d=()=>{a.value=!a.value},c=e=>{const i=n.find(t=>t.val===e);t.emit("change-value",i)};return{options:i,showContextItem:a,contextItemOptions:n,translateValueByKey:D.cAb,changeShowContextItem:d,changeContextItemValue:c,changeValue(e){const r=Array.isArray(e)?e.map(e=>i.value.find(t=>t.value===e)):i.value.find(t=>t.value===e);t.emit("change-value",r||e)}}}}),Ei=(0,v.A)(Ti,[["render",Si]]),Ai=Ei,ki=(0,l.pM)({name:"ExpItem",components:{ExpRight:Ai,OioButton:h._5z,OioFormItem:h.FX9,ASelect:xi.Ay,ASelectOption:xi.Ay.Option},props:["exp","fields"],emits:["change-field","change-opt"],setup(e,t){const i=(0,te.KR)(e.fields.find(t=>t.name===e.exp.left.val));(0,l.wB)(()=>e.fields,()=>{i.value=e.fields.find(t=>t.name===e.exp.left.val)});const r=r=>{i.value=e.fields.find(e=>e.name===r),t.emit("change-field",r)},n=[{val:"==",name:(0,D.cAb)("等于"),types:[o.m1.String,o.m1.Phone,o.m1.Email,o.m1.Integer,o.m1.Float,o.m1.Currency,o.m1.Enum,o.m1.Boolean,o.m1.Time,o.m1.DateTime,o.m1.Date,o.m1.Text,o.m1.ID]},{val:"!=",name:(0,D.cAb)("不等于"),types:[o.m1.String,o.m1.Phone,o.m1.Email,o.m1.Integer,o.m1.Float,o.m1.Currency,o.m1.Enum,o.m1.Boolean,o.m1.Time,o.m1.DateTime,o.m1.Date,o.m1.Text,o.m1.ID]},{val:"=null=true",name:(0,D.cAb)("为空"),types:[o.m1.String,o.m1.Phone,o.m1.Email,o.m1.Integer,o.m1.Float,o.m1.Currency,o.m1.Enum,o.m1.Boolean,o.m1.ManyToOne,o.m1.OneToOne,o.m1.OneToMany,o.m1.Time,o.m1.DateTime,o.m1.Date,o.m1.Text,o.m1.ID]},{val:"=notnull=true",name:(0,D.cAb)("不为空"),types:[o.m1.String,o.m1.Phone,o.m1.Email,o.m1.Integer,o.m1.Float,o.m1.Currency,o.m1.Enum,o.m1.Boolean,o.m1.ManyToOne,o.m1.OneToOne,o.m1.OneToMany,o.m1.Time,o.m1.DateTime,o.m1.Date,o.m1.Text,o.m1.ID]},{val:"include",name:(0,D.cAb)("包含"),types:[o.m1.OneToMany,o.m1.ManyToMany]},{val:"notinclude",name:(0,D.cAb)("不包含"),types:[o.m1.OneToMany,o.m1.ManyToMany]},{val:"=like=",name:(0,D.cAb)("包含"),types:[o.m1.String,o.m1.Text,o.m1.Phone,o.m1.Email]},{val:"=notlike=",name:(0,D.cAb)("不包含"),types:[o.m1.String,o.m1.Text,o.m1.Phone,o.m1.Email]},{val:"=in=",name:(0,D.cAb)("包含(多值)"),types:[o.m1.String,o.m1.Text,o.m1.Phone,o.m1.Email,o.m1.Integer]},{val:"<",name:(0,D.cAb)("大于"),types:[o.m1.Float,o.m1.Integer,o.m1.Time,o.m1.DateTime,o.m1.Date]},{val:">",name:(0,D.cAb)("小于"),types:[o.m1.Float,o.m1.Integer,o.m1.Time,o.m1.DateTime,o.m1.Date]},{val:">=",name:(0,D.cAb)("大于等于"),types:[o.m1.Float,o.m1.Integer,o.m1.Time,o.m1.DateTime,o.m1.Date]},{val:"<=",name:(0,D.cAb)("小于等于"),types:[o.m1.Float,o.m1.Integer,o.m1.Time,o.m1.DateTime,o.m1.Date]}],a=e=>{t.emit("change-opt",n.find(t=>t.val===e))},s=(0,l.EW)(()=>n.filter(e=>e.types.includes(i.value&&i.value.ttype)));return{operators:s,field:i,fieldChange:r,optChange:a}}}),Di=(0,v.A)(ki,[["render",wi]]),Fi=Di,Ri=(0,l.pM)({components:{ExpItem:Fi,OioButton:h._5z,OioForm:h.ENJ,OioFormItem:h.FX9,ASelect:xi.Ay,ASelectOption:xi.Ay.Option},props:["exps","fields","newExp","changeField","changeOpt","changeValue","changeConnect","deleteExp"],inheritAttrs:!1,setup(e){return{fieldChange(e,t){e.left.val=t},translateValueByKey:D.cAb}}}),Oi=(0,v.A)(Ri,[["render",Ci]]),Ni=Oi;let $i=class extends bi{constructor(){super(...arguments),this.fields=[]}initialize(e){return super.initialize(e),this.setComponent(Ni),this}get exps(){try{return JSON.parse(this.formData.domainExpJson)}catch(e){return{exps:[],connect:"and"}}}set _exps(e){this.formData.domainExpJson=JSON.stringify(e)}_ExpsChange(e){const t=e.exps.map(e=>`${e.left.name||""} ${e.operator.name||""} ${Array.isArray(e.right)?e.right.map(e=>e.name||e.val).join(","):e.right.name||e.right.val||""}`).join(` ${e.connect} `);this.formData.domainExpDisplayName=t,this.formData.domainExp=e.exps.filter(e=>void 0!==e.left.val&&void 0!==e.operator.val&&void 0!==e.right.val).map(e=>this.resolveDomainExp(e)).map(e=>`(${e})`).join(` ${e.connect} `),this._exps=e}ModelChange(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=yield(0,oi.E1)(e.model);this.fields=t.modelFields.filter(e=>e.ttype!==o.m1.Related)})}newExp(){const e=this.exps;e.exps.push({left:{},operator:{},right:{}}),this._ExpsChange(e)}changeField(e,t){const i=this.fields.find(e=>e.name===t);this.exps.exps[e].left.val=t,this.exps.exps[e].left.name=i.displayName||i.name,this._ExpsChange(this.exps)}changeOpt(e,t){this.exps.exps[e].operator={val:t.val,name:t.name},this._ExpsChange(this.exps)}changeValue(e,t){this.exps.exps[e].right=t,this._ExpsChange(this.exps)}changeConnect(e){this.exps.connect=e,this._ExpsChange(this.exps)}deleteExp(e){this.exps.exps.splice(e,1),this._ExpsChange(this.exps)}resolveDomainExp(e){const t=this.fields.find(t=>t.name===e.left.val);return t.references?this.resolveComplexDomainExp(e,t):"=like="===e.operator.val||"=notlike="===e.operator.val?`${e.left.val} ${e.operator.val} %${e.right.val}%`:`${e.left.val} ${e.operator.val} ${e.right.val}`}resolveComplexDomainExp(e,t){const i=t.relationFields[0];switch(t.ttype){case o.m1.ManyToMany:case o.m1.OneToMany:{const t=e.right.val;if("include"===e.operator.val)return t.map(t=>`${e.left.val}.${i} == ${t}`).join("or");if("notinclude"===e.operator.val)return t.map(t=>`${e.left.val}.${i} != ${t}`).join("and");break}case o.m1.OneToOne:case o.m1.ManyToOne:return`${e.left.val}.${i} ${e.operator.val} ${e.right.val}`;default:}return""}submit(e){return this._ExpsChange(this.exps),this._exps=JSON.parse(JSON.stringify(this.exps)),super.submit(e)}validator(){return(0,r.sH)(this,void 0,void 0,function*(){return this.validatorSuccess()})}};(0,r.Cg)([F.x0.Reactive()],$i.prototype,"exps",null),(0,r.Cg)([F.x0.Reactive()],$i.prototype,"fields",void 0),(0,r.Cg)([F.x0.Watch("formData.modelDefinition")],$i.prototype,"ModelChange",null),(0,r.Cg)([F.x0.Method()],$i.prototype,"newExp",null),(0,r.Cg)([F.x0.Method()],$i.prototype,"changeField",null),(0,r.Cg)([F.x0.Method()],$i.prototype,"changeOpt",null),(0,r.Cg)([F.x0.Method()],$i.prototype,"changeValue",null),(0,r.Cg)([F.x0.Method()],$i.prototype,"changeConnect",null),(0,r.Cg)([F.x0.Method()],$i.prototype,"deleteExp",null),$i=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.Text,widget:"DomainExpGenerator"}))],$i);let Mi=class extends bi{};Mi=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String,widget:"TextArea"}))],Mi);let Ii=class extends ei{};function Li(e,t,i,r,o,n){const a=(0,l.g2)("input-pre-suffix"),s=(0,l.g2)("oio-input-number");return(0,l.uX)(),(0,l.Wv)(s,{value:e.realValue,"default-value":e.defaultValue,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,precision:e.precision,min:e.min,max:e.max,"min-safe-integer":e.minSafeInteger,"max-safe-integer":e.maxSafeInteger,hiddenStepHandle:e.hiddenStepHandle,step:e.step,"add-step":e.addStep,"reduce-step":e.reduceStep,unit:e.unit,"show-thousandth":e.showThousandth,autocorrection:e.autocorrection,"onUpdate:value":e.change,onFocus:e.focus,onBlur:e.blur},(0,l.eX)({_:2},[e.prefix?{name:"prefix",fn:(0,l.k6)(()=>[(0,l.bF)(a,{"content-type":e.prefixType,content:e.prefix},null,8,["content-type","content"])]),key:"0"}:void 0,e.suffix?{name:"suffix",fn:(0,l.k6)(()=>[(0,l.bF)(a,{"content-type":e.suffixType,content:e.suffix},null,8,["content-type","content"])]),key:"1"}:void 0]),1032,["value","default-value","placeholder","readonly","disabled","precision","min","max","min-safe-integer","max-safe-integer","hiddenStepHandle","step","add-step","reduce-step","unit","show-thousandth","autocorrection","onUpdate:value","onFocus","onBlur"])}Ii=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:o.qi.Form,ttype:o.m1.Integer,widget:"Tag"}))],Ii);const _i=(0,l.pM)({name:"DefaultFloat",components:{OioInputNumber:h.z2u,InputPreSuffix:B.A},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},j.HeV),a.jW),a.R7),V.V5),{min:{type:[Number,String]},max:{type:[Number,String]},precision:{type:Number,default:2}}),setup(e){return Object.assign({},H(e))}}),Pi=(0,v.A)(_i,[["render",Li]]),ji=Pi;let Vi=class extends z{constructor(){super(...arguments),this.minSafeInteger=Number.MIN_SAFE_INTEGER,this.maxSafeInteger=Number.MAX_SAFE_INTEGER,this.isChange=!1}initialize(e){return super.initialize(e),this.setComponent(ji),this}get value(){let e=this.compute();return this.isChange||(e=this.valueZeroFill(e)),e}change(e){this.isChange=!0,super.change(e)}validator(){return super.rawValidator().then(e=>{if(!(0,$.mO)(e))return e;const{value:t,precision:i}=this;if(e=this.checkValue(t,e),!(0,$.mO)(e))return e;const r=(0,R.A)(t);if((0,O.A)(r))return e;if(!x.A5.isNumber(r)||0===r.indexOf("."))return this.validatorError((0,D.cAb)("请输入正确小数"));if((0,N.A)(i))return e;const o=new x.gH(r);return o.decimalPlaces()>i?this.validatorError(`${(0,D.cAb)("小数位数不能超过")}${i}${(0,D.cAb)("位")}`):e})}submit(e){let t=this.value;return null!=t&&(t=new x.gH(t.toString()).toString()),this.isChange&&(t=this.valueZeroFill(t)),D.pFK.DEFAULT(this.field,this.itemName,e,t)}valueZeroFill(e){return(0,O.A)((0,R.A)(e))?e:(0,M.fe)((0,R.A)(e),this.precision)}};(0,r.Cg)([F.x0.Reactive()],Vi.prototype,"minSafeInteger",void 0),(0,r.Cg)([F.x0.Reactive()],Vi.prototype,"maxSafeInteger",void 0),(0,r.Cg)([F.x0.Reactive()],Vi.prototype,"value",null),(0,r.Cg)([F.x0.Method()],Vi.prototype,"change",null),Vi=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:[o.m1.Float]}))],Vi);var Bi=i(27581);function Hi(e,t,i,r,o,n){return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["plat_map_container",[e.disabled&&"location_map_container-disabled"]]),ref:"mapContainerRef",style:(0,s.Tr)(e.styles)},null,6)}const Wi=e=>{const t="https://api.map.baidu.com/getscript?type=webgl&v=1.0&ak=KDyzdjTkG8f3gpA7vGexcWP1aRg1BsNz&services=&t=20230209120615";if(window.BMapGL)e();else{const i=document.createElement("script");i.setAttribute("src",t);const r=document.createElement("link");r.setAttribute("href","https://api.map.baidu.com/res/webgl/10/bmap.css"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),document.body.appendChild(i),document.body.appendChild(r),i.onload=()=>{e()}}},Ui=(0,l.pM)({inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},a.jW),a.R7),a.Dn),{startDefaultValue:{type:Number,default:null},endDefaultValue:{type:Number,default:null},value:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},viewType:{type:String,default:""},colStyle:{type:Object,default:()=>({})},startFieldDecimal:{type:Number,required:!0},endFieldDecimal:{type:Number,required:!0},formData:{type:Object,default:()=>({})}}),setup(e){const t={longitude:116.404,latitude:39.915};let i,n,a,s;const d=(0,te.KR)(null),c=(0,te.KR)({longitude:-1,latitude:-1}),u=(0,l.EW)(()=>Object.assign({height:"420px"},e.colStyle||{})),p=()=>{const[i,r]=e.value;c.value.longitude=i||e.startDefaultValue||t.longitude,c.value.latitude=r||e.endDefaultValue||t.latitude};p();const h=()=>{const t=(0,l.wB)(()=>e.formData.id,e=>(0,r.sH)(this,void 0,void 0,function*(){if(!e)return;let r=setTimeout(()=>{p(),i.removeOverlay(a),n=new s.Point(c.value.longitude,c.value.latitude),a=new s.Marker(n),i.addOverlay(a),i.centerAndZoom(n,15),t(),clearTimeout(r),r=null},500)}),{deep:!0,immediate:!0})};navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{Wi(()=>{g(),h()})},()=>{Wi(()=>{g(),h()})},{enableHighAccuracy:!0,timeout:1e3});const g=()=>{if(window.BMapGL&&(s=window.BMapGL),!s)return;i=new s.Map(d.value),n=new s.Point(c.value.longitude,c.value.latitude),a=new s.Marker(n),i.addOverlay(a),i.centerAndZoom(n,15),i.enableScrollWheelZoom(!0);const t=new s.ZoomControl;if(i.addControl(t),e.viewType===o.qi.Detail)return;const r=new s.CityListControl;i.addControl(r);const l=new s.LocationControl({anchor:window.BMAP_ANCHOR_BOTTOM_RIGHT,offset:new s.Size(10,80)});i.addControl(l),i.addEventListener("click",m)},v=(e,t)=>{const i=e.toString(),[r,o]=i.split(".");return Number(`${r}.${o.slice(0,t)}`)},m=t=>{if(e.disabled)return;let r;if(window.BMapGL&&(r=window.BMapGL),!r)return;i.removeOverlay(a),n=new r.Point(t.latlng.lng,t.latlng.lat),a=new r.Marker(n),i.addOverlay(a);const o=v(t.latlng.lng,e.startFieldDecimal),l=v(t.latlng.lat,e.endFieldDecimal);c.value={longitude:o,latitude:l},e.change([o,l])};return(0,l.xo)(()=>{i&&i.removeEventListener("click",m)}),{mapContainerRef:d,styles:u}}}),qi=(0,v.A)(Ui,[["render",Hi]]),zi=qi;let Gi=class extends Bi.v1{constructor(){super(...arguments),this.defaultDecimal=6}initialize(e){return super.initialize(e),this.setComponent(zi),this}get startFieldDecimal(){var e;return(null===(e=this.startField)||void 0===e?void 0:e.decimal)||this.defaultDecimal}get endFieldDecimal(){var e;return(null===(e=this.endField)||void 0===e?void 0:e.decimal)||this.defaultDecimal}};(0,r.Cg)([F.x0.Reactive()],Gi.prototype,"startFieldDecimal",null),(0,r.Cg)([F.x0.Reactive()],Gi.prototype,"endFieldDecimal",null),Gi=(0,r.Cg)([n.DF.ClassFactory(a.a_.Token({viewType:[o.qi.Form,o.qi.Detail],widget:"Plat"}))],Gi);let Ki=class extends Vi{};Ki=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Currency}))],Ki);var Xi=i(98504),Qi=i(95093),Yi=i.n(Qi),Ji=i(43349);let Zi=class extends Bi.v1{constructor(){super(...arguments),this.defaultValidateTrigger=[j.N0$.CHANGE],this.resourceDateTimeFormat={}}getInitializeComponent(){return Ji.A}initialize(e){return super.initialize(e),this.setComponent(this.getInitializeComponent()),this}get format(){return this.getDsl().format}get dateFormat(){let e=this.executeExpression(this.getDsl().dateFormat);return e||(e=x.ai),x.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceDateFormat)[e]||e}get timeFormat(){let e=this.executeExpression(this.getDsl().timeFormat);return e||(e=x.rc),x.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceTimeFormat)[e]||e}get allowClear(){return x.Xx.ofNullable(this.getDsl().allowClear).map(e=>x.TM.toBoolean(e)).orElse(!0)}get startPlaceholder(){return this.getDsl().startPlaceholder}get endPlaceholder(){return this.getDsl().endPlaceholder}get showTimeDefaultValue(){return[Yi()("00:00:00",this.timeFormat||"HH:mm:ss"),Yi()("00:00:00",this.timeFormat||"HH:mm:ss")]}change(e){super.change(e),null!=e&&0!==e.length?this.blur():this.closePanelChange()}closePanelChange(){return(0,r.sH)(this,void 0,void 0,function*(){if(!this.blurValueChange())return;let e=yield this.constructDataBack();const t=this.clearFieldsCallback();t&&(e=t),e&&this.reloadFormData$.subject.next(!0)})}generatorConstructMirrorSubmitData(){const{formData:e,startField:t,endField:i}=this;return{[t.name]:e[t.data],[i.name]:e[i.data]}}openPanelChange(){this.setBlurValue(this.value)}$$created(){const e=Object.create(null,{$$created:{get:()=>super.$$created}});return(0,r.sH)(this,void 0,void 0,function*(){e.$$created.call(this),this.resourceDateTimeFormat=yield(0,D.Nkk)()})}};(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"resourceDateTimeFormat",void 0),(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"format",null),(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"dateFormat",null),(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"timeFormat",null),(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"allowClear",null),(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"startPlaceholder",null),(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"endPlaceholder",null),(0,r.Cg)([F.x0.Reactive()],Zi.prototype,"showTimeDefaultValue",null),(0,r.Cg)([F.x0.Method()],Zi.prototype,"change",null),(0,r.Cg)([F.x0.Method()],Zi.prototype,"closePanelChange",null),(0,r.Cg)([F.x0.Method()],Zi.prototype,"openPanelChange",null),Zi=(0,r.Cg)([n.DF.ClassFactory(a.a_.Token({viewType:o.qi.Form,widget:"DateTimeRangePicker"}))],Zi);let er=class extends Zi{getInitializeComponent(){return Xi.A}};er=(0,r.Cg)([n.DF.ClassFactory(a.a_.Token({viewType:o.qi.Form,widget:"DateRangePicker"}))],er);var tr=i(47600);let ir=class extends Zi{getInitializeComponent(){return tr.A}};ir=(0,r.Cg)([n.DF.ClassFactory(a.a_.Token({viewType:o.qi.Form,widget:"TimeRangePicker"}))],ir);var rr=i(47556);let or=class extends Zi{getInitializeComponent(){return rr.A}};or=(0,r.Cg)([n.DF.ClassFactory(a.a_.Token({viewType:o.qi.Form,widget:"YearRangePicker"}))],or);const nr={class:"date-quick-options"},ar=["onClick"];function lr(e,t,i,r,o,n){const a=(0,l.g2)("oio-date-picker");return(0,l.uX)(),(0,l.Wv)(a,{value:e.realValue,format:e.format,"date-format":e.dateFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,"show-today":!1,disabled:e.disabled,"disabled-date":e.disabledDate,open:e.open,"change-open-value":e.changeOpenValue,"get-trigger-container":e.getTriggerContainer,"dropdown-class-name":"vxe-table--ignore-clear","onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},(0,l.eX)({_:2},[e.quickOptions&&e.quickOptions.length?{name:"renderExtraFooter",fn:(0,l.k6)(()=>[(0,l.Lk)("div",nr,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.quickOptions,t=>((0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["date-quick-options-label",e.quickOptionsCompareDisable(t)&&"disabled"]),key:t,onClick:i=>e.quickChange(t)},(0,s.v_)(e.DateQuickOptionListMap.get(t).label),11,ar))),128))])]),key:"0"}:void 0]),1032,["value","format","date-format","value-format","placeholder","allow-clear","readonly","disabled","disabled-date","open","change-open-value","get-trigger-container","onUpdate:value","onBlur","onFocus"])}var sr,dr;(function(e){e["TODAY"]="TODAY",e["YESTERDAY"]="YESTERDAY",e["WEEK_AGO"]="WEEK_AGO",e["MONTH_AGO"]="MONTH_AGO"})(sr||(sr={})),function(e){e["DAY"]="day",e["WEEK"]="week",e["MONTH"]="month",e["YEAR"]="year"}(dr||(dr={}));const cr=[{name:sr.TODAY,label:"今天",getValue:e=>x.rL.dateFormat(new Date,e)},{name:sr.YESTERDAY,label:"昨天",getValue:e=>x.rL.dateFormat(new Date((new Date).getTime()-864e5),e)},{name:sr.WEEK_AGO,label:"一周前",getValue:e=>x.rL.dateFormat(new Date((new Date).getTime()-6048e5),e)},{name:sr.MONTH_AGO,label:"一月前",getValue:e=>Yi()(new Date).subtract(1,"months").format(e)}];cr.forEach(e=>{const t=e.label;Object.defineProperty(e,"label",{get(){return(0,D.cAb)(t)}})});const ur=new Map;cr.forEach(e=>ur.set(e.name,e));const pr=(e,t,i,r)=>{t||(t=0),i||(i=dr.DAY);const o=x.rL.toDate(e,r);return t>=0?Yi()(o).add(t,i):Yi()(o).subtract(Math.abs(t),i)};function hr(e){const{realValue:t,readonly:i,disabled:r,placeholder:o}=(0,a.P1)(e),n=(0,l.EW)(()=>{if(e.format)return x.rL.fixFormat(e.format)}),s=t=>{var i;e.change&&e.change(t),t||null===(i=e.closePanelChange)||void 0===i||i.call(e)};return{realValue:t,readonly:i,disabled:r,placeholder:o,format:n,DateQuickOptionListMap:ur,innerChange:s}}const gr=(0,l.pM)({name:"DefaultDatePicker",components:{OioDatePicker:h.MdV},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},j.A4M),a.jW),a.R7),{quickOptions:{type:Array},quickChange:{type:Function},quickOptionsCompareDisable:{type:Function}}),setup(e){const t=(0,a.sX)();return Object.assign(Object.assign({},hr(e)),{getTriggerContainer:e.getPopupContainer||t.getTriggerContainer})}}),vr=(0,v.A)(gr,[["render",lr]]),mr=vr;var fr=i(91395);const yr={class:"date-quick-options"},br=["onClick"];function Cr(e,t,i,r,o,n){const a=(0,l.g2)("oio-date-time-picker");return(0,l.uX)(),(0,l.Wv)(a,{value:e.realValue,format:e.format,"date-format":e.dateFormat,"time-format":e.timeFormat,"value-format":e.valueFormat,"allow-clear":e.allowClear,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,open:e.open,"change-open-value":e.changeOpenValue,"disabled-date":e.disabledDate,"disabled-time":e.disabledTime,"show-time":{defaultValue:e.showTimeDefaultValue},"get-trigger-container":e.getTriggerContainer,"dropdown-class-name":"vxe-table--ignore-clear","onUpdate:value":e.innerChange,onBlur:e.blur,onFocus:e.focus},(0,l.eX)({_:2},[e.quickOptions&&e.quickOptions.length?{name:"renderExtraFooter",fn:(0,l.k6)(()=>[(0,l.Lk)("div",yr,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.quickOptions,t=>((0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["date-quick-options-label",e.quickOptionsCompareDisable(t)&&"disabled"]),key:t,onClick:i=>e.quickChange(t)},(0,s.v_)(e.DateQuickOptionListMap.get(t).label),11,br))),128))])]),key:"0"}:void 0]),1032,["value","format","date-format","time-format","value-format","allow-clear","placeholder","readonly","disabled","close-panel-change","open-panel-change","open","change-open-value","disabled-date","disabled-time","show-time","get-trigger-container","onUpdate:value","onBlur","onFocus"])}const xr=(0,l.pM)({name:"DefaultDateTimePicker",components:{OioDateTimePicker:h.N25},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},j.NKT),a.jW),a.R7),{showTimeDefaultValue:{type:Object},quickOptions:{type:Array},quickChange:{type:Function},quickOptionsCompareDisable:{type:Function},correctingStartShowTimeDefaultValue:{type:Function}}),setup(e){const t=t=>{var i;e.change&&(e.correctingStartShowTimeDefaultValue?e.change(e.correctingStartShowTimeDefaultValue(t)):e.change(t)),t||null===(i=e.closePanelChange)||void 0===i||i.call(e)},i=(0,a.sX)();return Object.assign(Object.assign({},hr(e)),{innerChange:t,getTriggerContainer:e.getPopupContainer||i.getTriggerContainer})}}),wr=(0,v.A)(xr,[["render",Cr]]),Sr=wr;let Tr=class extends a.d4{constructor(){super(...arguments),this.resourceDateTimeFormat={},this.open=!1}getInitializeComponent(){return Sr}initialize(e){return super.initialize(e),this.setComponent(this.getInitializeComponent()),this}get format(){return this.getDsl().format}get dateTimeFormat(){return[this.dateFormat,this.timeFormat].filter(Boolean).join(" ")}get valueFormat(){return this.getDsl().valueFormat}get dateFormat(){let e=this.executeExpression(this.getDsl().dateFormat);return e||(e=x.ai),x.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceDateFormat)[e]||e}get timeFormat(){let e=this.executeExpression(this.getDsl().timeFormat);return e||(e=x.rc),x.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceTimeFormat)[e]||e}get allowClear(){return x.Xx.ofNullable(this.getDsl().allowClear).map(e=>x.TM.toBoolean(e)).orElse(!0)}get quickOptions(){const e=this.getDsl().quickOptions;return e?e.split(","):[]}get startDate(){return this.executeExpression(this.getDsl().startDate,null)}get realStartDate(){const e=this.startDate;return e?pr(e,this.startDateOffset,this.startDateOffsetUnit,this.dateTimeFormat).format(this.genDefaultFormat()):e}get startDateOffset(){return this.getDsl().startDateOffset||0}get startDateOffsetUnit(){return this.getDsl().startDateOffsetUnit}get endDate(){return this.executeExpression(this.getDsl().endDate,null)}get realEndDate(){const e=this.endDate;return e?pr(e,this.endDateOffset,this.endDateOffsetUnit,this.dateTimeFormat).format(this.genDefaultFormat()):e}get endDateOffset(){return this.getDsl().endDateOffset||0}get endDateOffsetUnit(){return this.getDsl().endDateOffsetUnit}get showTimeDefaultValue(){return Yi()("00:00:00",x.rL.fetchTimeFormat(this.timeFormat,void 0))}disabledDate(e){if(!this.dateTimeFormat)return!1;const t=Yi()(this.realStartDate).subtract(1,"days"),i=Yi()(this.realEndDate),r=t.endOf(dr.DAY),o=i.endOf(dr.DAY);return this.realStartDate&&this.realEndDate?e<r||e>o:this.realStartDate?e<r:!!this.realEndDate&&e>o}disabledTime(e){if(!e)return{};const t=e.toDate().toLocaleDateString(),i=e.toDate().getHours(),r=e.toDate().getMinutes();if(!this.realStartDate&&!this.realEndDate)return{};if(!this.realStartDate&&this.realEndDate){const e=new Date(this.realEndDate),o=e.toLocaleDateString(),n=e.getHours(),a=e.getMinutes();return new Date(o)>new Date(t)?this.genLimitTime(0,24,0,60,0,60):n>i?this.genLimitTime(0,n,0,60,0,60):a>r?this.genLimitTime(0,n,0,a,0,60):this.genLimitTime(0,n,0,a,0,e.getSeconds())}if(!this.realEndDate&&this.realStartDate){const e=new Date(this.realStartDate),o=e.toLocaleDateString(),n=e.getHours(),a=e.getMinutes();return new Date(o)<new Date(t)?this.genLimitTime(0,24,0,60,0,60):i>n?this.genLimitTime(n,24,0,60,0,60):r>a?this.genLimitTime(n,24,a,60,0,60):this.genLimitTime(n,24,a,60,e.getSeconds(),60)}if(this.realStartDate&&this.realEndDate){const e=new Date(this.realStartDate),o=e.toLocaleDateString(),n=new Date(this.realEndDate),a=n.toLocaleDateString(),l=e.getHours(),s=e.getMinutes(),d=n.getHours(),c=n.getMinutes(),u=n.getSeconds(),p=e.getSeconds();if(o===a)return i===l?r===s?this.genLimitTime(l,d,s,60,p,60):this.genLimitTime(l,d,s,60,0,60):i===d?r===c?this.genLimitTime(l,d,0,c,0,u):this.genLimitTime(l,d,0,c,0,60):this.genLimitTime(l,d,0,60,0,60);if(new Date(o)>=new Date(t))return i>l?this.genLimitTime(l,24,0,60,0,60):r>s?this.genLimitTime(l,24,s,60,0,60):this.genLimitTime(l,24,s,60,p,60);if(new Date(t)>new Date(o)&&new Date(t)<new Date(a))return this.genLimitTime(0,24,0,60,0,60);if(new Date(t)>=new Date(a))return d>i?this.genLimitTime(0,d,0,60,0,60):c>r?this.genLimitTime(0,d,0,c,0,60):this.genLimitTime(0,d,0,c,0,u)}return{}}closePanelChange(){return(0,r.sH)(this,void 0,void 0,function*(){if(this.blur(),!this.blurValueChange())return;let e=yield this.constructDataBack();const t=this.clearFieldsCallback();t&&(e=t),e&&this.reloadFormData$.subject.next(!0)})}openPanelChange(){this.setBlurValue(this.value),this.open=!0}quickChange(e){const t=ur.get(e);t&&this.change(t.getValue(this.genDefaultFormat())),this.changeOpenValue(!1)}changeOpenValue(e){this.open=e}correctingStartShowTimeDefaultValue(e){return this.realStartDate&&e&&new Date(e)<=new Date(this.realStartDate)?this.realStartDate:e}quickOptionsCompareDisable(e){const t=ur.get(e),i=t.getValue(this.genDefaultFormat());return!!(this.realEndDate&&new Date(i)>new Date(this.realEndDate)||this.realStartDate&&new Date(i)<new Date(this.realStartDate))}genLimitTime(e,t,i,r,o,n){return{disabledHours:()=>[...(0,fr.A)(0,Math.min(e,t)),...(0,fr.A)(Math.max(e,t)+1,24)],disabledMinutes:()=>[...(0,fr.A)(0,Math.min(i,r)),...(0,fr.A)(Math.max(i,r)+1,60)],disabledSeconds:()=>[...(0,fr.A)(0,Math.min(o,n)),...(0,fr.A)(Math.max(o,n)+1,60)]}}genDefaultFormat(){const{field:e}=this;return e?(0,D.vtW)(e)===o.m1.DateTime?x.DF:x.vz:x.DF}defaultConstructDataTrigger(){return[j.HCy.CUSTOM]}defaultClearFieldsTrigger(){return[j.HCy.CUSTOM]}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);if(!(0,$.mO)(t))return t;if(!this.value)return this.validatorSuccess();const i=this.realStartDate,r=this.realEndDate;return i&&new Date(i)>new Date(this.value)?this.validatorError((0,D.cAb)("不能小于起始日期含偏移量")):r&&new Date(r)<new Date(this.value)?this.validatorError((0,D.cAb)("不能大于结束日期含偏移量")):this.validatorSuccess()})}$$created(){const e=Object.create(null,{$$created:{get:()=>super.$$created}});return(0,r.sH)(this,void 0,void 0,function*(){e.$$created.call(this),this.resourceDateTimeFormat=yield(0,D.Nkk)()})}};(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"resourceDateTimeFormat",void 0),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"open",void 0),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"format",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"dateTimeFormat",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"valueFormat",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"dateFormat",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"timeFormat",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"allowClear",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"quickOptions",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"startDate",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"realStartDate",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"startDateOffset",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"startDateOffsetUnit",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"endDate",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"realEndDate",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"endDateOffset",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"endDateOffsetUnit",null),(0,r.Cg)([F.x0.Reactive()],Tr.prototype,"showTimeDefaultValue",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"disabledDate",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"disabledTime",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"closePanelChange",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"openPanelChange",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"quickChange",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"changeOpenValue",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"correctingStartShowTimeDefaultValue",null),(0,r.Cg)([F.x0.Method()],Tr.prototype,"quickOptionsCompareDisable",null),Tr=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Search,o.qi.Form],ttype:o.m1.DateTime}))],Tr);let Er=class extends Tr{getInitializeComponent(){return mr}change(e){super.change(e),this.blur()}defaultConstructDataTrigger(){return[j.HCy.CHANGE]}defaultClearFieldsTrigger(){return[j.HCy.CHANGE]}};function Ar(e,t,i,r,o,n){const a=(0,l.g2)("oio-time-picker");return(0,l.uX)(),(0,l.Wv)(a,{value:e.realValue,format:e.format,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"get-trigger-container":e.getTriggerContainer,"dropdown-class-name":"vxe-table--ignore-clear","onUpdate:value":e.innerChange,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","time-format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","get-trigger-container","onUpdate:value","onBlur","onFocus"])}(0,r.Cg)([F.x0.Method()],Er.prototype,"change",null),Er=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Search,o.qi.Form],ttype:o.m1.Date}))],Er);const kr=(0,l.pM)({name:"DefaultTimePicker",components:{OioTimePicker:h.v7I},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},j.RaD),a.jW),a.R7),setup(e){const t=(0,a.sX)();return Object.assign(Object.assign({},hr(e)),{getTriggerContainer:e.getPopupContainer||t.getTriggerContainer})}}),Dr=(0,v.A)(kr,[["render",Ar]]),Fr=Dr;let Rr=class extends Tr{getInitializeComponent(){return Fr}};function Or(e,t,i,r,o,n){const a=(0,l.g2)("oio-year-picker");return(0,l.uX)(),(0,l.Wv)(a,{value:e.realValue,format:e.format,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"get-trigger-container":e.getTriggerContainer,"dropdown-class-name":"vxe-table--ignore-clear","onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","value-format","placeholder","allow-clear","readonly","disabled","get-trigger-container","onUpdate:value","onBlur","onFocus"])}Rr=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Search,o.qi.Form],ttype:o.m1.Time}))],Rr);const Nr=(0,l.pM)({name:"DefaultYearPicker",components:{OioYearPicker:h.NAl},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},j.pSb),a.jW),a.R7),setup(e){const t=(0,a.sX)();return Object.assign(Object.assign({},hr(e)),{getTriggerContainer:e.getPopupContainer||t.getTriggerContainer})}}),$r=(0,v.A)(Nr,[["render",Or]]),Mr=$r;let Ir=class extends Tr{getInitializeComponent(){return Mr}change(e){super.change(e),this.blur()}defaultConstructDataTrigger(){return[j.HCy.CHANGE]}defaultClearFieldsTrigger(){return[j.HCy.CHANGE]}};(0,r.Cg)([F.x0.Method()],Ir.prototype,"change",null),Ir=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Search,o.qi.Form],ttype:o.m1.Year}))],Ir);var Lr=i(61174);const _r={class:"form-multi-enum-checkbox-group"},Pr={key:0,class:"not-readonly"},jr=(0,l.Lk)("br",null,null,-1),Vr={class:"item-hint"},Br={key:1,class:"readonly"},Hr={key:2,class:"readonly empty-value"};function Wr(e,t,i,r,o,n){const a=(0,l.g2)("a-checkbox"),d=(0,l.g2)("a-checkbox-group");return(0,l.uX)(),(0,l.CE)("div",_r,[!e.readonly||e.readonly&&e.disabled?((0,l.uX)(),(0,l.CE)("div",Pr,[(0,l.bF)(d,{class:(0,s.C4)("VERTICAL"===e.orientation?"vertical":""),value:e.realValue,disabled:e.disabled,onChange:e.tickChange},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.realOptions,t=>((0,l.uX)(),(0,l.Wv)(a,{class:(0,s.C4)("VERTICAL"===e.orientation&&t.hint?"has-hint":""),key:t.key,disabled:t.disabled&&!(e.realValue&&e.realValue.includes(t.value)),value:t.value,onBlur:e.blur},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(t.label)+" ",1),"VERTICAL"===e.orientation&&t.hint?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[jr,(0,l.Lk)("span",Vr,(0,s.v_)(t.hint),1)],64)):(0,l.Q3)("",!0)]),_:2},1032,["class","disabled","value","onBlur"]))),128))]),_:1},8,["class","value","disabled","onChange"])])):e.readonly&&e.multiSelectLabel?((0,l.uX)(),(0,l.CE)("div",Br,(0,s.v_)(e.multiSelectLabel),1)):e.readonly&&!e.multiSelectLabel?((0,l.uX)(),(0,l.CE)("div",Hr,"-")):(0,l.Q3)("",!0)])}var Ur=i(38076);const qr=(0,l.pM)({props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:[String,Array]},defaultValue:{type:[String,Array]},allowClear:{type:Boolean},orientation:{type:String},options:{type:Array}}),components:{ACheckbox:w.Ay,ACheckboxGroup:Ur.A},setup(e){const{realValue:t,readonly:i,disabled:r}=(0,a.P1)(e,!0),o=(0,l.EW)(()=>(0,M.pL)(e.options).filter(e=>!e.data.invisible)),n=(0,l.EW)(()=>(0,N.A)(t.value)?"":(0,M.Dx)(t.value,e.options));(0,l.wB)(()=>e.value,e=>{t.value=e}),(0,l.wB)(()=>e.defaultValue,i=>{(0,O.A)(e.value)&&(t.value=i)});const s=i=>{t.value=i,e.change&&e.change(i)};return{realValue:t,readonly:i,disabled:r,multiSelectLabel:n,realOptions:o,tickChange:s}}}),zr=(0,v.A)(qr,[["render",Wr]]),Gr=zr;let Kr=class extends Lr.g{initialize(e){return super.initialize(e),this.setComponent(Gr),this}get validateTrigger(){return[j.N0$.CHANGE]}};(0,r.Cg)([F.x0.Reactive()],Kr.prototype,"validateTrigger",null),Kr=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Enum,widget:"Checkbox",multi:!0}))],Kr);const Xr={class:"form-single-select"},Qr={key:0,class:"readonly"};function Yr(e,t,i,r,o,n){const a=(0,l.g2)("oio-select");return(0,l.uX)(),(0,l.CE)("div",Xr,[e.readonly&&!e.disabled?((0,l.uX)(),(0,l.CE)("div",Qr,[(0,l.bF)(a,{value:e.realValue,options:e.realOptions,properties:e.properties,placeholder:e.placeholder,"get-trigger-container":e.getTriggerContainer},null,8,["value","options","properties","placeholder","get-trigger-container"])])):((0,l.uX)(),(0,l.Wv)(a,{key:1,dropdownClassName:"oio-ant-select-dropdown-global",value:e.realValue,options:e.realOptions,properties:e.properties,"get-trigger-container":e.getTriggerContainer,allowClear:e.allowClear,"filter-option":!1,"not-found-content":null,"default-active-first-option":!1,disabled:e.disabled,placeholder:e.placeholder,onChange:e.selectChange,onBlur:e.blur,onFocus:e.focus},null,8,["value","options","properties","get-trigger-container","allowClear","disabled","placeholder","onChange","onBlur","onFocus"]))])}const Jr=(0,l.pM)({components:{OioSelect:h.U2I},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:[String,Boolean,Object],default:void 0},defaultValue:{type:[String,Boolean,Object],default:void 0},options:{type:Array},allowClear:{type:Boolean},placeholder:{type:String}}),setup(e){const{realValue:t,readonly:i,disabled:r,placeholder:o}=(0,a.P1)(e),n=(0,l.EW)(()=>(0,M.pL)(e.options).map(e=>Object.assign(Object.assign({},e),{disabled:!!e.disabled&&t.value!==e.value}))),s=(0,a.sX)(),d=t=>{e.change&&e.change(t?t.key:null),e.blur&&e.blur()};return{placeholder:o,properties:h.dHv,realValue:t,readonly:i,disabled:r,realOptions:n,selectChange:d,getTriggerContainer:e.getPopupContainer||s.getTriggerContainer}}}),Zr=(0,v.A)(Jr,[["render",Yr]]),eo=Zr;let to=class extends Lr.g{initialize(e){return super.initialize(e),this.setComponent(eo),this}};to=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Enum}))],to);let io=class extends to{handleOptions(e){if(!e||!e.length)return[];const t=[];return e.forEach(e=>{e.label=e.displayName,(0,N.A)(e.value)&&(e.value=e.name),t.push(e)}),t}};io=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String,widget:"Select"}))],io);let ro=class extends to{get value(){const e=super.value;return null!=e?(0,R.A)(e):e}getAvailableOptions(){const e=super.getAvailableOptions();return e&&e.length&&0!==e.length?e:[{label:(0,D.cAb)("是"),displayName:(0,D.cAb)("是"),value:"true",name:"true"},{label:(0,D.cAb)("否"),displayName:(0,D.cAb)("否"),value:"false",name:"false"}]}getMetaOptionNames(){return["true","false"]}change(e){null==e&&super.change(e),Array.isArray(e)?super.change(e.map(e=>x.TM.toBoolean(e))):super.change(x.TM.toBoolean(e))}submit(e){return D.pFK.BOOLEAN(this.field,this.itemName,e,this.value)}};(0,r.Cg)([F.x0.Reactive()],ro.prototype,"value",null),(0,r.Cg)([F.x0.Method()],ro.prototype,"change",null),ro=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:[o.m1.Boolean],widget:"Select"}))],ro);function oo(e,t,i,r,o,n){const a=(0,l.g2)("a-select-option"),d=(0,l.g2)("a-select");return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["form-multi-select",[!e.allowClear&&"hide-clear"]])},[(0,l.Lk)("div",{class:(0,s.C4)(e.readonly&&!e.disabled&&"readonly")},[(0,l.bF)(d,{ref:"selectRef",class:"oio-select",mode:"multiple",dropdownClassName:"oio-select-dropdown",placeholder:e.placeholder,allowClear:e.allowClear,"filter-option":!1,"not-found-content":null,"default-active-first-option":!1,value:e.realValue,disabled:!(e.readonly&&!e.disabled)&&e.disabled,"get-popup-container":e.getPopupContainer,onChange:e.multiSelectChange,onBlur:e.blur},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.realOptions,t=>((0,l.uX)(),(0,l.Wv)(a,{disabled:t.disabled&&!(e.realValue&&e.realValue.includes(t.value)),key:t.key,value:t.value},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(t.label),1)]),_:2},1032,["disabled","value"]))),128))]),_:1},8,["placeholder","allowClear","value","disabled","get-popup-container","onChange","onBlur"])],2)],2)}const no=(0,l.pM)({props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:[String,Array]},defaultValue:{type:[String,Array]},options:{type:Array},placeholder:{type:String},allowClear:{type:Boolean}}),components:{ASelect:xi.Ay,ASelectOption:xi.Ay.Option},setup(e){const{realValue:t,readonly:i,disabled:r,placeholder:o}=(0,a.P1)(e),n=(0,l.EW)(()=>(0,M.pL)(e.options)),s=(0,a.sX)(),d=(0,te.KR)(),c=i=>{t.value=i,e.change&&e.change(i),d.value.focus()};return{placeholder:o,realValue:t,readonly:i,disabled:r,realOptions:n,selectRef:d,multiSelectChange:c,getPopupContainer:e.getPopupContainer||s.getTriggerContainer}}}),ao=(0,v.A)(no,[["render",oo]]),lo=ao;let so=class extends Lr.g{initialize(e){return super.initialize(e),this.setComponent(lo),this}};so=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Enum,multi:!0}))],so);let co=class extends so{handleOptions(e){if(!e||!e.length)return[];const t=[];return e.forEach(e=>{e.label=e.displayName,(0,N.A)(e.value)&&(e.value=e.name),t.push(e)}),t}};co=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.String,widget:"Select",multi:!0}))],co);const uo={class:"form-enum-radio"},po={key:0,class:"not-readonly"},ho={key:0},go=["title","onMousedown"],vo=["title","onMousedown"],mo=(0,l.Lk)("br",null,null,-1),fo={key:1,class:"item-hint"},yo={key:1,class:"readonly"},bo={key:2,class:"readonly empty-value"};function Co(e,t,i,r,o,n){const a=(0,l.g2)("a-radio-button"),d=(0,l.g2)("oio-tooltip-help"),c=(0,l.g2)("a-radio"),u=(0,l.g2)("a-radio-group");return(0,l.uX)(),(0,l.CE)("div",uo,[!e.readonly||e.readonly&&e.disabled?((0,l.uX)(),(0,l.CE)("div",po,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.realButtonOptions,(t,i)=>((0,l.uX)(),(0,l.Wv)(u,{class:"button-group",buttonStyle:e.buttonStyle,value:e.currentValue,disabled:e.disabled,key:i},{default:(0,l.k6)(()=>["BUTTON"===e.radioMode?((0,l.uX)(),(0,l.CE)("div",ho,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t,t=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(a,{class:(0,s.C4)(e.computeRadioClass(t.data)),key:t.key,disabled:t.disabled&&e.currentValue!==t.value,value:t.value,style:(0,s.Tr)(e.extraButtonStyle),onMousedown:(0,K.D$)(i=>e.clickRadio(t.data,t.disabled),["stop"])},{default:(0,l.k6)(()=>[(0,l.Lk)("span",{class:"button-content",title:t.label||t.displayName,onMousedown:(0,K.D$)(i=>e.clickRadio(t.data,t.disabled),["stop"])},(0,s.v_)(t.label||t.displayName),41,go)]),_:2},1032,["class","disabled","value","style","onMousedown"])),[[K.aG,e.computeItemShow(t.data)]])),128))])):((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,s.C4)(e.computeRadioGroupClass)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.realOptions,t=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(c,{class:(0,s.C4)(e.computeRadioClass(t.data)),key:t.key,value:t.value,disabled:t.disabled&&e.currentValue!==t.value,onMousedown:(0,K.D$)(i=>e.clickRadio(t.data,t.disabled),["stop"])},{default:(0,l.k6)(()=>{var i,r;return[(0,l.Lk)("span",{class:"oio-radio-label",title:t.label||t.displayName,onMousedown:(0,K.D$)(i=>e.clickRadio(t.data,t.disabled),["stop"])},(0,s.v_)(t.label||t.displayName),41,vo),(null===(i=t.data)||void 0===i?void 0:i.help)?((0,l.uX)(),(0,l.Wv)(d,{key:0,content:null===(r=t.data)||void 0===r?void 0:r.help},null,8,["content"])):(0,l.Q3)("",!0),mo,e.computeItemHintIf(t.data)?((0,l.uX)(),(0,l.CE)("span",fo,(0,s.v_)(t.data.hint),1)):(0,l.Q3)("",!0)]}),_:2},1032,["class","value","disabled","onMousedown"])),[[K.aG,e.computeItemShow(t.data)]])),128))],2))]),_:2},1032,["buttonStyle","value","disabled"]))),128))])):e.readonly&&e.radioLabel?((0,l.uX)(),(0,l.CE)("div",yo,(0,s.v_)(e.radioLabel),1)):e.readonly&&!e.radioLabel?((0,l.uX)(),(0,l.CE)("div",bo,"-")):(0,l.Q3)("",!0)])}var xo,wo=i(59831),So=i(21228),To=i(10020),Eo=i(1694);(function(e){e["VERTICAL"]="VERTICAL",e["TRANSVERSE"]="TRANSVERSE"})(xo||(xo={}));const Ao=(0,l.pM)({components:{OioTooltipHelp:h.qn7,ARadio:wo.Ay,ARadioGroup:So.A,ARadioButton:To.A},props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{value:{type:[String,Boolean],default:void 0},defaultValue:{type:[String,Boolean],default:void 0},allowClear:{type:Boolean,default:!1},radioMode:{type:String},buttonStyle:{type:String,default:"solid"},orientation:{type:String},options:{type:Array},autocorrection:{type:Boolean,default:!1},rowLimit:{type:[String,Number],default:0}}),setup(e){const{realValue:t,readonly:i,disabled:r}=(0,a.P1)(e),o=(0,l.EW)(()=>{const e=t.value;if(null!=e)return(0,R.A)(e)}),n=(0,l.EW)(()=>(0,M.pL)(e.options)),s=(0,l.EW)(()=>(0,M.uK)(o.value,e.options)),d=(0,l.EW)(()=>{const t=n.value;return(0,Eo.A)(e.rowLimit)<=0||"BUTTON"!==e.radioMode?[t]:t&&t.length>0?(0,M.sX)(t,(0,Eo.A)(e.rowLimit)):[]}),c=(0,l.EW)(()=>{let t=(0,Eo.A)(e.rowLimit);const i=e.options&&e.options.length||1;return t<=0&&(t=i),`width: ${100/t}%`}),u=(0,l.EW)(()=>e.orientation===xo.VERTICAL?"vertical":""),p=e=>"false"===e.name||"true"===e.name?JSON.parse(e.name):e.name,h=e=>!1===e.invisible||void 0===e.invisible,g=t=>e.orientation===xo.VERTICAL&&t.hint?"has-hint":"",v=t=>e.orientation===xo.VERTICAL&&t.hint,m=t=>{var i;null===(i=e.change)||void 0===i||i.call(e,p(t))},f=(i,n)=>{var a;r.value||n||((0,N.A)(o.value)||i.toString()!==o.value?m(i):e.change&&e.allowClear&&(t.value=void 0,e.change(t.value)),null===(a=e.blur)||void 0===a||a.call(e))},y=t=>{var i,r;const n=o.value;if(!n)return;let a=b(t,n);if(a)return;const l=(0,R.A)(e.defaultValue);l&&(a=b(t,l),a)?m(a.value):m(null===(r=null===(i=null===t||void 0===t?void 0:t[0])||void 0===i?void 0:i[0])||void 0===r?void 0:r.value)},b=(e,t)=>{for(const i of e){const e=i.find(e=>e.value===t);if(e)return e}};return(0,l.wB)(d,t=>{e.autocorrection&&y(t)}),{currentValue:o,readonly:i,disabled:r,realOptions:n,computeRadioGroupClass:u,realButtonOptions:d,extraButtonStyle:c,computeItemShow:h,computeRadioClass:g,computeItemHintIf:v,radioLabel:s,clickRadio:f}}}),ko=(0,v.A)(Ao,[["render",Co]]),Do=ko;let Fo=class extends ro{initialize(e){return super.initialize(e),this.setComponent(Do),this}get rowLimit(){return this.getDsl().rowLimit}change(e){super.change(e)}};(0,r.Cg)([F.x0.Reactive()],Fo.prototype,"rowLimit",null),(0,r.Cg)([F.x0.Method()],Fo.prototype,"change",null),Fo=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Boolean,widget:"Radio"}))],Fo);let Ro=class extends Lr.g{initialize(e){return super.initialize(e),this.setComponent(Do),this}get allowClear(){const{allowClear:e}=this.getDsl();return!(0,N.A)(e)&&e}get autocorrection(){return x.Xx.ofNullable(this.getDsl().autocorrection).map(e=>x.TM.toBoolean(e)).orElse(!1)}get rowLimit(){return this.getDsl().rowLimit}};(0,r.Cg)([F.x0.Reactive()],Ro.prototype,"allowClear",null),(0,r.Cg)([F.x0.Reactive()],Ro.prototype,"autocorrection",null),(0,r.Cg)([F.x0.Reactive()],Ro.prototype,"rowLimit",null),Ro=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.Enum,widget:"Radio"}))],Ro);const Oo=["onClick"],No=["src"],$o={class:"label"};function Mo(e,t,i,r,o,n){return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["form-enum-thumbnail",e.readonly&&"readonly"])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.realOptions,t=>((0,l.uX)(),(0,l.CE)("div",{class:"thumbnail-item",key:t.key,onClick:(0,K.D$)(i=>e.selectThumbnail(t),["stop","prevent"])},[(0,l.Lk)("div",{class:(0,s.C4)(["item",[t.value===e.value&&"selected"]])},[(0,l.Lk)("img",{alt:"暂时无法加载",src:t.data.thumbnail},null,8,No)],2),(0,l.Lk)("span",$o,(0,s.v_)(t.label),1)],8,Oo))),128))],2)}const Io=(0,l.pM)({props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{options:{type:Array,required:!1},value:{type:[String,Boolean],default:void 0},readonly:{type:[String,Boolean],default:void 0},defaultValue:{type:[String,Boolean],required:!1,default:void 0},allowClear:{type:Boolean,default:!1}}),setup(e){const{realValue:t}=(0,a.P1)(e),i=(0,l.EW)(()=>(0,M.pL)(e.options)),r=t=>{e.change&&e.change(t.value)};return{realValue:t,realOptions:i,selectThumbnail:r}}}),Lo=(0,v.A)(Io,[["render",Mo]]),_o=Lo;let Po=class extends Lr.g{initialize(e){return super.initialize(e),this.setComponent(_o),this}get allowClear(){const{allowClear:e}=this.getDsl();return!(0,N.A)(e)&&e}};(0,r.Cg)([F.x0.Reactive()],Po.prototype,"allowClear",null),Po=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail],ttype:o.m1.Enum,widget:"Thumbnail"}))],Po);var jo=i(31270);let Vo=class extends jo.N{get selectMode(){return j.SBT.multiple}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return D.hLl.M2M(t,i,e,r,o,n,a,l)})}};(0,r.Cg)([F.x0.Reactive()],Vo.prototype,"selectMode",null),Vo=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.ManyToMany,widget:"Cascader"}))],Vo);var Bo=i(20435);class Ho extends Bo.d{get options(){return this.getAvailableOptions()}get autocorrection(){return x.TM.toBoolean(this.getDsl().autocorrection)}get orientation(){const e=this.getDsl().orientation;if(e)return e}get maxNumber(){const e=this.getDsl().maxNumber;return e||1/0}get minNumber(){const e=this.getDsl().minNumber;return e||-1/0}defaultConstructDataTrigger(){return[j.HCy.CHANGE]}defaultClearFieldsTrigger(){return[j.HCy.CHANGE]}}(0,r.Cg)([F.x0.Reactive()],Ho.prototype,"options",null),(0,r.Cg)([F.x0.Reactive()],Ho.prototype,"autocorrection",null),(0,r.Cg)([F.x0.Reactive()],Ho.prototype,"orientation",null),(0,r.Cg)([F.x0.Reactive()],Ho.prototype,"maxNumber",null),(0,r.Cg)([F.x0.Reactive()],Ho.prototype,"minNumber",null);var Wo=i(12606);class Uo extends Wo.N{get options(){return this.getAvailableOptions()}getAvailableOptions(){return this.fullOptions||[]}get autocorrection(){return x.TM.toBoolean(this.getDsl().autocorrection)}get optionLabel(){return this.getDsl().optionLabel}get orientation(){const e=this.getDsl().orientation;if(e)return e}get maxNumber(){const e=this.getDsl().maxNumber;return e||1/0}get minNumber(){const e=this.getDsl().minNumber;return e||-1/0}onSelectedChange(e){const{fullOptionsMap:t}=this;if(!t)return void console.error("full options uninitialized.");if(this.selectedValues=e,!e)return void super.change([]);const i=[];for(const r of e){const e=t.get(r);null==e?console.error("the value is not included in the full options.",t,r):i.push(e.data)}super.change(i)}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);if(!(0,$.mO)(t))return t;const{selectedValues:i}=this,r=null===i||void 0===i?void 0:i.length,o=this.required&&!this.invisible;return r?!(0,N.A)(this.maxNumber)&&r>this.maxNumber?this.validatorError(`${this.field.label} ${(0,D.cAb)("最多选择")}${this.maxNumber}${(0,D.cAb)("个")}`):!(0,N.A)(this.minNumber)&&r<this.minNumber?this.validatorError(`${this.field.label} ${(0,D.cAb)("最少选择")}${this.minNumber}${(0,D.cAb)("个")}`):this.validatorSuccess():o?this.validatorError(`${this.field.label}${(0,D.cAb)("必填")}`):this.validatorSuccess()})}get loadFullOptions(){return x.TM.toBoolean(this.getDsl().loadFullOptions)}get loadPageSize(){let e=x.A5.toNumber(this.getDsl().loadPageSize);return null==e&&(e=100),e}get loadMaxTotalPage(){let e=x.A5.toNumber(this.getDsl().loadMaxTotalPage);return null==e&&(e=-1),e}mountedProcess(){return(0,r.sH)(this,void 0,void 0,function*(){const{loadPageSize:e,loadFullOptions:t}=this,i=yield this.queryPage({currentPage:1,pageSize:e,condition:this.domain});t?yield this.fillFullOptionsForAll(i,e):this.fillFullOptionsForFirstPage(i)})}fillFullOptionsForFirstPage(e){this.generatorFullOptions(e.content),this.backfillSelectedValues()}fillFullOptionsForAll(e,t){return(0,r.sH)(this,void 0,void 0,function*(){const{totalPages:i,content:r}=e;let o=this.loadMaxTotalPage;if(o<=0&&(o=i),i<=1||1===o)return this.generatorFullOptions(r),void this.backfillSelectedValues();const n=[];for(let e=2;e<=o;e++)n.push(this.queryPage({currentPage:e,pageSize:t,condition:this.domain,context:{batch:!0}}).then(e=>e.content));const a=yield Promise.all(n);a.forEach(e=>r.push(...e)),this.generatorFullOptions(r),this.backfillSelectedValues()})}generatorKey(e){var t;const i=null===(t=this.referencesModel)||void 0===t?void 0:t.pks;if(i)return i.map(t=>e[t]).join("#")}generatorFullOptions(e){const t=[],i=new Map;for(const r of e){const e=this.generatorKey(r);if(!e)continue;const o={key:e,value:e,label:this.executeExpressionByItem(r,this.optionLabel,e)||e,data:r};t.push(o),i.set(e,o)}this.fullOptions=t,this.fullOptionsMap=i}backfillSelectedValues(){const{value:e}=this;if(!e)return;const t=[];for(const i of e){const e=this.generatorKey(i);e?t.push(e):console.warn("record pk is null.",i)}this.selectedValues=t}queryPage(e){return(0,r.sH)(this,void 0,void 0,function*(){return D.cqT.queryPage(this.referencesModel,Object.assign(Object.assign({},e),{requestFields:D.g6N.convertRequestFields(this.referencesModel.modelFields)}))})}executeExpressionByItem(e,t,i){var r,o;return null===t||void 0===t?"boolean"===typeof i?i:i||t:"string"===typeof t&&/^[a-zA-Z]+$/.test(t)?t:Xe.r4.run({activeRecords:[e],rootRecord:(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:this.scene},t,i)}defaultConstructDataTrigger(){return[j.HCy.CHANGE]}defaultClearFieldsTrigger(){return[j.HCy.CHANGE]}}(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"selectedValues",void 0),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"fullOptions",void 0),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"options",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"autocorrection",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"optionLabel",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"orientation",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"maxNumber",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"minNumber",null),(0,r.Cg)([F.x0.Method()],Uo.prototype,"onSelectedChange",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"loadFullOptions",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"loadPageSize",null),(0,r.Cg)([F.x0.Reactive()],Uo.prototype,"loadMaxTotalPage",null);const qo={class:"form-multi-enum-checkbox-group"},zo={key:0,class:"not-readonly"};function Go(e,t,i,r,o,n){const a=(0,l.g2)("a-checkbox"),d=(0,l.g2)("a-checkbox-group");return(0,l.uX)(),(0,l.CE)("div",qo,[!e.readonly||e.readonly&&e.disabled?((0,l.uX)(),(0,l.CE)("div",zo,[(0,l.bF)(d,{value:e.selectedValues,disabled:e.disabled,onChange:e.onChange},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,t=>((0,l.uX)(),(0,l.Wv)(a,{key:t.key,value:t.value,onBlur:e.blur},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(t.label),1)]),_:2},1032,["value","onBlur"]))),128))]),_:1},8,["value","disabled","onChange"])])):(0,l.Q3)("",!0)])}const Ko=["1","2","3"].map(e=>({key:e,value:e,label:`${(0,D.cAb)("选项")}${e}`,data:{}})),Xo=(0,l.pM)({name:"DefaultCheckbox",components:{ACheckboxGroup:Ur.A,ACheckbox:w.Ay},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{options:{type:Array},selectedValues:{type:Array},onSelectedChange:{type:Function},_FROM_UI_DESIGNER:{type:Boolean}}),setup(e){const{readonly:t,disabled:i}=(0,a.P1)(e,!0),r=(0,l.EW)(()=>e._FROM_UI_DESIGNER?Ko:e.options||[]),o=t=>{var i;null===(i=e.onSelectedChange)||void 0===i||i.call(e,t)};return{options:r,readonly:t,disabled:i,onChange:o}}}),Qo=(0,v.A)(Xo,[["render",Go]]),Yo=Qo;let Jo=class extends Uo{initialize(e){return super.initialize(e),this.setComponent(Yo),this}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return D.pFK.M2M(t,i,e,r)})}};Jo=(0,r.Cg)([n.DF.ClassFactory(Bo.d.Token({viewType:o.qi.Form,ttype:o.m1.ManyToMany,widget:"Checkbox"}))],Jo);var Zo=i(26370),en=i(22237);let tn=class extends en.l{get selectMode(){return j.SBT.multiple}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return D.hLl.M2M(t,i,e,r,o,n,a,l)})}};(0,r.Cg)([F.x0.Reactive()],tn.prototype,"selectMode",null),tn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.ManyToMany,widget:"TreeSelect"}))],tn);let rn=class extends tn{generatorDefaultTreeDefinition(e){return(0,Zo.FB)()}};rn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.ManyToMany,widget:"Company"}))],rn);let on=class extends tn{generatorDefaultTreeDefinition(e){return(0,Zo.e)()}};on=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.ManyToMany,widget:"Department"}))],on);let nn=class extends tn{generatorDefaultTreeDefinition(e){return(0,Zo.mv)()}};nn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.ManyToMany,widget:"Employee"}))],nn);const an={key:0,class:"readonly"},ln={key:1},sn={class:"form-relation-select-dropdown-spin"};function dn(e,t,i,r,o,n){const a=(0,l.g2)("a-select"),d=(0,l.g2)("v-nodes"),c=(0,l.g2)("oio-spin"),u=(0,l.g2)("oio-empty-data");return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["form-multi-select",[!e.allowClear&&"hide-clear"]])},[e.innerReadonly&&!e.innerDisabled?((0,l.uX)(),(0,l.CE)("div",an,[(0,l.bF)(a,{"max-tag-count":e.maxTagCount,placeholder:e.placeholder,"label-in-value":"",mode:"multiple",value:e.currentValue,options:e.optionList},null,8,["max-tag-count","placeholder","value","options"])])):((0,l.uX)(),(0,l.CE)("div",ln,[(0,l.bF)(a,{ref:"selectRef",mode:"multiple",class:"oio-select","show-search":"","label-in-value":"","max-tag-count":e.maxTagCount,allowClear:e.allowClear,disabled:e.innerDisabled,value:e.currentValue,"filter-option":!1,"default-active-first-option":!1,options:e.optionList,placeholder:e.placeholder,"get-popup-container":e.getTriggerContainer,dropdownClassName:e.dropdownClassName,onChange:e.innerChange,onSearch:e.search,onBlur:e.blur,onFocus:e.focus,onPopupScroll:e.slipSelect,onDropdownVisibleChange:e.dropdownVisibleChange},{dropdownRender:(0,l.k6)(({menuNode:t})=>[(0,l.bF)(d,{vnodes:t},null,8,["vnodes"]),(0,l.Lk)("div",sn,[e.loadMoreLoading?((0,l.uX)(),(0,l.Wv)(c,{key:0,size:"small",loading:""})):(0,l.Q3)("",!0)])]),notFoundContent:(0,l.k6)(()=>[e.loadMoreLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u,{key:0}))]),_:1},8,["max-tag-count","allowClear","disabled","value","options","placeholder","get-popup-container","dropdownClassName","onChange","onSearch","onBlur","onFocus","onPopupScroll","onDropdownVisibleChange"])]))],2)}const cn=(0,l.pM)({props:Object.assign(Object.assign({},V.DZ),{value:{type:Array},generatorSelectOption:Function}),components:{VNodes:(e,{attrs:t})=>t.vnodes,OioSpin:h.MEy,OioEmptyData:h.hNI,ASelect:xi.Ay},setup(e){const t=(0,te.KR)([]),i=e=>{t.value=[...e]};(0,l.wB)(()=>e.options,()=>{e.options&&e.options.length?i(e.options):t.value=[]},{immediate:!0}),(0,l.wB)(()=>e.value,()=>{var t;!e.isInitOptions&&e.value&&i((null===(t=e.generatorSelectOption)||void 0===t?void 0:t.call(e,e.value))||[])},{immediate:!0});const r=(0,a.sX)();return Object.assign(Object.assign({},(0,V.sc)(e)),{optionList:t,getTriggerContainer:e.getPopupContainer||r.getTriggerContainer})}}),un=(0,v.A)(cn,[["render",dn]]),pn=un;let hn=class extends a.jQ{initialize(e){return super.initialize(e),this.setComponent(pn),this}change(e){if(null==e)super.change(e),this.handleEmpty();else{e.length||this.handleEmpty();const t=(0,O.A)(this.dataList)?this.value||[]:this.dataList,i=e.map(e=>{var i;return null===(i=t)||void 0===i?void 0:i.find(t=>t[this.relationFieldKey]===e.value)}).filter(e=>!!e);super.change(i)}}fillOptions(e,t=!0){const i=Object.create(null,{fillOptionsForMulti:{get:()=>super.fillOptionsForMulti}});return(0,r.sH)(this,void 0,void 0,function*(){yield i.fillOptionsForMulti.call(this,e)})}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return D.pFK.M2M(t,i,e,r)})}mounted(){const e=Object.create(null,{mounted:{get:()=>super.mounted}});return(0,r.sH)(this,void 0,void 0,function*(){yield e.mounted.call(this),yield this.loadOriginValue()})}};(0,r.Cg)([F.x0.Method()],hn.prototype,"change",null),hn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.ManyToMany}))],hn);let gn=class extends a.I_{refreshValueProcess(){const e=Object.create(null,{refreshValueProcess:{get:()=>super.refreshValueProcess}});var t,i;return(0,r.sH)(this,void 0,void 0,function*(){this.isDataSourceProvider&&(yield e.refreshValueProcess.call(this),null===(t=this.submitCache)||void 0===t||t.reload(),null===(i=this.subviewSubmitCache)||void 0===i||i.reload())})}initSubviewData(){const e=this.runtimeSubviewContext.view;if(!e)return void super.initSubviewData();const{formData:t,model:i,field:r,viewMode:o,submitType:n,relationUpdateType:l}=this;let s;if(a.tz.isNeedQuery(r,o,n,l)){if(s=a.tz.generatorM2MQueryData(i,r,t),!s)return this.isDataSourceProvider=!1,void this.reloadDataSource([]);this.isDataSourceProvider||this.reloadDataSource(void 0),e.initialValue=[s],this.isDataSourceProvider=!1}else super.initSubviewData()}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,subviewSubmitCache:a,submitType:l,relationUpdateType:s}=this;return D.hLl.M2M(t,i,e,r,o,a||n,l,s)})}};gn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.ManyToMany,widget:$.Uj}))],gn);var vn=i(76533);let mn=class extends vn.D{get selectMode(){return j.SBT.multiple}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return D.hLl.M2M(t,i,e,r,o,n,a,l)})}};(0,r.Cg)([F.x0.Reactive()],mn.prototype,"selectMode",null),mn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.ManyToMany,widget:"Tree"}))],mn);class fn extends a.v${initialize(e){return super.initialize(e),this}get limit(){return this.getDsl().limit||-1}get limitSize(){return this.getDsl().limitSize}get allLimitSize(){return this.getDsl().allLimitSize||""}get multiple(){const e=this.getDsl().multi;return!0===e}get partSize(){return this.getDsl().partSize||j.c$b.partSize}get chunkUploadThreshold(){return this.getDsl().chunkUploadThreshold||j.c$b.chunkUploadThreshold}get parallel(){return this.getDsl().parallel||j.c$b.parallel}get limitFileExtensions(){return this.getDsl().limitFileExtensions}change(e){super.change(e||null)}remove(e){const t=[...this.value],i=t.findIndex(t=>e.id===t.id);i>=0&&t.splice(i,1),this.change(t)}}(0,r.Cg)([F.x0.Reactive()],fn.prototype,"limit",null),(0,r.Cg)([F.x0.Reactive()],fn.prototype,"limitSize",null),(0,r.Cg)([F.x0.Reactive()],fn.prototype,"allLimitSize",null),(0,r.Cg)([F.x0.Reactive()],fn.prototype,"multiple",null),(0,r.Cg)([F.x0.Reactive()],fn.prototype,"partSize",null),(0,r.Cg)([F.x0.Reactive()],fn.prototype,"chunkUploadThreshold",null),(0,r.Cg)([F.x0.Reactive()],fn.prototype,"parallel",null),(0,r.Cg)([F.x0.Reactive()],fn.prototype,"limitFileExtensions",null),(0,r.Cg)([F.x0.Method()],fn.prototype,"change",null),(0,r.Cg)([F.x0.Method()],fn.prototype,"remove",null);let yn=class extends fn{get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return x.TM.toBoolean(this.getDsl().privateLink)}initialize(e){return super.initialize(e),this.setComponent(At.f1),this}};(0,r.Cg)([F.x0.Reactive()],yn.prototype,"cdnKey",null),(0,r.Cg)([F.x0.Reactive()],yn.prototype,"privateLink",null),yn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail,o.qi.Gallery,o.qi.Table],ttype:o.m1.ManyToMany,widget:["Upload"]}))],yn);let bn=class extends yn{initialize(e){return super.initialize(e),this.setComponent(At.r_),this}get draggableIcon(){return this.getDsl().draggableIcon||"oinone-shangchuan1"}get draggableTipText(){return this.getDsl().draggableTipText||"点击 或 拖拽文件到这里上传"}get showDraggableExtendsionsText(){var e;return null===(e=this.getDsl().showDraggableExtendsionsText)||void 0===e||e}get draggableExtendsionsText(){const e=this.limitFileExtensions||(0,D.cAb)("全部");return(0,D.cAb)("支持拓展名: ")+e}};(0,r.Cg)([F.x0.Reactive()],bn.prototype,"draggableIcon",null),(0,r.Cg)([F.x0.Reactive()],bn.prototype,"draggableTipText",null),(0,r.Cg)([F.x0.Reactive()],bn.prototype,"showDraggableExtendsionsText",null),(0,r.Cg)([F.x0.Reactive()],bn.prototype,"draggableExtendsionsText",null),bn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail,o.qi.Gallery],ttype:o.m1.ManyToMany,widget:"UploadDraggable"}))],bn);let Cn=class extends fn{initialize(e){return super.initialize(e),this.setComponent(At._A),this}};Cn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail],ttype:o.m1.ManyToMany,widget:["UploadImg"]}))],Cn);var xn=i(35647);let wn=class extends jo.N{get selectMode(){return j.SBT.multiple}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return D.hLl.O2M(t,i,e,r,o,n,a,l)})}};(0,r.Cg)([F.x0.Reactive()],wn.prototype,"selectMode",null),wn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.OneToMany,widget:"Cascader"}))],wn);let Sn=class extends Uo{initialize(e){return super.initialize(e),this.setComponent(Yo),this}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return D.pFK.O2M(t,i,e,r)})}};Sn=(0,r.Cg)([n.DF.ClassFactory(Bo.d.Token({viewType:o.qi.Form,ttype:o.m1.OneToMany,widget:"Checkbox"}))],Sn);const Tn={key:0,class:"readonly"},En={key:1},An={class:"form-relation-select-dropdown-spin"};function kn(e,t,i,r,o,n){const a=(0,l.g2)("a-select"),d=(0,l.g2)("v-nodes"),c=(0,l.g2)("oio-spin"),u=(0,l.g2)("oio-empty-data");return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["form-multi-select",[!e.allowClear&&"hide-clear"]])},[e.innerReadonly&&!e.innerDisabled?((0,l.uX)(),(0,l.CE)("div",Tn,[(0,l.bF)(a,{"max-tag-count":e.maxTagCount,"label-in-value":"",mode:"multiple",placeholder:e.placeholder,value:e.currentValue,options:e.optionList},null,8,["max-tag-count","placeholder","value","options"])])):((0,l.uX)(),(0,l.CE)("div",En,[(0,l.bF)(a,{ref:"selectRef",mode:"multiple","label-in-value":"",class:"oio-select",optionFilterProp:"label","max-tag-count":e.maxTagCount,"show-search":e.showSearch,"allow-clear":e.allowClear,disabled:e.innerDisabled,value:e.currentValue,"filter-option":!1,"default-active-first-option":!1,options:e.optionList,placeholder:e.placeholder,getPopupContainer:e.getTriggerContainer,dropdownClassName:e.dropdownClassName,onChange:e.innerChange,onSearch:e.search,onBlur:e.blur,onFocus:e.focus,onPopupScroll:e.slipSelect,onDropdownVisibleChange:e.dropdownVisibleChange},{dropdownRender:(0,l.k6)(({menuNode:t})=>[(0,l.bF)(d,{vnodes:t},null,8,["vnodes"]),(0,l.Lk)("div",An,[e.loadMoreLoading?((0,l.uX)(),(0,l.Wv)(c,{key:0,size:"small",loading:""})):(0,l.Q3)("",!0)])]),notFoundContent:(0,l.k6)(()=>[e.loadMoreLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u,{key:0}))]),_:1},8,["max-tag-count","show-search","allow-clear","disabled","value","options","placeholder","getPopupContainer","dropdownClassName","onChange","onSearch","onBlur","onFocus","onPopupScroll","onDropdownVisibleChange"])]))],2)}const Dn=(0,l.pM)({props:Object.assign(Object.assign({},V.DZ),{value:{type:Array},generatorSelectOption:Function}),components:{VNodes:(e,{attrs:t})=>t.vnodes,OioSpin:h.MEy,OioEmptyData:h.hNI,ASelect:xi.Ay},setup(e){const t=(0,te.KR)([]),i=e=>{t.value=[...e]};(0,l.wB)(()=>e.options,()=>{e.options&&e.options.length?i(e.options):t.value=[]},{immediate:!0}),(0,l.wB)(()=>e.value,()=>{var t;!e.isInitOptions&&e.value&&i((null===(t=e.generatorSelectOption)||void 0===t?void 0:t.call(e,e.value))||[])},{immediate:!0});const r=(0,a.sX)();return Object.assign(Object.assign({},(0,V.sc)(e)),{optionList:t,getTriggerContainer:e.getPopupContainer||r.getTriggerContainer})}}),Fn=(0,v.A)(Dn,[["render",kn]]),Rn=Fn;let On=class extends a.jQ{fetchData(){return(0,r.sH)(this,void 0,void 0,function*(){})}initialize(e){return super.initialize(e),this.setComponent(Rn),this}change(e){if(null==e)super.change(e),this.handleEmpty();else{e.length||this.handleEmpty();const t=(0,O.A)(this.dataList)?this.value||[]:this.dataList,i=e.map(e=>{var i;return null===(i=t)||void 0===i?void 0:i.find(t=>t[this.relationFieldKey]===e.value)}).filter(e=>!!e);super.change(x.Gf.cast(i))}}fillOptions(e,t=!0){const i=Object.create(null,{fillOptionsForMulti:{get:()=>super.fillOptionsForMulti}});return(0,r.sH)(this,void 0,void 0,function*(){yield i.fillOptionsForMulti.call(this,e)})}mounted(){const e=Object.create(null,{mounted:{get:()=>super.mounted}});return(0,r.sH)(this,void 0,void 0,function*(){yield e.mounted.call(this),yield this.loadOriginValue()})}};(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Array]),(0,r.Sn)("design:returntype",void 0)],On.prototype,"change",null),On=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.OneToMany}))],On);let Nn=class extends a.I_{refreshValueProcess(){const e=Object.create(null,{refreshValueProcess:{get:()=>super.refreshValueProcess}});var t,i;return(0,r.sH)(this,void 0,void 0,function*(){this.isDataSourceProvider&&(yield e.refreshValueProcess.call(this),null===(t=this.submitCache)||void 0===t||t.reload(),null===(i=this.subviewSubmitCache)||void 0===i||i.reload())})}initSubviewData(){const e=this.runtimeSubviewContext.view;if(!e)return void super.initSubviewData();const{formData:t,field:i,viewMode:r,submitType:o,relationUpdateType:n}=this;let l;if(a.tz.isNeedQuery(i,r,o,n)){if(l=a.tz.generatorO2MCondition(i,t),!l)return this.isDataSourceProvider=!1,void this.reloadDataSource([]);this.isDataSourceProvider||this.reloadDataSource(void 0),e.filter=l.toString(),this.isDataSourceProvider=!1}else super.initSubviewData()}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,subviewSubmitCache:a,submitType:l,relationUpdateType:s}=this;return D.hLl.O2M(t,i,e,r,o,a||n,l,s)})}};Nn=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:o.qi.Form,ttype:o.m1.OneToMany,widget:$.Uj}))],Nn);let $n=class extends en.l{get selectMode(){return j.SBT.multiple}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return D.hLl.O2M(t,i,e,r,o,n,a,l)})}};(0,r.Cg)([F.x0.Reactive()],$n.prototype,"selectMode",null),$n=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.OneToMany,widget:"TreeSelect"}))],$n);class Mn extends a.dP{initialize(e){return super.initialize(e),this}get limit(){return this.getDsl().limit||-1}get limitSize(){return this.getDsl().limitSize}get allLimitSize(){return this.getDsl().allLimitSize||""}get multiple(){const e=this.getDsl().multi;return!0===e}get partSize(){return this.getDsl().partSize||j.c$b.partSize}get chunkUploadThreshold(){return this.getDsl().chunkUploadThreshold||j.c$b.chunkUploadThreshold}get parallel(){return this.getDsl().parallel||j.c$b.parallel}get limitFileExtensions(){return this.getDsl().limitFileExtensions}change(e){super.change(e||null)}remove(e){const t=[...this.value],i=t.findIndex(t=>e.id===t.id);i>=0&&t.splice(i,1),this.change(t)}}(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"limit",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"limitSize",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"allLimitSize",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Boolean),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"multiple",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"partSize",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"chunkUploadThreshold",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"parallel",null),(0,r.Cg)([F.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],Mn.prototype,"limitFileExtensions",null),(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],Mn.prototype,"change",null),(0,r.Cg)([F.x0.Method(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],Mn.prototype,"remove",null);let In=class extends Mn{get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return x.TM.toBoolean(this.getDsl().privateLink)}initialize(e){return super.initialize(e),this.setComponent(At.f1),this}};(0,r.Cg)([F.x0.Reactive()],In.prototype,"cdnKey",null),(0,r.Cg)([F.x0.Reactive()],In.prototype,"privateLink",null),In=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail,o.qi.Gallery],ttype:o.m1.OneToMany,widget:"Upload"}))],In);let Ln=class extends In{initialize(e){return super.initialize(e),this.setComponent(At.r_),this}get draggableIcon(){return this.getDsl().draggableIcon||"oinone-shangchuan1"}get draggableTipText(){return this.getDsl().draggableTipText||"点击 或 拖拽文件到这里上传"}get showDraggableExtendsionsText(){var e;return null===(e=this.getDsl().showDraggableExtendsionsText)||void 0===e||e}get draggableExtendsionsText(){const e=this.limitFileExtensions||(0,D.cAb)("全部");return(0,D.cAb)("支持拓展名: ")+e}};(0,r.Cg)([F.x0.Reactive()],Ln.prototype,"draggableIcon",null),(0,r.Cg)([F.x0.Reactive()],Ln.prototype,"draggableTipText",null),(0,r.Cg)([F.x0.Reactive()],Ln.prototype,"showDraggableExtendsionsText",null),(0,r.Cg)([F.x0.Reactive()],Ln.prototype,"draggableExtendsionsText",null),Ln=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail,o.qi.Gallery],ttype:o.m1.OneToMany,widget:"UploadDraggable"}))],Ln);let _n=class extends Mn{initialize(e){return super.initialize(e),this.setComponent(At._A),this}};_n=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Detail],ttype:o.m1.OneToMany,widget:["UploadImg"]}))],_n);let Pn=class extends jo.N{submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return D.hLl.O2O(t,i,e,r,o,n,a,l)})}};Pn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.OneToOne,widget:"Cascader"}))],Pn);var jn=i(39455);let Vn=class extends jn.P{};Vn=(0,r.Cg)([n.DF.ClassFactory(Bo.d.Token({viewType:[o.qi.Form,o.qi.Detail],ttype:[o.m1.OneToOne],widget:"Form"}))],Vn);var Bn=i(99537);let Hn=class extends Bn.a{initialize(e){return super.initialize(e),this.setComponent(Bn.B),this}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return D.pFK.O2O(t,i,e,r)})}};(0,r.Cg)([F.x0.Reactive()],Hn.prototype,"selectedValues",void 0),Hn=(0,r.Cg)([n.DF.ClassFactory(Bo.d.Token({viewType:o.qi.Form,ttype:o.m1.OneToOne,widget:"Radio"}))],Hn);var Wn=i(36270);let Un=class extends Wn.p{get domainO2o(){const e=this.domain,t=[];if(this.field.relationFields.length)for(const r of this.field.relationFields){const e=`${r} == null`;t.push(e)}let i="";return t.length&&(i=`${t.join(" and ")}`),"null"!==e&&e?`${e} and ${i}`:i}};(0,r.Cg)([F.x0.Reactive(),F.x0.Provide()],Un.prototype,"domainO2o",null),Un=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:[o.qi.Form,o.qi.Search],ttype:o.m1.OneToOne}))],Un);let qn=class extends en.l{submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return D.hLl.O2O(t,i,e,r,o,n,a,l)})}};qn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.OneToOne,widget:"TreeSelect"}))],qn);var zn=i(63366);const Gn=(0,l.pM)({name:"DefaultMap",components:{OioButton:h._5z,OioInput:h.Gzk,OioTextarea:h.icl},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},a.jW),a.R7),{items:{type:Array,default:()=>[]},addRecord:{type:Function},removeRecord:{type:Function},onHandleChange:{type:Function},limit:{type:Number}}),setup(e){const t=(0,l.EW)(()=>h.TMe.toBoolean(e.readonly)||!1),i=(0,l.EW)(()=>h.TMe.toBoolean(e.disabled)||!1),r=(0,l.EW)(()=>{var t;const r=i.value;return r||!(0,N.A)(e.limit)&&((null===(t=e.items)||void 0===t?void 0:t.length)||0)>=e.limit}),o=()=>{var t;null===(t=e.addRecord)||void 0===t||t.call(e)},n=t=>{var i;null===(i=e.removeRecord)||void 0===i||i.call(e,t)},a=(e,t)=>{e.name=t},s=(e,t)=>{e.value=t},d=()=>{(0,zn.A)(()=>{var t;null===(t=e.onHandleChange)||void 0===t||t.call(e)},100)()},c=()=>{var t,i;null===(t=e.onHandleChange)||void 0===t||t.call(e),null===(i=e.blur)||void 0===i||i.call(e)};return{readonly:t,disabled:i,disabledAdd:r,onAddClick:o,onRemoveClick:n,onUpdateItemName:a,onUpdateItemValue:s,onInputChange:d,onInputBlur:c}},render(){const{readonly:e,disabled:t,disabledAdd:i,focus:r,items:o,onAddClick:n,onRemoveClick:a,onUpdateItemName:s,onUpdateItemValue:d,onInputChange:c,onInputBlur:u}=this,p=[];return e?o.forEach(e=>{const{name:t,value:i}=e;p.push((0,l.bF)("div",{class:"default-map-item default-map-item-readonly"},[(0,l.bF)("span",{class:"default-map-item-name-readonly"},t||""),(0,l.bF)("span",{class:"default-map-item-separator"},": "),(0,l.bF)("span",{class:"default-map-item-value-readonly"},i||"")]))}):(p.push((0,l.bF)(h._5z,{class:"default-map-add-button",disabled:i,type:h.VQ.primary,onClick:n},{default:()=>(0,D.cAb)("添加")})),o.forEach((e,i)=>{const{name:o,value:n}=e;p.push((0,l.bF)("div",{class:"default-map-item"},[(0,l.bF)(h.Gzk,{class:"default-map-item-name",disabled:t,value:o,"onUpdate:value":t=>{s(e,t),c()},onFocus:r,onBlur:u}),(0,l.bF)(h.icl,{class:"default-map-item-value",value:n,disabled:t,"onUpdate:value":t=>{d(e,t),c()},onFocus:r,onBlur:u}),(0,l.bF)(h._5z,{class:"default-map-item-delete-button",disabled:t,onClick:()=>{a(i)}},{default:()=>(0,D.cAb)("删除")})]))})),(0,l.bF)("div",{class:"default-map"},p)}}),Kn=Gn,Xn=Kn;let Qn=class extends a.d4{constructor(){super(...arguments),this.items=[]}initialize(e){return super.initialize(e),this.setComponent(Xn),this}get limit(){return x.A5.toNumber(this.getDsl().limit)}addRecord(){this.items.push({name:"",value:""})}removeRecord(e){this.items.splice(e,1),this.onHandleChange(),this.blur()}onHandleChange(){this.change(this.generatorValue())}generatorValue(){if(!this.items.length)return null;const e={};return this.items.forEach(t=>{t.name&&t.value&&(e[t.name]=t.value)}),e}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){return D.pFK.DEFAULT(this.field,this.itemName,e,this.generatorValue())})}validator(){return(0,r.sH)(this,void 0,void 0,function*(){if(this.required&&0===this.items.length)return this.validatorError(`${(0,D.cAb)("字段")}${this.field.displayName}${(0,D.cAb)("不能为空")}`);if(this.items.length){const e=this.items.map(e=>e.name),t=Array.from(new Set(e));if(e.length!==t.length)return this.validatorError((0,D.cAb)("字段不允许有重复的key"))}return this.validatorSuccess()})}mountedProcess(){const{value:e}=this;this.items=e?Object.entries(e).map(([e,t])=>{const i={name:e,value:t};return i}):[]}$$mounted(){super.$$mounted(),this.mountedCallChaining?this.mountedCallChaining.hook(this.path,()=>(0,r.sH)(this,void 0,void 0,function*(){yield this.mountedProcess()})):this.mountedProcess()}$$unmounted(){var e;super.$$unmounted(),null===(e=this.mountedCallChaining)||void 0===e||e.unhook(this.path)}};(0,r.Cg)([F.x0.Reactive(),F.x0.Inject()],Qn.prototype,"mountedCallChaining",void 0),(0,r.Cg)([F.x0.Reactive()],Qn.prototype,"items",void 0),(0,r.Cg)([F.x0.Reactive()],Qn.prototype,"limit",null),(0,r.Cg)([F.x0.Method()],Qn.prototype,"addRecord",null),(0,r.Cg)([F.x0.Method()],Qn.prototype,"removeRecord",null),(0,r.Cg)([F.x0.Method()],Qn.prototype,"onHandleChange",null),Qn=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.Map}))],Qn);const Yn={class:"select-field-action-select-wrapper"};function Jn(e,t,i,r,o,n){const a=(0,l.g2)("select-node"),d=(0,l.g2)("draggable"),c=(0,l.g2)("oio-button");return(0,l.uX)(),(0,l.CE)("div",Yn,[(0,l.bF)(d,{modelValue:e.draggableList,"onUpdate:modelValue":t[0]||(t[0]=t=>e.draggableList=t),disabled:e.disabled||e.readonly,"item-key":"sort"},{item:(0,l.k6)(({element:t,index:i})=>[((0,l.uX)(),(0,l.Wv)(a,{field:t.items,dataSource:e.dataSource,valueSource:e.value,filterSource:e.unSelectedOptionList,readonly:e.readonly,disabled:e.disabled,key:i,"label-editable":e.labelEditable,onOnChange:t=>{e.onSelectChange(t,i)},onOnDelete:()=>e.onDelete(i)},null,8,["field","dataSource","valueSource","filterSource","readonly","disabled","label-editable","onOnChange","onOnDelete"]))]),_:1},8,["modelValue","disabled"]),e.readonly?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:0,disabled:e.disabled,class:"select-field-action__button",type:"primary",onClick:e.onAddRow},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.$translate("添加一行")),1)]),_:1},8,["disabled","onClick"]))])}var Zn=i(432),ea=i.n(Zn),ta=i(65363);const ia={class:"select-field-action__wrapper"};function ra(e,t,i,r,o,n){const a=(0,l.g2)("oio-icon"),d=(0,l.g2)("a-cascader"),c=(0,l.g2)("oio-input");return(0,l.uX)(),(0,l.CE)("div",ia,[(0,l.bF)(a,{class:"select-field-action__drop-icon",icon:"oinone-yidong",color:"#979797",size:"var(--oio-font-size-sm)"}),(0,l.bF)(d,{class:(0,s.C4)(["oio-cascader",!e.disabled&&e.readonly&&"oio-cascader__readonly",e.open&&"oio-select-cascader-open"]),dropdownClassName:"oio-select-default-cascader__dropdown",size:"large",expandTrigger:"hover",disabled:e.disabled||e.readonly,allowClear:!1,placeholder:e.$translate("可根据名称或显示名称搜索"),value:e.selectValue,"onUpdate:value":t[1]||(t[1]=t=>e.selectValue=t),options:e.options,"field-names":{label:"displayLabel",value:"name",children:"children"},showSearch:"",matchInputWidth:"",style:(0,s.Tr)({width:e.labelEditable?"160px":"calc(100% - 76px)"}),open:e.open,onChange:e.onSelectChange,onDropdownVisibleChange:e.onDropdownVisibleChange,"get-popup-container":e=>e.parentNode},{displayRender:(0,l.k6)(({labels:i})=>[(0,l.Lk)("span",{onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t)),class:"select-field-action-select-span"},(0,s.v_)(i.filter(e=>e).join("  >  ")),1)]),_:1},8,["class","disabled","placeholder","value","options","style","open","onChange","onDropdownVisibleChange","get-popup-container"]),e.labelEditable?((0,l.uX)(),(0,l.Wv)(c,{key:0,class:(0,s.C4)(["select-field-action__input",e.readonly&&"select-field-action--input__readonly"]),disabled:e.disabled,readonly:e.readonly,value:e.labelValue,"onUpdate:value":t[2]||(t[2]=t=>e.labelValue=t),onInput:e.onInput},null,8,["class","disabled","readonly","value","onInput"])):(0,l.Q3)("",!0),e.readonly?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(a,{key:1,class:(0,s.C4)(["select-field-action-select-delete-icon",e.disabled&&"select-field-action-delete__disabled"]),icon:"oinone-a-ShapeCopy3beifen",size:"var(--oio-font-size)",onClick:e.onDelete},null,8,["class","onClick"]))])}var oa,na,aa=i(78923);(function(e){e["FIELD"]="FIELD",e["ACTION"]="ACTION",e["FIELD_ACTION"]="FIELD_ACTION"})(oa||(oa={})),function(e){e["VIEW_ACTION"]="VIEW_ACTION",e["SERVER_ACTION"]="SERVER_ACTION",e["URL_ACTION"]="URL_ACTION",e["CLIENT_ACTION"]="CLIENT_ACTION"}(na||(na={}));const la={[o.X2.View]:"跳转动作",[o.X2.URL]:"链接动作",[o.X2.Client]:"客户端动作",[o.X2.Server]:"提交动作"};(0,Ze.jc)(la);const sa={[oa.FIELD]:"字段",[oa.ACTION]:"动作"},da={readonly:{type:[Boolean],default:!1},disabled:{type:[Boolean],default:!1}},ca=(0,l.pM)({name:"SelectFieldActionNode",props:Object.assign(Object.assign({},da),{field:{type:Array,default:()=>[],required:!0},dataSource:{type:Array,required:!0},valueSource:{type:Array,default:()=>[]},labelEditable:{type:Boolean,default:!0}}),components:{ACascader:aa.A,OioIcon:h.Lky,OioInput:h.Gzk},emits:["onChange","onDelete"],setup(e,{emit:t}){const i=(0,te.KR)(!1),r=(0,l.EW)(()=>s(e.dataSource)),o=(0,l.EW)(()=>e.field.filter(e=>e)),n=(0,te.KR)(),a=(0,l.EW)({get(){if(n.value)return n.value;const e=d();return null===e||void 0===e?void 0:e.label},set(e){n.value=e}}),s=(e,t=1)=>(null===e||void 0===e?void 0:e.length)?e.map(e=>{var i,r,o,n,a,l;let d="";return d=e.actionType?(null===(i=e.children)||void 0===i?void 0:i.length)?null!==(r=e.displayName)&&void 0!==r?r:e.label:`${e.displayName}(${la[e.actionType]}) - ${e.name}`:(null===(o=e.children)||void 0===o?void 0:o.length)?null!==(n=e.displayName)&&void 0!==n?n:e.label:`${e.displayName} - ${e.name}`,Object.assign(Object.assign({},e),{isLeaf:!((null===(a=e.children)||void 0===a?void 0:a.length)&&t<2),displayLabel:d,children:(null===(l=e.children)||void 0===l?void 0:l.length)&&t<2?s(e.children,t+1):null})}):e,d=(t=o.value)=>{const i=e.valueSource.find(e=>e.name===t[0]);if(i)return t.length<2?i:i.children&&i.children.length?i.children.find(e=>e.name===t[1]):i},c=e=>{t("onChange",{value:d(e),address:e})},u=()=>{e.disabled||t("onDelete")},p=()=>{t("onChange",{value:Object.assign(Object.assign({},d()),{label:n.value}),address:o.value,isInput:!0})},h=e=>{e.preventDefault()},g=e=>{i.value=e};return{open:i,onDropdownVisibleChange:g,labelValue:a,options:r,selectValue:o,onSelectChange:c,onDelete:u,onInput:p,onClick:h}}}),ua=(0,v.A)(ca,[["render",ra]]),pa=ua,ha=(0,l.pM)({name:"SelectFieldActionSelectComponent",props:Object.assign(Object.assign({},ta.R7),{widgetType:{type:String,required:!0},fieldActionOptionsList:{type:Object,required:!0},unSelectedOptionList:{type:Object,required:!0},selectedOptionList:{type:Object,required:!0},onFormChange:{type:Function,required:!0},value:{type:Array,default:()=>[]},valueFlattend:{type:Array,default:()=>[]},labelEditable:{type:Boolean,default:!0}}),components:{OioButton:h._5z,SelectNode:pa,Draggable:ea()},emits:[],setup(e){const t=(0,l.EW)(()=>x.TM.toBoolean(e.readonly)||!1),i=(0,l.EW)(()=>x.TM.toBoolean(e.disabled)||!1),r=(0,l.EW)(()=>e.fieldActionOptionsList[e.widgetType]),o=(0,l.EW)(()=>e.value.map(e=>d(e).flat()).flat()),n=(0,l.EW)({get(){return a(o.value)},set(t){e.onFormChange(p(t.map(e=>{var t;return null!==(t=e.items)&&void 0!==t?t:[]})))}}),a=e=>e.length?e.sort((e,t)=>{var i,r;return(null!==(i=null===e||void 0===e?void 0:e.sort)&&void 0!==i?i:-1)-(null!==(r=null===t||void 0===t?void 0:t.sort)&&void 0!==r?r:-1)}):e,s=()=>{const t=[...n.value,{items:[]}];e.onFormChange(p(t.map(e=>{var t;return null!==(t=e.items)&&void 0!==t?t:[]})))},d=e=>{var t;return(null===(t=e.children)||void 0===t?void 0:t.length)?e.children.map(t=>t.name?[{sort:t.sort,items:[e.name,t.name]}]:[{sort:t.sort,items:[e.name]}]):[{sort:e.sort,items:[e.name]}]},c=({value:t,address:i,isInput:r=!1},o)=>{const a=n.value.findIndex(e=>{var t;return(null===(t=null===e||void 0===e?void 0:e.items)||void 0===t?void 0:t.join("-"))===i.join("-")});if(!r&&a>1)return void h.$xc.error((0,D.cAb)("错误"),(0,D.cAb)(`该${sa[e.widgetType]}已被选择`));const l=[...n.value];l.splice(o,1,{items:i}),r?e.onFormChange(u(p(l.map(e=>{var t;return null!==(t=e.items)&&void 0!==t?t:[]})),t,i)):e.onFormChange(p(l.map(e=>{var t;return null!==(t=e.items)&&void 0!==t?t:[]})))},u=(e,t,i)=>{var r,o,n,a,l;if(!e.length)return[];const s=[...e];if(1===i.length)return s.map(e=>e.name!==t.name?e:t);const d=s.findIndex(e=>e.name===i[0]);return(null===(r=s[d])||void 0===r?void 0:r.children)||(null===(n=null===(o=s[d])||void 0===o?void 0:o.children)||void 0===n?void 0:n.length)?(s[d].children=null===(l=null===(a=s[d])||void 0===a?void 0:a.children)||void 0===l?void 0:l.map(e=>e.name===i[1]?t:e),s):s},p=t=>{let i=1;return t.map(t=>{var o,n,a,l,s;if(!(null===t||void 0===t?void 0:t.length))return{sort:i++};if(t.length<2){const l=r.value.find(e=>e.name===t[0]);if(!l)return{sort:i++};const s=e.value.find(e=>e.name===l.name&&e.model===l.model);return{name:null!==(o=null===s||void 0===s?void 0:s.name)&&void 0!==o?o:l.name,model:null!==(n=null===s||void 0===s?void 0:s.model)&&void 0!==n?n:l.model,label:null!==(a=null===s||void 0===s?void 0:s.label)&&void 0!==a?a:l.label,type:e.widgetType,displayName:l.displayName,sort:i++}}const d=r.value.find(e=>e.name===t[0]);if(!d)return{sort:i++};const c=(null===(l=d.children)||void 0===l?void 0:l.length)&&t[1]?d.children.find(e=>e.name===t[1]):null,u=e.value.find(e=>e.name===d.name&&e.model===d.model);let p={};return c&&(p=e.valueFlattend.find(e=>e.name===c.name&&e.model===c.model&&e.parentName===d.name&&e.parentModel===d.model)),{name:d.name,model:d.model,label:null!==(s=null===u||void 0===u?void 0:u.label)&&void 0!==s?s:d.label,type:e.widgetType,displayName:d.displayName,sort:i++,children:c&&[Object.assign(Object.assign(Object.assign({},c),p),{type:e.widgetType,sort:i++})]}})},g=t=>{const i=[...n.value];i.splice(t,1),e.onFormChange(p(i.map(e=>{var t;return null!==(t=e.items)&&void 0!==t?t:[]})))};return{readonly:t,disabled:i,dataSource:r,fieldList:o,draggableList:n,onAddRow:s,onSelectChange:c,onDelete:g}}}),ga=(0,v.A)(ha,[["render",Jn]]),va=ga,ma=Pe.Qq5.getInstance(),fa="uiDesigner",ya=e=>(0,r.sH)(void 0,void 0,void 0,function*(){const t=`query {\n\tuiDesignerActionQuery {\n\t\tqueryActions(data: { model: "${e}" }) {\n\t\t\tid\n\t\t\tactionType\n\t\t\tdisplayName\n\t\t\tlabel\n\t\t\tbitOptions\n\t\t\tattributes\n\t\t\tmodel\n\t\t\tsys\n\t\t\tmodelName\n\t\t\tsystemSource\n\t\t\tname\n\t\t\tsign\n\t\t\thash\n\t\t\tbindingType\n\t\t\tbindingViewName\n\t\t\tcontextType\n\t\t\tsummary\n\t\t\tdescription\n\t\t\tdisable\n\t\t\tinvisible\n\t\t\trule\n\t\t\tmapping\n\t\t\tcontext\n\t\t\tpriority\n\t\t\tcreateDate\n\t\t\twriteDate\n\t\t\tcreateUid\n\t\t\twriteUid\n\t\t}\n\t}\n}\n`,i=yield ma.mutate(fa,t);return i.data["uiDesignerActionQuery"]["queryActions"]});class ba extends a.d4{constructor(){super(...arguments),this.fieldActionOptionsList={[oa.FIELD]:[],[oa.ACTION]:[]}}initialize(e){return super.initialize(e),this}get filterRelation(){var e;return null!==(e=this.getDsl().filterRelation)&&void 0!==e&&e}get labelEditable(){return this.getDsl().labelEditable}get valueFlattend(){return this.flattenList(this.value)}get fieldActionOptionsListFlattend(){return{[oa.FIELD]:this.flattenList(this.fieldActionOptionsList[oa.FIELD]),[oa.ACTION]:this.flattenList(this.fieldActionOptionsList[oa.ACTION])}}get unSelectedOptionList(){let e=[...this.fieldActionOptionsList[oa.FIELD]],t=[...this.fieldActionOptionsList[oa.ACTION]];return e=this.filterListByValue(e,this.value),t=this.filterListByValue(t,this.value),{[oa.FIELD]:e,[oa.ACTION]:t}}get selectedOptionList(){let e=[...this.fieldActionOptionsList[oa.FIELD]],t=[...this.fieldActionOptionsList[oa.ACTION]];return e=this.getListByValue(this.value,oa.FIELD),t=this.getListByValue(this.value,oa.ACTION),{[oa.FIELD]:e,[oa.ACTION]:t}}onFormChange(e,t=!1){const i=this.mergeChild(e).map(e=>{var i,r,o,n,a,l,s;if(!e||!e.name)return e;if(t){const t=Object.assign(Object.assign({},e),{type:null!==(i=e.type)&&void 0!==i?i:this.widgetType,children:null!==(o=null===(r=e.children)||void 0===r?void 0:r.map(e=>this.deepCopy(e)))&&void 0!==o?o:null});return delete t.modelDefinition,t}return{name:e.name,label:e.label,model:e.model,type:null!==(n=e.type)&&void 0!==n?n:this.widgetType,sort:e.sort,properties:null!==(a=e.properties)&&void 0!==a?a:null,children:null!==(s=null===(l=e.children)||void 0===l?void 0:l.map(e=>this.slimDeepCopy(e)))&&void 0!==s?s:null}});this.change(i)}queryReferences(e,t=this.widgetType){return(0,r.sH)(this,void 0,void 0,function*(){return t===oa.FIELD?this.queryFieldsByModel(e):t===oa.ACTION?this.queryActionsByModel(e):void 0})}updateExsitValue(e){const t=this.value.map(e=>this.deepCopy(e));this.onFormChange(this.updateUniqueValue(t,e),!0)}updateUniqueValue(e,t,i){return e.map(e=>{var r,o;return e.name===t.name&&e.model===t.model&&(null!==i&&void 0!==i?i:null)===(null!==(r=t.parentName)&&void 0!==r?r:null)?t:((null===(o=e.children)||void 0===o?void 0:o.length)&&(e.children=this.updateUniqueValue(e.children,t,e.name)),e)})}mergeChild(e){const t=[];return e.forEach(e=>{var i;if(!e||!(null===e||void 0===e?void 0:e.name))return void t.push(e);const r=t.findIndex(t=>t.name===e.name);r>-1?t.splice(r,1,Object.assign(Object.assign({},t[r]),{children:null===(i=t[r].children)||void 0===i?void 0:i.concat(e.children)})):t.push(e)}),t}deepCopy(e){var t;if(!e)return e;const i=Object.assign(Object.assign({},e),{type:null!==(t=e.type)&&void 0!==t?t:this.widgetType,children:e.children?e.children.map(e=>this.deepCopy(e)):null});return delete i.modelDefinition,i}slimDeepCopy(e){var t,i;return e?{name:e.name,model:e.model,label:e.label,sort:e.sort,type:null!==(t=e.type)&&void 0!==t?t:this.widgetType,properties:null!==(i=e.properties)&&void 0!==i?i:null,children:e.children?e.children.map(e=>this.slimDeepCopy(e)):null}:e}flattenList(e,t=void 0,i=void 0){if(!(null===e||void 0===e?void 0:e.length))return[];const r=[];return e.filter(e=>null!==e&&void 0!==e).forEach(e=>{var o;(null===(o=e.children)||void 0===o?void 0:o.length)&&r.push(...this.flattenList(e.children,e.model,e.name)),r.push(Object.assign(Object.assign({},e),{parentModel:t,parentName:i,children:[]}))}),r}getListByValue(e,t){var i;return(null===(i=this.fieldActionOptionsListFlattend[t])||void 0===i?void 0:i.length)&&(null===e||void 0===e?void 0:e.length)?e.filter(e=>null!==e&&void 0!==e).map(e=>{var i;const r=this.fieldActionOptionsListFlattend[t].find(i=>i.name===e.name&&i.model===e.model&&t===e.type),o=(null===(i=e.children)||void 0===i?void 0:i.length)?this.getListByValue(e.children,t):[];return r?Object.assign(Object.assign({},r),{children:o}):Object.assign(Object.assign({},e),{displayName:e.label,deleted:!0,isLeaf:!o.length,children:o})}):[]}filterListByValue(e,t){return(null===e||void 0===e?void 0:e.length)?(null===t||void 0===t?void 0:t.length)?e.filter(e=>{var i,r,o;const n=null===(i=e.children)||void 0===i?void 0:i.length,a=t.findIndex(t=>t.name===e.name&&t.model===e.model);return n?!(a>-1&&(null===(r=t[a].children)||void 0===r?void 0:r.length)===(null===(o=e.children)||void 0===o?void 0:o.length)):a<0}).map(e=>{var i,r,o;const n=t.findIndex(t=>t.name===e.name&&t.model===e.model),a=(null===(i=e.children)||void 0===i?void 0:i.length)&&(null===(o=null===(r=t[n])||void 0===r?void 0:r.children)||void 0===o?void 0:o.length);return Object.assign(Object.assign({},e),{children:a?this.filterListByValue(e.children,t[n].children):e.children})}):e:null}queryReferencesWithIdle(e,t){let i=0;const r=()=>{this.setReferencesChildren(e[i],t),i++,i<e.length&&requestIdleCallback(r)};requestIdleCallback(r)}setReferencesChildren(e,t){return(0,r.sH)(this,void 0,void 0,function*(){if(!e.references)return;const i=this.fieldActionOptionsList[t].findIndex(t=>t.name===e.name);if(!this.fieldActionOptionsList[t][i])return;if(i>-1&&this.fieldActionOptionsList[t][i].children)return;if(i<0)return;const r=yield this.queryReferences(e.references,t);this.fieldActionOptionsList[t][i].children=null===r||void 0===r?void 0:r.filter(e=>!e.references)})}queryFieldsByModel(e){var t;return(0,r.sH)(this,void 0,void 0,function*(){const i=yield D.Qvr.get(e);return this.withPreHandle(null!==(t=null===i||void 0===i?void 0:i.modelFields)&&void 0!==t?t:[],oa.FIELD)})}queryActionsByModel(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=yield ya(e);return this.withPreHandle(null!==t&&void 0!==t?t:[],oa.ACTION)})}withPreHandle(e,t){if(!(null===e||void 0===e?void 0:e.length))return[];const i=[];let r=[...e];return this.filterRelation&&(r=r.filter(e=>!(0,o.vq)(e.ttype))),r=r.map(e=>{const t=!(0,o.vq)(e.ttype);return!t&&e.references&&i.push(e),Object.assign(Object.assign({},e),{label:e.label||e.displayName,isLeaf:t})}),i.length&&this.queryReferencesWithIdle(i,t),r}getSelectOptions(){var e,t;return(0,r.sH)(this,void 0,void 0,function*(){const{model:i,referenceModel:r}=null!==(t=null===(e=this.currentInstance)||void 0===e?void 0:e.element)&&void 0!==t?t:{};if(!i)return;if(this.widgetType===oa.FIELD_ACTION){if(!this.fieldActionOptionsList[oa.FIELD].length){const e=yield this.queryFieldsByModel(null!==r&&void 0!==r?r:i);this.fieldActionOptionsList[oa.FIELD]=e}if(!this.fieldActionOptionsList[oa.ACTION].length){const e=yield this.queryActionsByModel(null!==r&&void 0!==r?r:i);this.fieldActionOptionsList[oa.ACTION]=e}return}let o=[];this.widgetType===oa.FIELD&&(this.fieldActionOptionsList[oa.FIELD].length||(o=yield this.queryFieldsByModel(null!==r&&void 0!==r?r:i),this.fieldActionOptionsList[oa.FIELD]=o)),this.widgetType===oa.ACTION&&(this.fieldActionOptionsList[oa.ACTION].length||(o=yield this.queryActionsByModel(null!==r&&void 0!==r?r:i),this.fieldActionOptionsList[oa.ACTION]=o))})}setMetaDataFields(){this.fieldsCommit&&this.fieldsCommit(this.itemData)}mounted(){super.mounted(),this.getSelectOptions(),this.setMetaDataFields()}}(0,r.Cg)([F.x0.Reactive()],ba.prototype,"filterRelation",null),(0,r.Cg)([F.x0.Reactive()],ba.prototype,"labelEditable",null),(0,r.Cg)([F.x0.Reactive()],ba.prototype,"widgetType",void 0),(0,r.Cg)([F.x0.Reactive(),F.x0.Inject()],ba.prototype,"currentInstance",void 0),(0,r.Cg)([F.x0.Inject()],ba.prototype,"fieldsCommit",void 0),(0,r.Cg)([F.x0.Reactive()],ba.prototype,"fieldActionOptionsList",void 0),(0,r.Cg)([F.x0.Reactive()],ba.prototype,"valueFlattend",null),(0,r.Cg)([F.x0.Reactive()],ba.prototype,"fieldActionOptionsListFlattend",null),(0,r.Cg)([F.x0.Reactive()],ba.prototype,"unSelectedOptionList",null),(0,r.Cg)([F.x0.Reactive()],ba.prototype,"selectedOptionList",null),(0,r.Cg)([F.x0.Method()],ba.prototype,"onFormChange",null),(0,r.Cg)([F.x0.Method()],ba.prototype,"queryReferences",null),(0,r.Cg)([F.x0.Method()],ba.prototype,"updateExsitValue",null);let Ca=class extends ba{constructor(){super(...arguments),this.widgetType=oa.ACTION}initialize(e){return super.initialize(e),this.setComponent(va),this}};(0,r.Cg)([F.x0.Reactive()],Ca.prototype,"widgetType",void 0),Ca=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,widget:"MetaPanelAction"}))],Ca);let xa=class extends ba{constructor(){super(...arguments),this.widgetType=oa.FIELD}initialize(e){return super.initialize(e),this.setComponent(va),this}};xa=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,widget:"MetaPanelField"}))],xa);var wa=i(75208);function Sa(e,t,i,r,o,n){const a=(0,l.g2)("detail-common-field");return(0,l.uX)(),(0,l.Wv)(a,{value:e.value,"empty-style":e.emptyStyle},null,8,["value","empty-style"])}var Ta=i(77283);const Ea=(0,l.pM)({components:{DetailCommonField:Ta.A},props:{value:{},emptyStyle:{type:String}}}),Aa=(0,v.A)(Ea,[["render",Sa]]),ka=Aa;let Da=class extends a.d4{initialize(e){return super.initialize(e),this.setComponent(ka),this}};function Fa(e,t,i,r,o,n){const a=(0,l.g2)("Toolbar"),d=(0,l.g2)("Editor");return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["form-rich-text",e.className])},[(0,l.bF)(a,{"editor-id":e.editorId,editor:e.editorRef,"default-config":e.toolbarConfig},null,8,["editor-id","editor","default-config"]),(0,l.bF)(d,{ref:"editorNodeRef","editor-id":e.editorId,"default-config":e.editorConfig,modelValue:e.defaultHtml,"onUpdate:modelValue":t[0]||(t[0]=t=>e.defaultHtml=t),onOnCreated:e.handleCreated,onOnFocus:e.focus,onOnBlur:e.onBlur,onOnChange:e.handleChange,style:(0,s.Tr)(e.editorStyle)},null,8,["editor-id","default-config","modelValue","onOnCreated","onOnFocus","onOnBlur","onOnChange","style"])],2)}Da=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({ttype:o.m1.Related,viewType:[o.qi.Form,o.qi.Search,o.qi.Detail]}))],Da);var Ra=i(23518),Oa=i(82499),Na=i(1309),$a=i(90284);function Ma(e,t){(new Ia).upload(e[0]).then(e=>{null===t||void 0===t||t(e)})}class Ia{upload(e){return(0,r.sH)(this,void 0,void 0,function*(){const{formData:t,downloadUrl:i}=yield this._initRequest(e);return new Promise((r,o)=>{this._initListeners(r,o,e,i),this._sendRequest(t)})})}abort(){this.xhr&&this.xhr.abort()}_initRequest(e){return(0,r.sH)(this,void 0,void 0,function*(){const t=new XMLHttpRequest;this.xhr=t;const{singleUploadData:i,downloadUrl:r}=yield(0,j.VUv)(e.name),{uploadFormData:o,uploadUrl:n}=i,a=new FormData;return o&&Object.keys(o).forEach(e=>{a.append(e,o[e])}),a.append("file",e),t.open("POST",n),{formData:a,downloadUrl:r}})}_initListeners(e,t,i,o){const{xhr:n}=this,a=`Couldn't upload file: ${i.name}.`;n.addEventListener("error",()=>t(a)),n.addEventListener("abort",()=>t()),n.addEventListener("load",t=>(0,r.sH)(this,void 0,void 0,function*(){const r=yield(0,j.P8K)(t,o,i.size,i.name);e({default:r.url})})),n.upload&&n.upload.addEventListener("progress",e=>{e.lengthComputable})}_sendRequest(e){this.xhr.send(e)}}const La=(0,l.pM)({components:{Toolbar:$a.M,Editor:$a.K},props:["value","field","change","defaultValue","placeholder","blur","focus","readonly","disabled","maxLength","encode","height","richTextToolbarExcludeKeys"],setup(e){const t=`${Oa.Nf}-richtext-${Math.random().toString().slice(-5)}`,i=(0,te.KR)(""),o=(0,te.IJ)(),n=(0,l.EW)(()=>x.TM.toBoolean(e.readonly)),a=(0,l.EW)(()=>x.TM.toBoolean(e.disabled));let s=!1;const d=Reflect.get(window,"__lang");d!==j.zi_&&(0,Na.i18nChangeLanguage)("en");const c=(0,l.EW)(()=>({"form-rich-text-disabled":a.value,"form-rich-text-readonly":n.value})),u=(0,l.EW)(()=>({insertKeys:{index:0,keys:["uploadAttachment"]},excludeKeys:e.richTextToolbarExcludeKeys})),p=(0,l.EW)(()=>({placeholder:e.placeholder||`${(0,D.cAb)("请输入内容")}...`,readOnly:a.value||n.value,hoverbarKeys:{attachment:{menuKeys:["downloadAttachment"]}},MENU_CONF:{fontName:{},head:{},fontSize:{fontSizeList:[{name:"10px",value:"10px"},{name:"12px",value:"12px"},{name:"14px",value:"14px"},{name:"18px",value:"18px"},{name:"24px",value:"24px"},{name:"32px",value:"32px"},{name:"48px",value:"48px"}]},bold:{},italic:{},strikeThrough:{},underline:{},indent:{},lineHeight:{},foreColor:{},backColor:{},justify:{},list:{},todo:{},link:{},quote:{},splitLine:{},emoticon:{},image:{},table:{},code:{},undo:{},redo:{},uploadImage:{maxFileSize:10485760,maxNumberOfFiles:100,allowedFileTypes:["image/*"],customUpload(e,t){return(0,r.sH)(this,void 0,void 0,function*(){Ma([e],e=>t(e.default))})}},uploadVideo:{maxFileSize:104857600,maxNumberOfFiles:50,allowedFileTypes:["video/*"],customUpload(e,t){return(0,r.sH)(this,void 0,void 0,function*(){Ma([e],e=>t(e.default))})}},uploadAttachment:{maxFileSize:104857600,maxNumberOfFiles:50,customUpload(e,t){return(0,r.sH)(this,void 0,void 0,function*(){Ma([e],i=>t(e.name,i.default))})}}},EXTEND_CONF:{}}));(0,l.wB)(()=>e.value,()=>{setTimeout(()=>{var t;e.value&&(s||null===(t=e.focus)||void 0===t||t.call(e),s||!e.value&&!e.defaultValue?s=!1:e.encode?i.value=decodeURI(e.value||e.defaultValue):i.value=e.value||e.defaultValue,e.value||(i.value=""))},100)},{immediate:!0});const h=e=>{o.value=e},g=()=>{var t;null===(t=e.blur)||void 0===t||t.call(e),(0,Ra.A)(()=>{s=!1},110)},v=(0,l.EW)(()=>{const t={};return t.height=e.height||"400px",t.overflowY="hidden",t});(0,l.xo)(()=>{var e,t;null===(t=(e=o.value).destroy)||void 0===t||t.call(e)});const m=t=>{var i,r,o;const n=null===(i=t.getHtml)||void 0===i?void 0:i.call(t);""!==n?(n!==e.value&&(s=!0),null===(o=e.change)||void 0===o||o.call(e,n)):null===(r=e.change)||void 0===r||r.call(e,"")},f=(0,te.KR)(null);return(0,l.wB)(()=>e.placeholder,()=>{if(f.value){const t=f.value.$el.querySelector(".w-e-text-placeholder");t&&(t.innerHTML=e.placeholder)}}),{handleCreated:h,handleChange:m,onBlur:g,editorId:t,defaultHtml:i,editorRef:o,editorNodeRef:f,toolbarConfig:u,editorConfig:p,innerReadonly:n,innerDisabled:a,className:c,editorStyle:v}}}),_a=(0,v.A)(La,[["render",Fa]]),Pa=_a;let ja=class extends ge.w{initialize(e){return super.initialize(e),this.setComponent(Pa),this}get richTextToolbarExcludeKeys(){const{richTextToolbarExcludeKeys:e}=this.getDsl();return e?e.split(",").map(e=>e.trim()):[]}get encode(){const e=this.getDsl().encode;return!!e&&x.TM.toBoolean(e)}get height(){return j.WbJ.px(this.getDsl().height)}validator(){return(0,r.sH)(this,void 0,void 0,function*(){const e=this.encode&&this.value?decodeURI(this.value):this.value,t=yield this.validatorSpecific(e);return(0,$.mO)(t)?null==e?this.validatorSuccess():this.validateLength(e):t})}change(e){this.encode?super.change(encodeURI(e)):super.change(e)}};(0,r.Cg)([F.x0.Reactive()],ja.prototype,"richTextToolbarExcludeKeys",null),(0,r.Cg)([F.x0.Reactive()],ja.prototype,"encode",null),(0,r.Cg)([F.x0.Reactive()],ja.prototype,"height",null),(0,r.Cg)([F.x0.Method()],ja.prototype,"change",null),ja=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:o.m1.HTML}))],ja);const Va={class:"form-rich-text form-expression-rich-text"};function Ba(e,t,i,r,o,n){const a=(0,l.g2)("Toolbar"),d=(0,l.g2)("Editor");return(0,l.uX)(),(0,l.CE)("div",Va,[(0,l.bF)(a,{"editor-id":e.editorId,editor:e.editorRef,"default-config":e.toolbarConfig,mode:e.mode},null,8,["editor-id","editor","default-config","mode"]),(0,l.bF)(d,{"editor-id":e.editorId,"default-config":e.editorConfig,mode:e.mode,modelValue:e.defaultHtml,"onUpdate:modelValue":t[0]||(t[0]=t=>e.defaultHtml=t),onOnCreated:e.handleCreated,onOnDestroyed:e.handleDestroyed,onOnChange:e.handleChange,style:(0,s.Tr)(e.editorStyle)},null,8,["editor-id","default-config","mode","modelValue","onOnCreated","onOnDestroyed","onOnChange","style"])])}const Ha="<p><br></p>",Wa="exp-modal-in-body",Ua=(0,l.pM)({components:{Editor:$a.K,Toolbar:$a.M},props:{contextItems:Array,change:{type:Function},value:{type:String},height:{type:String},richTextToolbarExcludeKeys:{type:Array,default:()=>[]}},setup(e){const t=`${Oe.$OM}-${Math.random().toString().slice(-5)}`,i=(0,te.KR)(""),r=(0,te.KR)(!1),o=(0,te.IJ)(),n=Reflect.get(window,"__lang");n!==j.zi_&&(0,Na.i18nChangeLanguage)("en");const a=(0,l.EW)(()=>({insertKeys:{index:28,keys:[Oe.tmx.key]},excludeKeys:[...e.richTextToolbarExcludeKeys||[],"fullScreen","uploadImage","insertVideo"],modalAppendToBody:!0})),s=(0,l.EW)(()=>({placeholder:`${(0,D.cAb)("请输入内容")}...`,EXTEND_CONF:{contextItems:e.contextItems}})),d=(0,l.EW)(()=>{const t={};return t.height=e.height||"400px",t.overflowY="hidden",t});(0,l.wB)(()=>e.contextItems,e=>{if(!e)return;const t=o.value;if(null==t)return;const i=t.getConfig();i.EXTEND_CONF&&(i.EXTEND_CONF["contextItems"]=e)},{deep:!0,immediate:!0}),(0,l.wB)(()=>e.value,()=>{e.value&&(i.value=e.value)},{immediate:!0});const c=[],u=e=>{o.value=e,e.on("modalOrPanelShow",e=>{if("modal"!==e.type)return;const{$elem:t}=e,[i]=t;if(i){const e=[Wa],t=[Wa,(0,x._N)(8)].join("_");c.push(t),e.push(t),[...i.children].find(e=>e.className.includes(Oe.Fjq))&&e.push(Oe.Y1G),i.className=[i.className,...e].join(" ")}})},p=e=>{if(!c.length)return;const t=document.querySelectorAll(c.map(e=>`.${e}`).join(", "));t.forEach(e=>{e.remove()})};(0,l.xo)(()=>{var e,t;null===(t=(e=o.value).destroy)||void 0===t||t.call(e)});const h=t=>{var i,o,n;const a=null===(i=t.getHtml)||void 0===i?void 0:i.call(t);a!==Ha?(r.value=!0,null===(n=e.change)||void 0===n||n.call(e,a)):null===(o=e.change)||void 0===o||o.call(e,"")};return{editorStyle:d,editorId:t,mode:"simple",defaultHtml:i,toolbarConfig:a,editorConfig:s,editorRef:o,handleCreated:u,handleDestroyed:p,handleChange:h}}}),qa=(0,v.A)(Ua,[["render",Ba]]),za=qa;let Ga=class extends ja{constructor(){super(...arguments),this.modelList=[]}initialize(e){return super.initialize(e),this.setComponent(za),this}get contextItems(){return this.modelList.map(e=>({name:e.id,displayName:e.label,models:[e&&e.model],modelFields:e.modelFields}))}};(0,r.Cg)([F.x0.Reactive()],Ga.prototype,"contextItems",null),(0,r.Cg)([F.x0.Reactive()],Ga.prototype,"modelList",void 0),Ga=(0,r.Cg)([n.DF.ClassFactory(a.d4.Token({viewType:o.qi.Form,ttype:[o.m1.Text,o.m1.HTML],widget:["ExpressionRichText"]}))],Ga)},4792:(e,t,i)=>{i.d(t,{w:()=>h});var r=i(15215),o=i(78422),n=i(70164),a=i(30717),l=i(47444),s=i(21879),d=i(97859),c=i(77679),u=i(75208),p=i(67376);class h extends u.t{initialize(e){return super.initialize(e),this.setComponent(p.A),this}get maxLength(){const e=this.getDsl().maxLength;if(e){const e=this.getLimitLength("maxLength");if((0,s.A)(e))return e}return this.field.store?this.field.max||this.field.size:e||1024}get minLength(){const e=this.getDsl().minLength;return e?this.getLimitLength("minLength")||0:this.field.min||0}get showCount(){const e=this.getDsl().showCount;return e||!1}get patternType(){const e=this.getDsl().patternType;if(e)return this.executeExpression(e)}get pattern(){const e=this.getDsl().pattern;if(e)return e}get clearSetEmpty(){const e=this.getDsl().clearSetEmpty;return!!(0,d.A)(e)||(e||!1)}get crypto(){return this.getDsl().crypto||!1}get visibleIcon(){return this.getDsl().visibleIcon||"oinone-visible"}get invisibleIcon(){return this.getDsl().invisibleIcon||"oinone-invisible"}get type(){const e=this.executeExpression(this.getDsl().type,a.NZc.TEXT);return e||a.NZc.TEXT}getLimitLength(e){const t=this.getDsl()[e];if(t&&t.length){const e=this.executeExpression(t,0);return Math.floor(e)}return null}validator(){return(0,r.sH)(this,void 0,void 0,function*(){const e=yield this.validatorSpecific(this.value);return(0,c.mO)(e)?null==this.value?this.validatorSuccess():this.validateLength(this.value):e})}validateLength(e){const t=(0,d.A)(e)?0:e.length,{minLength:i,maxLength:r}=this;return!(0,n.Po)(e)&&!(0,d.A)(r)&&t>r?this.validatorError(`${(0,o.cAb)("最大长度为")}${r}`):!(0,n.Po)(e)&&!(0,d.A)(i)&&t<i?this.validatorError(`${(0,o.cAb)("最小长度为")}${i}`):this.validatorSuccess()}change(e){let t=e;e||(t=null),super.change(t)}}(0,r.Cg)([l.x0.Reactive()],h.prototype,"maxLength",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"minLength",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"showCount",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"patternType",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"pattern",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"clearSetEmpty",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"crypto",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"visibleIcon",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"invisibleIcon",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"type",null),(0,r.Cg)([l.x0.Reactive()],h.prototype,"getLimitLength",null),(0,r.Cg)([l.x0.Method()],h.prototype,"change",null)},6668:(e,t,i)=>{i.d(t,{A:()=>m});var r=i(20641),o=i(53751);const n={key:0,class:"media-video"},a=["src"],l=(0,r.Lk)("div",{class:"media-video-play"},[(0,r.Lk)("i",{class:"iconfont oinone-zantingbofang"})],-1);function s(e,t,i,s,d,c){const u=(0,r.g2)("a-image"),p=(0,r.g2)("oio-empty"),h=(0,r.g2)("preview-media");return(0,r.uX)(),(0,r.CE)("div",{class:"form-media-widget-internal detail-media-widget-internal",onClick:t[3]||(t[3]=(0,o.D$)(()=>{},["stop"]))},[e.currentValue.src?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"form-media-widget-item",onClick:t[1]||(t[1]=(...t)=>e.onPreview&&e.onPreview(...t))},[e.currentValue.video?((0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("video",{src:e.currentValue.src,alt:"",style:{width:"100%",height:"100%"}},null,8,a),l])):((0,r.uX)(),(0,r.Wv)(u,{key:1,src:e.currentValue.src,alt:"",onClick:t[0]||(t[0]=(0,o.D$)(()=>{},["stop"])),style:{width:"100%",height:"100%"}},null,8,["src"]))])):((0,r.uX)(),(0,r.Wv)(p,{key:1,"empty-style":e.emptyStyle},null,8,["empty-style"])),(0,r.bF)(h,{modelValue:e.showReview,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showReview=t),type:e.review.video?"video":"image",source:e.review.src},null,8,["modelValue","type","source"])])}var d=i(50953),c=i(25195),u=i(14136),p=i(91702);const h=(0,r.pM)({props:{value:{type:String},defaultValue:{type:String},emptyStyle:{type:String}},components:{PreviewMedia:u.A,OioEmpty:c.fwf},setup(e){const t=(0,d.KR)({}),i=(0,d.KR)(!1),{realValue:o}=(0,p.P1)(e,!1),n=(0,r.EW)(()=>{const e=c.rlM.find(e=>(o.value||"").endsWith(e));return{video:!!e,src:o.value}}),a=()=>{t.value=n.value,i.value=!0};return{currentValue:n,review:t,showReview:i,onPreview:a}}});var g=i(66262);const v=(0,g.A)(h,[["render",s]]),m=v},9322:(e,t,i)=>{i.d(t,{A:()=>C});var r=i(82499),o=i(30717),n=i(50896),a=i(20641),l=i(53751),s=i(78603),d=i(19294),c=i(90033);const u=["title"],p={class:"ant-dropdown-menu-title-content"};function h(e,t,i,r,o,n){return(0,a.uX)(),(0,a.CE)("li",{class:(0,c.C4)(["ant-dropdown-menu-item ant-dropdown-menu-item-only-child",{"ant-dropdown-menu-item-disabled":i.disabled}]),title:i.title},[(0,a.Lk)("span",p,[(0,a.RG)(e.$slots,"default")])],10,u)}const g={name:"MenuItem",props:{title:String,disabled:Boolean}};var v=i(66262);const m=(0,v.A)(g,[["render",h]]),f=m,y=(0,a.pM)({name:"DefaultAction",components:{OioButton:o._5z,OioPopconfirm:o.VjG,AMenuItem:n.A},inheritAttrs:!1,props:Object.assign(Object.assign({},d.rC),{enableConfirm:{type:Boolean,default:!1},visibleConfirm:{type:Boolean,default:!1},changeVisibleConfirm:{type:Function,default:()=>{}}}),setup(e){const t=(0,s.Uo)();(0,s.oy)({});const i=(0,d.y3)(e),n=(0,a.EW)(()=>{var i;let n;e.label&&(n=(0,a.bF)("span",{class:`${r.Nf}-action-content`},e.label));const l={ref:"origin",type:t.isSelectItem.value?o.VQ.link:e.type,bizStyle:e.bizStyle,loading:e.loading,disabled:e.disabled,title:e.disabled?e.disabledTitle||e.help||e.label:e.help||e.label,icon:e.icon,"data-action-name":null===(i=e.action)||void 0===i?void 0:i.name};return e.enableConfirm||(l["onClick"]=()=>{var t;return null===(t=e.validateAndClick)||void 0===t?void 0:t.call(e,e.action,!0)}),(0,a.bF)(o._5z,l,()=>n?[n]:[])}),l=(0,a.EW)(()=>e.enableConfirm?(0,a.bF)(o.VjG,{title:e.confirmTitle,placement:e.confirmPosition,text:e.confirm,enterText:e.enterText,cancelText:e.cancelText,visible:e.visibleConfirm,"onUpdate:visible":e.changeVisibleConfirm,condition:i.condition,confirmCallback:()=>{var t;return null===(t=e.validateAndClick)||void 0===t?void 0:t.call(e,e.action,!0)}},{default:()=>[n.value]}):n.value);return Object.assign(Object.assign({ButtonVNode:n,PopConfirmVNode:l},i),t)},render(){return this.isSelectItem?this.invisible?[]:(0,a.bF)(f,{disabled:this.disabled,title:this.disabled?this.disabledTitle:this.label},{default:()=>[this.PopConfirmVNode,...o.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default()]}):(0,a.bo)((0,a.bF)("div",Object.assign(Object.assign({},o.$pj.collectionBasicProps(this.$attrs,[`${r.Nf}-action-item`])),{"data-invisible":this.invisible,onClick:(0,l.D$)(()=>{},["stop","prevent"])}),[this.PopConfirmVNode,...o.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default()]),[[l.aG,!this.invisible]])}}),b=y,C=b},10257:(e,t,i)=>{i.d(t,{u6:()=>D,BC:()=>F,kW:()=>$});var r=i(25195),o=i(20641);const n={flexDirection:(0,o.EW)(()=>r.boZ.Row),wrap:(0,o.EW)(()=>!0)},a=Symbol("OioDefaultRowContext"),l=e=>{(0,o.Gt)(a,Object.assign(Object.assign({},n),e))},s=()=>(0,o.WQ)(a,n);var d=i(15215),c=i(16022),u=i(83247),p=i(47444),h=i(97859),g=i(66401),v=i(9703),m=i(91702),f=i(30717),y=i(53751);const b=(0,o.pM)({name:"DefaultBlock",components:{OioBlock:f.FJD},inheritAttrs:!1,props:Object.assign(Object.assign({},f.rk0),{template:{type:Object},layout:{type:[String,Object]},invisible:{type:Boolean,default:!1}}),setup(e){return(0,f.qY4)(e),{}},render(){var e,t;return(0,o.bo)((0,o.bF)(f.FJD,Object.assign(Object.assign({},f.$pj.convert(f.rk0,c.Gf.cast(this))),f.$pj.collectionBasicProps(this.$attrs,c.MZ.append([],c.Gf.cast(null===(e=this.template)||void 0===e?void 0:e.class)),c.Gf.cast(null===(t=this.template)||void 0===t?void 0:t.style))),f.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}])),[[y.aG,!this.invisible]])}}),C=b,x=C;let w=class extends m.jp{constructor(){super(...arguments),this.defaultGutter=r.jVs,this.inline=!1}initialize(e){return super.initialize(e),this.setComponent(x),this}get flex(){let e=c.TM.toBoolean(this.getDsl().flex);return(0,h.A)(e)&&(e=!1),e}get flexDirection(){var e;return null===(e=this.getDsl().flexDirection)||void 0===e?void 0:e.toLowerCase()}get gutter(){const{gutter:e}=this.getDsl();return(0,g.A)(e)?this.defaultGutter:(0,v.A)(e)?r.ljb.convertGutter(e,this.defaultGutter):e}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}};(0,d.Cg)([p.x0.Reactive()],w.prototype,"inline",void 0),(0,d.Cg)([p.x0.Reactive()],w.prototype,"flex",null),(0,d.Cg)([p.x0.Reactive()],w.prototype,"flexDirection",null),(0,d.Cg)([p.x0.Reactive()],w.prototype,"gutter",null),(0,d.Cg)([p.x0.Reactive()],w.prototype,"layout",null),w=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"block"}))],w);var S=i(78422),T=i(429);const E=(0,o.pM)({name:"DefaultCol",components:{OioCol:f.uqX},inheritAttrs:!1,props:Object.assign(Object.assign({},f.cgI),{template:{type:Object},invisible:{type:Boolean,default:!1},allMounted:{type:Function},mode:{type:[String,Object]},width:{type:[String,Number]},minWidth:{type:[String,Number]},maxWidth:{type:[String,Number]}}),setup(e){const{flexDirection:t,wrap:i}=s();return(0,p.Ll)({allMounted:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)},allMountedUpdate:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)}}),l({}),{rowFlexDirection:t,rowWrap:i}},render(){const{$attrs:e,$slots:t,template:i,mode:r,invisible:n,rowFlexDirection:a,rowWrap:l}=this,s=[];r===f.bG4.FULL?s.push("default-col-full"):a===f.boZ.Column?s.push("default-col-flex-auto"):r!==f.bG4.AUTO||l||s.push("default-col-max-width-unset");let d=Object.assign(Object.assign({},f.$pj.convert(f.cgI,c.Gf.cast(this))),f.$pj.collectionBasicProps(e,c.MZ.append(s,c.Gf.cast(null===i||void 0===i?void 0:i.class)),c.Gf.cast(null===i||void 0===i?void 0:i.style)));r&&[f.bG4.FULL,f.bG4.AUTO].includes(r)||a===f.boZ.Column?(d=Object.assign(Object.assign({},d),{fixed:!1}),delete d.span):(d=Object.assign(Object.assign({},d),{fixed:!0}),delete d.flex);const u=f.WbJ.px(this.width),p=f.WbJ.px(this.minWidth),h=f.WbJ.px(this.maxWidth);if(u||p||h){const e={};u&&(e.minWidth=u,e.maxWidth=u),p&&(e.minWidth=p),h&&(e.maxWidth=h),d.style=e}return(0,o.bo)((0,o.bF)(f.uqX,d,f.$pj.collectionSlots(t,[{origin:"default",isNotNull:!0}])),[[y.aG,!n]])}}),A=E,k=A;let D=class extends m.jp{constructor(e){super(),this.rowWidget=e}initialize(e){return super.initialize(e),this.setComponent(k),this}get offset(){const{cols:e}=this.rowWidget;let t=c.A5.toNumber(this.getDsl().offset);return(!t||t<=0)&&(t=0),r.whS/e*t}get span(){const{cols:e}=this.rowWidget;let t=c.Xx.ofNullable(this.getDsl().colSpan).orElse(this.getDsl().span);if((0,v.A)(t)){const i=S._Yj[t.toUpperCase()];i&&(t=e*i)}let i=c.A5.toNumber(t);return((0,h.A)(i)||(0,T.A)(i)||i<=0)&&(i=e),i>e&&(i=e),r.whS/e*i}get mode(){var e;let{mode:t}=this.getDsl();return(0,h.A)(t)&&(t=this.getDsl().widthType),null===(e=null===t||void 0===t?void 0:t.toLowerCase)||void 0===e?void 0:e.call(t)}get width(){return this.getDsl().width}get minWidth(){return this.getDsl().minWidth}get maxWidth(){return this.getDsl().maxWidth}};(0,d.Cg)([p.x0.Reactive()],D.prototype,"offset",null),(0,d.Cg)([p.x0.Reactive()],D.prototype,"span",null),(0,d.Cg)([p.x0.Reactive()],D.prototype,"mode",null),(0,d.Cg)([p.x0.Reactive()],D.prototype,"width",null),(0,d.Cg)([p.x0.Reactive()],D.prototype,"minWidth",null),(0,d.Cg)([p.x0.Reactive()],D.prototype,"maxWidth",null),D=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"col"}))],D);class F extends D{get mode(){return super.mode||r.bG4.FULL}}(0,d.Cg)([p.x0.Reactive()],F.prototype,"mode",null);const R=(0,o.pM)({name:"DefaultRow",components:{OioRow:f.mVZ},inheritAttrs:!1,props:Object.assign(Object.assign({},f.I50),{template:{type:Object},invisible:{type:Boolean,default:!1},allMounted:{type:Function},layout:{type:[String,Object]},flexDirection:{type:String}}),setup(e){return(0,p.Ll)({allMounted:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)},allMountedUpdate:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)}}),(0,f.qY4)(e),l({flexDirection:(0,o.EW)(()=>e.flexDirection||f.boZ.Row),wrap:(0,o.EW)(()=>e.wrap)}),{}},render(){const{$attrs:e,$slots:t,template:i,invisible:r,flexDirection:n}=this,a=c.Gf.cast(f.WbJ.parse(null===i||void 0===i?void 0:i.style)||{});return!a.flexDirection&&n&&(a.flexDirection=n),(0,o.bo)((0,o.bF)(f.mVZ,Object.assign(Object.assign({},f.$pj.convert(f.I50,c.Gf.cast(this))),f.$pj.collectionBasicProps(e,c.MZ.append([],c.Gf.cast(null===i||void 0===i?void 0:i.class)),a)),f.$pj.collectionSlots(t,[{origin:"default",isNotNull:!0}])),[[y.aG,!r]])}}),O=R,N=O;let $=class extends m.jp{get getDefaultGutters(){const e=(0,S.GYs)();switch(e){case"large":return r.jVs;case"medium":return r.Eiv;default:return r.U48}}get defaultGutter(){return this.customDefaultGutter?this.customDefaultGutter:this.isCard?r.U48:this.getDefaultGutters}initialize(e){return super.initialize(e),this.setComponent(N),this}get align(){var e;return null===(e=this.getDsl().align)||void 0===e?void 0:e.toLowerCase()}get gutter(){const{gutter:e,rowGutter:t,colGutter:i}=this.getDsl();return(0,h.A)(t)&&(0,h.A)(i)?this.containersGutter?this.containersGutter:(0,g.A)(e)?this.defaultGutter:(0,v.A)(e)?r.ljb.convertGutter(e,this.defaultGutter):e:[i,t]}get justify(){var e;return null===(e=this.getDsl().justify)||void 0===e?void 0:e.toLowerCase()}get flexLayout(){var e;return null===(e=this.getDsl().flexLayout)||void 0===e?void 0:e.toLowerCase()}get flexDirection(){var e;return null===(e=this.getDsl().flexDirection)||void 0===e?void 0:e.toLowerCase()}get wrap(){let{wrap:e}=this.getDsl();return(0,h.A)(e)&&(e=!0),c.TM.toBoolean(e)}};(0,d.Cg)([p.x0.Reactive()],$.prototype,"getDefaultGutters",null),(0,d.Cg)([p.x0.Reactive(),p.x0.Inject()],$.prototype,"isCard",void 0),(0,d.Cg)([p.x0.Reactive()],$.prototype,"align",null),(0,d.Cg)([p.x0.Reactive(),p.x0.Inject()],$.prototype,"containersGutter",void 0),(0,d.Cg)([p.x0.Reactive()],$.prototype,"gutter",null),(0,d.Cg)([p.x0.Reactive()],$.prototype,"justify",null),(0,d.Cg)([p.x0.Reactive()],$.prototype,"flexLayout",null),(0,d.Cg)([p.x0.Reactive()],$.prototype,"flexDirection",null),(0,d.Cg)([p.x0.Reactive()],$.prototype,"wrap",null),$=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"row"}))],$);const M=(0,o.pM)({name:"DefaultContainer",components:{OioRow:f.mVZ},inheritAttrs:!1,props:Object.assign(Object.assign({},f.I50),{template:{type:Object},invisible:{type:Boolean,default:!1},allMounted:{type:Function},layout:{type:[String,Object]},flexDirection:{type:String},showInternalBorder:{type:Boolean,default:!1},rowGutter:{type:String,default:""},colGutter:{type:String,default:""},borderTop:{type:Boolean,default:!1},borderLeft:{type:Boolean,default:!1},borderRight:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},borderSize:{type:String,default:"1px"},borderColor:{type:String,default:"var(--oio-border-color)"},borderStyle:{type:String,default:"solid"},padding:{type:String,default:"0"},paddingTop:{type:String,default:"0"},paddingLeft:{type:String,default:"0"},paddingBottom:{type:String,default:"0"},paddingRight:{type:String,default:"0"},margin:{type:String,default:"0"},marginTop:{type:String,default:"0"},marginLeft:{type:String,default:"0"},marginBottom:{type:String,default:"0"},marginRight:{type:String,default:"0"}}),setup(e){const t=(0,o.EW)(()=>{var t;const i=`${e.borderSize} ${e.borderStyle} ${e.borderColor}`,r=Object.assign(Object.assign({},c.Gf.cast(f.WbJ.parse(null===(t=e.template)||void 0===t?void 0:t.style)||{})),{flexDirection:e.flexDirection||"",padding:e.padding,margin:e.margin,borderTop:e.borderTop?i:"",borderLeft:e.borderLeft?i:"",borderRight:e.borderRight?i:"",borderBottom:e.borderBottom?i:"",height:"100%"});return r}),i=(0,o.EW)(()=>{const t={marginLeft:`calc(-${e.colGutter} / 2)`,marginRight:`calc(-${e.colGutter} / 2)`};return t});return(0,p.Ll)({allMounted:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)},allMountedUpdate:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)}}),(0,f.qY4)(e),l({flexDirection:(0,o.EW)(()=>e.flexDirection||f.boZ.Row),wrap:(0,o.EW)(()=>e.wrap)}),{style:t,offsetLeftAndRight:i}},render(){const{$attrs:e,$slots:t,template:i,invisible:r,style:n,offsetLeftAndRight:a}=this;return(0,o.bo)((0,o.bF)("div",{class:"default-container-wrapper",style:a},[(0,o.bF)(f.mVZ,Object.assign(Object.assign(Object.assign({},f.$pj.convert(f.I50,c.Gf.cast(this))),f.$pj.collectionBasicProps(e,c.MZ.append([],c.Gf.cast(null===i||void 0===i?void 0:i.class)),n)),{gutter:this.gutter}),f.$pj.collectionSlots(t,[{origin:"default",isNotNull:!0}]))]),[[y.aG,!r]])}}),I=M,L=I;let _=class extends ${constructor(){super(...arguments),this.style={height:"100%"}}initialize(e){return super.initialize(e),this.setComponent(L),this}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}get allInvisible(){const{allInvisible:e}=this.getDsl();return!(0,h.A)(e)&&c.TM.toBoolean(e)}get showInternalBorder(){return this.border}get currentGutter(){return this.gutter}get rowGutter(){return r.WbJ.px(this.gutter[1]||0)}get colGutter(){return r.WbJ.px(this.gutter[0]||0)}get border(){const{border:e=!1}=this.getDsl();return!!e}get borderTop(){const{borderTop:e=!1}=this.getDsl();return!!e||this.border}get borderRight(){const{borderRight:e=!1}=this.getDsl();return!!e||this.border}get borderBottom(){const{borderBottom:e=!1}=this.getDsl();return!!e||this.border}get borderLeft(){const{borderLeft:e=!1}=this.getDsl();return!!e||this.border}get borderSize(){const{borderSize:e=1}=this.getDsl();return r.WbJ.px(e)}get borderColor(){const{borderColor:e}=this.getDsl();return e}get borderStyle(){const{borderStyle:e}=this.getDsl();return null===e||void 0===e?void 0:e.toLocaleLowerCase()}get paddingTop(){const{paddingTop:e=0}=this.getDsl();return r.WbJ.px(e)}get paddingBottom(){const{paddingBottom:e=0}=this.getDsl();return r.WbJ.px(e)}get paddingLeft(){const{paddingLeft:e=0}=this.getDsl();return r.WbJ.px(e)}get paddingRight(){const{paddingRight:e=0}=this.getDsl();return r.WbJ.px(e)}get padding(){return`${this.paddingTop} ${this.paddingRight} ${this.paddingBottom} ${this.paddingLeft}`}get marginTop(){const{marginTop:e=0}=this.getDsl();return r.WbJ.px(e)}get marginBottom(){const{marginBottom:e=0}=this.getDsl();return r.WbJ.px(e)}get marginLeft(){const{marginLeft:e=0}=this.getDsl();return r.WbJ.px(e)}get marginRight(){const{marginRight:e=0}=this.getDsl();return r.WbJ.px(e)}get margin(){return`${this.marginTop} ${this.marginRight} ${this.marginBottom} ${this.marginLeft}`}};(0,d.Cg)([p.x0.Reactive()],_.prototype,"style",void 0),(0,d.Cg)([p.x0.Reactive()],_.prototype,"layout",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"allInvisible",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"showInternalBorder",null),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide("containersGutter")],_.prototype,"currentGutter",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"rowGutter",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"colGutter",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"border",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"borderTop",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"borderRight",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"borderBottom",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"borderLeft",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"borderSize",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"borderColor",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"borderStyle",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"paddingTop",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"paddingBottom",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"paddingLeft",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"paddingRight",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"padding",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"marginTop",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"marginBottom",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"marginLeft",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"marginRight",null),(0,d.Cg)([p.x0.Reactive()],_.prototype,"margin",null),_=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"container"}))],_);const P=(0,o.pM)({name:"DefaultContainers",components:{OioRow:f.mVZ},inheritAttrs:!1,props:Object.assign(Object.assign({},f.I50),{template:{type:Object},invisible:{type:Boolean,default:!1},allMounted:{type:Function},layout:{type:[String,Object]},flexDirection:{type:String},showInternalBorder:{type:Boolean,default:!1},rowGutter:{type:String,default:""},colGutter:{type:String,default:""},borderTop:{type:Boolean,default:!1},borderLeft:{type:Boolean,default:!1},borderRight:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},borderSize:{type:String,default:"1px"},borderColor:{type:String,default:"var(--oio-border-color)"},borderStyle:{type:String,default:"solid"},padding:{type:String,default:"0"},paddingTop:{type:String,default:"0"},paddingLeft:{type:String,default:"0"},paddingBottom:{type:String,default:"0"},paddingRight:{type:String,default:"0"},margin:{type:String,default:"0"},marginTop:{type:String,default:"0"},marginLeft:{type:String,default:"0"},marginBottom:{type:String,default:"0"},marginRight:{type:String,default:"0"}}),setup(e){const t=(0,o.EW)(()=>{var t;const i=`${e.borderSize} ${e.borderStyle} ${e.borderColor}`,r=Object.assign(Object.assign({},c.Gf.cast(f.WbJ.parse(null===(t=e.template)||void 0===t?void 0:t.style)||{})),{flexDirection:e.flexDirection||"",padding:e.padding,margin:e.margin,borderTop:e.borderTop?i:"",borderLeft:e.borderLeft?i:"",borderRight:e.borderRight?i:"",borderBottom:e.borderBottom?i:"",rowGap:e.rowGutter});return r});return(0,p.Ll)({allMounted:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)},allMountedUpdate:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)}}),(0,f.qY4)(e),l({flexDirection:(0,o.EW)(()=>e.flexDirection||f.boZ.Row),wrap:(0,o.EW)(()=>e.wrap)}),{style:t}},render(){const{$attrs:e,$slots:t,template:i,invisible:r,style:n}=this;return(0,o.bo)((0,o.bF)(f.mVZ,Object.assign(Object.assign(Object.assign({},f.$pj.convert(f.I50,c.Gf.cast(this))),f.$pj.collectionBasicProps(e,c.MZ.append([],c.Gf.cast(null===i||void 0===i?void 0:i.class)),n)),{gutter:[]}),f.$pj.collectionSlots(t,[{origin:"default",isNotNull:!0}])),[[y.aG,!r]])}}),j=P,V=j;function B(e,t=3){const i=[];for(const r of e)r instanceof _?r.getChildren().forEach(e=>i.push(e)):t>=1&&B(r.getChildren(),t-1).forEach(e=>i.push(e));return i}let H=class extends ${initialize(e){return super.initialize(e),this.setComponent(V),this}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}get showInternalBorder(){return this.border}get currentGutter(){return this.gutter}get rowGutter(){return r.WbJ.px(this.gutter[1]||0)}get colGutter(){return r.WbJ.px(this.gutter[0]||0)}get border(){const{border:e=!1}=this.getDsl();return!!e}get borderTop(){const{borderTop:e=!1}=this.getDsl();return!!e||this.border}get borderRight(){const{borderRight:e=!1}=this.getDsl();return!!e||this.border}get borderBottom(){const{borderBottom:e=!1}=this.getDsl();return!!e||this.border}get borderLeft(){const{borderLeft:e=!1}=this.getDsl();return!!e||this.border}get borderSize(){const{borderSize:e=1}=this.getDsl();return r.WbJ.px(e)}get borderColor(){const{borderColor:e}=this.getDsl();return e}get borderStyle(){const{borderStyle:e}=this.getDsl();return null===e||void 0===e?void 0:e.toLocaleLowerCase()}get paddingTop(){const{paddingTop:e=0}=this.getDsl();return r.WbJ.px(e)}get paddingBottom(){const{paddingBottom:e=0}=this.getDsl();return r.WbJ.px(e)}get paddingLeft(){const{paddingLeft:e=0}=this.getDsl();return r.WbJ.px(e)}get paddingRight(){const{paddingRight:e=0}=this.getDsl();return r.WbJ.px(e)}get padding(){return`${this.paddingTop} ${this.paddingRight} ${this.paddingBottom} ${this.paddingLeft}`}get marginTop(){const{marginTop:e=0}=this.getDsl();return r.WbJ.px(e)}get marginBottom(){const{marginBottom:e=0}=this.getDsl();return r.WbJ.px(e)}get marginLeft(){const{marginLeft:e=0}=this.getDsl();return r.WbJ.px(e)}get marginRight(){const{marginRight:e=0}=this.getDsl();return r.WbJ.px(e)}get margin(){return`${this.marginTop} ${this.marginRight} ${this.marginBottom} ${this.marginLeft}`}childrenInvisibleProcess(){return(0,p.nG)(B(this.getChildren()))}};(0,d.Cg)([p.x0.Reactive()],H.prototype,"layout",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"showInternalBorder",null),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide("containersGutter")],H.prototype,"currentGutter",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"rowGutter",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"colGutter",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"border",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"borderTop",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"borderRight",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"borderBottom",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"borderLeft",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"borderSize",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"borderColor",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"borderStyle",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"paddingTop",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"paddingBottom",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"paddingLeft",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"paddingRight",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"padding",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"marginTop",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"marginBottom",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"marginLeft",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"marginRight",null),(0,d.Cg)([p.x0.Reactive()],H.prototype,"margin",null),H=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"containers"}))],H);var W=i(50953);const U=(0,o.pM)({name:"DefaultCollapse",components:{OioCollapse:f.nHq},props:Object.assign(Object.assign({},f.O2C),{template:{type:Object},activeKey:{type:[String,Array]},onActiveKeyChange:{type:Function},type:{type:String,default:f.zdk.bordered},collapseMethod:{type:String,default:f.Gk3.default},expandAll:{type:Boolean,default:!0},accordion:{type:Boolean,default:!1},expandIconPosition:{type:[String,Object],default:f.Fh_.right}}),setup(e){const t=(0,W.KR)(),i=t=>{var i;null===(i=e.onActiveKeyChange)||void 0===i||i.call(e,t)};return(0,o.sV)(()=>{var r;if(e.expandAll&&!e.accordion){const e=null===(r=t.value)||void 0===r?void 0:r.getPanelKeys();e&&i(e)}}),{origin:t,onUpdateActiveKey:i}},render(){var e,t;return(0,o.bF)(f.nHq,Object.assign(Object.assign({ref:"origin"},f.$pj.collectionBasicProps(this.$attrs,f.MZC.append(["oio-default-collapse"],f.Gfm.cast(null===(e=this.template)||void 0===e?void 0:e.class)),f.Gfm.cast(null===(t=this.template)||void 0===t?void 0:t.style))),{activeKey:this.activeKey,onActiveKeyChange:this.onActiveKeyChange,type:this.type,collapseMethod:this.collapseMethod,accordion:this.accordion,expandIconPosition:this.expandIconPosition,layout:this.layout,invisible:this.invisible,disabled:this.disabled,"onUpdate:activeKey":this.onUpdateActiveKey}),f.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]))}}),q=U,z=q;let G=class extends m.jp{constructor(){super(...arguments),this.defaultAllInvisible=!1}initialize(e){return super.initialize(e),this.setComponent(z),this}getActiveKey(){return this.activeKey}setActiveKey(e){this.activeKey=e}onActiveKeyChange(e){this.setActiveKey(e)}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}get expandAll(){const{expandAll:e}=this.getDsl();return!!(0,h.A)(e)||c.TM.toBoolean(e)}get type(){var e,t;return(null===(t=null===(e=this.getDsl().type)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||r.zdk.bordered}get collapseMethod(){var e,t;return(null===(t=null===(e=this.getDsl().collapseMethod)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||r.Gk3.default}get accordion(){return c.TM.toBoolean(this.getDsl().accordion)}get expandIconPosition(){var e,t;return(null===(t=null===(e=this.getDsl())||void 0===e?void 0:e.expandIconPosition)||void 0===t?void 0:t.toLowerCase())||r.Fh_.right}};(0,d.Cg)([p.x0.Reactive()],G.prototype,"activeKey",void 0),(0,d.Cg)([p.x0.Method()],G.prototype,"onActiveKeyChange",null),(0,d.Cg)([p.x0.Reactive()],G.prototype,"layout",null),(0,d.Cg)([p.x0.Reactive()],G.prototype,"expandAll",null),(0,d.Cg)([p.x0.Reactive()],G.prototype,"type",null),(0,d.Cg)([p.x0.Reactive()],G.prototype,"collapseMethod",null),(0,d.Cg)([p.x0.Reactive()],G.prototype,"accordion",null),(0,d.Cg)([p.x0.Reactive()],G.prototype,"expandIconPosition",null),G=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"collapse"}))],G);var K=i(89284),X=i(82499),Q=i(49673),Y=i(71283);const J=(0,o.pM)({name:"DefaultCollapsePanel",components:{ACollapsePanel:Q.A},inheritAttrs:!1,props:Object.assign(Object.assign({},r.XH1),{currentHandle:{type:String},template:{type:Object}}),slots:["default","header","extra"],setup(e){(0,r.qY4)(e);const t=(0,r.sb0)(),i=(0,o.EW)(()=>{const r=e.showArrow;return(0,h.A)(r)?t.showArrow.value:i}),n=(0,o.EW)(()=>{if(e.disabled)return"disabled";const i=e.collapseMethod;return(0,h.A)(i)?t.collapsible.value:i});return(0,o.KC)(()=>{const i=e.currentHandle;i&&t.reportPanelKey(i)}),{showArrow:i,collapsible:n}},render(){var e,t,i,n,a;const l=r.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0},"header","extra"]);return(0,o.bo)((0,o.bF)(Q.A,Object.assign(Object.assign({},(null===(t=null===(e=(0,o.nI)())||void 0===e?void 0:e.parent)||void 0===t?void 0:t.attrs)||{}),{class:c.MZ.append([`${X.Nf}-collapse-panel`],null===(a=null===(n=null===(i=(0,o.nI)())||void 0===i?void 0:i.parent)||void 0===n?void 0:n.attrs)||void 0===a?void 0:a.class),ref:"origin",forceRender:this.forceRender,collapsible:this.collapsible,showArrow:this.showArrow}),Object.assign(Object.assign({},l),{default:()=>[p.MX.render(Object.assign(Object.assign({},this.template||{}),{dslNodeType:K.zX.PACK,widgets:[],widget:Y.YZ.Row,parentHandle:this.currentHandle,resolveOptions:{mode:Y.YJ.NORMAL},__index:0,__slots:{default:()=>l.default()}}))]})),[[y.aG,!this.invisible]])}}),Z=J,ee=Z;let te=class extends m.jp{initialize(e){return e.template||(e.template=e.dslDefinition),super.initialize(e),this.setComponent(ee),this}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}get title(){const{title:e}=this.getDsl();return e?this.executeLabelExpression(e):r.gl8}get disabled(){const{disabled:e}=this.getDsl();return null!=e&&((0,v.A)(e)?!!this.executeExpression(e,!1):!!e)}get forceRender(){return!0}get currentTabKey(){return this.currentHandle}renderWidgetComponent(e,t,i){return(0,o.bF)(e,{key:this.currentTabKey,header:(0,S.cAb)(this.title),invisible:this.invisible,disabled:this.disabled,forceRender:this.forceRender},i)}};(0,d.Cg)([p.x0.Reactive()],te.prototype,"layout",null),(0,d.Cg)([p.x0.Reactive()],te.prototype,"title",null),(0,d.Cg)([p.x0.Reactive()],te.prototype,"disabled",null),(0,d.Cg)([p.x0.Reactive()],te.prototype,"forceRender",null),(0,d.Cg)([p.x0.Reactive()],te.prototype,"currentTabKey",null),te=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:["collapsePanel","collapse-panel","CollapsePanel"]}))],te);var ie=i(43937),re=i(3816);const oe=(0,o.pM)({name:"DefaultGroupTitleToolbar",setup(){const e=(0,re.zm)();return(0,re.tx)(Object.assign(Object.assign({},e),{slotName:(0,o.EW)(()=>"titleToolbar")})),{}},render(){return r.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default()}}),ne=oe,ae=ne,le=(0,o.pM)({name:"DefaultGroup",components:{OioGroup:f.leV},inheritAttrs:!1,props:{template:{type:Object},title:{type:String,default:(0,S.cAb)("分组")},description:{type:String,default:""},help:{type:String},layout:{type:[String,Object]},invisible:{type:Boolean,default:!1},titleToolbarInvisible:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},setup(e){return(0,f.qY4)(e),{}},render(){const{$attrs:e,$slots:t,template:i,title:r,description:n,help:a,invisible:l,titleToolbarInvisible:s,border:d}=this,{default:u,titleToolbar:p}=f.$pj.collectionSlots(t,[{origin:"default",isNotNull:!0},"titleToolbar"]),h=(0,ie.fy)(i,u),g={default:()=>h};return p&&(g.titleToolbar=()=>[(0,o.bF)(ae,{},{default:p})]),(0,o.bo)((0,o.bF)(f.leV,Object.assign(Object.assign({},f.$pj.collectionBasicProps(e,c.MZ.append(["oio-default-group"],c.Gf.cast(null===i||void 0===i?void 0:i.class)),c.Gf.cast(null===i||void 0===i?void 0:i.style))),{title:!(!r&&s)&&r,description:n,border:d,wrapperClassName:c.MZ.append([],c.Gf.cast(null===i||void 0===i?void 0:i.wrapperClassName)),wrapperStyle:f.WbJ.parse(null===i||void 0===i?void 0:i.wrapperStyle),toolbarClassName:c.MZ.append([],c.Gf.cast(null===i||void 0===i?void 0:i.toolbarClassName)),toolbarStyle:f.WbJ.parse(null===i||void 0===i?void 0:i.toolbarStyle),help:a}),g),[[y.aG,!l]])}}),se=le,de=se,ce="titleToolbar";let ue=class extends m.jp{setTitle(e){const t=this.getDsl();t&&(t.title=e)}initialize(e){return e.slotNames||(e.slotNames=[K.zi,ce]),super.initialize(e),this.setComponent(de),this}get title(){const e=this.getDsl().title||"";return this.executeLabelExpression(e)}get description(){return this.getDsl().desc||""}get border(){let e=c.TM.toBoolean(this.getDsl().border);return(0,h.A)(e)&&(e=!this.isDialog&&!this.isDrawer),e}get help(){return this.executeExpression(this.getDsl().help,this.getDsl().help)}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}};(0,d.Cg)([p.x0.Reactive()],ue.prototype,"title",null),(0,d.Cg)([p.x0.Reactive()],ue.prototype,"description",null),(0,d.Cg)([p.x0.Reactive()],ue.prototype,"border",null),(0,d.Cg)([p.x0.Reactive()],ue.prototype,"help",null),(0,d.Cg)([p.x0.Reactive()],ue.prototype,"layout",null),ue=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({}))],ue);const pe=(0,o.pM)({name:"DefaultTabs",components:{OioTabs:f.y5d},inheritAttrs:!1,props:Object.assign(Object.assign({},f.O2C),{currentHandle:{type:String},activeKey:{type:String},onActiveKeyChange:{type:Function},tabPosition:{type:String,default:f.mVw.TOP},tabAlign:{type:String,default:f.yVO.LEFT}}),setup(e){const t=(0,o.EW)(()=>[f.mVw.TOP,f.mVw.BOTTOM].includes(e.tabPosition)?`oio-default-tabs-horizontal-${e.tabAlign}`:`oio-default-tabs-vertical-${e.tabAlign}`),i=t=>{var i;null===(i=e.onActiveKeyChange)||void 0===i||i.call(e,t)};return{tabAlignClass:t,onUpdateActiveKey:i}},render(){return(0,o.bF)(f.y5d,{class:["oio-default-tabs",this.tabAlignClass],id:this.currentHandle,activeKey:this.activeKey,tabPosition:this.tabPosition,verticalHeight:264,layout:this.layout,invisible:this.invisible,disabled:this.disabled,"onUpdate:activeKey":this.onUpdateActiveKey},f.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]))}}),he=pe,ge=he;let ve=class extends m.jp{initialize(e){return super.initialize(e),this.setComponent(ge),this}getActiveKey(){return this.activeKey}setActiveKey(e){this.activeKey=e}get tabPosition(){const{tabPosition:e}=this.getDsl();return e?e.toLowerCase():r.mVw.TOP}get tabAlign(){const{tabAlign:e}=this.getDsl();return e?e.toLowerCase():r.yVO.LEFT}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}get defaultActiveIndex(){const{defaultActiveIndex:e}=this.getDsl();if((0,h.A)(e))return;const t=Number(this.executeExpression(e,0));if(!Number.isNaN(t))return t;console.error("default active index compute error.",e)}onActiveKeyChange(e){this.setActiveKey(e)}resetInvisible(){super.resetInvisible();const{invisibleFlags:e,activeIndex:t}=this.collectionInvisibleFlags();if(-1!==t){const i=this.findNextActiveIndex(e,t);if(-1!==i){const e=this.getChildren()[i],t=e.currentTabKey||e.getHandle();this.setActiveKey(t)}}else if(-1===t){const t=e.findIndex(e=>!e);if(t>-1){const e=this.getChildren()[t],i=e.currentTabKey||e.getHandle();this.setActiveKey(i)}}}collectionInvisibleFlags(){const e=this.getChildren(),t=this.getActiveKey();let i=-1;const r=[];for(let o=0;o<e.length;o++){const n=e[o],a=(0,p.Jf)(n);r.push(a),-1===i&&t&&(n.currentTabKey||n.getHandle())===t&&a&&(i=o)}return{invisibleFlags:r,activeIndex:i}}findNextActiveIndex(e,t){let i=-1;return-1!==t&&(i=this.$findNextActiveIndex(e,t,-1),-1===i&&(i=this.$findNextActiveIndex(e,t,1))),i}$findNextActiveIndex(e,t,i){for(let r=t+i;r!==t&&r<e.length;r+=i)if(!e[r])return r;return-1}reportDefaultActive(e){this.defaultActiveKey||(this.defaultActiveKey=e)}computeDefaultActiveKey(){const{defaultActiveIndex:e}=this;let t;if(null!=e){const i=this.getChildrenWidget()[e];t=(null===i||void 0===i?void 0:i.currentTabKey)||(null===i||void 0===i?void 0:i.getHandle())}return t||(t=this.defaultActiveKey),t}setActiveKeyWhenEmptyActiveKey(){const{invisibleFlags:e,activeIndex:t}=this.collectionInvisibleFlags(),i=this.getChildrenWidget();if(-1===t&&e.length>0){const t=e.findIndex(e=>!e);if(t>-1&&t<i.length){const e=i[t],r=e.currentTabKey||e.getHandle();this.setActiveKey(r)}}}$$mounted(){var e;super.$$mounted(),null===(e=this.parentMountedCallChaining)||void 0===e||e.hook(this.path,()=>{var e;const t=this.computeDefaultActiveKey();t?this.setActiveKey(t):this.setActiveKeyWhenEmptyActiveKey(),null===(e=this.parentMountedCallChaining)||void 0===e||e.unhook(this.path)})}};(0,d.Cg)([p.x0.Reactive(),p.x0.Inject("mountedCallChaining")],ve.prototype,"parentMountedCallChaining",void 0),(0,d.Cg)([p.x0.Reactive()],ve.prototype,"activeKey",void 0),(0,d.Cg)([p.x0.Reactive()],ve.prototype,"tabPosition",null),(0,d.Cg)([p.x0.Reactive()],ve.prototype,"tabAlign",null),(0,d.Cg)([p.x0.Reactive()],ve.prototype,"layout",null),(0,d.Cg)([p.x0.Reactive()],ve.prototype,"defaultActiveIndex",null),(0,d.Cg)([p.x0.Method()],ve.prototype,"onActiveKeyChange",null),(0,d.Cg)([p.x0.Method(),p.x0.Provide()],ve.prototype,"reportDefaultActive",null),ve=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"tabs"}))],ve);var me=i(98916),fe=i(78236);const ye=(0,o.pM)({name:"DefaultTab",components:{ATabPane:fe.A},inheritAttrs:!1,props:Object.assign(Object.assign({},r.Tn0),{currentHandle:{type:String},template:{type:Object},subIndex:{type:Number}}),slots:["default","tab"],setup(e){(0,f.qY4)(e);const t=(0,r.$N5)(),i=(i,r,o)=>{const n=e.subIndex;if(null==n)return;(0,f.s29)(i,n,o);const a=`${t.id.value}-more-popup-${e.currentHandle}`,l=r.findIndex(e=>e.el.id===a);-1!==l&&(0,f.s29)(r,l,o)};return(0,o.wB)(()=>({value:e.invisible,nodes:t.nodes.value,moreNodes:t.moreNodes.value}),e=>{i(e.nodes,e.moreNodes,e.value)},{immediate:!0}),(0,o.$u)(()=>{i(t.nodes.value,t.moreNodes.value,e.invisible)}),{tabPosition:t.tabPosition}},render(){var e,t;const i=r.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]);return(0,o.bF)(fe.A,Object.assign(Object.assign({},(null===(t=null===(e=(0,o.nI)())||void 0===e?void 0:e.parent)||void 0===t?void 0:t.attrs)||{}),{forceRender:this.forceRender,disabled:this.disabled}),{default:()=>[(0,o.bF)("div",{class:"oio-tab"},[(0,o.bF)("div",{class:["oio-tab-content",`oio-tab-${this.tabPosition}-content`]},{default:()=>[p.MX.render(Object.assign(Object.assign({},this.template||{}),{dslNodeType:K.zX.PACK,widgets:[],widget:Y.YZ.Row,parentHandle:this.currentHandle,resolveOptions:{mode:Y.YJ.NORMAL},__index:0,__slots:{default:()=>i.default()}}))]})])]})}}),be=ye,Ce=be;let xe=class extends m.jp{initialize(e){return e.template||(e.template=e.dslDefinition),super.initialize(e),this.setComponent(Ce),this}get layout(){const{layout:e}=this.getDsl();if((0,v.A)(e))return e.toLowerCase()}get title(){const{title:e}=this.getDsl();return e?this.executeLabelExpression(e):f.zke}get disabled(){const{disabled:e}=this.getDsl();return null!=e&&((0,v.A)(e)?!!this.executeExpression(e,!1):!!e)}get forceRender(){return!0}get currentTabKey(){return this.currentHandle}isDefaultActive(){const{defaultActive:e}=this.getDsl();return!(0,h.A)(e)&&((0,me.A)(e)?e:!!(0,v.A)(e)&&(f.TMe.isStringBoolean(e)?!!f.TMe.toBoolean(e):!!this.executeExpression(e,!1)))}renderWidgetComponent(e,t,i){return(0,o.bF)(e,{key:this.currentTabKey,invisible:this.invisible,disabled:this.disabled,forceRender:this.forceRender},Object.assign(Object.assign({},i),{tab:()=>[(0,f.mmk)(this.title,this.help)]}))}$$mounted(){var e;super.$$mounted(),null===(e=this.parentMountedCallChaining)||void 0===e||e.hook(this.path,()=>{var e,t;const i=this.isDefaultActive();i&&(null===(e=this.reportDefaultActive)||void 0===e||e.call(this,this.currentTabKey)),null===(t=this.parentMountedCallChaining)||void 0===t||t.unhook(this.path)})}};(0,d.Cg)([p.x0.Reactive(),p.x0.Inject("mountedCallChaining")],xe.prototype,"parentMountedCallChaining",void 0),(0,d.Cg)([p.x0.Method(),p.x0.Inject()],xe.prototype,"reportDefaultActive",void 0),(0,d.Cg)([p.x0.Reactive()],xe.prototype,"layout",null),(0,d.Cg)([p.x0.Reactive()],xe.prototype,"title",null),(0,d.Cg)([p.x0.Reactive()],xe.prototype,"disabled",null),(0,d.Cg)([p.x0.Reactive()],xe.prototype,"forceRender",null),(0,d.Cg)([p.x0.Reactive()],xe.prototype,"currentTabKey",null),xe=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"tab"}))],xe);const we=(0,o.pM)({name:"DefaultMultiViewTabs",components:{OioTabs:f.y5d},inheritAttrs:!1,props:{currentHandle:{type:String},invisible:{type:Boolean,default:!1},activeKey:{type:String},onActiveKeyChange:{type:Function},tabPosition:{type:String,default:f.mVw.TOP},tabAlign:{type:String,default:f.yVO.LEFT},layout:{type:[String,Object]}},setup(e){(0,f.qY4)(e);const t=(0,o.EW)(()=>[f.mVw.TOP,f.mVw.BOTTOM].includes(e.tabPosition)?`${X.Nf}-default-tabs-horizontal-${e.tabAlign}`:`${X.Nf}-default-tabs-vertical-${e.tabAlign}`),i=t=>{var i;null===(i=e.onActiveKeyChange)||void 0===i||i.call(e,t)};return{tabAlignClass:t,onUpdateActiveKey:i}},render(){return(0,o.bF)(f.y5d,{class:[`${X.Nf}-default-tabs ${X.Nf}-default-multi-view-tabs`,this.tabAlignClass],id:this.currentHandle,activeKey:this.activeKey,tabPosition:this.tabPosition,verticalHeight:264,invisible:this.invisible,"onUpdate:activeKey":this.onUpdateActiveKey},f.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]))}}),Se=we,Te=Se,Ee=new Map,Ae=e=>{Ee.has(e)||Ee.set(e,"");const t=()=>Ee.get(e),i=t=>{Ee.set(e,t)},r=()=>{Ee.delete(e)};return{setActiveKey:i,getActiveKey:t,deleteActiveKey:r}};let ke=class extends ve{get invisible(){return!1}get allInvisible(){return!1}initialize(e){return super.initialize(e),this.setComponent(Te),this}onActiveKeyChange(e){var t;super.onActiveKeyChange(e),(null===(t=this.view)||void 0===t?void 0:t.name)&&this.multiViewKeyCache&&this.multiViewKeyCache.setActiveKey(e)}$$beforeMount(){var e;if(!this.getActiveKey())if(null===(e=this.view)||void 0===e?void 0:e.name){this.multiViewKeyCache=Ae(this.view.name);const{getActiveKey:e,setActiveKey:t}=this.multiViewKeyCache,i=e();if(i)this.setActiveKey(i);else{const e=this.getChildren()[0];e&&t(e.viewName)}}else super.$$beforeMount()}};(0,d.Cg)([p.x0.Reactive()],ke.prototype,"invisible",null),(0,d.Cg)([p.x0.Reactive()],ke.prototype,"allInvisible",null),(0,d.Cg)([p.x0.Method()],ke.prototype,"onActiveKeyChange",null),ke=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"MultiViewTabs"}))],ke);const De=(0,o.pM)({name:"DefaultMultiViewTab",components:{ATabPane:fe.A},inheritAttrs:!1,props:Object.assign(Object.assign({},r.Tn0),{currentHandle:{type:String},template:{type:Object},subIndex:{type:Number}}),slots:["default","tab"],setup(e){(0,f.qY4)(e);const t=(0,r.$N5)(),i=(i,r,o)=>{const n=e.subIndex;if(null==n)return;(0,f.s29)(i,n,o);const a=`${t.id.value}-more-popup-${e.currentHandle}`,l=r.findIndex(e=>e.el.id===a);-1!==l&&(0,f.s29)(r,l,o)};return(0,o.wB)(()=>({value:e.invisible,nodes:t.nodes.value,moreNodes:t.moreNodes.value}),e=>{i(e.nodes,e.moreNodes,e.value)},{immediate:!0}),(0,o.$u)(()=>{i(t.nodes.value,t.moreNodes.value,e.invisible)}),{tabPosition:t.tabPosition}},render(){var e,t;const i=r.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]);return(0,o.bF)(fe.A,Object.assign(Object.assign({},(null===(t=null===(e=(0,o.nI)())||void 0===e?void 0:e.parent)||void 0===t?void 0:t.attrs)||{}),{forceRender:this.forceRender,disabled:this.disabled}),{default:()=>[(0,o.bF)("div",{class:"oio-tab"},[(0,o.bF)("div",{class:["oio-tab-content",`oio-tab-${this.tabPosition}-content`]},i)])]})}}),Fe=De,Re=Fe;let Oe=class extends xe{get invisible(){return!1}get allInvisible(){return!1}get forceRender(){return!1}initialize(e){return super.initialize(e),this.setComponent(Re),this.metadataViewWidget=this.createMetadataViewWidget(),this.initView(),this}get viewModel(){return this.getDsl().viewModel}get viewName(){return this.getDsl().viewName}get currentTabKey(){return this.viewName||this.currentHandle}initView(){return(0,d.sH)(this,void 0,void 0,function*(){const e=yield S.soS.get(this.viewModel,this.viewName);if(!e)throw new Error("Invalid runtime view.");this.runtimeView=e,this.runtimeViewContext=this.initRuntimeContext(this.metadataViewWidget,e),this.initViewAfterProperties()})}createMetadataViewWidget(){const e=(0,c._N)();return this.createWidget(new m.f5(e),void 0,{metadataHandle:this.metadataHandle,rootHandle:this.rootHandle,automatic:!0,internal:!0,inline:!0})}initRuntimeContext(e,t){return e.initContextByView(t)}initViewAfterProperties(){}render(e,t){return super.render(e,{default:()=>{var i;const r=null===(i=this.metadataViewWidget)||void 0===i?void 0:i.render(e,t);return r?Array.isArray(r)?r:[r]:[]}})}get dataSource(){return this.getCurrentDataSource()||void 0}set dataSource(e){this.setCurrentDataSource(e)}reloadDataSource(e){this.setCurrentDataSource(e)}get activeRecords(){return this.getCurrentActiveRecords()||void 0}set activeRecords(e){this.setCurrentActiveRecords(e)}reloadActiveRecords(e){this.setCurrentActiveRecords(e)}};(0,d.Cg)([p.x0.Reactive()],Oe.prototype,"metadataViewWidget",void 0),(0,d.Cg)([p.x0.Reactive()],Oe.prototype,"invisible",null),(0,d.Cg)([p.x0.Reactive()],Oe.prototype,"allInvisible",null),(0,d.Cg)([p.x0.Reactive()],Oe.prototype,"forceRender",null),(0,d.Cg)([p.x0.Reactive()],Oe.prototype,"viewModel",null),(0,d.Cg)([p.x0.Reactive()],Oe.prototype,"viewName",null),(0,d.Cg)([p.x0.Reactive()],Oe.prototype,"currentTabKey",null),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide()],Oe.prototype,"mountedCallChaining",void 0),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide()],Oe.prototype,"refreshCallChaining",void 0),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide()],Oe.prototype,"submitCallChaining",void 0),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide()],Oe.prototype,"validatorCallChaining",void 0),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide()],Oe.prototype,"dataSource",null),(0,d.Cg)([p.x0.Reactive(),p.x0.Provide()],Oe.prototype,"activeRecords",null),Oe=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"MultiViewTab"}))],Oe);const Ne=(0,o.pM)({name:"DefaultSpin",components:{OioSpin:f.MEy},inheritAttrs:!1,props:Object.assign(Object.assign({template:{type:Object}},f.GAR),{size:{type:[String,Number]},delay:{type:Number},tip:{type:String},layout:{type:[String,Object]},invisible:{type:Boolean,default:!1}}),setup(e){const t=(0,f.NNV)(),i=(0,o.EW)(()=>e.layout||t.layout.value);return(0,f.rUv)(Object.assign(Object.assign({},t),{layout:i})),{}},render(){const{$attrs:e,$slots:t,template:i,loading:r,loadingIndicator:n,wrapperClassName:a,size:l,delay:s,tip:d,invisible:u}=this,{default:p}=f.$pj.collectionSlots(t,[{origin:"default",isNotNull:!0}]),h=(0,ie.fy)(i,p),g={default:()=>h};return(0,o.bo)((0,o.bF)(f.MEy,Object.assign(Object.assign({},f.$pj.collectionBasicProps(e,c.MZ.append(["oio-default-spin"],c.Gf.cast(null===i||void 0===i?void 0:i.class)),c.Gf.cast(null===i||void 0===i?void 0:i.style))),{loading:r,loadingIndicator:n,wrapperClassName:a,size:l,delay:s,tip:d}),g),[[y.aG,!u]])}}),$e=Ne,Me=$e;var Ie;let Le=class extends m.jp{initialize(e){return super.initialize(e),this.setComponent(Me),this}get loadingIndicator(){return this.internalLoadingIndicator}set loadingIndicator(e){this.internalLoadingIndicator=e}get wrapperClassName(){return this.internalWrapperClassName||this.getDsl().wrapperClassName}set wrapperClassName(e){this.internalWrapperClassName=e}get size(){return this.internalSize||this.getDsl().size}set size(e){this.internalSize=e}get delay(){return this.internalDelay||this.getDsl().delay}set delay(e){this.internalDelay=e}get tip(){return this.internalTip||this.getDsl().tip}set tip(e){this.internalTip=e}load(e,...t){const i=Object.create(null,{load:{get:()=>super.load}});return(0,d.sH)(this,void 0,void 0,function*(){return i.load.call(this,e,...t)})}};(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object)],Le.prototype,"internalLoadingIndicator",void 0),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[Object])],Le.prototype,"loadingIndicator",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object)],Le.prototype,"internalWrapperClassName",void 0),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[Object])],Le.prototype,"wrapperClassName",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object)],Le.prototype,"internalSize",void 0),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[Object])],Le.prototype,"size",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object)],Le.prototype,"internalDelay",void 0),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[Object])],Le.prototype,"delay",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object)],Le.prototype,"internalTip",void 0),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[Object])],Le.prototype,"tip",null),(0,d.Cg)([p.x0.Method(),p.x0.Provide(),(0,d.Sn)("design:type",Function),(0,d.Sn)("design:paramtypes",[Function,Object]),(0,d.Sn)("design:returntype","function"===typeof(Ie="undefined"!==typeof Promise&&Promise)?Ie:Object)],Le.prototype,"load",null),Le=(0,d.Cg)([u.DF.ClassFactory(m.jp.Token({widget:"spin"}))],Le);var _e=i(90033);const Pe=["innerHTML"];function je(e,t,i,r,n,a){return(0,o.uX)(),(0,o.CE)("div",{class:"media-paragraph",style:(0,_e.Tr)(e.colStyle||{})},[(0,o.Lk)("div",{innerHTML:e.realContent,class:(0,_e.C4)(["paragraph-content",[e.borderClassName]])},null,10,Pe)],4)}const Ve=(0,o.pM)({name:"DefaultParagraph",props:{content:{type:String},borderMode:{type:String},colStyle:{type:Object}},setup(e){const t=(0,o.EW)(()=>e.borderMode?`border-${e.borderMode.toLowerCase()}`:"border-none"),i=(0,o.EW)(()=>{try{return decodeURI(e.content||"")}catch(t){return e.content||""}});return{realContent:i,borderClassName:t}}});var Be=i(66262);const He=(0,Be.A)(Ve,[["render",je]]),We=He;var Ue;(function(e){e["Solid"]="SOLID",e["None"]="NONE",e["Dashed"]="DASHED"})(Ue||(Ue={}));let qe=class extends m.a_{constructor(){super(...arguments),this.colStyle=null}get formData(){var e;return(null===(e=this.activeRecords)||void 0===e?void 0:e[0])||{}}initialize(e){return super.initialize(e),this.colStyle=e.colStyle,this.setComponent(We),this}get content(){var e,t;let{content:i}=this.getDsl();return i&&(i=decodeURI(i),i=(0,S.GsW)(i,this.formData,(null===(e=this.rootData)||void 0===e?void 0:e[0])||{},(null===(t=this.openerActiveRecords)||void 0===t?void 0:t[0])||{})),i||""}get borderMode(){return this.getDsl().borderMode}};(0,d.Cg)([p.x0.Reactive()],qe.prototype,"formData",null),(0,d.Cg)([p.x0.Reactive()],qe.prototype,"content",null),(0,d.Cg)([p.x0.Reactive()],qe.prototype,"borderMode",null),(0,d.Cg)([p.x0.Reactive()],qe.prototype,"colStyle",void 0),qe=(0,d.Cg)([u.DF.ClassFactory(m.a_.Token({widget:"paragraph"}))],qe);const ze={class:"default-picture"};function Ge(e,t,i,r,n,a){const l=(0,o.g2)("a-image");return(0,o.uX)(),(0,o.CE)("div",ze,[(0,o.bF)(l,{width:e.width,height:e.height,src:e.url},null,8,["width","height","src"])])}const Ke=(0,o.pM)({name:"DefaultPicture",props:{url:{type:String},width:{type:String},height:{type:String}},setup(e){}}),Xe=(0,Be.A)(Ke,[["render",Ge]]),Qe=Xe;let Ye=class extends m.a_{initialize(e){return super.initialize(e),this.setComponent(Qe),this}get url(){if(this.getDsl().url)return this.getDsl().url}get width(){const e=this.getDsl().width;return e?`${e}px`:e}get height(){const e=this.getDsl().height;return e?`${e}px`:e}};(0,d.Cg)([p.x0.Reactive()],Ye.prototype,"url",null),(0,d.Cg)([p.x0.Reactive()],Ye.prototype,"width",null),(0,d.Cg)([p.x0.Reactive()],Ye.prototype,"height",null),Ye=(0,d.Cg)([u.DF.ClassFactory(m.a_.Token({widget:"picture"}))],Ye);const Je={class:"default-icon"};function Ze(e,t,i,r,n,a){const l=(0,o.g2)("oio-icon");return(0,o.uX)(),(0,o.CE)("div",Je,[(0,o.bF)(l,{icon:e.icon,size:e.size,color:e.color},null,8,["icon","size","color"])])}const et=(0,o.pM)({name:"DefaultIcon",props:{icon:{type:String},color:{type:String},size:{type:String}},components:{OioIcon:r.Lky},setup(e){}}),tt=(0,Be.A)(et,[["render",Ze]]),it=tt;let rt=class extends m.a_{initialize(e){return super.initialize(e),this.setComponent(it),this}get icon(){return this.getDsl().icon}get color(){return this.getDsl().color}get size(){return this.getDsl().size}};var ot,nt,at;(0,d.Cg)([p.x0.Reactive()],rt.prototype,"icon",null),(0,d.Cg)([p.x0.Reactive()],rt.prototype,"color",null),(0,d.Cg)([p.x0.Reactive()],rt.prototype,"size",null),rt=(0,d.Cg)([u.DF.ClassFactory(m.a_.Token({widget:"icon"}))],rt),function(e){e["PIC_HIGHLIGHT"]="PIC_HIGHLIGHT",e["PIC_VAL_HIGHLIGHT"]="PIC_VAL_HIGHLIGHT",e["VAL_HIGHLIGHT"]="VAL_HIGHLIGHT",e["LEFT"]="LEFT",e["RIGHT"]="RIGHT",e["CENTER"]="CENTER",e["JUSTIFY"]="JUSTIFY"}(ot||(ot={})),function(e){e["PICTURE_TEXT"]="PICTURE_TEXT",e["ICON_TEXT"]="ICON_TEXT",e["ONLY_TEXT"]="ONLY_TEXT"}(nt||(nt={})),function(e){e["END"]="END",e["START"]="START",e["CENTER"]="CENTER"}(at||(at={}));var lt=i(50159);const st=(0,o.pM)({name:"DefaultTextInfoValue",props:{fieldWidget:{type:Object},invisible:{type:Boolean}},render(){if(this.invisible)return;const e=this.fieldWidget,t=(0,o.bF)(lt.A,Object.assign(Object.assign({},e),{label:!1})||{});return(0,o.bF)("div",{class:"default-value"},[t])}}),dt=st,ct=dt;function ut(e,t,i,r,n,a){return e.invisible?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",{key:0,class:"default-label",style:(0,_e.Tr)({fontSize:e.labelFontSize})},(0,_e.v_)(e.label),5))}const pt=(0,o.pM)({name:"DefaultTextInfoLabel",props:{label:{type:String},labelFontSize:{type:String},invisible:{type:Boolean},justifyContent:{type:String}}}),ht=(0,Be.A)(pt,[["render",ut]]),gt=ht;var vt=i(3116),mt=i(41226);const ft=(0,o.pM)({name:"DefaultTextInfo",inheritAttrs:!1,props:{mediaType:{type:String},templateType:{type:String},justifyContent:{type:String},fieldWidget:{type:Object},picIconWidget:{type:Object},fieldInvisible:{type:Boolean,default:void 0},label:{type:String},labelFontSize:{type:String},layout:{type:String}},render(){var e;const t=this.picIconWidget,i=[];let r;this.mediaType===nt.ICON_TEXT?r=(0,o.bF)(vt.A,t):this.mediaType===nt.PICTURE_TEXT&&(r=(0,o.bF)(mt.A,t));let n=at.CENTER,a=at.CENTER;this.mediaType===nt.ONLY_TEXT&&(this.justifyContent===ot.LEFT?(n=at.START,a=at.START):this.justifyContent===ot.RIGHT?(n=at.END,a=at.END):this.justifyContent===ot.JUSTIFY&&(n=at.END,a=at.START));const l=(0,o.bF)("div",{class:"label",style:`justify-content: ${null===a||void 0===a?void 0:a.toLowerCase()}`},[(0,o.bF)(gt,{label:this.label,labelFontSize:this.labelFontSize,invisible:this.fieldInvisible})]),s=(0,o.bF)("div",{class:"value",style:`justify-content: ${null===n||void 0===n?void 0:n.toLowerCase()}`},[(0,o.bF)(ct,{fieldWidget:Object.assign(Object.assign({},this.fieldWidget),{justifyContent:n}),invisible:this.fieldInvisible})]),d=(0,o.bF)("div",{class:"pic-icon"},[r]),c=(0,o.bF)("div",{class:"value"},[s]);return[nt.ICON_TEXT,nt.PICTURE_TEXT].includes(this.mediaType)?this.templateType===ot.VAL_HIGHLIGHT?(i.push((0,o.bF)("div",{class:"runtime-val-highlight"},[d,c])),i.push((0,o.bF)("div",{class:"runtime-val-highlight-label"},[l]))):this.templateType===ot.PIC_HIGHLIGHT?(i.push(r),i.push((0,o.bF)("div",{class:"runtime-picture-highlight"},[l,s]))):this.templateType===ot.PIC_VAL_HIGHLIGHT&&i.push((0,o.bF)("div",{class:"runtime-pic-val-highlight"},[(0,o.bF)("div",{class:"pic-icon"},[r]),(0,o.bF)("div",{class:"label-value"},[s,l])])):this.mediaType===nt.ONLY_TEXT&&i.push((0,o.bF)("div",{class:"runtime-only-text"},[(0,o.bF)("div",{class:`label-value ${null===(e=this.layout)||void 0===e?void 0:e.toLowerCase()}`},[l,s])])),(0,o.bF)("div",{},i)}}),yt=ft,bt=yt;let Ct=class extends m.a_{constructor(){super(...arguments),this.valueJustifyContent=at.CENTER,this.labelJustifyContent=at.CENTER}initialize(e){return super.initialize(e),this.setComponent(bt),this}get mediaType(){return this.getDsl().mediaType||nt.PICTURE_TEXT}get templateType(){return this.getDsl().templateType||ot.PIC_HIGHLIGHT}get justifyContent(){return this.getDsl().justifyContent||ot.CENTER}get layout(){return this.getDsl().layout||r.Hbc.horizontal}get fieldWidget(){return this.getDsl().widgets[0]}get fieldInvisible(){var e;return null===(e=this.fieldWidget)||void 0===e?void 0:e.invisible}get picIconWidget(){return this.getDsl().widgets[1]}get label(){var e;return null===(e=this.fieldWidget)||void 0===e?void 0:e.label}get labelFontSize(){var e;const t=null===(e=this.fieldWidget)||void 0===e?void 0:e.labelFontSize;return t?`${t}px`:"var(--oio-font-size)"}};(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"mediaType",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"templateType",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",String)],Ct.prototype,"valueJustifyContent",void 0),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",String)],Ct.prototype,"labelJustifyContent",void 0),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"justifyContent",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"layout",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"fieldWidget",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"fieldInvisible",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"picIconWidget",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"label",null),(0,d.Cg)([p.x0.Reactive(),(0,d.Sn)("design:type",Object),(0,d.Sn)("design:paramtypes",[])],Ct.prototype,"labelFontSize",null),Ct=(0,d.Cg)([u.DF.ClassFactory(m.a_.Token({widget:"textInfo"}))],Ct)},12606:(e,t,i)=>{i.d(t,{N:()=>c});var r=i(15215),o=i(78422),n=i(54908),a=i(16022),l=i(47444),s=i(74905),d=i(20435);class c extends d.d{constructor(){super(...arguments),this.isDataSourceProvider=!0}get submitCache(){return this.field.submitCache}get referencesModel(){return this.field.referencesModel}get mountedCallChaining(){return this.currentMountedCallChaining||this.parentMountedCallChaining}get refreshCallChaining(){return this.currentRefreshCallChaining}get filter(){const e=this.field.filter;return e?this.resolveDynamicDomain(e):e}get domain(){const e=this.field.domain;return e?this.resolveDynamicDomain(e):e}initialize(e){super.initialize(e);const{referencesModel:t}=this;return t?this.initSubmitCache(t):(0,n.Cu)()&&console.error("Invalid references model define.",this),this}initSubmitCache(e){const{excludeItems:t}=this.getDsl(),i=new o.iY4({model:e.model,pks:e.pks,uniques:e.uniques});i.setExcludes(t),this.field.submitCache=i}resolveDynamicDomain(e){var t,i,r;return(0,o.GsW)(e,this.formData,(null===(t=this.rootData)||void 0===t?void 0:t[0])||{},(null===(i=this.openerActiveRecords)||void 0===i?void 0:i[0])||{},this.scene,(null===(r=this.parentViewActiveRecords)||void 0===r?void 0:r[0])||{})}refreshParentProcess(){}refreshValueProcess(){}subscribeProcess(){this.reloadFormData$.subscribe(()=>{this.value!==this.dataSource&&this.refreshValueProcess()})}$$beforeMount(){super.$$beforeMount(),this.currentMountedCallChaining||(this.currentMountedCallChaining=new a.Wl),this.currentRefreshCallChaining||(this.currentRefreshCallChaining=new a.Wl)}$$mounted(){super.$$mounted();const{parentMountedCallChaining:e,parentRefreshCallChaining:t}=this;e&&!e.isCalled?e.hook(this.path,()=>{Promise.all([this.mountedProcess()]).then(()=>{var e;this.subscribeProcess(),null===(e=this.currentMountedCallChaining)||void 0===e||e.syncCall()})},s.w):Promise.all([this.mountedProcess()]).then(()=>{var e;this.subscribeProcess(),null===(e=this.currentMountedCallChaining)||void 0===e||e.syncCall()}),t&&t.hook(this.path,()=>(0,r.sH)(this,void 0,void 0,function*(){var e;yield this.refreshParentProcess(),null===(e=this.currentRefreshCallChaining)||void 0===e||e.syncCall()}),s.w)}$$unmounted(){var e,t;super.$$unmounted(),null===(e=this.parentMountedCallChaining)||void 0===e||e.unhook(this.path),null===(t=this.parentRefreshCallChaining)||void 0===t||t.unhook(this.path)}}(0,r.Cg)([l.x0.Reactive()],c.prototype,"isDataSourceProvider",void 0),(0,r.Cg)([l.x0.Reactive()],c.prototype,"referencesModel",null),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject("mountedCallChaining")],c.prototype,"parentMountedCallChaining",void 0),(0,r.Cg)([l.x0.Reactive()],c.prototype,"currentMountedCallChaining",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Provide()],c.prototype,"mountedCallChaining",null),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject("refreshCallChaining")],c.prototype,"parentRefreshCallChaining",void 0),(0,r.Cg)([l.x0.Reactive()],c.prototype,"currentRefreshCallChaining",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Provide()],c.prototype,"refreshCallChaining",null),(0,r.Cg)([l.x0.Reactive()],c.prototype,"filter",null),(0,r.Cg)([l.x0.Reactive()],c.prototype,"domain",null)},13193:(e,t,i)=>{var r;i.d(t,{Od:()=>se,t8:()=>$e,FM:()=>g,r4:()=>It,A8:()=>r,oQ:()=>Ie,Hq:()=>H,Ib:()=>Ve,Ty:()=>ct,r$:()=>vt}),function(e){e["activeRecords"]="activeRecords",e["activeRecord"]="activeRecord",e["rootRecord"]="rootRecord",e["openerRecord"]="openerRecord",e["scene"]="scene"}(r||(r={}));class o{constructor(e,t,i){this.wordPatterns=[],this.expressionPatterns=[],this.brackets=[],this.bracketsFlags=[],this.wordPatterns=e,this.expressionPatterns=t,this.brackets=i}lex(e){const t={type:"unknown",text:"",avalible:!1};for(const i of this.wordPatterns){const r=i.test(e);if(r>t.text.length){t.text=i.parse&&i.parse(e.substr(0,r))||e.substr(0,r),t.avalible=!1!==i.avalible,t.type=i.name;break}}if(0===t.text.length)throw new Error(`unknown source:${e}`);return t}parseExpression(e){if(0===e.length)return;let t={type:"unknown"},i=0,r=e;for(let o=0;o<this.expressionPatterns.length;o++){const n=this.expressionPatterns[o].test(e);if(n>i){const{parse:e}=this.expressionPatterns[o];e&&(t=e(r.slice(0,n)),i=n,r=r.slice(n))}}return t}compile(e){let t=e;const i=[];while(t.length>0){const e=this.lex(t);t=t.substring(e.text.length),i.push(e)}return this.parseExpression(i.filter(e=>e.avalible))}checkToken(e,t){this.cleanBrancketsFlags();for(let i=0;i<t.length;i++){for(let e=0;e<this.brackets.length;e++)t[i].text===this.brackets[e].start&&this.bracketsFlags[e]++,t[i].text===this.brackets[e].end&&this.bracketsFlags[e]--;if(t[i].text===e){let e=!0;for(let t=0;t<this.bracketsFlags.length;t++)if(0!==this.bracketsFlags[t]){e=!1;break}if(e)return i}}return-1}cleanBrancketsFlags(){for(let e=0;e<this.brackets.length;e++)this.bracketsFlags[e]=0}}var n,a=i(15215),l=i(83247),s=i(9703),d=i(66401),c=i(16022),u=i(74353),p=i.n(u);(function(e){e["datetime"]="datetime",e["date"]="date",e["time"]="time",e["year"]="year",e["month"]="month",e["week"]="week"})(n||(n={}));class h{static parse(e){let t="YYYY",i=n.year;return e.includes(":")?e.includes("-")?(i=n.datetime,t="YYYY-MM-DD HH:mm:ss"):(i=n.time,t="HH:mm:ss"):e.includes("-")&&(i=n.date,t="YYYY-MM-DD"),{format:t,value:h.autoFormat(i,e,t)}}static autoFormat(e,t,i){if(!t)return p()();const r=" ",o=e===n.time,a=o?`YYYY-MM-DD${r}${i}`:i,l=o?`1970-01-02${r}${t}`:t;return p()(l,a)}}const g={NOW:v,NOW_STR:m,TODAY_STR:f,TO_DATE:y,ADD_DAY:b,ADD_MONTH:C,ADD_YEAR:x,GREATER_THAN:w,GREATER_EQUAL:S,ADD_WORK_DAY:T,COUNT_DAY:E,LESS_THAN:A,LESS_EQUAL:k,DATE_EQUALS:D};function v(){return Date.now()}function m(){return p()().format("YYYY-MM-DD HH:mm:ss")}function f(){return p()().format("YYYY-MM-DD")}function y(e,t){return t?p()(e,t):h.parse(e).value}function b(e,t){if(null==e||null==t)return e;const{value:i,format:r}=h.parse(e);return i.add(t,"days").format(r)}function C(e,t){if(null==e||null==t)return e;const{value:i,format:r}=h.parse(e);return i.add(t,"months").format(r)}function x(e,t){if(null==e||null==t)return e;const{value:i,format:r}=h.parse(e);return i.add(t,"years").format(r)}function w(e,t){return null!=e&&null!=t&&h.parse(e).value.isAfter(h.parse(t).value)}function S(e,t){if(null==e||null==t)return!1;const i=h.parse(e).value,r=h.parse(t).value;return i.isSame(r)||i.isAfter(r)}function T(e,t){if(null==e||null==t)return e;const{value:i,format:r}=h.parse(e);for(let o=0;o<t;o++)[0,6].includes(i.add(1,"days").day())&&t++;return i.add(t,"days").format(r)}function E(e,t){return null!=e&&null!=t&&Math.ceil((h.parse(e).value.valueOf()-h.parse(t).value.valueOf())/864e5)}function A(e,t){return null!=e&&null!=t&&h.parse(e).value.isBefore(h.parse(t).value)}function k(e,t){if(null==e||null==t)return!1;const i=h.parse(e).value,r=h.parse(t).value;return i.isSame(r)||i.isBefore(r)}function D(e,t){return null!=e&&null!=t&&h.parse(e).value.isSame(h.parse(t).value)}const F="^(1[3-9])\\d{9}$",R="^[a-z0-9A-Z]+[-|a-z0-9A-Z._]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\.)+[a-z]{2,}$",O="^(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9~!@&%#_(.)]{8,16}$",N="^-{0,1}[0-9]\\d*$?",$="^\\(d{15}$|(^\\d{18}$)|(^\\d{17}(\\d|X|x))$",M="^(?:(?:https?)://)(?:(?:1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9])(?:\\.(?:1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)){2}(?:\\.(?:1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*)(?::([1-9]|[1-9]\\d|[1-9]\\d{2}|[1-9]\\d{3}|[1-5]\\d{4}|6[0-4]\\d{3}|65[0-4]\\d{2}|655[0-2]\\d|6553[0-5]))?(?:/\\S*)?$",I="^[\\u4e00-\\u9fa5]{1,}$",L="^[0-9]*$",_="^-{0,1}[0-9]+(\\.[0-9]{2})?$",P="^((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)$",j="^.?[\\u4e00-\\u9fa5]{0,}.?$",V="^[a-z0-9A-Z_]*$",B="^[a-z0-9A-Z]*$",H={MATCHES:W,CHECK_PHONE:U,CHECK_EMAIL:q,CHECK_USER_NAME:z,CHECK_PWD:G,CHECK_INTEGER:K,CHECK_ID_CARD:X,CHECK_URL:Q,CHECK_CHINESE:Y,CHECK_NUMBER:J,CHECK_TWO_DIG:Z,CHECK_IP:ee,CHECK_CONTAINS_CHINESE:te,CHECK_CODE:ie,CHECK_ENG_NUM:re,CHECK_SIZE:oe,CHECK_MIN_SIZE:ne,CHECK_MAX_SIZE:ae,CHECK_SIZE_RANGE:le};function W(e,t){return null!=t&&null!=e&&new RegExp(t).test(e)}function U(e){return W(e,F)}function q(e){return W(e,R)}function z(e){return null!=e&&e.trim().length>=1}function G(e){return W(e,O)}function K(e){return W(e,N)}function X(e){return W(e,$)}function Q(e){return W(e,M)}function Y(e){return W(e,I)}function J(e){return W(e,L)}function Z(e){return W(e,_)}function ee(e){return W(e,P)}function te(e){return W(e,j)}function ie(e){return W(e,V)}function re(e){return W(e,B)}function oe(e,t){return null!=t&&W(e,`^.{${t}}$`)}function ne(e,t){return null!=t&&W(e,`^.{${t},}$`)}function ae(e,t){return null!=t&&W(e,`^.{0,${t}}$`)}function le(e,t,i){return null!=t&&null!=i&&W(e,`^.{${t},${i}}$`)}const se={LIST_GET:de,LIST_IS_EMPTY:ce,LIST_CONTAINS:ue,LIST_ADD:pe,LIST_ADD_BY_INDEX:he,LIST_REMOVE:ge,LIST_COUNT:ve,LIST_IDS:me,LIST_FIELD_VALUES:fe,LIST_FIELD_EQUALS:ye,LIST_FIELD_NOT_EQUALS:be,LIST_FIELD_IN:Ce,LIST_FIELD_NOT_IN:xe,LIST_AND:we,LIST_OR:Se,STRING_LIST_TO_NUMBER_LIST:Te,COMMA:Ee,CONCAT:Ae,MAP_GET:ke,MAP_IS_EMPTY:De,MAP_CONTAINS_KEY:Fe,MAP_PUT:Re,MAP_REMOVE:Oe,MAP_COUNT:Ne};function de(e,t){return null==e?e:e[t]}function ce(e){return null==e||0===e.length}function ue(e,t){const i=null===e||void 0===e?void 0:e.findIndex(e=>JSON.stringify(e)===JSON.stringify(t));return null!=i&&-1!==i}function pe(e,t){return e.push(t),e}function he(e,t,i){return null==e&&null==t?e:e.splice(t,0,i)}function ge(e,t){if(null==e)return e;if(null==t)return e;const i=e.findIndex(e=>JSON.stringify(e)===JSON.stringify(t));return-1!==i&&e.splice(i,1),e}function ve(e){return null==e?0:e.length}function me(e){return fe(e,void 0,"id")}function fe(e,t,i){return null==e||null==i?e:e.filter(e=>null!=e[i]).map(e=>e[i])}function ye(e,t,i,r){return(null===e||void 0===e?void 0:e.map(e=>JSON.stringify(e[i])===JSON.stringify(r)))||[]}function be(e,t,i,r){return(null===e||void 0===e?void 0:e.map(e=>JSON.stringify(e[i])!==JSON.stringify(r)))||[]}function Ce(e,t,i,r){return(null===r||void 0===r?void 0:r.map(t=>{if(!t)return!1;const r=JSON.stringify(t);return!!e.map(e=>{const t=e[i];if(t)return JSON.stringify(t)}).find(e=>e===r)}))||[]}function xe(e,t,i,r){return(null===r||void 0===r?void 0:r.map(t=>{if(!t)return!0;const r=JSON.stringify(t);return!e.map(e=>{const t=e[i];if(t)return JSON.stringify(t)}).find(e=>e===r)}))||[]}function we(e){if(e=e||[],!e.length)return!1;for(const t of e)if(!t)return!1;return!0}function Se(e){if(e=e||[],!e.length)return!1;for(const t of e)if(t)return!0;return!1}function Te(e){e=e||[];const t=[];for(const i of e){const r=Number(i);if(Number.isNaN(r))return e;t.push(r)}return t}function Ee(e){return(e||[]).map(e=>"number"===typeof e?`${e}`:e).join(",")}function Ae(e,t){return(e||[]).join(t)}function ke(e,t){return null==e?e:e[t]}function De(e){return null==e?e:0===Object.keys(e).length}function Fe(e,t){return Object.keys(e).includes(t)}function Re(e,t,i){return null==e||(e[t]=i),e}function Oe(e,t){if(null==e)return e;const i=e[t];return delete e[t],i}function Ne(e){return null==e?0:Object.keys(e).length}const $e={TO_NUMBER:Me};function Me(e){return Number(e).valueOf()}const Ie={IF:Le,AND:_e,OR:Pe,NOT:je};function Le(e,t,i){return e?t:i}function _e(e,t){return null!=e&&null!=t&&(e&&t)}function Pe(e,t){return null==e&&(e=!1),null==t&&(t=!1),e||t}function je(e){return!e}const Ve={ABS:Be,FLOOR:He,CEIL:We,ROUND:Ue,MOD:qe,SQRT:ze,SIN:Ge,COS:Ke,PI:Xe,ADD:Qe,SUBTRACT:Ye,MULTIPLY:Je,DIVIDE:Ze,LT:et,LE:tt,GT:it,GE:rt,MAX:ot,MIN:nt,SUM:at,AVG:lt,COUNT:st,UPPER_MONEY:dt};function Be(e){return null==e?e:Math.abs(Number(e))}function He(e){return null==e?e:Math.floor(Number(e))}function We(e){return null==e?e:Math.ceil(Number(e))}function Ue(e){return null==e?e:Math.round(Number(e))}function qe(e,t){return null==e?e:null==t?t:Number(e)%Number(t)}function ze(e){return null==e?e:Math.sqrt(Number(e))}function Ge(e){return null==e?e:Math.sin(Number(e))}function Ke(e){return null==e?e:Math.cos(Number(e))}function Xe(){return Math.PI}function Qe(e,t){return c.A5.add(e,t)}function Ye(e,t){return c.A5.subtract(e,t)}function Je(e,t){return c.A5.multiply(e,t)}function Ze(e,t){return c.A5.divide(e,t)}function et(e,t){return c.A5.lt(e,t)}function tt(e,t){return c.A5.le(e,t)}function it(e,t){return c.A5.gt(e,t)}function rt(e,t){return c.A5.ge(e,t)}function ot(e,t){if(null!=e||null!=t)return Math.max(Number(e),Number(t))}function nt(e,t){if(null!=e||null!=t)return Math.min(Number(e),Number(t))}function at(e){if(null==e)return e;let t;return null===e||void 0===e||e.forEach(e=>{const i=Number(e);t=null==t?i:c.A5.add(t,i)}),t}function lt(e){if(null==e)return e;const t=at(e);return null==t?t:t/e.length}function st(e){return null==e?0:e.length}function dt(e){if(null==e)return e;const t=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],i=["","拾","佰","仟"],r=["","万","亿","兆"],o=["角","分","毫","厘"],n="整",a="元",l=1e15;let s,d,c,u="";if(""===e)return"";if(e=parseFloat(e.toString()),e>=l)return"";if(0===e)return u=t[0]+a+n,u;if(e=e.toString(),-1===e.indexOf(".")?(s=e,d=""):(c=e.split("."),s=c[0],d=c[1].substr(0,4)),parseInt(s,10)>0){let e=0;const o=s.length;for(let n=0;n<o;n++){const a=s.substr(n,1),l=o-n-1,d=l/4,c=l%4;"0"===a?e++:(e>0&&(u+=t[0]),e=0,u+=t[parseInt(a,10)]+i[c]),0===c&&e<4&&(u+=r[d])}u+=a}if(""!==d){const e=d.length;for(let i=0;i<e;i++){const e=d.substr(i,1);"0"!==e&&(u+=t[Number(e)]+o[i])}}return""===u?u+=t[0]+a+n:""===d&&(u+=n),u}const ct={IS_NULL:ut,EQUALS:pt,GET:ht,FIELD_GET:gt};function ut(e){return null==e}function pt(e,t){return JSON.stringify(e)===JSON.stringify(t)}function ht(e,t){return gt(e,void 0,t)}function gt(e,t,i){if(null==e)return e;if(null==i)return;const r=i.split(".");let o=e;for(const n in r)if(n&&(o=o[n],null==o))return;return o}const vt={TRIM:mt,IS_BLANK:ft,STARTS_WITH:yt,ENDS_WITH:bt,CONTAINS:Ct,STR_LIST_CONTAINS:xt,LOWER:wt,UPPER:St,REPLACE:Tt,LEN:Et,JOIN:At,PARSE:kt,JSON:Dt,SUBSTRING:Ft};function mt(e){return null==e?e:e.trim()}function ft(e){return null==e||""===e.trim()}function yt(e,t){return null==e&&(e=""),e.startsWith(t)}function bt(e,t){return null==e&&(e=""),e.endsWith(t)}function Ct(e,t){return null!=e&&e.includes(t)}function xt(e,t,i){return e.split(",").includes(t[i])}function wt(e){return null==e?e:e.toLowerCase()}function St(e){return null==e?e:e.toUpperCase()}function Tt(e,t,i){return null==e?e:e.replace(t,i)}function Et(e){return null==e?0:e.length}function At(e,t){return null==e&&(e=""),null==t&&(t=""),e+t}function kt(e){return null==e?e:JSON.parse(e)}function Dt(e){return null==e?e:JSON.stringify(e)}function Ft(e,t,i){return null===e||void 0===e?void 0:e.substring(t,i)}class Rt{constructor(){this.stack=[],this.global=new Map,this.ctx=this.global,this.lastValue={value:null,type:"null",decorate:[]},this.thisValue={value:{},type:"object",decorate:[]},this.execHandles=new Map,this.operatorHandles=new Map,this.defineType="none",this.next=null}registerExecHandle(e,t){this.execHandles.set(e,t)}registerOperator(e,t,i,r){this.operatorHandles.set(JSON.stringify({left:e,right:t,operator:i}),r)}executeOperator(e,t,i){const r=this.operatorHandles.get(JSON.stringify({left:e.type,right:t.type,operator:i}))||this.operatorHandles.get(JSON.stringify({left:"*",right:"*",operator:i}));return r?r(e,t):{value:void 0,type:"undefined",decorate:[]}}set(e,t){const i=this.get(e);return i?i.decorate.includes("const")||(i.value=t.value,i.type=t.type):"none"!==this.defineType&&this.ctx.set(e,{value:t.value,type:t.type,decorate:[this.defineType]}),t}get(e){return this.ctx.get(e)||this.global.get(e)}exec(e){if(e)if("unknown"!==e.type){const t=this.execHandles.get(e.type);t&&(this.lastValue=t(e))}else this.lastValue={value:null,type:"null",decorate:[]};return this.lastValue}define(e){this.defineType=e}getThis(){return this.thisValue}callFunction(e,t){const i=e.value,r=new Map;i.args.forEach((e,i)=>r.set(e,t[i])),r.set("arguments",{value:t.map(e=>e.value),type:"array",decorate:[]}),this.stack.push(this.ctx),this.ctx=r,this.lastValue={value:void 0,type:"undefined",decorate:[]};const o=i.handle();return this.ctx=this.stack.pop(),this.lastValue.value=o,this.lastValue.type=typeof o,this.lastValue}}const Ot=(0,l.Bp)("ExpressionExecutorService"),Nt=["!==","===",">>>",">>","<<","==","!=",">=","<=","++","--","&&","||","=>","+","-","*","/","%",".",",","(",")","[","]","{","}",":","?","&","|","!","^","~","=",">","<"],$t=["const ","let","new","if","else","while","for","return","function","break","switch","default","do","debugger","continue","case","this","true","false","typeof","instanceof","undefined","null","unknown","NaN"],Mt=3;class It{constructor(){this.keywordPatten={name:"keyword",test:e=>{for(let t=0;t<$t.length;t++){const i=$t[t];if(e.startsWith(i)){const t=e[i.length];return t&&/^\w+/.test(t)?0:i.length}}return 0}},this.tokenPatten={name:"token",test:e=>{const t=/^\w+/.exec(e);if(t){const e=t[0];if(!/^(-?\d+)(\.\d+)?/.test(e))return e.length}return 0}},this.numberPatten={name:"number",test:e=>{const t=/^(-?\d+)(\.\d+)?/.exec(e);return t?t[0].length:0}},this.stringPatten={name:"string",test:e=>{if(e.startsWith('"'))for(let t=1;t<e.length;t++)if('"'===e.charAt(t)&&"\\"!==e.charAt(t-1))return t+1;if(e.startsWith("'"))for(let t=1;t<e.length;t++)if("'"===e.charAt(t)&&"\\"!==e.charAt(t-1))return t+1;return 0}},this.commentsPatten={name:"comments",test:e=>{if(e.startsWith("//"))for(let t=2;t<e.length;t++)if("\n"===e.charAt(t))return t+1;if(e.startsWith("/*"))for(let t=2;t<e.length;t++)if("*"===e.charAt(t)&&"/"===e.charAt(t+1))return t+2;return 0},avalible:!1},this.symbolPatten={name:"symbol",test:e=>{for(let t=0;t<Nt.length;t++)if(e.startsWith(Nt[t]))return Nt[t].length;return 0}},this.blankPatten={name:"blank",test:e=>e.startsWith(" ")?1:0,avalible:!1},this.newLinePatten={name:"blank",test:e=>e.startsWith("\n")?1:0},this.endPatten={name:"end",test:e=>e.startsWith(";\n")?2:e.startsWith(";")||e.startsWith(";")?1:0},this.blockPatten={name:"block",test:e=>{const t=this.lang.checkToken("}",e);return-1!==t&&t!==e.length-1?e.length:0},parse:e=>{const t=this.lang.checkToken("}",e);return{type:"block",operator:{text:"{}",type:"block",avalible:!0},left:this.lang.parseExpression(e.slice(0,t+1)),right:this.lang.parseExpression(e.slice(t+1))}}},this.fullBlockPatten={name:"fullBlock",test:e=>"{"===e[0].text&&"}"===e[e.length-1].text?e.length:0,parse:e=>({type:"fullBlock",operator:{type:"fullBlock",text:"{}",avalible:!0},left:this.lang.parseExpression(e.slice(1,e.length-1))})},this.tokenBlockPatten={name:"token",test:e=>1===e.length?1:0,parse:e=>({operator:e[0],type:"variable"})},this.bracketsBlockPatten={name:"brackets",test:e=>"("===e[0].text&&")"===e[e.length-1].text?e.length:0,parse:e=>({operator:{type:"()",text:"()"},left:this.lang.parseExpression(e.slice(1,e.length-1)),type:"brackets"})},this.ternaryBlockPatten={name:"ternary",test:e=>-1!==this.lang.checkToken("?",e)?e.length:0,parse:e=>{const t=this.lang.checkToken("?",e),i=this.lang.checkToken(":",e);return{type:"ternary",operator:e[t],left:this.lang.parseExpression(e.slice(0,t)),right:{operator:e[i],left:this.lang.parseExpression(e.slice(t+1,i)),right:this.lang.parseExpression(e.slice(i+1)),type:"ternary2"}}}},this.calculateBlockPatten=(e,t)=>({name:t,test:t=>{for(let i=0;i<e.length;i++){const r=this.lang.checkToken(e[i],t);if(-1!==r)return t.length}return 0},parse:i=>{let r=0;for(let t=0;t<e.length;t++)if(r=this.lang.checkToken(e[t],i),-1!==r)break;const o={operator:i[r],left:this.lang.parseExpression(i.slice(0,r)),right:this.lang.parseExpression(i.slice(r+1)),type:t};return o}}),this.defineBlockExpression={name:"define",test:e=>"var"===e[0].text||"let"===e[0].text||"const"===e[0].text?e.length:0,parse:e=>{const t={operator:e[0],type:"define"};return t.left=this.lang.parseExpression(e.slice(1)),t}},this.memberBlockExpression={name:"member",test:e=>-1!==this.lang.checkToken(".",e)?e.length:0,parse:e=>{let t=0;for(let i=e.length-1;i>0;i--)if("."===e[i].text){t=i;break}return{operator:e[t],type:"member",left:this.lang.parseExpression(e.slice(0,t)),right:this.lang.parseExpression(e.slice(t+1))}}},this.functionCallBlockPatten={name:"functionCall",test:e=>e.length>=Mt&&"token"===e[0].type&&"("===e[1].text?e.length:0,parse:e=>({type:"functionCall",operator:{type:"function",text:e[0].text,avalible:!0},left:this.lang.parseExpression(e.slice(2,e.length-1))})},this.selectBlockPatten={name:"select",test:e=>e.length>2&&("token"===e[0].type||"arguments"===e[0].text)&&"["===e[1].text?e.length:0,parse:e=>({operator:{type:"select",text:"[]",avalible:!0},left:this.lang.parseExpression([e[0]]),right:this.lang.parseExpression(e.slice(2,e.length-1)),type:"select"})},this.arrayVariablePatten={name:"arrayVariable",test:e=>{if(e.length<2)return 0;const{type:t}=e[0];return"symbol"===t&&"["===e[0].text&&"]"===e[e.length-1].text?e.length:0},parse:e=>({type:"variable",operator:{type:"keyword",text:"array",avalible:!0},right:this.lang.parseExpression(e.slice(1,e.length-1))})},this.functionBlockPatten={name:"function",test:e=>{const t=this.lang.checkToken("=>",e);if(-1!==t){const t=this.lang.checkToken("}",e);return t+1}return 0},parse:e=>{const t=this.lang.checkToken("=>",e),i=e.slice(1,t-1),r=e.slice(t+2,e.length-1);return{type:"functionDefine",operator:e[t],left:{type:"arguments",operator:{text:i.map(e=>e.text).join(""),type:"arguments",avalible:!0}},right:this.lang.parseExpression(r)}}},this.returnBlockPatten={name:"return",test:e=>"return"===e[0].text?e.length:0,parse:e=>({type:"return",operator:e[0],left:this.lang.parseExpression(e.slice(1))})},this.lang=new o([this.keywordPatten,this.tokenPatten,this.numberPatten,this.stringPatten,this.commentsPatten,this.symbolPatten,this.blankPatten,this.endPatten,this.newLinePatten],[this.blockPatten,this.calculateBlockPatten([";",";\n","\n"],"end"),this.fullBlockPatten,this.defineBlockExpression,this.calculateBlockPatten([","],"comma"),this.calculateBlockPatten(["="],"set"),this.ternaryBlockPatten,this.functionBlockPatten,this.calculateBlockPatten(["&&","||"],"logic1"),this.calculateBlockPatten(["===","!==","==","!=",">=","<=",">","<"],"logic2"),this.calculateBlockPatten(["!"],"logic3"),this.calculateBlockPatten(["+","-"],"calculate1"),this.calculateBlockPatten(["*","/","%","^","<<",">>","|","&","~",">>>"],"calculate2"),this.bracketsBlockPatten,this.selectBlockPatten,this.arrayVariablePatten,this.memberBlockExpression,this.functionCallBlockPatten,this.returnBlockPatten,this.tokenBlockPatten],[{start:"(",end:")"},{start:"[",end:"]"},{start:"{",end:"}"}]),this.runtime=new Rt,this.runtime.registerExecHandle("variable",this.execVariable.bind(this)),this.runtime.registerExecHandle("end",this.execEnd.bind(this)),this.runtime.registerExecHandle("block",this.execEnd.bind(this)),this.runtime.registerExecHandle("comma",this.execEnd.bind(this)),this.runtime.registerExecHandle("brackets",this.execBrackets.bind(this)),this.runtime.registerExecHandle("fullBlock",this.execBrackets.bind(this)),this.runtime.registerExecHandle("ternary",this.execTernary.bind(this)),this.runtime.registerExecHandle("set",this.execSet.bind(this)),this.runtime.registerExecHandle("define",this.execDefine.bind(this)),this.runtime.registerExecHandle("logic1",this.execCalculate.bind(this)),this.runtime.registerExecHandle("logic2",this.execCalculate.bind(this)),this.runtime.registerExecHandle("logic3",this.execCalculate.bind(this)),this.runtime.registerExecHandle("calculate1",this.execCalculate.bind(this)),this.runtime.registerExecHandle("calculate2",this.execCalculate.bind(this)),this.runtime.registerExecHandle("functionCall",this.execFunctionCall.bind(this)),this.runtime.registerExecHandle("member",this.execMember.bind(this)),this.runtime.registerExecHandle("select",this.execSelect.bind(this)),this.runtime.registerExecHandle("functionDefine",this.execFunctionDefine.bind(this)),this.runtime.registerExecHandle("return",this.execReturn.bind(this)),this.runtime.registerOperator("*","*","&&",this.operatorDefine("&&").bind(this)),this.runtime.registerOperator("*","*","||",this.operatorDefine("||").bind(this)),this.runtime.registerOperator("*","*","===",this.operatorDefine("===").bind(this)),this.runtime.registerOperator("*","*","!==",this.operatorDefine("!==").bind(this)),this.runtime.registerOperator("*","*","==",this.operatorDefine("==").bind(this)),this.runtime.registerOperator("*","*","!=",this.operatorDefine("!=").bind(this)),this.runtime.registerOperator("*","*",">=",this.operatorDefine(">=").bind(this)),this.runtime.registerOperator("*","*","<=",this.operatorDefine("<=").bind(this)),this.runtime.registerOperator("*","*",">",this.operatorDefine(">").bind(this)),this.runtime.registerOperator("*","*","<",this.operatorDefine("<").bind(this)),this.runtime.registerOperator("*","*","!",this.operatorDefine("!").bind(this)),this.runtime.registerOperator("*","*","+",this.operatorDefine("+").bind(this)),this.runtime.registerOperator("*","*","-",this.operatorDefine("-").bind(this)),this.runtime.registerOperator("*","*","*",this.operatorDefine("*").bind(this)),this.runtime.registerOperator("*","*","/",this.operatorDefine("/").bind(this)),this.runtime.registerOperator("*","*","%",this.operatorDefine("%").bind(this)),this.runtime.registerOperator("*","*","&",this.operatorDefine("&").bind(this)),this.runtime.registerOperator("*","*","|",this.operatorDefine("|").bind(this)),this.runtime.registerOperator("*","*","~",this.operatorDefine("~").bind(this)),this.runtime.registerOperator("*","*","^",this.operatorDefine("^").bind(this)),this.runtime.registerOperator("*","*","<<",this.operatorDefine("<<").bind(this)),this.runtime.registerOperator("*","*",">>",this.operatorDefine(">>").bind(this)),this.runtime.registerOperator("*","*",">>>",this.operatorDefine(">>>").bind(this)),this.registerFunction("ABS",["number|string"],Ve.ABS),this.registerFunction("FLOOR",["number|string"],Ve.FLOOR),this.registerFunction("CEIL",["number|string"],Ve.CEIL),this.registerFunction("ROUND",["number|string"],Ve.ROUND),this.registerFunction("MOD",["number|string","number|string"],Ve.MOD),this.registerFunction("SQRT",["number|string"],Ve.SQRT),this.registerFunction("SIN",["number|string"],Ve.SIN),this.registerFunction("COS",["number|string"],Ve.COS),this.registerFunction("PI",[],()=>Ve.PI),this.registerFunction("ADD",["string|number","string|number"],Ve.ADD),this.registerFunction("SUBTRACT",["number|string","number|string"],Ve.SUBTRACT),this.registerFunction("MULTIPLY",["number|string","number|string"],Ve.MULTIPLY),this.registerFunction("DIVIDE",["number|string","number|string"],Ve.DIVIDE),this.registerFunction("MAX",["number|string","number|string"],Ve.MAX),this.registerFunction("MIN",["number|string","number|string"],Ve.MIN),this.registerFunction("SUM",["array"],Ve.SUM),this.registerFunction("AVG",["array"],Ve.AVG),this.registerFunction("COUNT",["array"],Ve.COUNT),this.registerFunction("UPPER_MONEY",[e=>"number"!==typeof e&&"string"!==typeof e?"number|string":""],Ve.UPPER_MONEY),this.registerFunction("TRIM",["string"],vt.TRIM),this.registerFunction("IS_BLANK",["string"],vt.IS_BLANK),this.registerFunction("STARTS_WITH",["string","string"],vt.STARTS_WITH),this.registerFunction("ENDS_WITH",["string","string"],vt.ENDS_WITH),this.registerFunction("CONTAINS",["string","string"],vt.CONTAINS),this.registerFunction("STR_LIST_CONTAINS",["string","object","string"],vt.STR_LIST_CONTAINS),this.registerFunction("LOWER",["string"],vt.LOWER),this.registerFunction("UPPER",["string"],vt.UPPER),this.registerFunction("REPLACE",["string","string","string"],vt.REPLACE),this.registerFunction("LEN",["string"],vt.LEN),this.registerFunction("JOIN",["any","any"],vt.JOIN),this.registerFunction("PARSE",["string"],vt.PARSE),this.registerFunction("JSON",["any"],vt.JSON),this.registerFunction("SUBSTRING",["string","number","number"],vt.SUBSTRING),this.registerFunction("MATCHES",["string","string"],H.MATCHES),this.registerFunction("CHECK_PHONE",["string"],H.CHECK_PHONE),this.registerFunction("CHECK_EMAIL",["string"],H.CHECK_EMAIL),this.registerFunction("CHECK_USER_NAME",["string"],H.CHECK_USER_NAME),this.registerFunction("CHECK_PWD",["string"],H.CHECK_PWD),this.registerFunction("CHECK_INTEGER",["string"],H.CHECK_INTEGER),this.registerFunction("CHECK_ID_CARD",["string"],H.CHECK_ID_CARD),this.registerFunction("CHECK_URL",["string"],H.CHECK_URL),this.registerFunction("CHECK_CHINESE",["string"],H.CHECK_CHINESE),this.registerFunction("CHECK_NUMBER",["string"],H.CHECK_NUMBER),this.registerFunction("CHECK_TWO_DIG",["string"],H.CHECK_TWO_DIG),this.registerFunction("CHECK_IP",["string"],H.CHECK_IP),this.registerFunction("CHECK_CONTAINS_CHINESE",["string"],H.CHECK_CONTAINS_CHINESE),this.registerFunction("CHECK_CODE",["string"],H.CHECK_CODE),this.registerFunction("CHECK_ENG_NUM",["string"],H.CHECK_ENG_NUM),this.registerFunction("CHECK_SIZE",["string","number"],H.CHECK_SIZE),this.registerFunction("CHECK_MIN_SIZE",["string","number"],H.CHECK_MIN_SIZE),this.registerFunction("CHECK_MAX_SIZE",["string","number"],H.CHECK_MAX_SIZE),this.registerFunction("CHECK_SIZE_RANGE",["string","number","number"],H.CHECK_SIZE_RANGE),this.registerFunction("NOW",[],g.NOW),this.registerFunction("NOW_STR",[],g.NOW_STR),this.registerFunction("TODAY_STR",[],g.TODAY_STR),this.registerFunction("TO_DATE",["string","string"],g.TO_DATE),this.registerFunction("ADD_DAY",["string","number"],g.ADD_DAY),this.registerFunction("ADD_MONTH",["string","number"],g.ADD_MONTH),this.registerFunction("ADD_YEAR",["string","number"],g.ADD_YEAR),this.registerFunction("GREATER_THAN",["string","string"],g.GREATER_THAN),this.registerFunction("GREATER_EQUAL",["string","string"],g.GREATER_EQUAL),this.registerFunction("ADD_WORK_DAY",["string","number"],g.ADD_WORK_DAY),this.registerFunction("COUNT_DAY",["string","string"],g.COUNT_DAY),this.registerFunction("LESS_THAN",["string","string"],g.LESS_THAN),this.registerFunction("LESS_EQUAL",["string","string"],g.LESS_EQUAL),this.registerFunction("DATE_EQUALS",["string","string"],g.DATE_EQUALS),this.registerFunction("LIST_GET",["array","number"],se.LIST_GET),this.registerFunction("LIST_IS_EMPTY",["array"],se.LIST_IS_EMPTY),this.registerFunction("LIST_CONTAINS",["array","any"],se.LIST_CONTAINS),this.registerFunction("LIST_ADD",["array","any"],se.LIST_ADD),this.registerFunction("LIST_ADD_BY_INDEX",["array","number","any"],se.LIST_ADD_BY_INDEX),this.registerFunction("LIST_REMOVE",["array","any"],se.LIST_REMOVE),this.registerFunction("LIST_COUNT",["array"],se.LIST_COUNT),this.registerFunction("LIST_IDS",["array"],se.LIST_IDS),this.registerFunction("LIST_FIELD_VALUES",["array","string","string"],se.LIST_FIELD_VALUES),this.registerFunction("LIST_FIELD_EQUALS",["array","string","string","any"],se.LIST_FIELD_EQUALS),this.registerFunction("LIST_FIELD_NOT_EQUALS",["array","string","string","any"],se.LIST_FIELD_NOT_EQUALS),this.registerFunction("LIST_FIELD_IN",["array","string","string","array"],se.LIST_FIELD_IN),this.registerFunction("LIST_FIELD_NOT_IN",["array","string","string","array"],se.LIST_FIELD_NOT_IN),this.registerFunction("LIST_AND",["array"],se.LIST_AND),this.registerFunction("LIST_OR",["array"],se.LIST_OR),this.registerFunction("STRING_LIST_TO_NUMBER_LIST",["array"],se.STRING_LIST_TO_NUMBER_LIST),this.registerFunction("COMMA",["array"],se.COMMA),this.registerFunction("CONCAT",["array","string"],se.CONCAT),this.registerFunction("MAP_GET",["object","string"],se.MAP_GET),this.registerFunction("MAP_IS_EMPTY",["object"],se.MAP_IS_EMPTY),this.registerFunction("MAP_CONTAINS_KEY",["object","string"],se.MAP_CONTAINS_KEY),this.registerFunction("MAP_PUT",["object","string","any"],se.MAP_PUT),this.registerFunction("MAP_REMOVE",["object","string"],se.MAP_REMOVE),this.registerFunction("MAP_COUNT",["object"],se.MAP_COUNT),this.registerFunction("IS_NULL",["any"],ct.IS_NULL),this.registerFunction("EQUALS",["object","object"],ct.EQUALS),this.registerFunction("GET",["object","string"],ct.GET),this.registerFunction("FIELD_GET",["object","string","string"],ct.FIELD_GET),this.registerFunction("IF",["boolean","any","any"],Ie.IF),this.registerFunction("AND",["boolean","boolean"],Ie.AND),this.registerFunction("OR",["boolean","boolean"],Ie.OR),this.registerFunction("NOT",["boolean"],Ie.NOT),this.registerFunction("ToNumber",["any"],$e.TO_NUMBER),this.registerFunction("TO_NUMBER",["any"],$e.TO_NUMBER)}execVariable(e){const t=e.operator,{type:i,text:r}=t;let o,n;if("token"===i){if(o=this.runtime.get(r),o)return o;o={value:void 0,type:"undefined",decorate:[]}}else if("keyword"===i){if("undefined"===r)return{type:"undefined",value:void 0,decorate:[]};if("null"===r)return{type:"null",value:null,decorate:[]};if("true"===r)return{type:"boolean",value:!0,decorate:[]};if("false"===r)return{type:"boolean",value:!1,decorate:[]};if("this"===r)return this.runtime.getThis();if("NaN"===r)return{type:"number",value:NaN,decorate:[]};if("array"===r){const t=[];let i=e.right;while(i){const{left:e,operator:r,right:o}=i;r&&"symbol"===r.type&&","===r.text?e&&t.push(this.runtime.exec(e).value):t.push(this.runtime.exec(i).value),i=o}return{type:"array",value:t,decorate:[]}}}if(r.startsWith("'")&&r.endsWith("'"))n=JSON.parse(`"${r.substr(1,r.length-2)}"`);else if(o)n=r;else try{n=JSON.parse(r),"number"===typeof n&&n.toString()!==r&&(n=r)}catch(a){n=r}return{value:n,type:typeof n,decorate:[]}}execEnd(e){return this.runtime.exec(e.left),this.runtime.exec(e.right)}execBrackets(e){return this.runtime.exec(e.left)}execTernary(e){const t=this.runtime.exec(e.left).value?this.runtime.exec(e.right.left):this.runtime.exec(e.right.right);return t}execSet(e){return this.runtime.set(e.left.operator.text,this.runtime.exec(e.right))}execDefine(e){this.runtime.define(e.operator.text);const t=this.runtime.exec(e.left);return this.runtime.define("none"),t}operatorDefine(e){return(t,i)=>{let r;const o=t.value,n=i.value;switch(e){case"&&":if(!o){r=void 0;break}r=o&&n;break;case"||":if(o){r=o;break}r=o||n;break;case"===":case"==":r=o===n;break;case"!==":case"!=":r=o!==n;break;case">=":r=c.A5.ge(o,n);break;case"<=":r=c.A5.le(o,n);break;case">":r=c.A5.gt(o,n);break;case"<":r=c.A5.lt(o,n);break;case"!":r=!n;break;case"+":r=null==o?n:null==n?o:c.A5.isNumericString(o)&&c.A5.isNumericString(n)?c.A5.add(o,n):o+n;break;case"-":r=null==o?-n:null==n?o:c.A5.isNumericString(o)&&c.A5.isNumericString(n)?c.A5.subtract(o,n):o-n;break;case"*":r=c.A5.multiply(o,n);break;case"/":r=c.A5.divide(o,n);break;case"%":r=o%n;break;case"^":r=o^n;break;case">>":r=o>>n;break;case"<<":r=o<<n;break;case">>>":r=o>>>n;break;case"&":r=o&n;break;case"|":r=o|n;break;case"~":r=~n;break;default:break}return{type:typeof r,value:r,decorate:[]}}}execMember(e){const t=this.runtime.exec(e.left).value,i=null===t||void 0===t?void 0:t[e.right.operator.text];return{value:i,type:typeof i,decorate:[]}}execCalculate(e){const t=this.runtime.exec(e.left);if("&&"===e.operator.text){if(t.value){const i=this.runtime.exec(e.right);return this.runtime.executeOperator(t,i,e.operator.text)}return t}const i=this.runtime.exec(e.right);return this.runtime.executeOperator(t,i,e.operator.text)}execFunctionCall(e){const t=this.runtime.get(e.operator.text);if(t){const i=[];let r=e.left;if(r)if("comma"===r.type)while(r){if(["member","functionCall","logic1","logic2","logic3","calculate1","calculate2"].includes(r.type)){i.push(this.runtime.exec(r));break}r.left?i.push(this.runtime.exec(r.left)):i.push(this.runtime.exec(r)),r=r.right}else i.push(this.runtime.exec(r));const o=this.runtime.callFunction(t,i);return o}return{type:"undefined",value:void 0,decorate:[]}}execSelect(e){var t;const i=null===(t=this.runtime.get(e.left.operator.text))||void 0===t?void 0:t.value;let r;return i&&(r=i[this.runtime.exec(e.right).value]),{value:r,type:typeof r,decorate:[]}}execFunctionDefine(e){return{value:{args:e.left.operator.text.split(","),handle:()=>{this.runtime.exec(e.right)}},type:"function",decorate:[]}}execReturn(e){const t=this.runtime.exec(e.left);return t}compile(e){return this.lang.compile(e)}rawExec(e){return this.runtime.exec(e).value}exec(e){if(/^[\u4e00-\u9fa5]+$/.test(e)||Nt.includes(e))return e;let t;try{if(t=this.compile(e),"unknown"===(null===t||void 0===t?void 0:t.type))return e}catch(i){return e}if(!t)return e;try{return this.rawExec(t)}catch(r){throw console.error(`无法解析表达式:${e}`,r),r}}getRuntime(){return this.runtime}registerFunction(e,t,i){this.runtime.define("const"),this.runtime.set(e,{type:"function",decorate:[],value:{handle:()=>{const r=this.runtime.get("arguments").value;if(t.length){if(r.length<t.length)throw new Error(`函数${e}需要${t.length}个参数，现在得到${r.length}个`);r.forEach((i,r)=>{if(null==i)return;const o=t[r];if("string"===typeof o){const t=o.split("|");if(Array.isArray(i)?!t.includes("array")&&!t.includes("any"):!t.includes(typeof i)&&!t.includes("any"))throw new Error(`函数${e}第${r}为${o}类型,现在为${typeof i}类型`)}else if("function"===typeof o){const t=o(typeof i);if(""!==t)throw new Error(`函数${e}第${r}为${t}类型,现在为${typeof i}类型`)}})}return i.call(void 0,...r)},args:t.map((e,t)=>`$${t}${e}`)}}),this.runtime.define("none")}initExpressionContext(e=[{}],t={},i={},r,o,n){const a=It.getInstance().getRuntime();o=o||(e[0]||{}),a.define("let"),a.set("context",{type:"object",decorate:[],value:{activeRecord:o,activeRecords:e,rootRecord:t,parentRecord:n}}),a.set("activeRecord",{type:"object",decorate:[],value:o}),a.set("activeRecords",{type:"object",decorate:[],value:e}),a.set("rootRecord",{type:"object",decorate:[],value:t}),a.set("scene",{type:"string",decorate:[],value:r}),a.set("openerRecord",{type:"object",decorate:[],value:i}),a.set("parentRecord",{type:"object",decorate:[],value:n}),a.define("none")}cleanupExpressionContext(e){const t=It.getInstance().getRuntime();t.set("context",{type:"null",decorate:[],value:null}),t.set("activeRecord",{type:"null",decorate:[],value:null}),t.set("activeRecords",{type:"null",decorate:[],value:null}),t.set("rootRecord",{type:"null",decorate:[],value:null}),t.set("openerRecord",{type:"null",decorate:[],value:null}),t.set("scene",{type:"null",decorate:[],value:null}),t.set("parentRecord",{type:"null",decorate:[],value:null})}static run(e,t,i){var r;return null===(r=l.DF.RawInstantiate(Ot))||void 0===r?void 0:r.run(e,t,i)}static hasKeywords(e){if(!e)return!1;for(const t in r)if(e.includes(r[t]))return!0;return!1}static getExpressionStr(e){return this.isExpressionStr(e)?e.substr(2,e.length-3):e}static isExpressionStr(e){return null===e||void 0===e?void 0:e.startsWith("${")}}It.instance=new It,It.getInstance=()=>It.instance;let Lt=class{run(e,t,i){if(!(0,s.A)(t)||(0,d.A)(t))return t;It.getInstance().initExpressionContext(e.activeRecords,e.rootRecord,e.openerRecord,e.scene,e.activeRecord,e.parentRecord);try{return It.getInstance().exec(t)}catch(r){return console.error(`无法解析表达式: ${t}`),i}finally{It.getInstance().cleanupExpressionContext()}}};Lt=(0,a.Cg)([l.DF.Service(Ot,{name:"__default__",priority:0})],Lt)},14136:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(20641);const o={key:0,class:"internal-preview-component"},n=["src"],a=["src"],l=(0,r.Lk)("i",{class:"iconfont oinone-guanbi1"},null,-1),s=[l];function d(e,t,i,l,d,c){return e.modelValue?((0,r.uX)(),(0,r.CE)("div",o,["video"===e.type?((0,r.uX)(),(0,r.CE)("video",{key:0,src:e.source,controls:"",controlslist:"nodownload",autoplay:"",disablepictureinpicture:""},null,8,n)):((0,r.uX)(),(0,r.CE)("img",{key:1,src:e.source,alt:""},null,8,a)),(0,r.Lk)("div",{class:"close-preview",onClick:t[0]||(t[0]=(...t)=>e.onClose&&e.onClose(...t))},s)])):(0,r.Q3)("",!0)}const c=(0,r.pM)({props:{type:{type:String,default:""},source:{type:String,default:""},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const i=()=>{t("update:modelValue",!1)};return{onClose:i}}});var u=i(66262);const p=(0,u.A)(c,[["render",d]]),h=p},16022:(e,t,i)=>{i.d(t,{gH:()=>w(),xk:()=>te,TM:()=>E,Wl:()=>k,Gf:()=>D,aW:()=>it,DY:()=>et,NU:()=>ot,rL:()=>pt,nq:()=>j,sV:()=>ve,sK:()=>ne,eG:()=>se,my:()=>ce,mS:()=>oe,pU:()=>pe,ug:()=>ee,A5:()=>Fe,BF:()=>je,Xx:()=>Ve,Py:()=>at,LQ:()=>Nt,ub:()=>nt,ZR:()=>gt,ru:()=>lt,uK:()=>vt,Hd:()=>ge,j2:()=>ie,MZ:()=>fe,Rh:()=>rt,hi:()=>ze,nF:()=>Be,_$:()=>Ee,gt:()=>V,vi:()=>M,ln:()=>X,$1:()=>q,vz:()=>Ke,ai:()=>Je,DF:()=>Ge,CE:()=>Xe,rc:()=>Ze,_i:()=>Qe,zq:()=>Ye,c:()=>Y,WG:()=>P,U9:()=>T,Fl:()=>I,lZ:()=>Ce,Fr:()=>C,eD:()=>xe,KB:()=>W,cX:()=>G,_N:()=>Te});const r=/iPhone/i,o=/iPod/i,n=/iPad/i,a=/\bAndroid.+Mobile\b/i,l=/Android/i,s=/\bAndroid.+SD4930UR\b/i,d=/\bAndroid.+KF[A-Z]{2,4}\b/i,c=/Windows Phone/i,u=/\bWindows.+ARM\b/i,p=/BlackBerry/i,h=/BB10/i,g=/Opera Mini/i,v=/\b(CriOS|Chrome).+Mobile/i,m=/Mobile.+Firefox\b/i;function f(e,t){return e.test(t)}function y(e){let t=e||("undefined"!==typeof navigator?navigator.userAgent:""),i=t.split("[FBAN");"undefined"!==typeof i[1]&&([t]=i),i=t.split("Twitter"),"undefined"!==typeof i[1]&&([t]=i);const y={apple:{phone:f(r,t)&&!f(c,t),ipod:f(o,t),tablet:!f(r,t)&&f(n,t)&&!f(c,t),device:(f(r,t)||f(o,t)||f(n,t))&&!f(c,t)},amazon:{phone:f(s,t),tablet:!f(s,t)&&f(d,t),device:f(s,t)||f(d,t)},android:{phone:!f(c,t)&&f(s,t)||!f(c,t)&&f(a,t),tablet:!f(c,t)&&!f(s,t)&&!f(a,t)&&(f(d,t)||f(l,t)),device:!f(c,t)&&(f(s,t)||f(d,t)||f(a,t)||f(l,t))||f(/\bokhttp\b/i,t)},windows:{phone:f(c,t),tablet:f(u,t),device:f(c,t)||f(u,t)},other:{blackberry:f(p,t),blackberry10:f(h,t),opera:f(g,t),firefox:f(m,t),chrome:f(v,t),device:f(p,t)||f(h,t)||f(g,t)||f(m,t)||f(v,t)},any:null,phone:null,tablet:null};return y.any=y.apple.device||y.android.device||y.windows.device||y.other.device,y.phone=y.apple.phone||y.android.phone||y.windows.phone,y.tablet=y.apple.tablet||y.android.tablet||y.windows.tablet,y}const b=Object.assign(Object.assign({},y()),{isMobile:y}),C=b;var x=i(61594),w=i.n(x),S=i(97859);function T(e,t){let i,r=!1;if((0,S.A)(e)?(r=!0,i=new(w())(t)):i=new(w())(e),!i.isNaN())return{value:i,isSafeInteger:r}}w().config({EXPONENTIAL_AT:1e9});class E{static isStringBoolean(e){return[E.TRUE_STRING,E.FALSE_STRING].includes(e)}static toBoolean(e){if("boolean"===typeof e)return e;if("string"===typeof e){const t=e===E.TRUE_STRING;if(t)return!0;const i=e===E.FALSE_STRING;if(i)return!1}}static toBooleanIgnoredCase(e){if("boolean"===typeof e)return e;if("string"===typeof e){const t=e.toLowerCase(),i=t===E.TRUE_STRING;if(i)return!0;const r=t===E.FALSE_STRING;if(r)return!1}}static isTrue(e){const t=E.toBoolean(e);return null!=t&&t}static isFalse(e){const t=E.toBoolean(e);return null!=t&&!t}static toNumber(e){return e?E.TRUE_NUMBER:E.FALSE_NUMBER}static toString(e){return e?E.TRUE_STRING:E.FALSE_STRING}}E.TRUE_STRING="true",E.FALSE_STRING="false",E.TRUE_NUMBER=1,E.FALSE_NUMBER=0;var A=i(15215);class k{constructor(){this.chains=new Map,this.immutableBeforeFn=!1,this.immutableAfterFn=!1,this.called=!1,this.key="call-chaining-"+k.counter++}hook(e,t,i){const r=t;null!=i&&(i>k.MIN_PRIORITY?(i=k.MIN_PRIORITY,console.warn(`the minimum call chaining hook priority is ${k.MIN_PRIORITY}.`)):i<k.MAX_PRIORITY&&(i=k.MAX_PRIORITY,console.warn(`the maximum call chaining hook priority is ${k.MAX_PRIORITY}.`)),r.priority=i),this.chains.set(e,r)}unhook(e){const t=this.chains.get(e);return t&&this.chains.delete(e),t}callBefore(e,t){if(!this.beforeFn)return this.beforeFn=e,void((null===t||void 0===t?void 0:t.immutable)&&(this.immutableBeforeFn=!0));if(this.immutableBeforeFn)return;if(!t)return;const{force:i,immutable:r}=t;i&&((null==r||r)&&(this.immutableBeforeFn=!0),this.beforeFn=e)}callAfter(e,t){if(!this.afterFn)return this.afterFn=e,void((null===t||void 0===t?void 0:t.immutable)&&(this.immutableAfterFn=!0));if(this.immutableAfterFn)return;if(!t)return;const{force:i,immutable:r}=t;i&&((null==r||r)&&(this.immutableAfterFn=!0),this.afterFn=e)}reset(){this.chains=new Map,this.immutableBeforeFn=!1,this.beforeFn=void 0,this.immutableAfterFn=!1,this.afterFn=void 0}get isCalled(){return this.called}collectionCallList(){const e=[];return this.chains.forEach((t,i)=>{let{priority:r}=t;"number"!==typeof r&&(r=void 0),e.push({path:i,priority:r})}),e.sort((e,t)=>{const i=e.priority,r=t.priority,o=(0,S.A)(i),n=(0,S.A)(r);if(o&&n){if(e.path===t.path)return 0;const i=e.path.split(".").length,r=t.path.split(".").length;return i===r?0:i<r?1:-1}return o?1:n?-1:i===r?0:i<r?-1:1}),e}call(...e){this.called=!0;const t=this.collectionCallList();return this.callBeforeFn(e).then(i=>{const r=[];for(const o of t){const t=this.chains.get(o.path);if(t){const o=t.call(void 0,e,i);r.push(o)}}return this.callAfterFn(i,r,e)})}syncCall(...e){return(0,A.sH)(this,void 0,void 0,function*(){this.called=!0;const t=this.collectionCallList(),i=yield this.callBeforeFn(e),r=[];for(const o of t){const t=this.chains.get(o.path);if(t){const o=yield t.call(void 0,e,i);r.push(o)}}return this.callAfterFn(i,r,e)})}callBeforeFn(e){return(0,A.sH)(this,void 0,void 0,function*(){let t;return this.beforeFn&&(t=yield this.beforeFn.call(void 0,...e)),t})}callAfterFn(e,t,i){return Promise.allSettled(t).then(t=>{let r=!0;const o=[];for(const e of t)"fulfilled"===e.status?o.push(e.value):(r=!1,e.reason instanceof Error&&console.error(e.reason),o.push(e.reason));return this.afterFn?this.afterFn.call(void 0,i,e,{status:r,results:o}):e})}}k.MAX_PRIORITY=0,k.MIN_PRIORITY=99999,k.counter=0;class D{static cast(e){return e}}function F(e){const t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6,})$/;if(e=e.toLowerCase(),e&&t.test(e)){if(4===e.length){let t="#";for(let i=1;i<4;i+=1)t+=e.slice(i,i+1).concat(e.slice(i,i+1));e=t}const t=[];for(let n=1;n<7;n+=2)t.push(parseInt(`0x${e.slice(n,n+2)}`));const[i,r,o]=t;return{r:i,g:r,b:o,a:1}}return e}function R(e){let t=1;const i={h:0,s:0,b:0};if(e.startsWith("hsva")){let r=$(e,"hsva");i.h=r[0],i.s=r[1],i.b=r[2],t=r[3]}else{if(!e.startsWith("hsv"))return{r:0,g:0,b:0,a:1};{let t=$(e,"hsv");i.h=t[0],i.s=t[1],i.b=t[2]}}const r={};let o=Math.round(i.h);const n=Math.round(255*i.s/100),a=Math.round(255*i.b/100);if(0==n)r.r=r.g=r.b=a;else{const e=a,t=(255-n)*a/255,i=o%60*(e-t)/60;360==o&&(o=0),o<60?(r.r=e,r.b=t,r.g=t+i):o<120?(r.g=e,r.b=t,r.r=e-i):o<180?(r.g=e,r.r=t,r.b=t+i):o<240?(r.b=e,r.r=t,r.g=e-i):o<300?(r.b=e,r.g=t,r.r=t+i):o<360?(r.r=e,r.g=t,r.b=e-i):(r.r=0,r.g=0,r.b=0)}return{r:Math.round(r.r),g:Math.round(r.g),b:Math.round(r.b),a:t}}function O(e){let t,i,r,o,n,a,l=1;if(e.startsWith("hsla")){let o=$(e,"hsla");t=o[0],i=o[1],r=o[2],l=o[3]}else{if(!e.startsWith("hsl"))return{r:0,g:0,b:0,a:1};{let o=$(e,"hsl");t=o[0],i=o[1],r=o[2]}}if(i.includes("%")&&(i=i.replace("%","")/100),r.includes("%")&&(r=r.replace("%","")/100),0==i)o=n=a=r;else{const e=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},l=r<.5?r*(1+i):r+i-r*i,s=2*r-l;o=e(s,l,t+1/3),n=e(s,l,t),a=e(s,l,t-1/3)}return{r:Math.round(255*o),g:Math.round(255*n),b:Math.round(255*a),a:l}}function N(e){if(!e)return{r:0,g:0,b:0,a:1};if(e.startsWith("#"))return F(e);if(e.startsWith("hsl"))return O(e);if(e.startsWith("hsv"))return R(e);if(e.startsWith("rgba")){const[t,i,r,o]=$(e,"rgba");return{r:t,g:i,b:r,a:o}}if(e.startsWith("rgb")){const[t,i,r]=$(e,"rgb");return{r:t,g:i,b:r,a:1}}return{r:0,g:0,b:0,a:1}}function $(e,t){return e.replace(t+"(","").replace(")","").split(",").map(e=>e.trim())}function M(e){const{r:t,g:i,b:r,a:o}=N(e);return`rgba(${t}, ${i}, ${r}, ${o})`}function I(e,...t){var i;if(!e)throw new Error("Invalid constructor");let r;return r="object"===typeof e?e:new((null===(i=e.prototype)||void 0===i?void 0:i.constructor)||e)(...t),r}var L=i(21396),_=i.n(L);function P(e){const t=_().enc.Utf8.parse(e);return _().enc.Base64.stringify(t)}class j{static getClientRect(e){var t,i;return null===(i=null===(t=null===e||void 0===e?void 0:e.getClientRects)||void 0===t?void 0:t.call(e))||void 0===i?void 0:i[0]}static clientRectEquals(e,t){return e.top===t.top&&e.right===t.right&&e.bottom===t.bottom&&e.left===t.left&&e.height===t.height&&e.width===t.width&&e.x===t.x&&e.y===t.y}}const V=!1,B=()=>"dev"===window.mode,H=()=>{const e=e=>null==e||void 0===e||""===e,t=(e,t,i)=>{console.log(`%c ${e} %c ${t} %c`,`background:${i};border:1px solid ${i}; padding: 1px; border-radius: 2px 0 0 2px; color: #fff;`,`border:1px solid ${i}; padding: 1px; border-radius: 0 2px 2px 0; color: ${i};`,"background:transparent")},i=(i,r="")=>{const o=e(r)?"Info":i,n=e(r)?i:r;t(o,n,"#909399")},r=(i,r="")=>{const o=e(r)?"Error":i,n=e(r)?i:r;t(o,n,"#F56C6C")},o=(i,r="")=>{const o=e(r)?"Warning":i,n=e(r)?i:r;t(o,n,"#E6A23C")},n=(i,r="")=>{const o=e(r)?"Success ":i,n=e(r)?i:r;t(o,n,"#67C23A")};return{info:i,error:r,warning:o,success:n}},W=H();class U{constructor(){this.isDev=void 0}autoSetIsDev(){void 0===this.isDev&&(this.isDev=B())}run(e){if(this.autoSetIsDev(),this.isDev)try{null===e||void 0===e||e()}catch(t){console.error("debug was error",t)}}callConsole(e,...t){this.run(()=>{var i;null===(i=console[e])||void 0===i||i.call(console,...t)})}log(...e){this.callConsole("log",...e)}debug(...e){this.callConsole("debug",...e)}info(...e){this.callConsole("info",...e)}warn(...e){this.callConsole("warn",...e)}error(...e){this.callConsole("error",...e)}trace(...e){this.callConsole("trace",...e)}clear(){this.callConsole("clear")}group(...e){this.callConsole("group",...e)}groupEnd(){this.callConsole("groupEnd")}table(e,t){this.callConsole("table",e,t)}callPrettyConsole(e,...t){this.run(()=>{var i;null===(i=W[e])||void 0===i||i.call(W,...t)})}prettyInfo(e,t=""){this.callPrettyConsole("info",e,t)}prettyWarning(e,t=""){this.callPrettyConsole("warning",e,t)}prettyError(e,t=""){this.callPrettyConsole("error",e,t)}prettySuccess(e,t=""){this.callPrettyConsole("success",e,t)}}const q=new U;function z(e){return!1!==e}function G(e,t){K(e,0,t)}function K(e,t,i){const r=e[t];if(!r)return;const o=i(r);o instanceof Promise?o.then(r=>{z(r)&&K(e,t+1,i)}):z(o)&&K(e,t+1,i)}function X(e,t){return Q(e,0,t)}function Q(e,t,i){return(0,A.sH)(this,void 0,void 0,function*(){const r=e[t];if(!r)return!0;const o=i(r);return o instanceof Promise?o.then(r=>!!z(r)&&Q(e,t+1,i)):!!z(o)&&Q(e,t+1,i)})}function Y(e){return(...t)=>(0,A.sH)(this,void 0,void 0,function*(){try{yield e(...t)}catch(i){console.error(i)}})}function J(e,t){const i=e.priority,r=t.priority,o=(0,S.A)(i),n=(0,S.A)(r);return o&&n?0:o?1:n?-1:i===r?0:i<r?-1:1}class Z{constructor(){this.eventHandlerMap=new Map}on(e,t,i){let r=this.eventHandlerMap.get(e);r||(r=[],this.eventHandlerMap.set(e,r)),i&&(t.priority=i),r.push(t)}clearOn(e,t){const i=this.eventHandlerMap.get(e);if(!i)return;const r=i.findIndex(e=>e===t);-1!==r&&i.splice(r,1)}}class ee extends Z{notifyHandler(e,...t){var i;null===(i=this.eventHandlerMap.get(e))||void 0===i||i.sort(J).forEach(e=>Y(e)(...t))}}class te extends Z{notifyHandler(e,...t){var i;return(0,A.sH)(this,void 0,void 0,function*(){yield Promise.allSettled((null===(i=this.eventHandlerMap.get(e))||void 0===i?void 0:i.sort(J).map(e=>(0,A.sH)(this,void 0,void 0,function*(){return e(...t)})))||[])})}}class ie extends ee{on(e,t,i){super.on(e,t,i)}clearOn(e,t){super.clearOn(e,t)}notifyHandler(e,...t){super.notifyHandler(e,this,...t)}}var re;(function(e){e["create"]="create",e["replace"]="replace",e["delete"]="delete"})(re||(re={}));class oe{constructor(){this.cache=new Map;const e={};Object.keys(re).forEach(t=>e[t]=new Set),this.handlers=e}get(e){return this.cache.get(e)}createOrReplace(e,t){const i=this.generator(e,t);i.handle=e,i.parentContext=t,i.childrenContext=[];const r=null===t||void 0===t?void 0:t.childrenContext;if(r){const t=r.findIndex(t=>t.handle===e);-1===t?r.push(i):r.splice(t,1,i)}let o=re.create;return this.cache.has(e)&&(o=re.replace),this.cache.set(e,i),this.handlers[o].forEach(e=>e({type:o,target:i})),i}delete(e,t=!0){var i;const r=this.get(e);if(!r)return!1;this.cache.delete(e),this.handlers.delete.forEach(e=>e({type:re.delete,target:r}));const o=null===(i=r.parentContext)||void 0===i?void 0:i.childrenContext;if(o){const t=o.findIndex(t=>t.handle===e);-1!==t&&o.splice(t,1)}return t&&r.childrenContext.forEach(e=>{this.delete(e.handle)}),!0}keys(){return this.cache.keys()}forEach(e){this.cache.forEach(e)}onCreate(e){this.hook(re.create,e)}onReplace(e){this.hook(re.replace,e)}onDelete(e){this.hook(re.delete,e)}hook(e,t){this.handlers[e].add(t)}}class ne{static serializableString(e){if(!e)return e;e=JSON.stringify(e),e=e.substring(1,e.length-1);for(const t of ne.SERIALIZABLE_CHARACTERS)e=e.split(t).join(`\\\\\\\\${t}`);return e}static serializableSearchString(e){if(!e)return e;e=e.split("\\").join("\\\\\\\\\\\\\\\\");for(const t of ne.SERIALIZABLE_CHARACTERS)e=e.split(t).join(`\\\\\\${t}`);return e}static serializableSimpleString(e){return e?(e=JSON.stringify(e),e.substring(1,e.length-1)):e}static serializableObject(e){let t="";return t=JSON.stringify(JSON.stringify(e)),t=t.substring(2,t.length-2),t=`{${t}}`,t}static serializableObjectArray(e){let t="";return t=JSON.stringify(JSON.stringify(e)),t=t.substring(2,t.length-2),t=`[${t}]`,t}static serializableStringArray(e){let t;return t=0===e.length?"[]":`["${e.join('", "')}"]`,t}static serializableEnumerationArray(e){let t;return t=0===e.length?"[]":`[${e.join(", ")}]`,t}static buildStringGQLParameter(e,t,i){return(0,S.A)(t)?"":(i&&(t=ne.serializableSimpleString(t)),`${e}: "${t}"`)}static buildNotStringGQLParameter(e,t){return(0,S.A)(t)?"":`${e}: ${t}`}}ne.SERIALIZABLE_CHARACTERS=["'","_","%"];var ae=i(9703);const le=Symbol("JSON.stringify_ignored");class se{static toJSONString(e,t,i){return t||i?(0,ae.A)(e)?JSON.stringify(e):JSON.stringify(e,(e,r)=>t&&t(e,r)?le:i?i(e,r):r):JSON.stringify(e)}static parseObject(e){return JSON.parse(e)}static isEmpty(e){return!e||"{}"===e}}var de;(function(e){e["Alt"]="Alt",e["AltGraph"]="AltGraph",e["CapsLock"]="CapsLock",e["Control"]="Control",e["Fn"]="Fn",e["FnLock"]="FnLock",e["Hyper"]="Hyper",e["Meta"]="Meta",e["NumLock"]="NumLock",e["OS"]="OS",e["ScrollLock"]="ScrollLock",e["Shift"]="Shift",e["Super"]="Super",e["Symbol"]="Symbol",e["SymbolLock"]="SymbolLock"})(de||(de={}));class ce{constructor(e){this.event=e}static newInstance(e){return new ce(e)}isPressCtrl(){return this.event.ctrlKey||this.event.metaKey}isPressAlt(){return this.event.altKey}isPressShift(){return this.event.shiftKey}isStateKey(){return ce.STATE_KEYS.includes(this.event.key)}getModifierState(e){return this.event.getModifierState(e)}getKeyCode(){return this.event.keyCode||this.event.which||this.event.charCode}}ce.STATE_KEYS=["Ctrl","Alt","Shift"];const ue=/\/([a-zA-Z]+\/)*[a-zA-Z]+\?/g;class pe{static toggleUrlEncryption(e=!1){this.needEncryptionMatrixUrl=!!e}static encryption(e){return this.needEncryptionMatrixUrl?`?${btoa(e)}`:e}static decrypt(e){if(!this.needEncryptionMatrixUrl)return e;try{const[t]=e.match(ue)||[];if(t){const[i,r]=e.split(t),o=t.endsWith("?")?t.slice(0,-1):t,n=`${o}${atob(r)}`;if(e.includes(this.redirectName)){const[t]=e.split(this.redirectName);return`${t}${this.redirectName}${n}`}return n}return e}catch(t){return e}}}pe.needEncryptionMatrixUrl=!1,pe.redirectName="redirect_url=";var he=i(77500);class ge{static asc(e,t){const i=ge.baseCompare(e,t);return null!=i?i:ge.isCompareValue(e)&&ge.isCompareValue(t)?e<t?-1:1:0}static desc(e,t){const i=ge.baseCompare(e,t);return null!=i?i:ge.isCompareValue(e)&&ge.isCompareValue(t)?e<t?1:-1:0}static sort(e,t){e.sort((e,i)=>{let r;for(const o of t){const{field:t,direction:n,compare:a}=o;if(!1===n)return 0;const l=(0,he.A)(e,t),s=(0,he.A)(i,t);let d=a;if(d||(d=ge.asc,"desc"===n&&(d=ge.desc)),r=d(l,s),0!==r)return r}return 0})}static isCompareValue(e){const t=typeof e;return["string","number"].includes(t)}static baseCompare(e,t){if(e===t)return 0;const i=null==e,r=null==t;return i&&r?0:i?-1:r?1:void 0}}var ve,me=i(26842);class fe{static isLetter(e){return fe.UPPER_A_ASCLL<=e&&e<=fe.UPPER_Z_ASCLL||fe.LOWER_A_ASCLL<=e&&e<=fe.LOWER_Z_ASCLL}static append(e,...t){return t.forEach(t=>{(0,ae.A)(t)?t&&e.push(t):Array.isArray(t)&&t.forEach(t=>{(0,ae.A)(t)&&t&&e.push(t)})}),e}static camelCaseToKebabCase(e){let t="";for(const i of e){const e=i.charCodeAt(0);t=e>=fe.UPPER_A_ASCLL&&e<=fe.UPPER_Z_ASCLL?t?t.concat("-",i.toLowerCase()):t.concat(i.toLowerCase()):t.concat(i)}return t}static kebabCaseToCamelCase(e){let t="",i=!1;for(const r of e){const e=r.charCodeAt(0);e===fe.KEBAB_ASCLL?i=!0:i?(t=t.concat(r.toUpperCase()),i=!1):t=t.concat(r)}return t}static convertArray(e,t){return Array.isArray(e)?e.filter(e=>!!e).map(e=>e.trim()):(0,ae.A)(e)?(t||(t=fe.ARRAY_DEFAULT_SEPARATOR),e.split(t).filter(e=>!!e).map(e=>e.trim())):void 0}static getOrDefault(e,t){return e||t}static setter(e,t){e&&t(e)}static random(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return(0,me.A)(t,e).join("")}}fe.ARRAY_DEFAULT_SEPARATOR=",",fe.UPPER_A_ASCLL=65,fe.UPPER_Z_ASCLL=90,fe.LOWER_A_ASCLL=97,fe.LOWER_Z_ASCLL=122,fe.KEBAB_ASCLL=45;(function(e){e["top"]="top",e["right"]="right",e["bottom"]="bottom",e["left"]="left"})(ve||(ve={}));const ye=["number","bigint","boolean"],be=["string","number","bigint","boolean"];function Ce(e,t){let i=ye;return t&&(i=be),null!=e&&(e instanceof w()||i.includes(typeof e))}function xe(e,t){let i=ye;return t&&(i=be),null==e||e instanceof w()||i.includes(typeof e)}var we=i(86965),Se=i(48182);function Te(e=4){if(e<0)throw new Error("random number length must be an integer greater than or equal to 0. [0, 15]");if(e>15)throw new Error("random number length is too long. [0, 15]");let t="";0!==e&&(t=fe.random(e));const i=new Date;return`${String(i.getTime())}${(0,we.A)((0,Se.A)(i.getMilliseconds()),4,"0")}${t}`}class Ee{constructor(){}static absolutePath(e){return e?e.charAt(0)===this.PATH_SPLIT?e:`${Ee.PATH_SPLIT}${e}`:Ee.PATH_SPLIT}static relativePath(e){return e?e.charAt(0)===this.PATH_SPLIT?e.substring(1):e:Ee.EMPTY}static append(e,...t){const i=e||Ee.EMPTY,r=t.map(e=>Ee.relativePath(e)).filter(e=>!!e).join(Ee.PATH_SPLIT);return i?i===Ee.PATH_SPLIT?`${i}${r}`:`${i}/${r}`:r}static appendBasePath(e,t=!0){const i=t?Ee.absolutePath({NODE_ENV:"production",BASE_URL:"/"}.BASE_PATH):Ee.relativePath({NODE_ENV:"production",BASE_URL:"/"}.BASE_PATH);let r;return r=(t?Ee.absolutePath(e):Ee.relativePath(e)).startsWith(i)?e:Ee.append(i,e),r}}Ee.PATH_SPLIT="/",Ee.EMPTY="";var Ae=i(429),ke=i(48621),De=i(1694);class Fe{static toNumber(e){if((0,S.A)(e))return e;if((0,ae.A)(e)&&(e=e.trim(),!e))return;const t=Number(e);return(0,Ae.A)(t)?void 0:t}static toBigNumber(e){if((0,S.A)(e))return e;const t=new(w())(e);return t.isNaN()?void 0:t}static isNumber(e){const t=Fe.toBigNumber(e);return!(0,S.A)(t)&&e.indexOf(".")!==e.length-1}static add(e,t){return Fe.operator(e,t,(e,t)=>{const i=e.toString(),r=t.toString(),o=Math.pow(10,Fe.getDecimalMaxLength(i,r)),n=Fe.multiply(i,o),a=Fe.multiply(r,o);return Fe.divide(n+a,o)})}static subtract(e,t){return Fe.operator(e,t,(e,t)=>{const i=e.toString(),r=t.toString(),o=Math.pow(10,Fe.getDecimalMaxLength(i,r)),n=Fe.multiply(i,o),a=Fe.multiply(r,o);return Fe.divide(n-a,o)})}static multiply(e,t){return Fe.operator(e,t,(e,t)=>{const i=e.toString(),r=t.toString();let o=0;return o+=Fe.getDecimalLength(i),o+=Fe.getDecimalLength(r),Number(i.replace(Fe.RADIX_POINT,""))*Number(r.replace(Fe.RADIX_POINT,""))/Math.pow(10,o)})}static divide(e,t){return Fe.operator(e,t,(e,t)=>{const i=e.toString(),r=t.toString(),o=Fe.getDecimalLength(i),n=Fe.getDecimalLength(r);return Number(i.replace(Fe.RADIX_POINT,""))/Number(r.replace(Fe.RADIX_POINT,""))*Math.pow(10,n-o)})}static compare(e,t){return Fe.operator(e,t,(e,t)=>e.comparedTo(t))}static operator(e,t,i){return null==e||!1===e?e=0:!0===e&&(e=1),null==t||!1===t?t=0:!0===t&&(t=1),e instanceof w()||(e=new(w())(e)),t instanceof w()||(t=new(w())(t)),e.isNaN()||t.isNaN()?NaN:i(e,t)}static getDecimalLength(e){var t;let i;try{i=null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length}catch(r){i=0}return i||0}static getDecimalMaxLength(e,t){return Math.max(Fe.getDecimalLength(e),Fe.getDecimalLength(t))}static isNumericString(e){return(!(0,ae.A)(e)||!!e.length&&e.length===(0,ke.A)(e).length)&&Number.isFinite(Number(e))}static lt(e,t){const i=Fe.isNumericString(e),r=Fe.isNumericString(t);return i||r?i&&r?(0,De.A)(e)<(0,De.A)(t):(0,S.A)(e)&&r?(0,De.A)(t)>0:(0,S.A)(t)&&i?(0,De.A)(e)<0:e<t:`${e}<${t}`}static le(e,t){const i=Fe.isNumericString(e),r=Fe.isNumericString(t);return i||r?i&&r?(0,De.A)(e)<=(0,De.A)(t):(0,S.A)(e)&&r?(0,De.A)(t)>=0:(0,S.A)(t)&&i?(0,De.A)(e)<=0:e<=t:`${e}<=${t}`}static gt(e,t){const i=Fe.isNumericString(e),r=Fe.isNumericString(t);return i||r?i&&r?(0,De.A)(e)>(0,De.A)(t):(0,S.A)(e)&&r?(0,De.A)(t)<0:(0,S.A)(t)&&i?(0,De.A)(e)>0:e>t:`${e}>${t}`}static ge(e,t){const i=Fe.isNumericString(e),r=Fe.isNumericString(t);return i||r?i&&r?(0,De.A)(e)>=(0,De.A)(t):(0,S.A)(e)&&r?(0,De.A)(t)<=0:(0,S.A)(t)&&i?(0,De.A)(e)>=0:e>=t:`${e}>=${t}`}}Fe.RADIX_POINT=".";var Re=i(21879),Oe=i(98916),Ne=i(66401),$e=i(46996),Me=i(92049),Ie=i(23149),Le=i(13575),_e=i(23764);class Pe{constructor(){this._hashCode=Te(15)}equals(e){return this===e||e instanceof Pe&&this.hashCode===e.hashCode}get hashCode(){return this._hashCode}}class je{static isEmpty(e){return!!(0,S.A)(e)||((0,Re.A)(e)?(0,Ae.A)((0,De.A)(e)):!(0,Oe.A)(e)&&(0,Ne.A)(e))}static isNotEmpty(e){return!je.isEmpty(e)}static isNull(e){return null==e}static isNotNull(e){return null!=e}static equals(e,t){return null!=e&&null!=t&&(0,$e.A)(e,t)}static congruent(e,t){if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length)for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return e===t}static safeSetter(e,t,i,r){const o=r||i;e&&t&&!(i in e)&&o in t&&(e[i]=t[o])}static shallowMerge(e,t){let i=!1;return Object.entries(t).forEach(([t,r])=>{void 0!==r&&e[t]!==r&&(i=!0,e[t]=r)}),i}static deepMerge(e,t){return Object.entries(t).forEach(([t,i])=>{if(void 0===i)return;const r=e[t];if((0,Me.A)(i)){let o;if(null==r)o=[];else{if(!(0,Me.A)(r))return void console.warn(`deep merge error. type is not same. originType=${typeof r}, targetType=${typeof i}`);o=r}e[t]=null===o||void 0===o?void 0:o.concat(i)}else if((0,Ie.A)(i)){let o;if(null==r)o={},e[t]=o;else{if(!(0,Ie.A)(r))return void console.warn(`deep merge error. type is not same. originType=${typeof r}, targetType=${typeof i}`);o=r}je.deepMerge(o,i)}else e[t]=i}),e}static isRepeat(e,t){const i=e.size;return e.add(t),e.size===i}static isNotRepeat(e,t){return!je.isRepeat(e,t)}static readonly(e,t){return new Proxy(e,{get(e,t,i){return Reflect.get(e,t,i)},set(e,i,r,o){return!(0,ae.A)(i)||t&&!t.includes(i)?Reflect.set(e,i,r,o):(console.log("readonly attribute not setter.",i),!1)}})}static toUpperSnakeCase(e){return e?Object.entries(e).reduce((e,t)=>{const[i,r]=t;return Object.assign(Object.assign({},e),{[(0,Le.A)((0,_e.A)(i))]:r})},{}):{}}static translate(e){Object.entries(e).forEach(([t,i])=>{(0,ae.A)(i)&&i.startsWith("$t(")&&i.endsWith(")")?e[t]=i.substring(3,i.length-1):Array.isArray(i)?i.forEach(e=>je.translate(e)):(0,Ie.A)(i)&&Object.keys(i)&&je.translate(i)})}static translateList(e){null===e||void 0===e||e.forEach(e=>je.translate(e))}}class Ve{constructor(e){this.value=e}static ofNullable(e){return new Ve(e)}static empty(){return Ve.EMPTY}map(e){const{value:t}=this;return null==t?Ve.empty():Ve.ofNullable(e(t))}predict(e){return this.filter(e)}filter(e){const{value:t}=this;return null==t||e(t)?this:Ve.EMPTY}orElse(e){const{value:t}=this;return null==t?e:t}orElseGet(e){const{value:t}=this;return null==t?e():t}orElseThrow(e){const{value:t}=this;if(null==t)throw e();return t}ifPresent(e){const{value:t}=this;null!=t&&e(t)}}Ve.EMPTY=new Ve;class Be{constructor(e,t,i){this.children=[],this.isLeaf=!0,this.level=1,this.key=e,this.value=t,this.setParent(i)}static newInstance(e,t,i){return new Be(e,t,i)}setParent(e,t){We.bind(this)(this.parent),this.parent=e,He.bind(this)(this.parent,t)}addChild(e,t){e&&e.setParent(this,t)}removeChild(e){e&&e.setParent(void 0)}removeChildByKey(e){if(e){const t=this.children.find(t=>t.key===e);t&&t.setParent(void 0)}}}function He(e,t){e&&(null==t||e.children.length<t?e.children.push(this):e.children.splice(t,0,this),e.isLeaf=!1,this.level=(e.level||0)+1,qe.bind(this)(this.children,this.level))}function We(e){e&&(e.children.splice(e.children.indexOf(this),1),0===e.children.length&&(e.isLeaf=!0),this.level=1,qe.bind(this)(this.children,1))}const Ue=20;function qe(e,t){const i=t+1;if(i>Ue)console.warn("resetChildrenLevel max count",Ue,i);else for(const r of e){if(r.level===i)return;r.level=i;const e=r.children.filter(e=>{var t;return e.key===(null===(t=r.parent)||void 0===t?void 0:t.key)});if(e.length)return void console.warn("resetChildrenLevel repeatList",e);qe.bind(this)(r.children,i)}}class ze{static convert(e,t,i,r=e=>e,o=Be.newInstance,n=e=>e){if(!e||0===e.length)return[];const a=new Map,l=new Map;for(const s of e){const e=r(s);if(!e)continue;const d=t(s,e);if(!d)continue;let c=ze.singleNodeVGS(a,l,d,e,n);const u=i(s);let p=!0;if(u){let t;if((0,ae.A)(u)?t=u:u.length?1===u.length&&([t]=u):p=!1,p)if(t){const i=ze.generatorParentNode(a,l,t,o);if(c){if(c.parent)throw new Error(`一个节点只能有一个父节点: [CurrentNodeKey ${d}] [CurrentParentNodeKey ${t}]`);c.setParent?c.setParent(i,void 0):c.parent=i}else c=o(d,e,i),l.set(d,c)}else{const i=u;for(const r of i){const i=ze.generatorParentNode(a,l,r,o);if(c){if(c.parent)throw new Error(`一个节点只能有一个父节点: [CurrentNodeKey ${d}] [CurrentParentNodeKey ${t}]`);c.setParent?c.setParent(i,void 0):c.parent=i,c=void 0}else{const t=o(d,e,i);l.set(d,t)}}}}else p=!1;p||(c||(c=o(d,e)),a.set(d,c))}return Array.from(a.values())}static generatorParentNode(e,t,i,r){let o=e.get(i);return o||(o=t.get(i)),o||(o=r(i),t.set(i,o)),o}static singleNodeVGS(e,t,i,r,o){let n=e.get(i);if(n||(n=t.get(i)),n){if(n.value)throw new Error(`不允许出现重复的节点键值: [CurrentNodeKey ${i}]`);n.value=r,o(n,r)}return n}static traversal(e,t){e&&e.forEach(e=>{t(e),ze.traversal(e.children,t)})}static find(e,t){for(const i of e){if(t(i))return i;const e=ze.find(i.children||[],t);if(e)return e}}}const Ge="YYYY-MM-DD HH:mm:ss",Ke="YYYY-MM-DD",Xe="HH:mm:ss",Qe="YYYY年",Ye="YYYY",Je="CHINESE",Ze="COLON_NORMAL",et=new Map([["DATETIME",Ge],["DATE",Ke],["TIME",Xe],["YEAR",Qe]]),tt=new Map([["DATETIME",Ge],["DATE",Ke],["TIME",Xe],["YEAR",Ye]]),it=new Map([[Je,"YYYY年MM月DD日"],["CHINESE_YEAR_MONTH","YYYY年MM月"],["CHINESE_MONTH_DAY","MM月DD日"],["HYPHEN",Ke],["HYPHEN_YEAR_MONTH","YYYY-MM"],["HYPHEN_MONTH_DAY","MM-DD"],["SLASH","YYYY/MM/DD"],["SLASH_YEAR_MONTH","YYYY/MM"],["SLASH_MONTH_DAY","MM/DD"]]),rt=new Map([[Ze,Xe],["COLON_SHORT","HH:mm"],["AP_COLON_NORMAL","A hh:mm:ss"],["AP_COLON_SHORT","A hh:mm"]]);var ot,nt,at,lt,st=i(74353),dt=i.n(st),ct=i(95093),ut=i.n(ct);(function(e){e["datetime"]="datetime",e["date"]="date",e["time"]="time",e["year"]="year",e["month"]="month",e["week"]="week"})(ot||(ot={})),ut().locale("zh-cn");class pt{static toDate(e,t){return(0,ae.A)(e)&&(e=ut()(e,pt.fixFormat(t)).toDate()),e}static dateFormat(e,t){return(0,S.A)(e)?e:ut()(e).format(pt.fixFormat(t))}static fetchDatetimeFormat(e,t,i,r,o,n,a){if(t)return pt.fetchFullFormat(t,o);let l="",s=!1,d=!1;return e.hasDateFormat&&(s=!0,d=!0,l+=pt.fetchDateFormat(i,n)),e.hasTimeFormat&&(s=!0,d&&(l+=" "),l+=pt.fetchTimeFormat(r,a)),s?l:void 0}static fetchFullFormat(e,t){let i;return i=t?t(e):et.get(e),i&&(e=i),e}static fetchDateFormat(e,t){if((0,S.A)(e))return Ke;let i;return i=t?t(e):it.get(e),i&&(e=i),e}static fetchTimeFormat(e,t){if((0,S.A)(e))return Xe;let i;return i=t?t(e):rt.get(e),i&&(e=i),e}static fetchValueFormat(e){if((0,S.A)(e))return;const t=tt.get(e);return t&&(e=t),e}static fixFormat(e){return e.replaceAll("yy","YY").replaceAll("dd","DD")}static autoFormat(e,t,i){if(!t)return"";const r=" ",o=e===ot.time,n=o?Ke+r+i:i,a=o?"2022-11-10"+r+t:t,l=pt.dateFormat(dt()(a).toDate(),n);return o?null===l||void 0===l?void 0:l.split("2022-11-10"+r).pop():l}static valueFormat(e,t,i){const r=ut()(e,t);if(!r.isValid())return e;const o=i.includes("Y"),n=i.includes("M"),a=i.includes("D"),l=i.includes("H")||i.includes("h"),s=i.includes("m"),d=i.includes("s");return o&&(n||r.startOf("year"),a||r.startOf("month")),l||r.hour(0),s||r.minute(0),d||r.second(0),r.format(t)}}class ht extends Pe{constructor(e,t=!1){super(),this._symbols=[...e],this._multi=t}get symbols(){return[...this._symbols]}get symbol(){return this._symbols[0]}get isMulti(){return this._multi}isSymbolEquals(e){return this._symbols.some(t=>t===e)}}(function(e){e["AND"]="and",e["OR"]="or"})(nt||(nt={}));class gt{static isAnd(e){return gt.AND.includes(e.toLowerCase())}static isOr(e){return gt.OR.includes(e.toLowerCase())}}gt.AND=[nt.AND,";"],gt.OR=[nt.OR,","];class vt{static operators(){return new Set([vt.EQUAL,vt.NOT_EQUAL,vt.GREATER_THAN,vt.GREATER_THAN_OR_EQUAL,vt.LESS_THAN,vt.LESS_THAN_OR_EQUAL,vt.IN,vt.NOT_IN,vt.IS_NULL,vt.IS_NOT_NULL,vt.COLUMN_EQUAL,vt.COLUMN_NOT_EQUAL,vt.LIKE,vt.LIKE_RIGHT,vt.LIKE_LEFT,vt.NOT_LIKE,vt.NOT_LIKE_RIGHT,vt.NOT_LIKE_LEFT,vt.BIT,vt.NOT_BIT,vt.HAS,vt.NOT_HAS,vt.HAS_OR,vt.HAS_NOT_OR])}static isSingle(e){for(const t of vt.SINGLE_OPERATORS)if(t.isSymbolEquals(e))return!0;return!1}static isMulti(e){return vt.IN.symbol===e||vt.NOT_IN.symbol===e}}vt.EQUAL=new ht(["=="]),vt.NOT_EQUAL=new ht(["!="]),vt.GREATER_THAN=new ht(["=gt=",">"]),vt.GREATER_THAN_OR_EQUAL=new ht(["=ge=",">="]),vt.LESS_THAN=new ht(["=lt=","<"]),vt.LESS_THAN_OR_EQUAL=new ht(["=le=","<="]),vt.IN=new ht(["=in="],!0),vt.NOT_IN=new ht(["=out="],!0),vt.IS_NULL=new ht(["=isnull="]),vt.IS_NOT_NULL=new ht(["=notnull="]),vt.COLUMN_EQUAL=new ht(["=cole="]),vt.COLUMN_NOT_EQUAL=new ht(["=colnot="]),vt.LIKE=new ht(["=like="]),vt.LIKE_RIGHT=new ht(["=starts="]),vt.LIKE_LEFT=new ht(["=ends="]),vt.NOT_LIKE=new ht(["=notlike="]),vt.NOT_LIKE_RIGHT=new ht(["=notstarts="]),vt.NOT_LIKE_LEFT=new ht(["=notends="]),vt.BIT=new ht(["=bit="],!0),vt.NOT_BIT=new ht(["=notbit="],!0),vt.HAS=new ht(["=has="],!0),vt.NOT_HAS=new ht(["=hasnt="],!0),vt.HAS_OR=new ht(["=hasor="],!0),vt.HAS_NOT_OR=new ht(["=hasntor="],!0),(()=>{let e=0;const t=[];for(const i of vt.operators()){i.isMulti||t.push(i);for(const t of i.symbols){const i=t.length;e<i&&(e=i)}}vt.MAX_OPERATOR_SIZE=e,vt.SINGLE_OPERATORS=t})(),function(e){e["LIKE_OR"]="like_or",e["LIKE_AND"]="like_and",e["GE_LE"]="=ge=,=le="}(at||(at={}));class mt extends Pe{equals(e){return this===e||e instanceof mt&&this.hashCode===e.hashCode}}class ft extends mt{constructor(e,t){super(),this._operator=e,this._children=[...t]}get operator(){return this._operator}get children(){return[...this._children]}toString(){return`(${this._children.join(this._operator.toString())})`}equals(e){if(this===e)return!0;if(!(e instanceof ft))return!1;if(this._operator!==e._operator)return!1;const t=this._children,i=e._children,{length:r}=t;if(r!==i.length)return!1;for(let o=0;o<r;o++){const e=t[o],r=i[o];if(!e.equals(r))return!1}return!0}}class yt extends ft{constructor(e){super(nt.AND,e)}withChildren(e){return new yt(e)}accept(e,t){return e.visitAnd(this,t)}}class bt extends ft{constructor(e){super(nt.OR,e)}accept(e,t){return e.visitOr(this,t)}withChildren(e){return new bt(e)}}class Ct extends mt{constructor(e,t,i){super(),this._operator=e,this._selector=t,this._args=[...i]}get operator(){return this._operator}get selector(){return this._selector}get args(){return[...this._args]}accept(e,t){return e.visitComparison(this,t)}withOperator(e){return new Ct(e,this._selector,this._args)}withArgs(e){return new Ct(this._operator,this._selector,e)}equals(e){if(this===e)return!0;if(!(e instanceof Ct))return!1;if(!this._operator.equals(e._operator))return!1;if(this._selector!==e._selector)return!1;const t=this._args,i=e._args,{length:r}=t;if(r!==i.length)return!1;for(let o=0;o<r;o++){const e=t[o],r=i[o];if(e!==r)return!1}return!0}}class xt{constructor(e){const t={};for(const i of e)for(const e of i.symbols)t[e]=i;this.comparisonOperators=t}createLogicNode(e,t){switch(e){case nt.AND:return new yt(t);case nt.OR:return new bt(t);default:return}}createComparisonNode(e,t,i){const r=this.comparisonOperators[e];if(r)return new Ct(r,t,i)}}(function(e){e[e["AND"]=0]="AND",e[e["OR"]=1]="OR",e[e["COMPARISON"]=2]="COMPARISON"})(lt||(lt={}));class wt{constructor(e,t,i,r,o,n){this.type=e,this.model=t,this.field=i,this.selector=r,this.operator=o,this.args=n}static newNodeInfo(e){return new wt(e)}static newNodeInfoByComparisonNode(e,t,i){return new wt(lt.COMPARISON,t,i,e.selector,e.operator,e.args)}}var St=i(9907),Tt=i(45062);class Et{constructor(){}logicConnector(e,t){const i=t.length;if(i)return 1===t.length?t[0]:`(${t.join(` ${e} `)})`}comparisonConnector(e){const{selector:t,operator:i,args:r}=e,o=null===r||void 0===r?void 0:r.length;if(!o)return;let n;return 1===o?([n]=r,Fe.isNumber(n)||(n=`'${n}'`)):n=`('${r.join("', '")}')`,`${t}${i.symbol}${n}`}}Et.INSTANCE=new Et;const At=["O2O","O2M","M2O","M2M"],kt="RELATED";function Dt(e){return e.ttype===kt}function Ft(e){let t=e.ttype;return Dt(e)&&(t=e.relatedTtype),t}function Rt(e){return At.includes(Ft(e))}class Ot{constructor(e){this.counter=0,this.nodeFactory=e}static visit(e,t){const i=new Ot(new xt(vt.operators()));return i.visit(e,t)}visit(e,t){let i;const{type:r,operator:o}=e;switch(r){case"LOGIC":switch(o){case";":case"and":i=this.visitAnd(e,t);break;case",":case"or":i=this.visitOr(e,t);break}break;case"COMPARISON":i=this.visitComparison(e,t);break}return i}visitAnd(e,t){const i=this.generatorNode(this.generatorNodeInfo(lt.AND));return i&&this.traversal(i,e,t),i}visitOr(e,t){const i=this.generatorNode(this.generatorNodeInfo(lt.OR));return i&&this.traversal(i,e,t),i}visitComparison(e,t){return this.generatorNode(this.generatorNodeInfo(lt.COMPARISON,t,e))}generatorNodeInfo(e,t,i){let r;if(i){const{left:e,right:o}=i,n=e.type,a=o.type;if("SELECTOR"===n&&"VALUE"===a){const n=e.selector;let a=o.value;const[l]=n.split("."),s=null===t||void 0===t?void 0:t.fields.find(e=>{var t;const i=e.name===l;return i||!(!Rt(e)||!e.referencesModel)&&(null===(t=e.referencesModel.modelFields)||void 0===t?void 0:t.find(e=>e.name===l))});"string"===typeof a&&(a=[a]);const d=this.nodeFactory.createComparisonNode(i.operator,n,a);d&&(r=wt.newNodeInfoByComparisonNode(d,t,s))}}else r=wt.newNodeInfo(e);return r}generatorNode(e){if(e)return new Be((this.counter++).toString(),e)}traversal(e,t,i){const{operator:r,left:o,right:n}=t;let a;const l=[];n&&l.push({node:n,left:!0,right:!0}),o&&l.push({node:o,left:!0,right:!0}),a=l.pop();while(a){const{node:t}=a,{operator:o}=t;if((0,St.isLogicNode)(t)){const t=E.toNumber(gt.isAnd(r)),n=E.toNumber(gt.isAnd(o));if(1===(t^E.toNumber(gt.isOr(r)))&&1===(n^E.toNumber(gt.isOr(o))))if(1===(t^n))this.appendChild(e,a,i);else{const e=this.traversalChild(l,a);if(e){a=e;continue}}else console.error("Invalid target node")}else this.appendChild(e,a,i);a=l.pop()}return e}traversalChild(e,t){const{node:i,left:r,right:o}=t;return r?(e.push(t),t.left=!1,{node:i.left,left:!0,right:!0}):o?(e.push(t),t.right=!1,{node:i.right,left:!0,right:!0}):void 0}appendChild(e,t,i){const{node:r}=t,{operator:o}=r;let n;const a=(0,St.isLogicNode)(r);a?gt.isAnd(o)?n=this.visitAnd(r,i):gt.isOr(o)&&(n=this.visitOr(r,i)):n=this.visitComparison(r,i),!n||a&&!n.children.length||e.addChild(n)}}class Nt{static parse(e,t){try{const i=(0,Tt.parse)(t);return Ot.visit(i,e)}catch(i){console.error(i)}}static concatByAnd(...e){return Nt.concat(lt.AND,e)}static concatByOr(...e){return Nt.concat(lt.OR,e)}static concat(e,t){let i=!1,r="";const o=new Set;for(const n of t)if(n&&!je.isRepeat(o,n))if(i=!0,r)switch(e){case lt.AND:r=`(${r}) and (${n})`;break;case lt.OR:r=`(${r}) or (${n})`;break}else r=n;if(i)return r}static toRSQL(e){const t=Nt.toTargetString(e,Et.INSTANCE);return t&&"("===t[0]&&")"===t[t.length-1]?t.substring(1,t.length-1):t}static toTargetString(e,t){var i;const r=null===(i=e.value)||void 0===i?void 0:i.type;if(null==r)return"";switch(r){case lt.AND:case lt.OR:{const i=[];for(const r of e.children){const e=Nt.toTargetString(r,t);null!=e&&i.push(e)}let o=nt.AND;return r===lt.OR&&(o=nt.OR),t.logicConnector(o,i)}case lt.COMPARISON:{const{value:i}=e;if(null==i)return;return t.comparisonConnector(i)}default:throw new Error(`Invalid node info type. value=${r}`)}}}},18501:(e,t,i)=>{i.d(t,{A:()=>C});var r=i(20641),o=i(53751),n=i(90033);const a={key:0},l={class:"form-upload-icon-area"},s=["onClick"];function d(e,t,i,d,c,u){const p=(0,r.g2)("oio-icon"),h=(0,r.g2)("upload-outlined"),g=(0,r.g2)("oio-button"),v=(0,r.g2)("DeleteOutlined"),m=(0,r.g2)("file-upload");return(0,r.uX)(),(0,r.CE)("div",{class:"upload-fields",onClick:t[0]||(t[0]=(0,o.D$)(()=>{},["stop"]))},[(0,r.bF)(m,{value:e.value,limit:e.limit,"limit-size":e.limitSize,"all-limit-size":e.allLimitSize,accept:e.limitFileExtensions,disabled:e.disabled,readonly:e.readonly,managed:e.managed,multiple:e.multiple,progress:e.progress,"cdn-key":e.cdnKey,partSize:e.partSize,parallel:e.parallel,chunkUploadThreshold:e.chunkUploadThreshold,onPreview:e.preview,onChange:e.change,onRemove:e.remove},{removeIcon:(0,r.k6)(({file:e,continuedUpload:t})=>["error"===e.status?((0,r.uX)(),(0,r.CE)("span",{key:0,style:{"margin-right":"8px",position:"relative",top:"-2px"},onClick:(0,o.D$)(t,["stop","prevent"]),title:""},[(0,r.bF)(p,{icon:"oinone-zhongzhi",color:"var(--oio-icon-color)"})],8,s)):(0,r.Q3)("",!0),(0,r.bF)(v)]),default:(0,r.k6)(()=>[e.readonly||e.value&&!(Array.isArray(e.value)?e.limit&&(-1===e.limit||e.value.length<e.limit):0===Object.keys(e.value).filter(e=>!e.includes("_")).length)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",a,[(0,r.RG)(e.$slots,"default",{},()=>[(0,r.bF)(g,{readonly:e.readonly,disabled:e.disabled},{default:(0,r.k6)(()=>[(0,r.Lk)("div",l,[e.uploadIcon?((0,r.uX)(),(0,r.Wv)(p,{key:0,icon:e.uploadIcon},null,8,["icon"])):((0,r.uX)(),(0,r.Wv)(h,{key:1})),(0,r.eW)(" "+(0,n.v_)(e.$translate(e.uploadPlaceholder||"点击上传")),1)])]),_:1},8,["readonly","disabled"])])]))]),_:3},8,["value","limit","limit-size","all-limit-size","accept","disabled","readonly","managed","multiple","progress","cdn-key","partSize","parallel","chunkUploadThreshold","onPreview","onChange","onRemove"])])}var c=i(99729),u=i(61262),p=i(78422),h=i(30717),g=i(91702),v=i(72831),m=i(89721);const f=(0,r.pM)({name:"Upload",components:{FileUpload:m.A,OioButton:h._5z,OioIcon:h.Lky,DeleteOutlined:c.A,UploadOutlined:u.A},props:Object.assign({},v.V),setup(e){const{readonly:t,disabled:i}=(0,g.P1)(e,!0),r=t=>{const{url:i}=t;i&&(e.privateLink?(0,h.PE3)(i,e.cdnKey):window.open(t.url,p.nHy.BLANK))};return{readonly:t,disabled:i,preview:r}}});var y=i(66262);const b=(0,y.A)(f,[["render",d]]),C=b},19294:(e,t,i)=>{i.d(t,{rC:()=>l,y3:()=>s});var r=i(15215),o=i(16022),n=i(25195);const a={action:{type:Object},bizStyle:{type:String,default:n.Bfq.default},label:{type:String},help:{type:String},icon:{type:String},invisible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledTitle:{type:String,default:""},loading:{type:Boolean,default:!1},validateAndClick:{type:Function},validatorForm:{type:Function},confirm:{type:String},confirmTitle:{type:String},confirmPosition:{type:String},enterText:{type:String},cancelText:{type:String}},l=Object.assign(Object.assign({},a),{type:{type:String,default:n.VQ.primary}});function s(e){const t=()=>(0,r.sH)(this,void 0,void 0,function*(){var t;if(o.BF.isNotEmpty(e.confirm)){if(e.validatorForm&&!(yield null===(t=e.validatorForm)||void 0===t?void 0:t.call(e)))return;return!0}return!1});return{condition:t}}},20435:(e,t,i)=>{i.d(t,{d:()=>v});var r=i(15215),o=i(78422),n=i(13193),a=i(70164),l=i(16022),s=i(47444),d=i(429),c=i(9703),u=i(21879),p=i(66401),h=i(35704),g=i(98475);class v extends g.Qn{compute(){const e=this.getCompute(this.formData);if(null==e||""===e)return this.getValue();let t;"boolean"===typeof e?t=e:(t=this.executeExpression(e,null),"number"===typeof t&&(0,d.A)(t)&&(t=0));const i=this.getValue(),r=JSON.stringify(t)===JSON.stringify(i);if("object"===typeof t&&r)return this.getValue();if((0,o.s$u)(this.field)&&(r||null==t))return i;const{ttype:n}=this.field;if(this.viewMode===a.nE.Lookup&&(0,a.pE)(n)&&e&&((0,c.A)(t)||(0,u.A)(t))){if([a.m1.OneToMany,a.m1.ManyToMany].includes(n)&&!Array.isArray(t))return i;if([a.m1.OneToOne,a.m1.ManyToOne].includes(n)&&"object"!==typeof t)return i}return this.setValue(t),t}getCompute(e){const{field:t}=this;if((null===t||void 0===t?void 0:t.ttype)!==a.m1.Related)return null===t||void 0===t?void 0:t.compute;let i=n.A8.activeRecord.toString();if((0,o.s$u)(t)){const r=t.related[0],o=e&&e[r];if(t.multi&&t.related.length>1&&Array.isArray(o)){const e=t.related[1];return i=`LIST_FIELD_VALUES(${i}.${r},'','${e}')`,i}for(const e of t.related)i=`${i}.${e}`;return i}}get allowClear(){return l.Xx.ofNullable(this.getDsl().allowClear).orElse(!0)}get placeholder(){let{placeholder:e}=this.getDsl(),t=!0;return(0,p.A)(e)&&(e=void 0,t=!1),null==e&&(e=null==l.TM.toBoolean(this.label)?this.label:this.field.displayName,t=!1),null!=l.TM.toBoolean(e)&&(e=void 0,t=!1),t&&(e=l.Xx.ofNullable(this.executeExpression(e,e)).orElse(e)),(0,c.A)(e)&&(e=(0,o.cAb)(e)),e||this.field.name||this.field.data}get emptyStyle(){return this.getDsl().emptyStyle}updateValue(e){const{field:t}=this;(0,o.s$u)(t)&&this.updateRelatedValue(t.related,e),this.setValue(e)}updateRelatedValue(e,t){e.length&&(0,h.A)(this.formData,e.join("."),t)}}(0,r.Cg)([s.x0.Reactive()],v.prototype,"allowClear",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"placeholder",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"emptyStyle",null)},22237:(e,t,i)=>{i.d(t,{n:()=>C,l:()=>F});var r,o,n,a=i(15215),l=i(78422),s=i(13193),d=i(16022),c=i(30717),u=i(25195),p=i(47444),h=i(63366),g=i(18593),v=i(97859),m=i(91702),f=i(31095),y=i(32093);const b=["id"];class C extends m.d4{constructor(){super(...arguments),this.defaultPagination={current:1,pageSize:50},this.treeLevel=0,this.enableLoadData=!0,this.backfillTreeNodes=[]}get referencesModel(){return this.field.referencesModel}get selectMode(){return c.SBT.single}get selectable(){return d.TM.toBoolean(this.getDsl().selectable)||!0}get checkable(){return d.TM.toBoolean(this.getDsl().checkable)||!1}get maxTagCount(){const{maxTagCount:e}=this.getDsl();return d.A5.toNumber(e)||void 0}defaultConstructDataTrigger(){return[c.HCy.CHANGE]}defaultClearFieldsTrigger(){return[c.HCy.CHANGE]}initialize(e){super.initialize(e),this.treeDefinition=y.m9.convert(e.template),this.treeDefinition||(this.treeDefinition=this.generatorDefaultTreeDefinition(e));let t=0,i=this.treeDefinition;while(i)t++,i=i.child;this.treeLevel=t;const{treeDefinition:r}=this;return r&&(this.rootNode=this.generatorRootNode(r)),this}generatorRootNode(e){return{title:"",key:(0,d._N)(),value:{metadata:e,pagination:Object.assign({},this.defaultPagination)},children:[],level:1,isLeaf:!1}}getTreeMetadataList(){const e=[];let t=this.treeDefinition;while(t)e.push(t),t=t.child;return e}generatorDefaultTreeDefinition(e){}get invisible(){return!this.treeDefinition||super.invisible}loadData(e){return(0,a.sH)(this,void 0,void 0,function*(){return this.isFetchAll?this.loadAllData():this.$loadData(e)})}$loadData(e){return(0,a.sH)(this,void 0,void 0,function*(){this.loadIdempotentKey=(0,d._N)();const t=this.loadIdempotentKey;return this.loadNode(e,()=>(0,a.sH)(this,void 0,void 0,function*(){const i=yield this.fetchData(e);return t===this.loadIdempotentKey&&(this.fillChildren(e,i),e.loaded=!0),i}))})}loadMoreData(e){return(0,a.sH)(this,void 0,void 0,function*(){const{parent:t}=e;if(!t)return[];t.value.pagination.current++,this.loadIdempotentKey=(0,d._N)();const i=this.loadIdempotentKey;return this.loadNode(t,()=>(0,a.sH)(this,void 0,void 0,function*(){const e=yield this.fetchData(t);return i===this.loadIdempotentKey&&this.fillChildren(t,e),e}))})}loadAllData(){return(0,a.sH)(this,void 0,void 0,function*(){this.enableLoadData=!1;const{rootNode:e,treeDefinition:t}=this;if(!e||!t)throw new Error("Invalid root node");if(e.loaded)return[];this.loadIdempotentKey=(0,d._N)();const i=this.loadIdempotentKey;return this.load(()=>(0,a.sH)(this,void 0,void 0,function*(){const r=yield this.fetchAll();if(i===this.loadIdempotentKey){const{nodes:i}=f.yU.convertTreeByResponseBody(t,r,{computeNodeTitle:this.computeNodeTitle.bind(this)});i.forEach(t=>{t.setParent(e)}),e.loaded=!0}return r}))})}onUpdateExpandedKeys(e){this.expandedKeys=e}onUpdateCheckedKeys(e){this.checkedKeys=e}onUpdateHalfCheckedKeys(e){this.halfCheckedKeys=e}get enableSearch(){return d.TM.toBoolean(this.getDsl().enableSearch)||!0}onSearch(e){this.debounceInternalOnSearch||(this.debounceInternalOnSearch=(0,h.A)(this.internalOnSearch,500)),this.debounceInternalOnSearch(e)}internalOnSearch(e){return(0,a.sH)(this,void 0,void 0,function*(){const{rootNode:t,treeDefinition:i}=this;if(!t||!i)return;if(!e)return this.onUpdateExpandedKeys([]),void(this.searchRootNode=void 0);const r=this.getTreeMetadataList();r.length&&(yield this.load(()=>(0,a.sH)(this,void 0,void 0,function*(){const t=yield f.yU.queryKeywords4Tree(e,r,{expressionParameters:this.generatorExpressionParameters()}),{expandedKeys:o,nodes:n}=this.convertTreeByTreeSearchResponseBody(t),a=this.generatorRootNode(i);n.forEach(e=>{e.setParent(a)}),this.searchRootNode=a,this.onUpdateExpandedKeys(o)})))})}fetchData(e,t){var i;return(0,a.sH)(this,void 0,void 0,function*(){let r,o;if(e.preloaded){const t=(e.level||1)-1,i=e.value.metadata,{isRoot:n,nextMetadata:a}=f.yU.getNextMetadata(e);a?(n||(r=this.getBackfillDataFilter(i,t)),o=this.getBackfillDataFilter(a,t)):r=this.getBackfillDataFilter(i,t)}const n=yield f.yU.fetchChildren(e,{disableSelfReferences:t,selfFilter:r,filter:o,expressionParameters:this.generatorExpressionParameters()});e.value.pagination.total=(0,g.A)(n.totalElements),e.value.pagination.totalPageSize=(0,g.A)(n.totalPages);const a=[],l=e.value.metadata;return null===(i=n.content)||void 0===i||i.forEach(e=>{const t=y.m9.findMetadataByKey(l,e.metadataKey);t&&a.push({metadata:t,value:JSON.parse(e.value),isLeaf:e.isLeaf})}),a})}fetchAll(){return(0,a.sH)(this,void 0,void 0,function*(){const e=this.treeDefinition;if(!e)return[];const t=this.getTreeMetadataList();return t.length?f.yU.fetchAll(t,{expressionParameters:this.generatorExpressionParameters()}):[]})}getBackfillDataFilter(e,t){var i,r;const o=((null===(i=this.referencesModel)||void 0===i?void 0:i.pks)||b)[0];if(o){const i=e.key,n=((null===(r=this.backfillTreeNodes[t])||void 0===r?void 0:r.filter(e=>e.value.metadata.key===i))||[]).map(e=>{var t;return null===(t=e.value.data)||void 0===t?void 0:t[o]}).filter(e=>!!e);if(null===n||void 0===n?void 0:n.length)return`${o} =out= ("${n.join('", "')}")`}}fillChildren(e,t){var i;const r=t.length;if(!r)return void(e.isLeaf=!e.children.length);let o=e.children;o||(o=[],e.children=o);const n=(null===(i=this.referencesModel)||void 0===i?void 0:i.pks)||[],a=!n.length;t.forEach(t=>{const{label:i,metadata:r,value:l}=t;let s;a?(s=l.__draftId,s||(s=(0,d._N)(),l.__draftId=s)):s=`${r.key}${C.METADATA_PK_SEPARATOR}${n.map(e=>`${l[e]}`).join(C.PK_SEPARATOR)}`;const c=this.generatorNewTreeNode(e,s,i,r,l);d.Xx.ofNullable(t.isLeaf).ifPresent(e=>{c.isLeaf=e}),o.push(c)})}generatorNewTreeNode(e,t,i,r,o){const n={label:i,metadata:r,data:o,pagination:Object.assign({},this.defaultPagination)};let a=e.level;return a||(a=0),{key:t,title:this.computeNodeTitle(n),value:n,parent:e,level:a+1,children:[],isLeaf:this.isLeafPredict(r)}}isLeafPredict(e){if(!e)return!1;const{child:t,selfReferences:i}=e;let r=!t||!t.references;return!!r&&(r&&(r=!i),r)}computeNodeTitle(e){const{label:t,metadata:i,data:r}=e;if(!(0,v.A)(t))return t;let o=i.label;return o&&r?(o=this.executeNodeExpression(r,o,c.$Uz.hyphen),(0,v.A)(o)&&(o=c.$Uz.hyphen)):o=c.$Uz.hyphen,o}generatorExpressionParameters(){var e,t,i;return{activeRecords:this.activeRecords||[],rootRecord:(null===(e=this.rootData)||void 0===e?void 0:e[0])||{},openerRecord:(null===(t=this.openerActiveRecords)||void 0===t?void 0:t[0])||{},activeRecord:(null===(i=this.activeRecords)||void 0===i?void 0:i[0])||{},scene:this.scene}}$onSelectedChange(e){if(void 0===e)return;if(null===e)return void this.change(null);const t=e.map(e=>e.value.data).filter(e=>!!e)||[];this.selectMode===c.SBT.multiple?this.change(d.Gf.cast(t)):this.change(d.Gf.cast(t[0]))}loadNode(e,t,...i){const r=Object.create(null,{load:{get:()=>super.load}});return(0,a.sH)(this,void 0,void 0,function*(){if(e.parent){e.loading=!0;try{return yield t(...i)}finally{e.loading=!1}}return r.load.call(this,t,...i)})}executeNodeExpression(e,t,i){var r,o;return s.r4.run({activeRecords:[e],rootRecord:(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:this.scene},t,i)}mountedProcess(){return(0,a.sH)(this,void 0,void 0,function*(){yield this.reloadBackfillDataByValue()})}refreshProcess(){return(0,a.sH)(this,void 0,void 0,function*(){yield this.reloadBackfillDataByValue()})}subscribeProcess(){this.reloadFormData$.subscribe(()=>{this.reloadBackfillDataByValue()})}reloadBackfillDataByValue(){return(0,a.sH)(this,void 0,void 0,function*(){if(this.rootNode)return this.load(()=>(0,a.sH)(this,void 0,void 0,function*(){(yield this.backfillDataByValue())||this.clearBackfillDataProcess()}))})}backfillDataByValue(){var e;return(0,a.sH)(this,void 0,void 0,function*(){this.backfillTreeNodes=[];const t=this.value;if(!t)return!1;let i;if(i=Array.isArray(t)?t:[t],!i.length)return!1;const r=this.getTreeMetadataList();if(!r.length)return!1;if(!this.backfillDataPredict(i,r))return!1;let o;if(!this.enableLoadData&&(null===(e=this.rootNode)||void 0===e?void 0:e.loaded))o=this.getBackfillData(i,r);else{const e=yield this.fetchBackfillData(i,r);if(!e)return!1;o=this.convertBackfillData(i,r,e)}return!!o&&(this.backfillDataProcess(o),!0)})}fetchBackfillData(e,t){return(0,a.sH)(this,void 0,void 0,function*(){return this.isFetchAll?(this.enableLoadData=!1,f.yU.fetchAll(t,{expressionParameters:this.generatorExpressionParameters()})):f.yU.reverselyQuery(e,t,{expressionParameters:this.generatorExpressionParameters()})})}backfillDataPredict(e,t){return!0}get isFetchAll(){const e=d.TM.toBoolean(this.getDsl().fetchAll);return null==e?this.selectMode===c.SBT.multiple:e}convertBackfillData(e,t,i,r,o){const{treeDefinition:n,defaultPagination:a,isFetchAll:l}=this,s=this.generatorCompareRecords(e,t);if(!s)return;const c=[],u=[],p=d.Gf.cast(d.hi.convert(i,e=>{const t=e.key||(0,d._N)();return u.push(t),t},e=>{const{parentKeys:t}=e;if(1!==(null===t||void 0===t?void 0:t.length)||t[0]!==e.key)return t},e=>{const{label:t,metadataKey:i,value:r,isLeaf:o}=e;if(i){let e=n;while(e){if(e.key===i)return{label:t,metadata:e,isLeaf:o,data:JSON.parse(r),pagination:l?void 0:Object.assign({},a)};e=e.child}}},(t,i,o)=>{const n=d.Gf.cast(d.nF.newInstance(t,i,d.Gf.cast(o)));return i&&(n.title=this.computeNodeTitle(i),n.isLeaf=d.Xx.ofNullable(i.isLeaf).orElseGet(()=>this.isLeafPredict(i.metadata)),this.pushSelectedNodes(e,c,s,n,i.data)),l?n.loaded=!0:n.preloaded=!0,null===r||void 0===r||r(n,i),n},(t,i)=>(t.title=this.computeNodeTitle(i),t.isLeaf=d.Xx.ofNullable(i.isLeaf).orElseGet(()=>this.isLeafPredict(i.metadata)),this.pushSelectedNodes(e,c,s,t,i.data),null===o||void 0===o||o(t,i),t))),{treeDefinition:h}=this;if(!h)throw new Error("Invalid root metadata.");const g=this.generatorRootNode(h);for(const d of p)d.setParent(g);return this.collectionBackfillTreeNodes(p),l?g.loaded=!0:g.preloaded=!0,this.rootNode=g,{selectedNodes:c,expandedKeys:u,nodes:p}}getBackfillData(e,t){const i=[],r=[],o=this.generatorCompareRecords(e,t);if(o)return this.recursionPushSelectNodes(this.rootNode,e,i,o),{selectedNodes:i,expandedKeys:r,nodes:[]}}recursionPushSelectNodes(e,t,i,r){for(const o of e.children)this.pushSelectedNodes(t,i,r,o,o.value.data),o.children.length&&this.recursionPushSelectNodes(o,t,i,r)}generatorCompareRecords(e,t){const i=e.map(e=>y.Zd.generatorPksObject(this.referencesModel,e)).filter(e=>!!e);if(e.length===i.length)return i;console.error("Invalid values.",e)}pushSelectedNodes(e,t,i,r,o){o&&this.isSelectedNode(i,o)&&t.push(r)}convertTreeByTreeSearchResponseBody(e){const{treeDefinition:t,defaultPagination:i}=this;if(!t)throw new Error("Invalid tree definition");return f.yU.convertTreeByResponseBody(t,e,{defaultPagination:i,computeNodeTitle:this.computeNodeTitle.bind(this)})}isSelectedNode(e,t){for(const i of e){let e=!0;for(const[r,o]of Object.entries(i))if(!r.startsWith(C.SELECTED_PREDICT_IGNORED_PREFIX)&&t[r]!==o){e=!1;break}if(e)return!0}return!1}collectionBackfillTreeNodes(e){const t=new Set,i=[],r=[];for(const o of e)d.BF.isRepeat(t,o.key)||i.push(o),r.push(...o.children);this.backfillTreeNodes.push(i),r.length&&this.collectionBackfillTreeNodes(r)}get watchedFilter(){const e=[this.treeDefinition];let t="";while(e.length>0){const i=e.shift();(null===i||void 0===i?void 0:i.filter)&&(t+=this.resolveDynamicDomain(i.filter)),(null===i||void 0===i?void 0:i.child)&&e.push(i.child)}return t}resolveDynamicDomain(e){var t,i;return(0,l.GsW)(e,this.formData,(null===(t=this.rootData)||void 0===t?void 0:t[0])||{},(null===(i=this.openerActiveRecords)||void 0===i?void 0:i[0])||{})}filterChanged(){this.clearBackfillDataProcess()}$$mounted(){var e;super.$$mounted(),this.mountedCallChaining?this.mountedCallChaining.hook(this.path,()=>(0,a.sH)(this,void 0,void 0,function*(){yield this.mountedProcess(),this.subscribeProcess()})):Promise.all([this.mountedProcess()]).then(()=>{this.subscribeProcess()}),null===(e=this.refreshCallChaining)||void 0===e||e.hook(this.path,()=>(0,a.sH)(this,void 0,void 0,function*(){yield this.refreshProcess()}))}$$unmounted(){var e,t;super.$$unmounted(),null===(e=this.mountedCallChaining)||void 0===e||e.unhook(this.path),null===(t=this.refreshCallChaining)||void 0===t||t.unhook(this.path)}}C.METADATA_PK_SEPARATOR=":",C.PK_SEPARATOR="-",C.SELECTED_PREDICT_IGNORED_PREFIX="__",(0,a.Cg)([p.x0.Reactive(),p.x0.Inject(),(0,a.Sn)("design:type",Object)],C.prototype,"mountedCallChaining",void 0),(0,a.Cg)([p.x0.Reactive(),p.x0.Inject(),(0,a.Sn)("design:type",Object)],C.prototype,"refreshCallChaining",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"treeDefinition",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"treeLevel",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"rootNode",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"searchRootNode",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"checkedKeys",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"halfCheckedKeys",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"expandedKeys",void 0),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object),(0,a.Sn)("design:paramtypes",[])],C.prototype,"referencesModel",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type","function"===typeof(r="undefined"!==typeof c.SBT&&c.SBT)?r:Object),(0,a.Sn)("design:paramtypes",[])],C.prototype,"selectMode",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Boolean),(0,a.Sn)("design:paramtypes",[])],C.prototype,"selectable",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Boolean),(0,a.Sn)("design:paramtypes",[])],C.prototype,"checkable",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object),(0,a.Sn)("design:paramtypes",[])],C.prototype,"maxTagCount",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object),(0,a.Sn)("design:paramtypes",[])],C.prototype,"invisible",null),(0,a.Cg)([p.x0.Method(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",["function"===typeof(o="undefined"!==typeof u.OioTreeNode&&u.OioTreeNode)?o:Object]),(0,a.Sn)("design:returntype",Promise)],C.prototype,"loadData",null),(0,a.Cg)([p.x0.Method(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",["function"===typeof(n="undefined"!==typeof u.OioTreeNode&&u.OioTreeNode)?n:Object]),(0,a.Sn)("design:returntype",Promise)],C.prototype,"loadMoreData",null),(0,a.Cg)([p.x0.Method(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",[]),(0,a.Sn)("design:returntype",Promise)],C.prototype,"loadAllData",null),(0,a.Cg)([p.x0.Method(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",[Array]),(0,a.Sn)("design:returntype",void 0)],C.prototype,"onUpdateExpandedKeys",null),(0,a.Cg)([p.x0.Method(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",[Array]),(0,a.Sn)("design:returntype",void 0)],C.prototype,"onUpdateCheckedKeys",null),(0,a.Cg)([p.x0.Method(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",[Array]),(0,a.Sn)("design:returntype",void 0)],C.prototype,"onUpdateHalfCheckedKeys",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Boolean),(0,a.Sn)("design:paramtypes",[])],C.prototype,"enableSearch",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object)],C.prototype,"enableLoadData",void 0),(0,a.Cg)([p.x0.Method(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",[String]),(0,a.Sn)("design:returntype",void 0)],C.prototype,"onSearch",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Boolean),(0,a.Sn)("design:paramtypes",[])],C.prototype,"isFetchAll",null),(0,a.Cg)([p.x0.Reactive(),(0,a.Sn)("design:type",Object),(0,a.Sn)("design:paramtypes",[])],C.prototype,"watchedFilter",null),(0,a.Cg)([p.x0.Watch("watchedFilter"),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",[]),(0,a.Sn)("design:returntype",void 0)],C.prototype,"filterChanged",null);var x=i(98916),w=i(23063),S=i(20641),T=i(53751);const E=Object.assign(Object.assign({},c.tJT),{labelProp:"title",valueProp:"key"}),A=(0,S.pM)({name:"DefaultTreeSelect",components:{OioTreeSelect:c.Mm5},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},m.jW),m.R7),{maxTagCount:{type:Number},selectedValue:{type:[Object,Array]},placeholder:{type:String},allowClear:{type:Boolean,default:void 0},rootNode:{type:Object},searchRootNode:{type:Object},expandedKeys:{type:Array},onUpdateExpandedKeys:{type:Function},selectMode:{type:String},multipleCheckedStrategy:{type:String},treeCheckStrictly:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},enableSearch:{type:Boolean,default:void 0},enableLoadData:{type:Boolean,default:void 0},onlySelectedLeaf:{type:Boolean,default:!1},loadData:{type:Function},loadMoreData:{type:Function},onSelectedChange:{type:Function},onSearch:{type:Function}}),setup(e){const t=(0,S.EW)(()=>{var t,i;const r=null===(t=e.searchRootNode)||void 0===t?void 0:t.children;return r?[...r]:y.m9.fillLoadMoreAction([...(null===(i=e.rootNode)||void 0===i?void 0:i.children)||[]])}),i=(0,S.EW)(()=>c.TMe.toBoolean(e.readonly)||!1),r=(0,S.EW)(()=>c.TMe.toBoolean(e.disabled)||!1),o=({dataRef:t})=>(0,a.sH)(this,void 0,void 0,function*(){var i;const r=t.data;if(!r.loaded)return null===(i=e.loadData)||void 0===i?void 0:i.call(e,r)}),n=t=>{var i;t&&e.rootNode&&!e.rootNode.loaded&&(null===(i=e.loadData)||void 0===i||i.call(e,e.rootNode))},l=(t,i)=>{var r;null===(r=e.onSelectedChange)||void 0===r||r.call(e,t,i)},s=t=>{var i;null===(i=e.onSearch)||void 0===i||i.call(e,t)},d=t=>(0,a.sH)(this,void 0,void 0,function*(){var i;const{key:r,parent:o}=t,n=null===o||void 0===o?void 0:o.children;if(n){const o=n[n.length-2];t.loadingMore=!0;try{yield null===(i=e.loadMoreData)||void 0===i?void 0:i.call(e,o);let t=-1;for(let e=n.length-1;e>=0;e--){const i=n[e];if(i.key===r){t=e;break}}-1!==t&&n.splice(t,1)}finally{t.loadingMore=!1}}}),u=(0,m.sX)();return{treeData:t,readonly:i,disabled:r,loadData:o,onDropdownVisibleChange:n,onChange:l,onSearch:s,onClickLoadMore:d,getTriggerContainer:u.getTriggerContainer}},render(){const{treeData:e,selectMode:t,selectedValue:i,readonly:r,disabled:o,placeholder:n,allowClear:a,multipleCheckedStrategy:l,treeCheckStrictly:s,loading:d,enableSearch:u,enableLoadData:p,onlySelectedLeaf:h,maxTagCount:g,loadData:v,onDropdownVisibleChange:m,onChange:f,onSearch:b,onClickLoadMore:C,focus:x,blur:w,getTriggerContainer:A}=this;return(0,S.bF)(c.Mm5,{mode:t,value:i,options:e,expandedKeys:this.expandedKeys,properties:E,maxTagCount:g,enableSearch:u,loading:d,loadData:p?v:void 0,getTriggerContainer:A,readonly:r,disabled:o,placeholder:n,allowClear:a,multipleCheckedStrategy:l,treeCheckStrictly:s,"onUpdate:expandedKeys":this.onUpdateExpandedKeys,onChange:f,onSearch:p?b:void 0,onFocus:x,onBlur:w,onDropdownVisibleChange:m},{title:({label:e,data:t,dataRef:i})=>{const r=e,o=i||t;if((null===o||void 0===o?void 0:o.class)===y.m9.LOAD_MORE_NODE_CLASS_NAME)return[(0,S.bF)(c._5z,{type:c.VQ.link,loading:o.loadingMore,onMouseover:(0,T.D$)(()=>{},["stop","prevent"]),onMouseout:(0,T.D$)(()=>{},["stop","prevent"]),onMouseenter:(0,T.D$)(()=>{},["stop","prevent"]),onMouseleave:(0,T.D$)(()=>{},["stop","prevent"]),onClick:(0,T.D$)(()=>C(o),["stop","prevent"])},{default:()=>r})];const{data:n}=o||{},a=h&&!(null===n||void 0===n?void 0:n.isLeaf);return(0,S.bF)("div",{onClick:e=>{a&&(e.preventDefault(),e.stopPropagation())}},r)}})}}),k=A,D=k;class F extends C{initialize(e){return super.initialize(e),this.setComponent(D),this}get onlySelectedLeaf(){return this.getDsl().onlySelectedLeaf||!1}get multipleCheckedStrategy(){return this.getDsl().multipleCheckedStrategy}get treeCheckStrictly(){return d.TM.toBoolean(this.getDsl().treeCheckStrictly)}onSelectedChange(e,t){if(!e||Array.isArray(e)&&!e.length)return this.selectedValue=void 0,this.$onSelectedChange(null),void this.internalOnSearch("");const i=this.getSelectedNodes(e);if(!i)return;const r=this.validatorSelectedValue(e,i);(0,x.A)(r)?r&&(this.selectedValue=e):this.selectedValue=r,this.$onSelectedChange(i)}getSelectedNodes(e){const t=this.field.references;return this.collectionSelectedNodes(e).filter(e=>e.value.metadata.model===t)}collectionSelectedNodes(e){const{rootNode:t,searchRootNode:i}=this;if(!t)return[];e=Array.isArray(e)?[...e]:[e];const r=[];return this.$collectionSelectedNodes(i||t,e,r),r}$collectionSelectedNodes(e,t,i){for(const r of e.children){const{key:e}=r,[o]=(0,w.A)(t,t=>t.value===e);if(o&&(i.push(r),!t.length))return;r.children.length&&this.$collectionSelectedNodes(r,t,i)}}validatorSelectedValue(e,t){if(!t.length)return this.selectMode===u.SBT.multiple&&[];const i=this.getTreeMetadataList(),{onlySelectedLeaf:r}=this,o=i[i.length-1];if(this.selectMode===u.SBT.multiple){const i=e,n=[];for(const e of i){const i=e.value,a=t.find(e=>e.key===i);a&&o.key===a.value.metadata.key&&(r?a.isLeaf&&n.push(e):n.push(e))}return n}const n=e,a=n.value,l=t[0],s=l&&l.key===a&&o.key===l.value.metadata.key;return s&&r?l.isLeaf:s}generatorNewTreeNode(e,t,i,r,o){const n=super.generatorNewTreeNode(e,t,i,r,o);return this.generatorTreeNodeAfterProperties(n),n}backfillDataProcess({selectedNodes:e}){if(this.selectMode===u.SBT.multiple){const t=[];for(const i of e){const e=this.collectionSelectedValues(i);e&&t.push(e)}this.selectedValue=t}else this.selectedValue=this.collectionSelectedValues(e[0])}clearBackfillDataProcess(){const{treeDefinition:e}=this;this.rootNode=e?this.generatorRootNode(e):void 0,this.expandedKeys=[],this.selectedValue=void 0}convertBackfillData(e,t,i,r,o){return super.convertBackfillData(e,t,i,r||((e,t)=>{t&&this.generatorTreeNodeAfterProperties(e)}),o||(e=>{this.generatorTreeNodeAfterProperties(e)}))}generatorTreeNodeAfterProperties(e){e.selectable=e.value.metadata.model===this.field.references}collectionSelectedValues(e){if(e)return{label:e.title||u.$Uz.hyphen,value:e.key,disabled:!1}}}(0,a.Cg)([p.x0.Reactive()],F.prototype,"selectedValue",void 0),(0,a.Cg)([p.x0.Reactive()],F.prototype,"onlySelectedLeaf",null),(0,a.Cg)([p.x0.Reactive()],F.prototype,"multipleCheckedStrategy",null),(0,a.Cg)([p.x0.Reactive()],F.prototype,"treeCheckStrictly",null),(0,a.Cg)([p.x0.Method()],F.prototype,"onSelectedChange",null)},22621:(e,t,i)=>{i.d(t,{VG3:()=>r.VG3});i(48798),i(13193),i(39277),i(16022),i(89284),i(70164),i(26462),i(83247),i(67774),i(54908),i(47444),i(39423),i(82499),i(78422),i(25195),i(75896),i(81427),i(2086);var r=i(41051)},23699:(e,t,i)=>{i.d(t,{E:()=>s});var r=i(39423),o=i(54633),n=i(53751),a=i(96622),l=i(98074);i(78982);const s=(e={})=>{const t=new l.e;t.initialize();const i=(0,n.Ef)({render:()=>t.render()},e);return i.use((0,r.Ye)()),i.use(o.Ay),i.use(a.Ay),i}},25873:(e,t,i)=>{i.d(t,{Jw:()=>r.Jw,FB:()=>ne,ef:()=>k.A,kQ:()=>r.kQ,u_:()=>r.u_,lj:()=>r.lj,C:()=>A,Wn:()=>w,FQ:()=>r.FQ,f1:()=>D.A,Vs:()=>_.V,r_:()=>V,_A:()=>F.A});var r=i(49464),o=i(20641);var n=i(37607);(0,o.pM)({components:{ARangePicker:n.cv},inheritAttrs:!1,props:{dateValue:{type:Object},value:{type:String},onChange:{type:Function}},setup(){return{}}});var a=i(66262);var l=i(90033),s=i(53751);const d={class:"oio-default-manage-group"},c={key:0,class:"oio-default-manage-group-sys"},u=["title","onClick"],p={class:"oio-default-manage-group-tag-list",ref:"groupTagRef"},h={key:0,class:"oio-default-manage-group-sys"},g={key:1,class:"oio-default-manage-group-inputBox"},v={class:"oio-default-manage-group-inputLabel"};function m(e,t,i,r,n,a){const m=(0,o.g2)("oio-icon"),f=(0,o.g2)("oio-button"),y=(0,o.g2)("a-input"),b=(0,o.g2)("a-tag"),C=(0,o.g2)("plus-outlined"),x=(0,o.g2)("oio-modal");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",d,[(0,o.Lk)("div",{class:(0,l.C4)(["oio-default-manage-group-box",[(e.expandGroup||!e.showExpand)&&"oio-default-manage-group-box-expand"]]),ref:"groupBoxRef"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.groupList,(t,i)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,l.C4)(["oio-default-manage-group-box-cate",[e.currentGroup&&t.id===e.currentGroup.id&&"active"]]),style:(0,l.Tr)(e.boxRowLastList[i])},[t.sys&&e.showDetail?((0,o.uX)(),(0,o.CE)("div",c,(0,l.v_)(e.$translate("系统")),1)):(0,o.Q3)("",!0),(0,o.Lk)("span",{title:`${t.displayName||t.name} ${e.showDetail?"（"+(t.iconNum||t.itemNum||e.totalItem)+"）":""}`,class:"cate-name",onClick:i=>e.onChangeWidgetGroup(t)},(0,l.v_)(t.displayName||t.name)+" "+(0,l.v_)(e.showDetail?"（"+(t.iconNum||t.itemNum||e.totalItem)+"）":""),9,u)],6))),256))],2),e.showExpand?((0,o.uX)(),(0,o.Wv)(f,{key:0,type:"link",style:{"margin-right":"var(--oio-margin)"},onClick:t[0]||(t[0]=t=>e.expandGroup=!e.expandGroup)},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.expandGroup?e.$translate("收起"):e.$translate("展开"))+" ",1),(0,o.bF)(m,{icon:"oinone-xiala",color:"var(--oio-primary-color)",size:"12",style:(0,l.Tr)({transform:e.expandGroup?"rotate(180deg)":"rotate(0deg)"})},null,8,["style"])]),_:1})):(0,o.Q3)("",!0),(0,o.RG)(e.$slots,"default"),e.showOptButtons?((0,o.uX)(),(0,o.Wv)(f,{key:1,type:"link",onClick:t[1]||(t[1]=t=>e.visibleGroupDialog=!0)},{default:(0,o.k6)(()=>[(0,o.bF)(m,{icon:"oinone-bianji",color:"var(--oio-primary-color)",size:"12"}),(0,o.eW)(" "+(0,l.v_)(e.$translate("管理分组")),1)]),_:1})):(0,o.Q3)("",!0)]),e.showOptButtons?((0,o.uX)(),(0,o.Wv)(x,{key:0,visible:e.visibleGroupDialog,"onUpdate:visible":t[5]||(t[5]=t=>e.visibleGroupDialog=t),"footer-invisible":"","cancel-callback":e.onCloseGroupModal,title:e.$translate("分组管理"),width:"820px"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",p,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.groupList,(t,i)=>((0,o.uX)(),(0,o.CE)("div",{class:"oio-default-manage-group-tag-container",key:t.id,style:(0,l.Tr)(e.tagRowLastList[i])},[t.sys&&!t.refEditing?((0,o.uX)(),(0,o.CE)("div",h,(0,l.v_)(e.$translate("系统")),1)):(0,o.Q3)("",!0),(0,o.bF)(b,{class:(0,l.C4)(["oio-default-manage-group-tag",[t.refEditing?"oio-default-manage-group-tag-editing":"",0==t.sys&&t.id>"0"&&!t.refEditing?"oio-default-manage-group-tag-closable":""]]),closable:0==t.sys&&t.id>"0"&&!t.refEditing,onClose:(0,s.D$)(i=>e.handleDeleteGroup(t.id),["prevent"]),onDblclick:i=>e.startEditing(t),title:`${t.displayName||t.name} ${e.showDetail?"（"+(t.iconNum||t.itemNum||e.totalItem)+"）":""}`},{default:(0,o.k6)(()=>[t.refEditing?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("label",v,(0,l.v_)(t.refName),1),(0,o.bF)(y,{class:"oio-input",value:t.refName,"onUpdate:value":e=>t.refName=e,type:"text",size:"small",style:{width:"100%",height:"100%",padding:"0 16px",position:"absolute",display:"inline"},onBlur:i=>e.handleModifyGroup(t),onKeyup:(0,s.jR)(e.emitBlur,["enter"])},null,8,["value","onUpdate:value","onBlur","onKeyup"])])):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,l.v_)(t.displayName||t.name)+" "+(0,l.v_)(e.showDetail?"（"+(t.iconNum||t.itemNum||e.totalItem)+"）":""),1)],64))]),_:2},1032,["class","closable","onClose","onDblclick","title"])],4))),128)),e.addGroupInputVisible?((0,o.uX)(),(0,o.Wv)(y,{key:0,class:"oio-input",ref:"addGroupInputRef",value:e.groupTagcreateInputValue,"onUpdate:value":t[2]||(t[2]=t=>e.groupTagcreateInputValue=t),type:"text",size:"small",style:{width:"78px",height:"40px"},onBlur:t[3]||(t[3]=t=>e.handleGroupTagInputConfirm()),onKeyup:(0,s.jR)(e.emitBlur,["enter"])},null,8,["value","onKeyup"])):((0,o.uX)(),(0,o.Wv)(b,{key:1,class:"add-cate",onClick:t[4]||(t[4]=t=>e.addGroupInputVisible=!0)},{default:(0,o.k6)(()=>[(0,o.bF)(C),(0,o.eW)(" "+(0,l.v_)(e.$translate("添加分组")),1)]),_:1}))],512)]),_:1},8,["visible","cancel-callback","title"])):(0,o.Q3)("",!0)],64)}var f=i(15215),y=i(95870),b=i(30717),C=i(25195),x=i(50953);const w={widgetGroup:{type:Object},currentGroup:{type:Object},groupList:{type:Array},queryGroupList:{type:Function},onChangeWidgetGroup:{type:Function},onDeleteGroup:{type:Function},onCreateGroup:{type:Function},onModifyGroup:{type:Function},showOptButtons:{type:Boolean,default:!0},isShowed:{type:Boolean,default:!0},enableAdaptiveWidtth:{type:Boolean,default:!0},adaptiveWidth:{type:Number,default:60},showDetail:{type:Boolean,default:!0}},S=(e,t,i,r=10,o)=>{const n=null===e||void 0===e?void 0:e.children,a=null===e||void 0===e?void 0:e.clientWidth;let l=0;if(o=[],n&&a&&t){let e=0;Array.from(n).forEach((n,s)=>{e&&e+n.scrollWidth>=a?(a-e>i?(t.value[s]={flex:`0 0 ${a-e-1}px`},e=0,0===l&&o.push(s)):e=n.scrollWidth+r,l++):(e+=n.scrollWidth+r,0===l&&o.push(s))})}},T=(0,o.pM)({name:"OioManageGroup",components:{OioButton:b._5z,OioIcon:C.Lky,OioModal:b.NHb,PlusOutlined:y.A},inheritAttrs:!1,props:Object.assign({},w),setup(e){const t=(0,x.KR)(!1),i=(0,x.KR)(!1),r=(0,x.KR)(!1),n=(0,x.KR)(""),a=()=>{i.value=!1,r.value=!1,n.value=""},l=t=>{var i;null===(i=e.onChangeWidgetGroup)||void 0===i||i.call(e,t)},s=(...t)=>(0,f.sH)(this,void 0,void 0,function*(){e.queryGroupList&&(yield e.queryGroupList(...t))}),d=e=>{!e.sys&&e.id>0&&(e.refEditing=(0,x.KR)(!0),e.refName=(0,x.KR)(e.displayName||e.name))},c=t=>(0,f.sH)(this,void 0,void 0,function*(){try{if(!e.onDeleteGroup||"function"!==typeof e.onDeleteGroup)return;const i=e.groupList.find(e=>e.id===t);yield e.onDeleteGroup(i),i&&i.name===e.widgetGroup.name&&e.onChangeWidgetGroup(e.groupList[0]),s()}catch(i){console.error(i)}}),u=e=>{e.target.blur()},p=t=>(0,f.sH)(this,void 0,void 0,function*(){try{if(t.refName){if(t.refName!==(t.displayName||t.name)){if(!e.onModifyGroup||"function"!==typeof e.onModifyGroup)return;t.name=t.refName,yield e.onModifyGroup(t),s()}}else b.$xc.error("失败","分组名称不能为空");t.refEditing=!1}catch(i){console.error(i)}}),h=()=>(0,f.sH)(this,void 0,void 0,function*(){if(n.value){if(!e.onCreateGroup||"function"!==typeof e.onCreateGroup)return;yield e.onCreateGroup(n.value),yield s(),n.value=""}else b.$xc.error("失败","分组名称不能为空");r.value=!1}),g=(0,x.KR)(!1),v=(0,x.KR)(null),m=(0,x.KR)(null),y=(0,x.KR)([]),C=(0,x.KR)([]),w=[],T=()=>{(0,o.dY)(()=>{var i,r;e.isShowed&&(g.value=!!v.value&&(null===(i=v.value)||void 0===i?void 0:i.scrollHeight)>42,y.value=new Array(null===(r=e.groupList)||void 0===r?void 0:r.length).fill({}),e.enableAdaptiveWidtth&&(0,o.dY)(()=>{var i;S(v.value,y,e.adaptiveWidth,void 0,w);const r=null===(i=e.groupList)||void 0===i?void 0:i.findIndex(t=>{var i;return t.id===(null===(i=e.currentGroup)||void 0===i?void 0:i.id)});if(r){const e=w.includes(r);t.value=t.value||!e}}))})},E=()=>{(0,o.dY)(()=>{var t;i.value&&e.enableAdaptiveWidtth&&(C.value=new Array(null===(t=e.groupList)||void 0===t?void 0:t.length).fill({}),(0,o.dY)(()=>{S(m.value,C,e.adaptiveWidth,16,w)}))})},A=(0,o.EW)(()=>{var t;let i=0;return null===(t=e.groupList)||void 0===t||t.forEach(e=>{(e.iconNum||e.itemNum)&&(i+=Number(e.iconNum||e.itemNum||0))}),i});return(0,o.wB)(()=>e.isShowed,()=>{T()}),(0,o.wB)(()=>e.groupList,()=>{T()},{immediate:!0,deep:!0}),(0,o.wB)(()=>i.value,()=>{E()}),{expandGroup:t,onChangeWidgetGroup:l,startEditing:d,visibleGroupDialog:i,addGroupInputVisible:r,groupTagcreateInputValue:n,onCloseGroupModal:a,handleDeleteGroup:c,emitBlur:u,handleModifyGroup:p,handleGroupTagInputConfirm:h,showExpand:g,groupBoxRef:v,groupTagRef:m,boxRowLastList:y,tagRowLastList:C,totalItem:A}}}),E=(0,a.A)(T,[["render",m]]),A=E;var k=i(89721),D=i(18501),F=i(36310);const R={class:"default-uploadDraggable"},O={class:"default-draggable-content"},N={class:"default-draggable-content-noData"},$={class:"default-draggable-content-text"},M={key:0,class:"default-draggable-content-tip"};function I(e,t,i,r,n,a){const s=(0,o.g2)("OioIcon"),d=(0,o.g2)("UploadCom");return(0,o.uX)(),(0,o.CE)("div",R,[(0,o.bF)(d,{value:e.value,limit:e.limit,"limit-size":e.limitSize,"all-limit-size":e.allLimitSize,limitFileExtensions:e.limitFileExtensions,disabled:e.disabled,readonly:e.readonly,managed:e.managed,multiple:e.multiple,progress:e.progress,"cdn-key":e.cdnKey,partSize:e.partSize,parallel:e.parallel,chunkUploadThreshold:e.chunkUploadThreshold,change:e.change,remove:e.remove},{default:(0,o.k6)(()=>[(0,o.Lk)("div",O,[(0,o.bF)(s,{icon:e.draggableIcon,class:"default-draggable-content-icon",size:"48px"},null,8,["icon"]),(0,o.Lk)("div",N,[(0,o.Lk)("div",$,(0,l.v_)(e.$translate(e.draggableTipText)),1),e.showDraggableExtendsionsText?((0,o.uX)(),(0,o.CE)("div",M,(0,l.v_)(e.$translate(e.draggableExtendsionsText)),1)):(0,o.Q3)("",!0)])])]),_:1},8,["value","limit","limit-size","all-limit-size","limitFileExtensions","disabled","readonly","managed","multiple","progress","cdn-key","partSize","parallel","chunkUploadThreshold","change","remove"])])}var L=i(75438),_=i(72831);const P=(0,o.pM)({name:"UploadDraggable",components:{InboxOutlined:L.A,UploadCom:D.A,OioIcon:b.Lky},props:Object.assign(Object.assign({},_.V),{draggableIcon:{type:String,default:"oinone-shangchuan1"},draggableTipText:{type:String,default:"点击 或 拖拽文件到这里上传"},showDraggableExtendsionsText:{type:Boolean,default:!0},draggableExtendsionsText:{type:String}})}),j=(0,a.A)(P,[["render",I]]),V=j;var B=i(38808),H=i(94261),W=i(56415);const U="default-user-prefer",q=(0,o.pM)({name:"SimpleUserPreferSetting",components:{OioCheckbox:b.dvV,OioIcon:b.Lky,OioInputSearch:b.G9,APopover:H.A,Container:W.Container,Draggable:W.Draggable,OioEmptyData:b.hNI},props:{visible:{type:Boolean},fields:{type:Array},invisibleFields:{type:Array},visibleFields:{type:Array}},emits:["update:visible","save"],setup(e,t){const i=e=>{t.emit("update:visible",e)},r=(0,x.KR)([]),n=e=>{r.value=e,l(a.value)},a=(0,x.KR)([]),l=e=>{a.value=r.value.filter(t=>e.includes(t.key)).map(e=>e.key)},s=(0,x.KR)(""),d=e=>{s.value=e},c=(e,t)=>!e||t.title.indexOf(e)>-1,u=(0,o.EW)(()=>r.value.filter(e=>!a.value.includes(e.key))),p=(0,o.EW)(()=>r.value.filter(e=>a.value.includes(e.key))),h=(0,o.EW)(()=>r.value.filter(e=>c(s.value,e))),g=(e,t)=>{const{key:i}=t;l(e?[...new Set([...a.value,i])]:a.value.filter(e=>e!==i)),y()},v=(e,t)=>e.findIndex(e=>e.key===t),m=(e,t,i)=>{const r=e[t];e.splice(t,1),e.splice(i,0,r)},f=({removedIndex:e,addedIndex:t})=>{if(!e||!t)return;const i=h.value[e],o=h.value[t];if(i&&o){const e=v(r.value,i.key),t=v(r.value,o.key);e>=0&&t>=0&&(m(r.value,e,t),n([...r.value]))}y()},y=()=>{t.emit("save",r.value,u.value,p.value)},b=()=>{if(e.fields){const t=[...e.fields];r.value=t,a.value=t.filter(e=>null==e.invisible||!e.invisible).map(e=>e.key)}else r.value=[...e.invisibleFields||[],...e.visibleFields||[]],a.value=(e.visibleFields||[]).map(e=>e.key);s.value=""};return(0,o.wB)(()=>e.visible,e=>{e&&b()}),{onUpdateVisible:i,targetKeys:a,filteredDataSource:h,searchValue:s,onUpdateSearchValue:d,onChecked:g,onDrop:f}},render(){const{$slots:e,visible:t,onUpdateVisible:i,targetKeys:r,filteredDataSource:n,searchValue:a,onUpdateSearchValue:l,onChecked:s,onDrop:d}=this,{trigger:c}=b.$pj.collectionSlots(e,["trigger"]),u=(null===c||void 0===c?void 0:c())||[];return(0,o.bF)(H.A,{visible:t,overlayClassName:`${U}-overlay`,placement:"bottomRight","onUpdate:visible":i},{default:()=>u,content:()=>{const e=[(0,o.bF)(b.G9,{value:a,placeholder:"请输入关键字","onUpdate:value":l})];return n.length?e.push((0,o.bF)(W.Container,{class:`${U}-draggable-wrapper`,dragHandleSelector:`.${U}-draggable-item-handle`,behaviour:"contain",onDrop:d},{default:()=>n.map(e=>(0,o.bF)(W.Draggable,{key:e.key},{default:()=>(0,o.bF)("div",{class:`${U}-draggable-item`},[(0,o.bF)("span",{class:`${U}-draggable-item-title`},[(0,o.bF)(b.dvV,{checked:r.includes(e.key),"onUpdate:checked":t=>s(t,e)}),(0,o.bF)("span",{},e.title)]),(0,o.bF)(b.Lky,{class:`${U}-draggable-item-handle`,icon:"oinone-yidong",size:10})])}))})):e.push((0,o.bF)(b.hNI)),e}})}}),z=q,G=z;var K,X,Q=i(16022),Y=i(86999),J=i(10246);function Z(e,t,i){return Array.from(new Set([...e,...t])).filter(e=>-1===i.indexOf(e))}(function(e){e["left"]="left",e["right"]="right"})(K||(K={})),function(e){e["all"]="all",e["part"]="part",e["none"]="none"}(X||(X={}));const ee=(0,o.pM)({name:"StandardUserPreferSetting",components:{OioButton:b._5z,OioModal:b.NHb,OioCheckbox:b.dvV,OioIcon:C.Lky,ATransfer:B.A,AListBody:Y.A},props:{visible:{type:Boolean},fields:{type:Array},invisibleFields:{type:Array},visibleFields:{type:Array},ok:{type:Function},reset:{type:Function}},emits:["update:visible"],setup(e,t){const i=`${U}-modal-${(0,Q._N)()}`,r=e=>{t.emit("update:visible",e)},n=(0,x.KR)([]),a=e=>{n.value=e,s(l.value)},l=(0,x.KR)([]),s=e=>{l.value=n.value.filter(t=>e.includes(t.key)).map(e=>e.key)},d=(0,x.KR)([]),c=e=>{d.value=e},u=(0,x.KR)(["",""]),p=(e,t)=>{switch(e){case K.left:u.value[0]=t;break;case K.right:u.value[1]=t;break}},h=(e,t)=>!e||t.title.indexOf(e)>-1,g=(0,o.EW)(()=>n.value.filter(e=>!l.value.includes(e.key))),v=(0,o.EW)(()=>n.value.filter(e=>l.value.includes(e.key))),m=(0,o.EW)(()=>g.value.filter(e=>h(u.value[0],e))),f=(0,o.EW)(()=>v.value.filter(e=>h(u.value[1],e))),y=(0,o.EW)(()=>g.value.filter(e=>d.value.includes(e.key)).map(e=>e.key)),b=(0,o.EW)(()=>v.value.filter(e=>d.value.includes(e.key)).map(e=>e.key)),w=(0,o.EW)(()=>m.value.filter(e=>!e.disabled).map(e=>e.key)),S=(0,o.EW)(()=>f.value.filter(e=>!e.disabled).map(e=>e.key)),T=(0,o.EW)(()=>0===y.value.length?X.none:m.value.every(e=>y.value.indexOf(e.key)>=0||!!e.disabled)?X.all:X.part),E=(0,o.EW)(()=>0===b.value.length?X.none:f.value.every(e=>b.value.indexOf(e.key)>=0||!!e.disabled)?X.all:X.part),A=e=>[(0,o.bF)("div",{class:`${U}-transfer-item`},[(0,o.bF)("span",{class:`${U}-transfer-item-title`},e.title),(0,o.bF)(C.Lky,{class:`${U}-transfer-item-handle`,icon:"oinone-yidong",size:10})])],k=e=>{d.value=e?Z(w.value,b.value,[]):Z([],b.value,w.value)},D=e=>{d.value=e?Z(S.value,y.value,[]):Z([],y.value,S.value)},F=()=>{r(!1)},R=()=>{var t;return null===(t=e.ok)||void 0===t?void 0:t.call(e,n.value,g.value,v.value)},O=()=>{var t;return null===(t=e.reset)||void 0===t?void 0:t.call(e)};let N=[null,null];const $=()=>{null===N||void 0===N||N.forEach(e=>null===e||void 0===e?void 0:e.destroy()),N=[null,null]},M=()=>{var e;const t=null===(e=document.getElementById(i))||void 0===e?void 0:e.firstElementChild;if(!t)return;const[r]=t.getElementsByClassName(`${U}-transfer`);return r||void 0},I=(e,t)=>{var i,r;return null===(r=null===(i=e.children.item(t))||void 0===i?void 0:i.getElementsByClassName("ant-transfer-list-content"))||void 0===r?void 0:r.item(0)},L=e=>{N[0]=new J["default"](e,{group:`${U}-transfer-left`,handle:`.${U}-transfer-item-handle`,animation:150,onSort:({oldIndex:e,newIndex:t})=>{const i=m.value[e],r=m.value[t];if(i&&r){const e=P(n.value,i.key),t=P(n.value,r.key);e>=0&&t>=0&&(j(n.value,e,t),a([...n.value]))}}})},_=e=>{N[1]=new J["default"](e,{group:`${U}-transfer-right`,handle:`.${U}-transfer-item-handle`,animation:150,onSort:({oldIndex:e,newIndex:t})=>{const i=f.value[e],r=f.value[t];if(i&&r){const e=P(n.value,i.key),t=P(n.value,r.key);e>=0&&t>=0&&(j(n.value,e,t),a([...n.value]))}}})},P=(e,t)=>e.findIndex(e=>e.key===t),j=(e,t,i)=>{const r=e[t];e.splice(t,1),e.splice(i,0,r)},V=()=>{if(e.fields){const t=[...e.fields];n.value=t,l.value=t.filter(e=>null==e.invisible||!e.invisible).map(e=>e.key)}else n.value=[...e.invisibleFields||[],...e.visibleFields||[]],l.value=(e.visibleFields||[]).map(e=>e.key);d.value=[],u.value=["",""]};return(0,o.wB)(()=>e.visible,e=>{e?(V(),(0,o.dY)(()=>{const e=M();if(!e)return;const t=I(e,0);t&&L(t);const i=I(e,2);i&&_(i)})):$()}),(0,o.wB)(m,e=>{var t;if(e.length){if(N[0])return;(0,o.dY)(()=>{if(N[0])return;const e=M();if(!e)return;const t=I(e,0);t&&L(t)})}else null===(t=N[0])||void 0===t||t.destroy(),N[0]=null}),(0,o.wB)(f,e=>{var t;if(e.length){if(N[1])return;(0,o.dY)(()=>{if(N[1])return;const e=M();if(!e)return;const t=I(e,2);t&&_(t)})}else null===(t=N[1])||void 0===t||t.destroy(),N[1]=null}),(0,o.hi)(()=>{$()}),{modalId:i,onUpdateVisible:r,dataSource:n,targetKeys:l,onUpdateTargetKeys:s,selectedKeys:d,onUpdateSelectedKeys:c,searchValues:u,onSearch:p,filterOption:h,leftSelectedAllStatus:T,rightSelectedAllStatus:E,renderItem:A,onCancel:F,onOk:R,onReset:O,onLeftSelectedAll:k,onRightSelectedAll:D}},render(){const{modalId:e,visible:t,onUpdateVisible:i,dataSource:r,renderItem:n,targetKeys:a,onUpdateTargetKeys:l,selectedKeys:s,onUpdateSelectedKeys:d,onSearch:c,filterOption:u,leftSelectedAllStatus:p,rightSelectedAllStatus:h,onCancel:g,onOk:v,onReset:m,onLeftSelectedAll:f,onRightSelectedAll:y}=this;return(0,o.bF)(b.NHb,{title:this.$translate("表头设置"),wrapperClassName:`${U}-modal`,wrapperProps:{id:e},width:"720px",destroyOnClose:!0,visible:t,"onUpdate:visible":i,cancelCallback:g},{default:()=>[(0,o.bF)(B.A,{class:`${U}-transfer`,dataSource:r,render:n,showSearch:!0,showSelectAll:!1,filterOption:u,targetKeys:a,selectedKeys:s,"onUpdate:targetKeys":l,"onUpdate:selectedKeys":d,onSearch:c},{leftTitle:()=>[(0,o.bF)("div",{class:[`${U}-title`,`${U}-title-left`]},[(0,o.bF)(b.dvV,{checked:p===X.all,indeterminate:p===X.part,"onUpdate:checked":f}),(0,o.bF)("span",{},this.$translate("未展示字段"))])],rightTitle:()=>[(0,o.bF)("div",{class:[`${U}-title`,`${U}-title-right`]},[(0,o.bF)(b.dvV,{checked:h===X.all,indeterminate:h===X.part,"onUpdate:checked":y}),(0,o.bF)("span",{},this.$translate("已展示字段"))])],leftSelectAllLabel:({selectedCount:e,totalCount:t})=>`${e}/${t}`,rightSelectAllLabel:({selectedCount:e,totalCount:t})=>`${e}/${t}`})],footer:()=>[(0,o.bF)("div",{class:`${U}-modal-footer`},[(0,o.bF)("div",{class:`${U}-modal-footer-left`},[(0,o.bF)(b._5z,{type:b.VQ.link,async:!0,icon:"oinone-zhongzhi2",onClick:m},{default:()=>this.$translate("恢复默认值")})]),(0,o.bF)("div",{class:`${U}-modal-footer-right`},[(0,o.bF)(b._5z,{onClick:g},{default:()=>this.$translate("取消")}),(0,o.bF)(b._5z,{type:b.VQ.primary,async:!0,onClick:v},{default:()=>this.$translate("确定")})])])]})}}),te=ee,ie=te,re=(0,o.pM)({name:"DefaultUserPrefer",components:{OioButton:b._5z,OioModal:b.NHb,ATransfer:B.A},props:{simple:{type:Boolean,default:void 0},fields:{type:Array},invisibleFields:{type:Array},visibleFields:{type:Array},enterCallback:{type:Function},resetCallback:{type:Function}},setup(e){const t=(0,x.KR)(!1),i=(0,x.KR)(!1),r=e=>{t.value=e,i.value=e},n=()=>{r(!0)},a=(t,i,n)=>(0,f.sH)(this,void 0,void 0,function*(){var a;const l=yield null===(a=e.enterCallback)||void 0===a?void 0:a.call(e,t,i,n);if(null==l||l)return(0,o.dY)(()=>{r(!1)})}),l=()=>(0,f.sH)(this,void 0,void 0,function*(){var t;const i=yield null===(t=e.resetCallback)||void 0===t?void 0:t.call(e);if(null==i||i)return(0,o.dY)(()=>{r(!1)})}),s=(t,i,r)=>{var o;null===(o=e.enterCallback)||void 0===o||o.call(e,t,i,r)};return{selected:t,visible:i,onUpdateSelected:r,onClick:n,onOk:a,onReset:l,onSave:s}},render(){const{$slots:e,simple:t,fields:i,invisibleFields:r,visibleFields:n,selected:a,visible:l,onUpdateSelected:s,onClick:d,onOk:c,onReset:u,onSave:p}=this,{trigger:h}=b.$pj.collectionSlots(e,["trigger"]);let g;if(g=h?h({onClick:d}):[(0,o.bF)(b._5z,{type:b.VQ.link,icon:"oinone-biaotoushezhi",selected:a,"onUpdate:selected":s,onClick:d})],t){const e=g;g=[(0,o.bF)(G,{visible:l,fields:i,invisibleFields:r,visibleFields:n,"onUpdate:visible":s,onSave:p},{trigger:()=>e})]}else g.push((0,o.bF)(ie,{visible:l,fields:i,invisibleFields:r,visibleFields:n,"onUpdate:visible":s,ok:c,reset:u}));return(0,o.bF)("span",{class:U},g)}}),oe=re,ne=oe},26462:(e,t,i)=>{i.d(t,{tQ:()=>r.t,kK:()=>u,B7:()=>o.B7,F:()=>l.F,pb:()=>a.p,Ju:()=>n.J,s:()=>s.s});var r=i(72430),o=i(6315),n=i(16244),a=i(29610),l=i(88120),s=i(29179),d=i(48100),c=i(40104);class u{constructor(e){this._contextValue=e,this.value$=new r.t(e)}initValue(e){this._contextValue=e,this.value$.next(e)}setValue(e,t){const i=Object.assign(Object.assign({},this._contextValue),{[e]:t});this._contextValue=i,this.value$.next(i)}setValues(e){const t=Object.assign(Object.assign({},this._contextValue),e);this._contextValue=t,this.value$.next(t)}getContext(){return this._contextValue}getValues(e){return e.map(e=>this._contextValue[e])}getValueByKey(e){return this._contextValue[e]}pluck(e){const t=this.value$.pipe((0,d.T)(t=>t[e]),(0,l.F)((e,t)=>e===t));return t}pluckSome(e){const t=this.value$.pipe((0,d.T)(t=>e.map(e=>t[e])),(0,l.F)((e,t)=>e===t));return t}subscribe(e){this.value$.pipe((0,c.B)(1)).subscribe(e)}unsubscribe(){this.value$&&this.value$.unsubscribe()}}Object.create({}),new Map},27581:(e,t,i)=>{i.d(t,{v1:()=>s,T7:()=>b,mD:()=>u});var r=i(15215),o=i(47444),n=i(97859),a=i(91702),l=i(68706);class s extends a.T3{initialize(e){super.initialize(e);const{startField:t,endField:i}=(0,l.U6)(this.rootRuntimeContext,this.getDsl().widgets||[]);if(!t||!i)throw new Error("range widget StartField and EndField is required.");this.startField=t,this.endField=i;const r=t.data;!(0,n.A)(this.startDefaultValue)&&(0,n.A)(this.formData[r])&&(this.formData[r]=this.startDefaultValue);const o=i.data;return!(0,n.A)(this.endDefaultValue)&&(0,n.A)(this.formData[o])&&(this.formData[o]=this.endDefaultValue),this}get itemData(){return super.itemData||`${this.startField.data}#${this.endField.data}`}get itemName(){return super.itemName||`${this.startField.name}#${this.endField.name}`}get startDefaultValue(){return this.getDsl().startDefaultValue}get endDefaultValue(){return this.getDsl().endDefaultValue}getValue(){const e=this.formData[this.startField.data],t=this.formData[this.endField.data];if(void 0!==e||void 0!==t)return[e,t]}setValue(e){if(void 0===e)return;let t,i;null===e?(t=null,i=null):[t,i]=e,void 0!==t&&(this.formData[this.startField.data]=t),void 0!==i&&(this.formData[this.endField.data]=i)}submit(){const{data:e,name:t}=this.startField,{data:i,name:r}=this.endField,o={},{[e]:n,[i]:a}=this.formData;return void 0!==n&&(o[t]=n),void 0!==a&&(o[r]=a),o}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){if(this.isSkipValidator)return this.validatorSkip();const t=this.submit();return t&&Object.values(t).length&&!Object.values(t).some(e=>null==e)?e.validator.call(this):this.required?this.validatorError():this.validatorSuccess()})}}(0,r.Cg)([o.x0.Reactive()],s.prototype,"itemData",null),(0,r.Cg)([o.x0.Reactive()],s.prototype,"itemName",null),(0,r.Cg)([o.x0.Reactive()],s.prototype,"startDefaultValue",null),(0,r.Cg)([o.x0.Reactive()],s.prototype,"endDefaultValue",null);var d=i(78422),c=i(16022);class u extends a.d4{initialize(e){return super.initialize(e),this.setComponent(this.getInitializeComponent()),this}get startPlaceholder(){return(0,d.cAb)(this.getDsl().startPlaceholder)}get endPlaceholder(){return(0,d.cAb)(this.getDsl().endPlaceholder)}get operator(){return this.field.operator}get allowClear(){return c.Xx.ofNullable(this.getDsl().allowClear).map(e=>c.TM.toBoolean(e)).orElse(!0)}get startDefaultValue(){return this.getDsl().startDefaultValue}get endDefaultValue(){return this.getDsl().endDefaultValue}}(0,r.Cg)([o.x0.Reactive()],u.prototype,"startPlaceholder",null),(0,r.Cg)([o.x0.Reactive()],u.prototype,"endPlaceholder",null),(0,r.Cg)([o.x0.Reactive()],u.prototype,"operator",null),(0,r.Cg)([o.x0.Reactive()],u.prototype,"allowClear",null),(0,r.Cg)([o.x0.Reactive()],u.prototype,"startDefaultValue",null),(0,r.Cg)([o.x0.Reactive()],u.prototype,"endDefaultValue",null);var p=i(30717),h=i(20641),g=i(50953);function v(e){const t=p.A5Q.toBigNumber(e);return(0,n.A)(t)?t:t.toString()}function m(e){const t=p.A5Q.toNumber(e);if(!(0,n.A)(t))return t}const f=(0,h.pM)({name:"NumberRange",components:{OioInputNumber:p.z2u},inheritAttrs:!1,props:Object.assign(Object.assign({},a.R7),{formatter:{type:Function},parser:{type:Function},step:{type:[Number,String],default:1},addStep:{type:[Number,String]},reduceStep:{type:[Number,String]},precision:{type:Number},showThousandth:{type:Boolean,default:!1},autocorrection:{type:Boolean,default:!1},separator:{type:String,default:"~"},leftValue:{type:[Number,String]},leftDefaultValue:{type:[Number,String]},leftPlaceholder:{type:String},leftMin:{type:[Number,String]},leftMax:{type:[Number,String]},leftChange:{type:Function},leftFocus:{type:Function},leftBlur:{type:Function},rightValue:{type:[Number,String]},rightDefaultValue:{type:[Number,String]},rightPlaceholder:{type:String},rightMin:{type:[Number,String]},rightMax:{type:[Number,String]},rightChange:{type:Function},rightFocus:{type:Function},rightBlur:{type:Function}}),setup(e){const t=(0,g.KR)(e.leftValue),i=(0,g.KR)(e.rightValue),r=(0,h.EW)(()=>p.TMe.toBoolean(e.readonly)||!1),o=(0,h.EW)(()=>p.TMe.toBoolean(e.disabled)||!1),l=e=>{const{left:r,right:o}=e;(0,n.A)(r)?t.value=void 0:t.value=r,(0,n.A)(o)?i.value=void 0:i.value=o};(0,h.wB)(()=>({left:e.leftValue,right:e.rightValue}),e=>{l(e)},{deep:!0}),(0,h.wB)(()=>({left:e.leftDefaultValue,right:e.rightDefaultValue}),e=>{l(e)});const s=e=>{const{readonlyShowPlaceholder:t,disabledShowPlaceholder:i}=(0,a.$h)();return!1===t&&r.value||!1===i&&o.value?"":e},d=(0,h.EW)(()=>s(e.leftPlaceholder)),c=(0,h.EW)(()=>s(e.rightPlaceholder)),u=(0,h.EW)(()=>v(e.leftMin)),f=(0,h.EW)(()=>v(e.rightMin)),y=(0,h.EW)(()=>v(e.leftMax)),b=(0,h.EW)(()=>v(e.rightMax)),C=(0,h.EW)(()=>m(e.precision));return{readonly:r,disabled:o,precision:C,leftValue:t,leftPlaceholder:d,leftMin:u,leftMax:y,rightValue:i,rightPlaceholder:c,rightMin:f,rightMax:b}},render(){const{readonly:e,disabled:t,formatter:i,parser:r,step:o,addStep:n,reduceStep:a,precision:l,showThousandth:s,autocorrection:d,separator:c,leftValue:u,leftDefaultValue:g,leftPlaceholder:v,leftMin:m,leftMax:f,leftChange:y,leftFocus:b,leftBlur:C,rightValue:x,rightDefaultValue:w,rightPlaceholder:S,rightMin:T,rightMax:E,rightChange:A,rightFocus:k,rightBlur:D}=this;return(0,h.bF)("div",{class:p.MZC.append(["number-range"],p.Gfm.cast(this.$attrs.class))},[(0,h.bF)(p.z2u,{readonly:e,disabled:t,formatter:i,parser:r,precision:l,hiddenStepHandle:!0,showThousandth:s,autocorrection:d,value:u,defaultValue:g,placeholder:v,min:m,max:f,"onUpdate:value":y,onFocus:b,onBlur:C}),(0,h.bF)("span",{class:"number-range-separator"},c),(0,h.bF)(p.z2u,{readonly:e,disabled:t,formatter:i,parser:r,precision:l,hiddenStepHandle:!0,showThousandth:s,autocorrection:d,value:x,defaultValue:w,placeholder:S,min:T,max:E,"onUpdate:value":A,onFocus:k,onBlur:D})])}}),y=f,b=y},31270:(e,t,i)=>{i.d(t,{N:()=>x});var r=i(15215),o=i(16022),n=i(25195),a=i(47444),l=i(98916),s=i(31095),d=i(22237),c=i(8974),u=i(30717),p=i(20641),h=i(53751),g=i(91702);const v="__RC_CASCADER_SPLIT__",m="ant-select-selection",f=Object.assign(Object.assign({},u.L2r),{labelProp:"title",valueProp:"key"}),y=(0,p.pM)({name:"DefaultCascader",components:{OioCascader:u.e92,CloseOutlined:c.A},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},g.jW),g.R7),{selectedValue:{type:Array},selectedLabels:{type:Array},placeholder:{type:String},allowClear:{type:Boolean,default:void 0},rootNode:{type:Object},searchRootNode:{type:Object},selectMode:{type:String},multipleCheckedStrategy:{type:String},changeOnSelect:{type:Boolean,default:void 0},labelsSeparator:{type:String},showPath:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},enableSearch:{type:Boolean,default:void 0},enableLoadData:{type:Boolean,default:void 0},loadData:{type:Function},loadMoreData:{type:Function},onSelectedChange:{type:Function},onSearch:{type:Function}}),setup(e){const t=(0,p.EW)(()=>o.TM.toBoolean(e.readonly)||!1),i=(0,p.EW)(()=>o.TM.toBoolean(e.disabled)||!1),r=t=>{var i,r;const o=null===(i=t[t.length-1])||void 0===i?void 0:i.data;(null===o||void 0===o?void 0:o.loaded)||null===(r=e.loadData)||void 0===r||r.call(e,o)},n=(0,p.EW)(()=>e.selectMode===u.SBT.multiple),a=(0,p.EW)(()=>e.multipleCheckedStrategy===u.fe4.SHOW_ALL?u.fe4.SHOW_PARENT:e.multipleCheckedStrategy),l=t=>{const i=t.labels;if(n.value){let t;if(e.showPath){const r=e.labelsSeparator||u._4H;t=i.filter(e=>!!e).join(r)}else t=i[i.length-1];return t}const r=e.labelsSeparator||u._4H;return e.selectedLabels?e.selectedLabels.join(r):i.join(r)},s=({value:t,closable:i,disabled:r,onClose:o})=>{var n;const a=e.selectedValue;if(!a)return[];const l=t.split(v),s=d(a,l);if(-1===s)return[];const g=null===(n=e.selectedLabels)||void 0===n?void 0:n[s];if(!g)return[];let f;if(e.showPath){const t=e.labelsSeparator||u._4H;f=g.filter(e=>!!e).join(t)}else f=g[g.length-1];return f?[(0,p.bF)("span",{class:[`${m}-item`,r&&`${m}-item-disabled`],title:f},[(0,p.bF)("span",{class:`${m}-item-content`},f),(0,p.bo)((0,p.bF)("span",{class:`${m}-item-remove`,unselectable:"on","aria-hidden":!0,onMousedown:(0,h.D$)(()=>{},["stop","prevent"]),onClick:o},[(0,p.bF)(c.A)]),[[h.aG,i]])])]:[]},d=(e,t)=>{for(let i=0;i<e.length;i++){const r=e[i];if(r.length!==t.length)continue;let o=!0;for(let e=0;e<r.length;e++){const i=r[e],n=t[e];if(!i||!n||i!==n){o=!1;break}}if(o)return i}return-1},f=t=>{var i;t&&e.rootNode&&!e.rootNode.loaded&&(null===(i=e.loadData)||void 0===i||i.call(e,e.rootNode))},y=(t,i)=>{var r;null===(r=e.onSelectedChange)||void 0===r||r.call(e,t,i)},b=t=>{var i;null===(i=e.onSearch)||void 0===i||i.call(e,t)},C=(0,g.sX)();return{readonly:t,disabled:i,loadData:r,multipleCheckedStrategy:a,displayRender:l,tagRender:s,onDropdownVisibleChange:f,onChange:y,onSearch:b,getTriggerContainer:C.getTriggerContainer}},render(){const{selectMode:e,changeOnSelect:t,selectedValue:i,readonly:r,disabled:o,placeholder:n,allowClear:a,multipleCheckedStrategy:l,displayRender:s,tagRender:d,loading:c,enableSearch:h,enableLoadData:g,rootNode:v,searchRootNode:m,loadData:y,onDropdownVisibleChange:b,onChange:C,onSearch:x,focus:w,blur:S,getTriggerContainer:T}=this;return(0,p.bF)(u.e92,{mode:e,changeOnSelect:t,value:i,options:(null===m||void 0===m?void 0:m.children)||(null===v||void 0===v?void 0:v.children)||[],properties:f,loading:c,loadData:g?y:void 0,getTriggerContainer:T,readonly:r,disabled:o,placeholder:n,allowClear:a,multipleCheckedStrategy:l,enableSearch:h,displayRender:s,tagRender:d,onChange:C,onSearch:g?x:void 0,onFocus:w,onBlur:S,onDropdownVisibleChange:b})}}),b=y,C=b;class x extends d.n{initialize(e){return super.initialize(e),this.setComponent(C),this}get changeOnSelect(){return o.TM.toBoolean(this.getDsl().changeOnSelect)||!1}get labelsSeparator(){return this.getDsl().labelsSeparator}get showPath(){return o.TM.toBoolean(this.getDsl().showPath)||!1}get multipleCheckedStrategy(){return this.getDsl().multipleCheckedStrategy}onSelectedChange(e,t){if(!(null===e||void 0===e?void 0:e.length)&&!(null===t||void 0===t?void 0:t.length))return this.selectedValue=void 0,this.selectedLabels=void 0,this.$onSelectedChange(null),void this.internalOnSearch("");const i=this.getSelectedNodes(e,t);if(!i)return;const r=this.validatorSelectedValue(e,i);if((0,l.A)(r)){if(!r)return;this.selectedValue=e}else this.selectedValue=r;this.$onSelectedChange(i)}getSelectedNodes(e,t){var i,r,a,l,s;const{changeOnSelect:d,multipleCheckedStrategy:c}=this,u=[];if(this.selectMode===n.SBT.multiple){const e=t,s=new Set;if(c===n.fe4.SHOW_ALL){const t=e=>{var i;o.BF.isRepeat(s,e.key)||(u.push(e),null===(i=e.children)||void 0===i||i.forEach(t))};for(const n of e){const e=n.length-1,a=null===(i=n[e])||void 0===i?void 0:i.data;a&&!o.BF.isRepeat(s,a.key)&&(u.push(a),null===(r=a.children)||void 0===r||r.forEach(t))}}else if(c===n.fe4.SHOW_PARENT)for(const t of e){const e=t.length-1,i=null===(a=t[e])||void 0===a?void 0:a.data;i&&!o.BF.isRepeat(s,i.key)&&u.push(i)}else for(const t of e){const e=t.length-1;let i=null===(l=t[e])||void 0===l?void 0:l.data;!d&&(null===i||void 0===i?void 0:i.children.length)&&(i=void 0),i&&!o.BF.isRepeat(s,i.key)&&u.push(i)}}else{const e=t,i=e.length-1;let r=null===(s=e[i])||void 0===s?void 0:s.data;!d&&(null===r||void 0===r?void 0:r.children.length)&&(r=void 0),r&&u.push(r)}return u}validatorSelectedValue(e,t){var i;if(!t.length)return[];const{selectMode:r,changeOnSelect:o,multipleCheckedStrategy:a}=this,l=this.getTreeMetadataList(),s=l[l.length-1];if(r===n.SBT.multiple){const r=e,l=[],d=[];if(a===n.fe4.SHOW_ALL){const e=t=>{var i;d.push(this.collectionSelectedLabels(t)),l.push(this.collectionSelectedValues(t)),null===(i=t.children)||void 0===i||i.forEach(e)};for(const n of r){const r=n.length-1,a=n[r],c=t.find(e=>e.key===a);c&&(o||s.key===c.value.metadata.key)&&(d.push(this.collectionSelectedLabels(c)),l.push(n),null===(i=c.children)||void 0===i||i.forEach(e))}}else if(a===n.fe4.SHOW_PARENT)for(const e of r){const i=e.length-1,r=e[i],n=t.find(e=>e.key===r);n&&(o||s.key===n.value.metadata.key)&&(d.push(this.collectionSelectedLabels(n)),l.push(e))}else for(const e of r){const i=e.length-1,r=e[i],n=t.find(e=>e.key===r);n&&(o||s.key===n.value.metadata.key)&&(d.push(this.collectionSelectedLabels(n)),l.push(e))}return this.selectedLabels=d,l}const d=e,c=d.length-1,u=d[c],p=t[0];return p.key===u&&(!(!p||!o&&s.key!==p.value.metadata.key)&&(this.selectedLabels=this.collectionSelectedLabels(p),e))}fetchBackfillData(e,t){return(0,r.sH)(this,void 0,void 0,function*(){return this.isFetchAll?(this.enableLoadData=!1,s.yU.fetchAll(t,{expressionParameters:this.generatorExpressionParameters()})):s.yU.reverselyQueryWithSize(e,t,{expressionParameters:this.generatorExpressionParameters()})})}backfillDataProcess({selectedNodes:e}){if(this.selectMode===n.SBT.multiple){const t=[],i=[],r=new Set,n=this.model.pks||[],a=!n.length;for(const l of e){let e;if(a)e=l.key;else{const t=l.value.data;e=t?n.map(e=>`${t[e]}`).join("#"):l.key}o.BF.isRepeat(r,e)||(t.push(this.collectionSelectedValues(l)),i.push(this.collectionSelectedLabels(l)))}this.selectedValue=t,this.selectedLabels=i}else this.selectedValue=this.collectionSelectedValues(e[0]),this.selectedLabels=this.collectionSelectedLabels(e[0])}clearBackfillDataProcess(){const{treeDefinition:e}=this;this.rootNode=e?this.generatorRootNode(e):void 0,this.expandedKeys=[],this.selectedValue=void 0}collectionSelectedValues(e){let t=[];while(e)e.parent&&(t=[e.key,...t]),e=e.parent;return t}collectionSelectedLabels(e){let t=[];while(e)e.parent&&(t=[e.title||"",...t]),e=e.parent;return t}}(0,r.Cg)([a.x0.Reactive()],x.prototype,"selectedValue",void 0),(0,r.Cg)([a.x0.Reactive()],x.prototype,"selectedLabels",void 0),(0,r.Cg)([a.x0.Reactive()],x.prototype,"changeOnSelect",null),(0,r.Cg)([a.x0.Reactive()],x.prototype,"labelsSeparator",null),(0,r.Cg)([a.x0.Reactive()],x.prototype,"showPath",null),(0,r.Cg)([a.x0.Reactive()],x.prototype,"multipleCheckedStrategy",null),(0,r.Cg)([a.x0.Method()],x.prototype,"onSelectedChange",null)},35647:(e,t,i)=>{i.d(t,{$H:()=>f,AO:()=>D,px:()=>k.p,Dd:()=>O});var r=i(15215),o=i(78422),n=i(70164),a=i(16022),l=i(83247),s=i(47444),d=i(91702),c=i(31095),u=i(77679),p=i(32093),h=i(26370),g=i(31270);let v=class extends g.N{submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:n,submitCache:a,submitType:l,relationUpdateType:s}=this;return o.hLl.M2O(t,i,e,r,n,a,l,s)})}};var m;v=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:n.qi.Form,ttype:n.m1.ManyToOne,widget:"Cascader"}))],v);let f=m=class extends v{get changeOnSelect(){return a.Xx.ofNullable(this.getDsl().changeOnSelect).map(a.TM.toBoolean).orElse(!0)}generatorDefaultTreeDefinition(e){return(0,h.yG)()}getSubmitField(e){let t=e.submitFields;return void 0===t&&(t=a.Gf.cast((0,o.RbF)(e,{key:"submitFields",prefix:"submit"}).submitFields),Object.keys(t).length||(console.error("Invalid submit fields.",e),t=null),e.submitFields=t),t||(null!==t?t:void 0)}$onSelectedChange(e){if(void 0===e)return;if(null===e)return void this.change(null);let t=e[0];if(!t)return void this.change(null);const{value:i}=this;let r;if(i&&(r=p.Zd.generatorPksObjectByPks(["id"],i),r&&Object.values(o.Cbz).forEach(e=>{a.BF.safeSetter(r,i,e)})),r||(r={__draftId:(0,a._N)()}),o.Y$5.addressWidgetNext())this.$onSelectedChangeNext(r,t);else while(t){const e=t.value.data;if(e){const i=this.getSubmitField(t.value.metadata);i&&Object.entries(i).forEach(([t,i])=>{r[t]=e[i]})}t=t.parent}this.change(r)}$onSelectedChangeNext(e,t){let i=u.uZ.Street;while(t){const r=t.value.data;if(!r){t=t.parent;continue}const{type:o,code:n,name:a}=r;if(!o)return console.error("Invalid region type.",t),void this.change(null);if(i)while(o!==i){if(i=this.setResourceAddressValue(e,i,null,null),null===i)break;if(!i)return}else i=o;if(i=this.setResourceAddressValue(e,o,n,a),null===i)break;if(!i)return;t=t.parent}}getResourceAddressValue(e,t){switch(t){case u.uZ.Country:{const{countryCode:t,countryName:i}=e;return t&&i?{code:t,name:i}:void 0}case u.uZ.Province:{const{provinceCode:t,provinceName:i}=e;return t&&i?{code:t,name:i}:void 0}case u.uZ.City:{const{cityCode:t,cityName:i}=e;return t&&i?{code:t,name:i}:void 0}case u.uZ.District:{const{districtCode:t,districtName:i}=e;return t&&i?{code:t,name:i}:void 0}case u.uZ.Street:{const{streetCode:t,streetName:i}=e;return t&&i?{code:t,name:i}:void 0}default:return void console.error("Invalid region type.",t)}}setResourceAddressValue(e,t,i,r){switch(t){case u.uZ.Country:return e.countryCode=i,e.countryName=r,null;case u.uZ.Province:return e.provinceCode=i,e.provinceName=r,u.uZ.Country;case u.uZ.City:return e.cityCode=i,e.cityName=r,u.uZ.Province;case u.uZ.District:return e.districtCode=i,e.districtName=r,u.uZ.City;case u.uZ.Street:return e.streetCode=i,e.streetName=r,u.uZ.District;default:return console.error("Invalid region type.",t),void this.change(null)}}fetchBackfillData(e,t){return(0,r.sH)(this,void 0,void 0,function*(){if(o.Y$5.addressWidgetNext())return this.fetchBackfillDataNext(e,t);const i=[];let r;for(const o of e){let e={};for(let n=t.length-1;n>=0;n--){const a=t[n],l=this.getSubmitField(a);if(l){for(const[t,i]of Object.entries(l)){const r=o[t];if(!r){e={};break}e[i]=r}if(Object.keys(e).length){i.push(e),r=t.slice(0,n+1);break}}}}return r?c.yU.reverselyQueryWithSize(i,r,{expressionParameters:this.generatorExpressionParameters(),disabledIsLeaf:!0}):void 0})}fetchBackfillDataNext(e,t){return(0,r.sH)(this,void 0,void 0,function*(){const i=e[0];if(!i)return;let r;for(const e of m.AddressTypes)if(r=this.getResourceAddressValue(i,e),r)break;return r?c.yU.reverselyQueryWithSize([r],t,{expressionParameters:this.generatorExpressionParameters(),disabledIsLeaf:!0}):void 0})}generatorCompareRecords(e,t){if(o.Y$5.addressWidgetNext())return this.generatorCompareRecordsNext(e,t);const i=[];for(const r of e)for(const e of t){let t={};const o=this.getSubmitField(e);if(o){for(const[e,i]of Object.entries(o)){const o=r[e];if(!o){t={};break}t[i]=o}Object.keys(t).length&&i.push(t)}}return i.length?[i[i.length-1]]:void 0}generatorCompareRecordsNext(e,t){const i=e[0];if(!i)return;let r;for(const o of m.AddressTypes)if(r=this.getResourceAddressValue(i,o),r)break;return r?[r]:void 0}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){return o.pFK.DEFAULT(this.field,this.itemName,e,this.value)})}};f.AddressTypes=[u.uZ.Street,u.uZ.District,u.uZ.City,u.uZ.Province,u.uZ.Country],(0,r.Cg)([s.x0.Reactive()],f.prototype,"changeOnSelect",null),f=m=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:n.qi.Form,ttype:n.m1.ManyToOne,widget:"Address"}))],f);var y=i(22237);let b=class extends y.l{submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:n,submitCache:a,submitType:l,relationUpdateType:s}=this;return o.hLl.M2O(t,i,e,r,n,a,l,s)})}};b=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:n.qi.Form,ttype:n.m1.ManyToOne,widget:"TreeSelect"}))],b);let C=class extends b{generatorDefaultTreeDefinition(e){return(0,h.FB)()}};C=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:[n.qi.Form,n.qi.Search],ttype:n.m1.ManyToOne,widget:"Company"}))],C);let x=class extends b{generatorDefaultTreeDefinition(e){return(0,h.e)()}};x=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:[n.qi.Form,n.qi.Search],ttype:n.m1.ManyToOne,widget:"Department"}))],x);let w=class extends b{generatorDefaultTreeDefinition(e){return(0,h.mv)()}};w=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:[n.qi.Form,n.qi.Search],ttype:n.m1.ManyToOne,widget:"Employee"}))],w);i(39455);var S=i(20435),T=i(99537);let E=class extends T.a{initialize(e){return super.initialize(e),this.setComponent(T.B),this}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return o.pFK.M2O(t,i,e,r)})}};(0,r.Cg)([s.x0.Reactive()],E.prototype,"selectedValues",void 0),E=(0,r.Cg)([l.DF.ClassFactory(S.d.Token({viewType:[n.qi.Form,n.qi.Search],ttype:n.m1.ManyToOne,widget:"Radio"}))],E);var A=i(39277),k=i(36270);let D=class extends k.p{change(e){const t=Object.create(null,{change:{get:()=>super.change}});return(0,r.sH)(this,void 0,void 0,function*(){const i=this.getDsl();if(null==e)return t.change.call(this,null),void this.selfClearFieldsCallback(i,{});if("{}"===JSON.stringify(e))return t.change.call(this,{}),void this.selfClearFieldsCallback(i,{});if((0,n.B6)(e)&&null==e.value)return t.change.call(this,null),void this.selfClearFieldsCallback(i,{});let r=this.dataList.find(t=>t[this.relationFieldKey]===e.value)||e;i&&i.submitValue&&(r=i.submitValue.split(",").reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:r[t]}),{})),t.change.call(this,r),this.selectedValue=r;const{model:l,field:s}=this;if(l&&s){const t={[s.data]:{[this.relationFieldKey]:e.value}};if(i&&i.submitFields){const e=i.submitFields||"";e.split(",").forEach(e=>{null!=this.formData[e]&&(t[e]=this.formData[e])})}let r;if(i&&i.responseFields){const e=i.responseFields.split(",");if(e.push(s.data),!l.modelFields||!l.modelFields.length){const e=yield o.Qvr.get(l.model);l.modelFields=(null===e||void 0===e?void 0:e.modelFields)||[]}r=l.modelFields.filter(t=>e.includes(t.data))}const{maxDepth:n=1,load:d="constructMirror"}=i,c=yield(0,A._B)(l.model,d,t,a.Gf.cast(r),void 0,{maxDepth:n}),u=this.dataList.find(t=>t[this.relationFieldKey]===e.value)||e;this.m2oChange(u),this.selfClearFieldsCallback(i,c)}})}selfClearFieldsCallback(e,t){const i={};e&&e.clearFields&&e.clearFields.split(",").forEach(e=>{i[e]=null}),a.BF.shallowMerge(this.formData,i),a.BF.shallowMerge(this.formData,t)}};(0,r.Cg)([s.x0.Method()],D.prototype,"change",null),D=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:[n.qi.Form,n.qi.Search,n.qi.Detail],ttype:n.m1.ManyToOne,widget:["SSConstructSelect"]}))],D);var F=i(25195),R=i(25873);let O=class extends d.td{constructor(){super(...arguments),this.defaultSubviewType=n.qi.Table,this.defaultValidateTrigger=[F.N0$.CHANGE],this.isInit=!0}defaultConstructDataTrigger(){return[F.HCy.CHANGE]}defaultClearFieldsTrigger(){return[F.HCy.CHANGE]}initialize(e){return super.initialize(e),this.setComponent(R.u_),this}get dataSource(){var e;return null!==(e=this.getCurrentDataSource())&&void 0!==e?e:this.parentDataSource}reloadActiveRecords(e){this.isInit?this.isInit=!1:(this.setCurrentActiveRecords(e),this.change(null===e||void 0===e?void 0:e[0]))}refreshValueProcess(){return(0,r.sH)(this,void 0,void 0,function*(){})}initSubviewData(){this.isDataSourceProvider=!1;let e=this.value;null==e?(e={},this.setValue(e),this.setCurrentActiveRecords([])):this.setCurrentActiveRecords([e]),this.setCurrentDataSource(null)}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:n,submitCache:a,submitType:l,relationUpdateType:s}=this;return o.hLl.M2O(t,i,e,r,n,a,l,s)})}};(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"dataSource",null),O=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:n.qi.Form,ttype:n.m1.ManyToOne,widget:u.Uj}))],O);var N=i(21879);class $ extends d.HG{constructor(){super(...arguments),this.limit=1}get limitSize(){const e=Number(this.getDsl().limitSize);return(0,N.A)(e)?e:-1}get allLimitSize(){return this.getDsl().allLimitSize||""}get partSize(){return this.getDsl().partSize||F.c$b.partSize}get chunkUploadThreshold(){return this.getDsl().chunkUploadThreshold||F.c$b.chunkUploadThreshold}get parallel(){return this.getDsl().parallel||F.c$b.parallel}get limitFileExtensions(){return this.getDsl().limitFileExtensions}get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return a.TM.toBoolean(this.getDsl().privateLink)}}(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object)],$.prototype,"limit",void 0),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Number),(0,r.Sn)("design:paramtypes",[])],$.prototype,"limitSize",null),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],$.prototype,"allLimitSize",null),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],$.prototype,"partSize",null),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],$.prototype,"chunkUploadThreshold",null),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],$.prototype,"parallel",null),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],$.prototype,"limitFileExtensions",null),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],$.prototype,"cdnKey",null),(0,r.Cg)([s.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],$.prototype,"privateLink",null);let M=class extends ${initialize(e){return super.initialize(e),this.setComponent(R.f1),this}getImportFile(e){this.change(e&&e[0]||null)}change(e){let t=e;Array.isArray(t)&&(t=null===t||void 0===t?void 0:t[0]),super.change(t)}remove(e){e&&this.change(null)}drop(e){e&&console.log("draggable drop",e)}};(0,r.Cg)([s.x0.Method()],M.prototype,"getImportFile",null),(0,r.Cg)([s.x0.Method()],M.prototype,"change",null),(0,r.Cg)([s.x0.Method()],M.prototype,"remove",null),(0,r.Cg)([s.x0.Method()],M.prototype,"drop",null),M=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:[n.qi.Form,n.qi.Detail,n.qi.Gallery,n.qi.Table],ttype:n.m1.ManyToOne,widget:["Upload"]}))],M);var I=i(97859),L=i(98916),_=i(9703);let P=class extends ${initialize(e){return super.initialize(e),this.setComponent(R._A),this}getImportFile(e){this.change(e&&e[0]||null)}change(e){const t=Array.isArray(e)?e[0]||null:{};super.change(t),this.blur()}remove(e){e&&(this.change(null),this.blur())}get showPreviewTitle(){let{showPreviewTitle:e}=this.getDsl();return(0,I.A)(e)&&(e=!0),(0,L.A)(e)?e:!(!(0,_.A)(e)||!a.TM.isStringBoolean(e))&&!!a.TM.toBoolean(e)}};(0,r.Cg)([s.x0.Method()],P.prototype,"getImportFile",null),(0,r.Cg)([s.x0.Method()],P.prototype,"change",null),(0,r.Cg)([s.x0.Method()],P.prototype,"remove",null),(0,r.Cg)([s.x0.Reactive()],P.prototype,"showPreviewTitle",null),P=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:[n.qi.Form,n.qi.Detail],ttype:n.m1.ManyToOne,widget:["UploadImg"]}))],P);let j=class extends M{initialize(e){return super.initialize(e),this.setComponent(R.r_),this}get draggableIcon(){return this.getDsl().draggableIcon||"oinone-shangchuan1"}get draggableTipText(){return this.getDsl().draggableTipText||"点击 或 拖拽文件到这里上传"}get showDraggableExtendsionsText(){var e;return null===(e=this.getDsl().showDraggableExtendsionsText)||void 0===e||e}get draggableExtendsionsText(){const e=this.limitFileExtensions||(0,o.cAb)("全部");return(0,o.cAb)("支持拓展名: ")+e}};(0,r.Cg)([s.x0.Reactive()],j.prototype,"draggableIcon",null),(0,r.Cg)([s.x0.Reactive()],j.prototype,"draggableTipText",null),(0,r.Cg)([s.x0.Reactive()],j.prototype,"showDraggableExtendsionsText",null),(0,r.Cg)([s.x0.Reactive()],j.prototype,"draggableExtendsionsText",null),j=(0,r.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:[n.qi.Form,n.qi.Detail,n.qi.Gallery],ttype:n.m1.ManyToOne,widget:"UploadDraggable"}))],j)},35902:(e,t,i)=>{i.d(t,{M:()=>u,j:()=>d});var r=i(15215),o=i(70164),n=i(54908),a=i(16022),l=i(47444);function s(){return o.ZN.PC}class d extends l.TS{constructor(){super(...arguments),this.loading=!1}get openerDataSource(){return this.parentOpenerDataSource}get openerActiveRecords(){return this.parentOpenerActiveRecords}get supportClientTypes(){return(a.MZ.convertArray(this.getDsl().clientTypes)||[]).map(e=>e.toUpperCase())}get isSupportPCClient(){if(s()!==o.ZN.PC)return!1;const{supportClientTypes:e}=this;return!e.length||e.includes(o.ZN.PC)}get isSupportMobileClient(){if(s()!==o.ZN.MOBILE)return!1;const{supportClientTypes:e}=this;return!e.length||e.includes(o.ZN.MOBILE)}get isSupportCurrentClient(){return!!this.isSupportPCClient||!!this.isSupportMobileClient}get invisible(){return!this.isSupportCurrentClient||super.invisible}get model(){const e=this.rootRuntimeContext.model;if(!e)throw new Error("Invalid model define.");return e}get viewAction(){return this.metadataRuntimeContext.viewAction}get view(){return this.rootRuntimeContext.view}get initialValue(){var e,t;return null===(t=null===(e=this.viewAction)||void 0===e?void 0:e.resView)||void 0===t?void 0:t.initialValue}get initialContext(){var e,t;const{context:i}=this.urlParameters;return i?JSON.parse(i):null===(t=null===(e=this.viewAction)||void 0===e?void 0:e.resView)||void 0===t?void 0:t.context}get urlParameters(){return this.inline?{}:this.getUrlParameters()}getUrlParameters(){const{page:e={}}=(0,n.yE)().matched.segmentParams;return e}get scene(){var e;const{action:t}=this.urlParameters;return t||((null===(e=this.viewAction)||void 0===e?void 0:e.name)||"")}get usingLoading(){return a.Xx.ofNullable(this.getDsl().usingLoading).map(e=>a.TM.toBoolean(e)).orElse(!0)}load(e,...t){return(0,r.sH)(this,void 0,void 0,function*(){if(!this.usingLoading)return yield e(...t);if(this.parentLoad)return yield this.parentLoad(e,...t);this.loading=!0;try{return yield e(...t)}finally{this.loading=!1}})}}(0,r.Cg)([l.x0.Reactive(),l.x0.Inject("openerDataSource")],d.prototype,"parentOpenerDataSource",void 0),(0,r.Cg)([l.x0.Reactive()],d.prototype,"openerDataSource",null),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject("openerActiveRecords")],d.prototype,"parentOpenerActiveRecords",void 0),(0,r.Cg)([l.x0.Reactive()],d.prototype,"openerActiveRecords",null),(0,r.Cg)([l.x0.Reactive()],d.prototype,"supportClientTypes",null),(0,r.Cg)([l.x0.Reactive()],d.prototype,"isSupportPCClient",null),(0,r.Cg)([l.x0.Reactive()],d.prototype,"isSupportMobileClient",null),(0,r.Cg)([l.x0.Reactive()],d.prototype,"isSupportCurrentClient",null),(0,r.Cg)([l.x0.Reactive()],d.prototype,"invisible",null),(0,r.Cg)([l.x0.Reactive()],d.prototype,"loading",void 0),(0,r.Cg)([l.x0.Method(),l.x0.Inject("load")],d.prototype,"parentLoad",void 0),(0,r.Cg)([l.x0.Reactive()],d.prototype,"usingLoading",null);var c=i(97859);class u extends d{get itemData(){const{data:e,name:t}=this.getDsl();return e||t}get itemName(){const{data:e,name:t}=this.getDsl();return t||e}get subDataPath(){return this.itemData}get dataPath(){const{parentDataPath:e,subDataPath:t,subDataIndex:i,currentDataPath:r}=this;if((0,c.A)(r)){let r=e||"";return t&&(r=r?`${r}.${t}`:t,null!=i&&(r=`${r}[${i}]`)),r}return r}}(0,r.Cg)([l.x0.Reactive()],u.prototype,"itemData",null),(0,r.Cg)([l.x0.Reactive()],u.prototype,"itemName",null),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject("dataPath")],u.prototype,"parentDataPath",void 0),(0,r.Cg)([l.x0.Reactive()],u.prototype,"subDataPath",null),(0,r.Cg)([l.x0.Reactive()],u.prototype,"subDataIndex",void 0),(0,r.Cg)([l.x0.Reactive()],u.prototype,"currentDataPath",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Provide()],u.prototype,"dataPath",null)},36270:(e,t,i)=>{i.d(t,{p:()=>F});var r=i(15215),o=i(78422),n=i(70164),a=i(39277),l=i(83247),s=i(47444),d=i(63366),c=i(9703),u=i(21879),p=i(97859),h=i(91702),g=i(20641);const v={class:"form-single-select"},m={key:0,class:"readonly"},f={key:1},y={class:"form-relation-select-dropdown-spin"};function b(e,t,i,r,o,n){const a=(0,g.g2)("a-select"),l=(0,g.g2)("v-nodes"),s=(0,g.g2)("oio-spin"),d=(0,g.g2)("check-outlined"),c=(0,g.g2)("oio-empty-data");return(0,g.uX)(),(0,g.CE)("div",v,[e.innerReadonly&&!e.innerDisabled?((0,g.uX)(),(0,g.CE)("div",m,[(0,g.bF)(a,{class:"oio-select","dropdown-class-name":"oio-select-dropdown","label-in-value":"",placeholder:e.placeholder,getPopupContainer:e.getTriggerContainer,value:e.currentValue,options:e.optionList},null,8,["placeholder","getPopupContainer","value","options"])])):((0,g.uX)(),(0,g.CE)("div",f,[(0,g.bF)(a,{class:"oio-select","label-in-value":"","show-search":e.showSearch,"allow-clear":e.allowClear,disabled:e.innerDisabled,value:e.currentValue,"filter-option":!1,"default-active-first-option":!1,options:e.optionList,placeholder:e.placeholder,getPopupContainer:e.getTriggerContainer,dropdownClassName:e.dropdownClassName,onChange:e.change,onSearch:e.search,onSelect:e.innerSelect,onBlur:e.blur,onDropdownVisibleChange:e.dropdownVisibleChange,onFocus:e.focus,onPopupScroll:e.slipSelect},{dropdownRender:(0,g.k6)(({menuNode:t})=>[(0,g.bF)(l,{vnodes:t},null,8,["vnodes"]),(0,g.Lk)("div",y,[e.loadMoreLoading?((0,g.uX)(),(0,g.Wv)(s,{key:0,size:"small",loading:""})):(0,g.Q3)("",!0)])]),menuItemSelectedIcon:(0,g.k6)(()=>[(0,g.bF)(d)]),notFoundContent:(0,g.k6)(()=>[e.loadMoreLoading?(0,g.Q3)("",!0):((0,g.uX)(),(0,g.Wv)(c,{key:0}))]),_:1},8,["show-search","allow-clear","disabled","value","options","placeholder","getPopupContainer","dropdownClassName","onChange","onSearch","onSelect","onBlur","onDropdownVisibleChange","onFocus","onPopupScroll"])]))])}var C=i(17345),x=i(30717),w=i(50953),S=i(38367),T=i(68890);const E=(0,g.pM)({inheritAttrs:!1,props:Object.assign(Object.assign({},T.DZ),{value:Object,currentValueLabel:String,handleSelectedValueLabel:Function,generatorSelectOption:Function}),components:{VNodes:(e,{attrs:t})=>t.vnodes,CheckOutlined:C.A,OioEmptyData:x.hNI,OioSpin:x.MEy,ASelect:S.Ay},setup(e){const t=(0,w.KR)([]),i=e=>{t.value=[...e]},r=(0,g.EW)(()=>e.value&&e.value[e.relationFieldKey]?{value:e.value[e.relationFieldKey]}:null);(0,g.wB)(()=>e.options,()=>{e.options&&e.options.length?i(e.options):t.value=[]},{immediate:!0}),(0,g.wB)(()=>e.value,()=>{var t;!e.isInitOptions&&e.value&&i((null===(t=e.generatorSelectOption)||void 0===t?void 0:t.call(e,[e.value]))||[])},{immediate:!0});const o=(0,h.sX)();return Object.assign(Object.assign({},(0,T.sc)(e)),{currentValue:r,optionList:t,getTriggerContainer:e.getPopupContainer||o.getTriggerContainer})}});var A=i(66262);const k=(0,A.A)(E,[["render",b]]),D=k;let F=class extends h.jQ{constructor(){super(...arguments),this.delayUpdateM2oValue=(0,d.A)(()=>{this.updateM2oValue()})}initialize(e){return super.initialize(e),this.setComponent(D),this}handleSelectedValueLabel(e){var t;return(0,r.sH)(this,void 0,void 0,function*(){this.currentValueLabel=null===(t=this.handleSelectOption([e],this.referencesModel)[0])||void 0===t?void 0:t.label})}change(e){if(null==e)return this.m2oChange(null),void this.handleEmpty();if("{}"===JSON.stringify(e))return void this.m2oChange({});if((0,n.B6)(e)&&null==e.value)return void this.m2oChange(null);const t=this.dataList.find(t=>t[this.relationFieldKey]===e.value)||e;this.m2oChange(t)}fillOptions(e,t=!0){return(0,r.sH)(this,void 0,void 0,function*(){this.fillOptionsForSingle(e,t)})}m2oChange(e){super.change(e)}submit(e){return(0,r.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:n,submitCache:a,submitType:l,relationUpdateType:s}=this;return o.hLl.M2O(t,i,e,r,n,a,l,s)})}mounted(){const e=Object.create(null,{mounted:{get:()=>super.mounted}});return(0,r.sH)(this,void 0,void 0,function*(){yield e.mounted.call(this),this.value&&this.watchValue()})}get value(){if(this.formData)return this.getValue()}get computeQueryOneKey(){return this.getDsl().computeQueryOneKey}watchM2OValue(){return(0,r.sH)(this,void 0,void 0,function*(){this.delayUpdateM2oValue()})}updateM2oValue(){var e,t,i;return(0,r.sH)(this,void 0,void 0,function*(){const r=this.getValue(),l=this.getCompute(this.formData);if(null!=l&&""!==l){const s=this.executeExpression(l,null);let d=this.computeQueryOneKey;const h=l.split(".");if("activeRecord"===h[0]&&h[1]&&h[2]&&!d){const r=yield o.Qvr.get(this.field.model),n=null===(e=null===r||void 0===r?void 0:r.modelFields)||void 0===e?void 0:e.find(e=>e.name===h[1]);if(n&&n.references){const e=yield o.Qvr.get(n.references);if(e&&e.modelFields){const r=e.modelFields.find(e=>e.relationFields&&e.relationFields.includes(h[2]));if(r){const e=null===(t=r.relationFields)||void 0===t?void 0:t.findIndex(e=>e===h[2]);d=(null===(i=r.referenceFields)||void 0===i?void 0:i[e])||"id"}}}}d||(d=this.computeQueryOneDefaultKey());const g={};if(g[d]=s,(0,c.A)(s)||(0,u.A)(s)){if("object"!==typeof r||(0,n.Po)(r)){const e=yield(0,a.Zy)(this.field.references,g);this.setValue(e)}else if(r[d]!==s){const e=yield(0,a.Zy)(this.field.references,g);this.setValue(e)}}else"object"===typeof s?JSON.stringify(s)!==JSON.stringify(this.value)&&this.setValue(s):(0,p.A)(s)&&this.setValue(null)}})}computeQueryOneDefaultKey(){return"id"}};(0,r.Cg)([s.x0.Reactive()],F.prototype,"currentValueLabel",void 0),(0,r.Cg)([s.x0.Method()],F.prototype,"handleSelectedValueLabel",null),(0,r.Cg)([s.x0.Method()],F.prototype,"change",null),(0,r.Cg)([s.x0.Provide(),s.x0.Reactive()],F.prototype,"value",null),(0,r.Cg)([s.x0.Reactive()],F.prototype,"computeQueryOneKey",null),(0,r.Cg)([s.x0.Watch("formData",{deep:!0})],F.prototype,"watchM2OValue",null),F=(0,r.Cg)([l.DF.ClassFactory(h.d4.Token({viewType:n.qi.Form,ttype:n.m1.ManyToOne}))],F)},36310:(e,t,i)=>{i.d(t,{A:()=>E});var r=i(20641),o=i(53751),n=i(90033);const a={key:0},l={class:"form-upload-img-icon-area"},s={class:"ant-upload-text"},d=["onClick"],c=["src"];function u(e,t,i,u,p,h){const g=(0,r.g2)("oio-icon"),v=(0,r.g2)("plus-outlined"),m=(0,r.g2)("EyeOutlined"),f=(0,r.g2)("FileUpload"),y=(0,r.g2)("oio-modal");return(0,r.uX)(),(0,r.CE)("div",{class:"oio-default-upload-img",onClick:t[1]||(t[1]=(0,o.D$)(()=>{},["stop"]))},[(0,r.bF)(f,{value:e.fileList,listType:"picture-card",limit:e.limit,"limit-size":e.limitSize,"all-limit-size":e.allLimitSize,accept:e.limitFileExtensions||".jpg,.jpeg,.png,.gif,.bmp",disabled:e.disabled,readonly:e.readonly,managed:e.managed,multiple:e.multiple,progress:e.progress,"cdn-key":e.cdnKey,partSize:e.partSize,parallel:e.parallel,chunkUploadThreshold:e.chunkUploadThreshold,onChange:e.onChangeFile,onRemove:e.onRemoveFile,onPreview:e.handlePreview},{previewIcon:(0,r.k6)(({file:e,continuedUpload:t})=>["error"===e.status?((0,r.uX)(),(0,r.CE)("span",{key:0,style:{position:"relative",top:"-2px"},onClick:(0,o.D$)(t,["stop","prevent"]),title:""},[(0,r.bF)(g,{icon:"oinone-zhongzhi",color:"#fff"})],8,d)):((0,r.uX)(),(0,r.Wv)(m,{key:1}))]),default:(0,r.k6)(()=>[e.readonly||e.value&&!(Array.isArray(e.value)?e.limit&&(-1===e.limit||e.value.length<e.limit):0===Object.keys(e.value).filter(e=>!e.includes("_")).length)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",a,[(0,r.RG)(e.$slots,"default",{},()=>[(0,r.Lk)("div",l,[e.uploadIcon?((0,r.uX)(),(0,r.Wv)(g,{key:0,icon:e.uploadIcon,size:"14"},null,8,["icon"])):((0,r.uX)(),(0,r.Wv)(v,{key:1})),(0,r.eW)(" "+(0,n.v_)(e.uploadIconText),1)]),(0,r.Lk)("div",s,(0,n.v_)(e.uploadPlaceholder||e.translate&&e.translate("kunlun.button.upload")||e.$translate("点击上传")),1)])]))]),_:3},8,["value","limit","limit-size","all-limit-size","accept","disabled","readonly","managed","multiple","progress","cdn-key","partSize","parallel","chunkUploadThreshold","onChange","onRemove","onPreview"]),(0,r.bF)(y,{width:"50%",visible:e.previewVisible,title:e.$translate(e.previewTitle),footer:null,"onUpdate:visible":t[0]||(t[0]=t=>e.previewVisible=!1),onCancel:e.handleCancel},{default:(0,r.k6)(()=>[(0,r.Lk)("img",{alt:"example",style:{width:"100%"},src:e.previewImage},null,8,c)]),_:1},8,["visible","title","onCancel"])])}var p=i(15215),h=i(95870),g=i(99475),v=i(25195),m=i(30717),f=i(9703),y=i(50953),b=i(91702),C=i(89721),x=i(72831);const w=(0,r.pM)({name:"UploadImg",components:{FileUpload:C.A,OioModal:m.NHb,OioIcon:v.Lky,PlusOutlined:h.A,EyeOutlined:g.A},inheritAttrs:!1,props:Object.assign(Object.assign({},x.V),{value:{type:[Array,Object,String]},showPreviewTitle:{type:Boolean,default:!0}}),emits:["change","remove"],setup(e,{emit:t}){const i=(0,y.KR)(!1),o=(0,y.KR)(""),n=(0,y.KR)(""),{readonly:a,disabled:l}=(0,b.P1)(e,!0),s=t=>(0,p.sH)(this,void 0,void 0,function*(){(t.url||t.preview)&&(o.value=e.showPreviewTitle?t.name||t.url||t.preview:"",n.value=t.url||t.preview,i.value=!0)}),d=(0,r.EW)(()=>{const t=e.value;let i;return Array.isArray(t)?i=t:null!=t&&(i=[t]),(i||[]).map(e=>(0,f.A)(e)?{url:e,type:"image/*"}:Object.assign(Object.assign({},e),{type:"image/*"}))}),c=()=>{i.value=!1},u=i=>{e.change&&e.change(i),t("change",i)},h=i=>{e.remove&&e.remove(i),t("remove",i)};return{previewVisible:i,previewTitle:o,previewImage:n,readonly:a,disabled:l,fileList:d,handlePreview:s,handleCancel:c,onChangeFile:u,onRemoveFile:h}}});var S=i(66262);const T=(0,S.A)(w,[["render",u]]),E=T},36603:(e,t,i)=>{i.d(t,{A:()=>l});var r=i(25195),o=i(20641);const n=(0,o.pM)({name:"InlineTable",inheritAttrs:!1,render(){var e,t;return(0,o.bF)("div",Object.assign({},r.$pj.collectionBasicProps(this.$attrs,["inline-table"])),(null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))||[])}}),a=n,l=a},37192:(e,t,i)=>{var r=i(70164),o=i(55543),n=i(15215),a=i(78422),l=i(83247),s=i(68691),d=i(91702),c=i(30717),u=i(20641),p=i(53751);const h=(0,u.pM)({name:"IconActionBar",components:{OioIcon:c.Lky},inheritAttrs:!1,props:{activeRecords:{type:Object},rowIndex:{type:Number}},setup(){},render(){const e=c.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default(),{activeRecords:t}=this;if(!t)return;const i=t[0],r=(0,u.bF)("div",{class:"default-iconCard-actions"},[(0,u.bF)("div",{class:"default-iconCard-action"},[e[0],(0,u.bF)(c.Lky,{icon:"oinone-bianji4",size:24})]),(0,u.bF)("div",{class:"default-iconCard-action"},[(0,u.bo)(e[3],[[p.aG,i.show]]),(0,u.bo)((0,u.bF)(c.Lky,{icon:"oinone-xianshi",size:20}),[[p.aG,i.show]]),(0,u.bo)(e[2],[[p.aG,!i.show]]),(0,u.bo)((0,u.bF)(c.Lky,{icon:"oinone-invisible",size:20}),[[p.aG,!i.show]])]),(0,u.bF)("div",{class:"default-iconCard-action"},[e[1],(0,u.bF)(c.Lky,{icon:"oinone-shanchu",size:20})])]);return r}}),g=h,v=g;let m=class extends s.SJ{initialize(e){const t=e.slotContext;return t&&(e.activeRecords=a.F1e.repairRecords(t.data)),super.initialize(e),this.setComponent(v),this}};m=(0,n.Cg)([l.DF.ClassFactory(d.a_.Token({widget:"iconActionBar",inline:!0}))],m);let f=class extends s.Os{clickActionAfterRefreshData(e,t=!1){var i;return(0,n.sH)(this,void 0,void 0,function*(){const r=this.getParent();return r&&r.activeRecords&&r.activeRecords.length&&(r.activeRecords[0]=e,r.getChildren().forEach(t=>{t instanceof s.jk&&t.activeRecords&&t.activeRecords.length&&(t.activeRecords[0]=e)})),null===(i=this.refreshCallChaining)||void 0===i||i.syncCall(t),e})}};f=(0,n.Cg)([l.DF.ClassFactory(s.jk.Token({actionType:r.X2.Server,widget:"iconVisibilityAction"}))],f);var y=i(26462);const b=new y.tQ(null);let C=class extends s.Os{clickActionAfterRefreshData(e,t=!1){var i;return(0,n.sH)(this,void 0,void 0,function*(){return b.next("iconDelete"),null===(i=this.refreshCallChaining)||void 0===i||i.syncCall(t),e})}};C=(0,n.Cg)([l.DF.ClassFactory(s.jk.Token({actionType:r.X2.Server,widget:"iconDeleteAction"}))],C);let x=class extends s.Os{clickActionAfterRefreshData(e,t=!1){var i;return(0,n.sH)(this,void 0,void 0,function*(){return b.next("iconEdit"),null===(i=this.refreshCallChaining)||void 0===i||i.syncCall(t),e})}};x=(0,n.Cg)([l.DF.ClassFactory(s.jk.Token({actionType:r.X2.Server,widget:"iconEditConfirmAction"}))],x);const w={class:"group-list-component"};function S(e,t,i,r,o,n){const a=(0,u.g2)("group-item"),l=(0,u.g2)("draggable");return(0,u.uX)(),(0,u.CE)("div",w,[(0,u.bF)(l,{tag:"div",animation:200,modelValue:e.groupList,"onUpdate:modelValue":t[0]||(t[0]=t=>e.groupList=t),handle:".group-list-component-item-move-box","item-key":"name",onChange:e.onSortGroup},{item:(0,u.k6)(({element:t,index:i})=>[(0,u.bF)(a,{item:t,onDelete:i=>e.$emit("delete",t.id),onUpdateDisplayName:i=>e.$emit("update-display-name",t)},null,8,["item","onDelete","onUpdateDisplayName"])]),_:1},8,["modelValue","onChange"])])}var T=i(50953),E=i(432),A=i.n(E),k=i(90033);const D={class:"group-list-component-item-move-box"},F={class:"group-item-collapse-panel-header"},R={key:1,style:{display:"flex","align-items":"center"}},O={class:"title"},N={class:"group-item-collapse-panel-item group-item-collapse-panel-item-drag"},$={key:0,class:"group-item-collapse-panel-item-tag"},M={style:{transform:"scale(0.8)","margin-top":"-1px"}},I={class:"group-item-collapse-panel-item-title"};function L(e,t,i,r,o,n){const a=(0,u.g2)("oio-icon"),l=(0,u.g2)("oio-input"),s=(0,u.g2)("a-popconfirm"),d=(0,u.g2)("draggable"),c=(0,u.g2)("a-collapse-panel"),h=(0,u.g2)("a-collapse");return(0,u.uX)(),(0,u.CE)("div",{class:(0,k.C4)(["group-list-component-item",[e.item.invisible&&"group-list-component-item-hide"]])},[(0,u.Lk)("div",D,[(0,u.bF)(a,{icon:"oinone-move-handler",size:"28",style:{transform:"rotate(90deg)"}})]),(0,u.bF)(h,{activeKey:e.activeKey,"onUpdate:activeKey":t[6]||(t[6]=t=>e.activeKey=t),onChange:e.onOpen},{default:(0,u.k6)(()=>[(0,u.bF)(c,{key:"1"},{header:(0,u.k6)(()=>[(0,u.Lk)("div",F,[e.edit?((0,u.uX)(),(0,u.CE)("span",{key:0,onClick:t[1]||(t[1]=(0,p.D$)(()=>{},["stop"]))},[(0,u.bF)(l,{style:{width:"100px"},value:e.item.displayName,"onUpdate:value":t[0]||(t[0]=t=>e.item.displayName=t),onBlur:e.onChangeDisplayName},null,8,["value","onBlur"])])):((0,u.uX)(),(0,u.CE)("span",R,[(0,u.Lk)("span",O,(0,k.v_)(e.item.displayName)+"（"+(0,k.v_)(e.list.length||0)+"）",1),(0,u.bF)(a,{onClick:t[2]||(t[2]=(0,p.D$)(t=>e.edit=!0,["stop"])),icon:"oinone-bianji",color:"rgba(0,0,0,0.65)",size:"14"})])),e.item.sys?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.Wv)(s,{key:2,title:e.$translate("是否删除当前分组？"),overlayClassName:"oio-popconfirm","ok-text":e.$translate("确定"),"cancel-text":e.$translate("取消"),onConfirm:t[4]||(t[4]=t=>e.$emit("delete"))},{default:(0,u.k6)(()=>[(0,u.bF)(a,{onClick:t[3]||(t[3]=(0,p.D$)(()=>{},["stop"])),icon:"oinone-remove",color:"rgba(0,0,0,0.65)",size:"14"})]),_:1},8,["title","ok-text","cancel-text"]))])]),default:(0,u.k6)(()=>[(0,u.bF)(d,{class:"group-item-collapse-panel-list",modelValue:e.list,"onUpdate:modelValue":t[5]||(t[5]=t=>e.list=t),animation:200,handle:".group-item-collapse-panel-item-drag",group:"groupComponent",itemKey:"id",onChange:e.onSort},{item:(0,u.k6)(({element:t,index:i})=>[(0,u.Lk)("div",N,[t.sys?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("div",$,[(0,u.Lk)("div",M,(0,k.v_)(e.$translate("自定义")),1)])),(0,u.bF)(a,{icon:t.icon||"oinone-xinxi",color:"var(--oio-primary-color)",size:"32px"},null,8,["icon"]),(0,u.Lk)("div",I,(0,k.v_)(t.displayName),1)])]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1},8,["activeKey","onChange"])],2)}var _=i(67774);_.Qq5.getInstance();function P(e,t,i){return(0,n.sH)(this,void 0,void 0,function*(){let e="";t&&(e=`, ahead: { id: "${t}" }`);let r="widgetGroup: {}";i&&(r=`widgetGroup: {name: "${i}"}`)})}const j=(0,u.pM)({components:{draggable:A(),OioIcon:c.Lky,OioInput:c.Gzk},props:{item:{type:Object,default:()=>({})}},setup(e,{emit:t}){const i=(0,T.KR)("1"),r=(0,T.KR)(!1),o=(0,T.KR)([]),a=()=>{t("update-display-name"),r.value=!1},l=()=>(0,n.sH)(this,void 0,void 0,function*(){new _.kWY("group").equal(e.item.name)});l();const s=e=>(0,n.sH)(this,void 0,void 0,function*(){e.length>1&&l()}),d=t=>(0,n.sH)(this,void 0,void 0,function*(){var i;let r;if(t.moved?r=t.moved:t.added&&(r=t.added),r){const n=r.element.id,a=r.newIndex;let l;a>0&&(l=null===(i=o.value[a-1])||void 0===i?void 0:i.id);const s=t.added?e.item.name:"";yield P(n,l,s)}});return{activeKey:i,edit:r,list:o,onChangeDisplayName:a,onOpen:s,onSort:d}}});var V=i(66262);const B=(0,V.A)(j,[["render",L]]),H=B;var W=i(39277);const U="uiDesigner";class q{static create(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=`mutation {\n      uiDesignerWidgetGroupProxyMutation {\n        create(\n          data: {\n            displayName: "${e}"\n          }\n        ) {\n          id\n          name\n          displayName\n          active\n          priority\n          sys\n        }\n      }\n    }`,i=yield W.LV.query(U,t);return i.data.uiDesignerWidgetGroupProxyMutation.create})}static update(e,t){return(0,n.sH)(this,void 0,void 0,function*(){const i=`mutation {\n      uiDesignerWidgetGroupProxyMutation {\n        update(\n          data: {\n            displayName: "${e}"\n            id: "${t}"\n          }\n        ) {\n          id\n          name\n          displayName\n          active\n          priority\n          sys\n        }\n      }\n    }`,r=yield W.LV.mutate(U,i);return r.data.uiDesignerWidgetGroupProxyMutation.update})}static query(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=[{name:"sys",ttype:r.m1.Boolean},{name:"show",ttype:r.m1.Boolean},{name:"widgetDisplayName",ttype:r.m1.String}],i=yield(0,W.Ll)(t,e),o=`{\n      uiDesignerWidgetGroupProxyQuery {\n        queryWidgetGroupList(data: ${i}) {\n          id\n          name\n          displayName\n          active\n          priority\n          sys\n          widgetCount\n        }\n      }\n    }\n    `,n=yield W.LV.query(U,o),a=n.data.uiDesignerWidgetGroupProxyQuery.queryWidgetGroupList;return q.groupList=a})}static delete(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=`mutation {\n      uiDesignerWidgetGroupProxyMutation {\n        deleteByEntity(\n          data: {id: "${e}"}\n        ) {\n          id\n        }\n      }\n    }`,i=yield W.LV.mutate(U,t);return i.data.uiDesignerWidgetGroupProxyMutation.deleteByEntity})}static sort(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=[{name:"id",ttype:r.m1.Long},{name:"name",ttype:r.m1.String}],i=e.map(e=>(0,W.Ll)(t,e)),o=yield Promise.all(i),n=`mutation {\n      uiDesignerWidgetGroupDataMutation{\n        changePriority(data: {\n          widgetGroups: [${o.join(",")}]\n        }) {\n          widgetGroups{\n            id\n          }\n        }\n      }\n    }`,a=yield W.LV.mutate(U,n);return a.data.uiDesignerWidgetGroupDataMutation.changePriority})}}q.groupList=[];const z=(0,u.pM)({components:{draggable:A(),GroupItem:H},props:{list:{type:Array,default:()=>[]}},setup(e){const t=(0,T.KR)([]);(0,u.wB)(()=>e.list,e=>{t.value=e.filter(e=>"VIRTUAL_ALL"!==e.name)},{deep:!0,immediate:!0});const i=()=>{const i=e.list[0];q.sort([i,...t.value])};return{onSortGroup:i,groupList:t}}}),G=(0,V.A)(z,[["render",S]]),K=G;i(67068);var X=i(47444),Q=i(63366),Y=i(84774),J=i(64419);let Z=class extends Y.lOI{constructor(){super(...arguments),this.delayUpdateM2oValue=(0,Q.A)(()=>{var e,t;const i=this.getValue();i?null===(e=this.parentOnChangeWidgetGroup)||void 0===e||e.call(this,{id:String(i.value||i.id),name:String(i.label||i.name)},!0):(J.J.name=(0,a.cAb)(J.J.name),null===(t=this.parentOnChangeWidgetGroup)||void 0===t||t.call(this,J.J,!0)),this.updateM2oValue()})}initialize(e){return super.initialize(e),this}change(e){var t,i;void 0==e?(J.J.name=(0,a.cAb)(J.J.name),null===(t=this.parentOnChangeWidgetGroup)||void 0===t||t.call(this,J.J,!0)):null===(i=this.parentOnChangeWidgetGroup)||void 0===i||i.call(this,{id:e.value||e.id,name:e.label||e.name},!0),super.change(e)}};(0,n.Cg)([X.x0.Inject("onChangeWidgetGroup")],Z.prototype,"parentOnChangeWidgetGroup",void 0),(0,n.Cg)([X.x0.Method()],Z.prototype,"change",null),Z=(0,n.Cg)([l.DF.ClassFactory(d.d4.Token({viewType:r.qi.Search,ttype:r.m1.ManyToOne,widget:"IconGroupSelectWidget"}))],Z);var ee=i(3746);const te={class:"default-icon-upload-view"},ie={class:"default-icon-upload-gallery"},re={key:0,class:"default-icon-upload-gallery-show"},oe={class:"default-icon-upload-gallery-content"},ne={key:0,class:"default-gallery-pagination"},ae={key:1,class:"default-icon-upload-gallery-empty"};function le(e,t,i,r,o,n){const a=(0,u.g2)("IconCard"),l=(0,u.g2)("OioPagination"),s=(0,u.g2)("OioEmptyData"),d=(0,u.g2)("OioSpin");return(0,u.uX)(),(0,u.CE)("div",te,[(0,u.Lk)("div",ie,[(0,u.bF)(d,{loading:e.loading},{default:(0,u.k6)(()=>[e.dataSource&&e.dataSource.length?((0,u.uX)(),(0,u.CE)("div",re,[(0,u.Lk)("div",oe,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.dataSource,(t,i)=>((0,u.uX)(),(0,u.Wv)(a,{iconData:t,rowIndex:i,key:String(t.outId)},{default:(0,u.k6)(()=>[(0,u.RG)(e.$slots,"rowActions")]),_:2},1032,["iconData","rowIndex"]))),128))]),e.showPagination&&e.pagination?((0,u.uX)(),(0,u.CE)("div",ne,[(0,u.bF)(l,{currentPage:e.pagination.current,pageSizeOptions:e.pageSizeOptions,pageSize:e.pagination.pageSize,total:e.pagination.total,showTotal:!0,showJumper:e.paginationStyle!=e.ListPaginationStyle.SIMPLE,showLastPage:e.paginationStyle!=e.ListPaginationStyle.SIMPLE,onChange:e.onPaginationChange},null,8,["currentPage","pageSizeOptions","pageSize","total","showJumper","showLastPage","onChange"])])):(0,u.Q3)("",!0)])):((0,u.uX)(),(0,u.CE)("div",ae,[(0,u.bF)(s,{description:e.emptyText,image:e.emptyImage},null,8,["description","image"])]))]),_:3},8,["loading"])])])}var se=i(25195);const de=(0,u.pM)({name:"IconCard",components:{OioIcon:se.Lky,OioButton:c._5z,OioPopconfirm:c.VjG},inheritAttrs:!1,props:{template:{type:Object},iconData:{type:Object},rowIndex:{type:Number}},setup(){},render(){const{iconData:e,rowIndex:t}=this;if(!e)return;const i=se.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default()[0].children;i&&i.length&&i.forEach(i=>{i.props&&(i.props.slotContext={data:e,index:t})});const r=[];e.sys&&r.push((0,u.bF)("img",{class:"default-iconCard-sys",src:(0,a.CSv)("icon-manage/icon-manage-sys.png")}));const o=(0,u.bF)("div",{class:"default-iconCard-content"},[(0,u.bF)("div",{class:"default-iconCard-content-icon"},[(0,u.bF)(se.Lky,{icon:e.fullFontClass,size:25,color:"#6C757D"})]),(0,u.bF)("div",{class:"default-iconCard-content-text"},[(0,u.bF)("div",{},e.displayName||e.name),(0,u.bF)("div",{},e.fullFontClass)])]);r.push(o);const n=(0,u.bF)(i[0]);return r.push(n),(0,u.bF)("div",{class:"default-iconCard"},r)}}),ce=de,ue=ce,pe=(0,u.pM)({name:"IconManageGallery",components:{IconCard:ue,OioPagination:c.gAo,OioSpin:c.MEy,OioEmptyData:c.hNI},inheritAttrs:!1,props:{dataSource:{type:Array},cols:{type:Number},gutter:{type:[Number,String,Array,Object]},loading:{type:Boolean,default:!1},pagination:{type:Object},itemWidth:{type:Number},itemMinWidth:{type:Number},itemMaxWidth:{type:Number},pageSizeOptions:{type:Array},showPagination:{type:Boolean,default:!0},paginationStyle:{type:String},onPaginationChange:{type:Function},showIconManage:{type:Boolean},onChangeWidgetGroup:{type:Function},manageGroupList:{type:Array},emptyText:{type:String,default:""},emptyImage:{type:String,default:void 0},reloadActiveRecords:{type:Function},onFileUpload:{type:Function},uploadStatus:{type:String},onUploading:{type:Function}},setup(){return{ListPaginationStyle:c.qF6}}}),he=(0,V.A)(pe,[["render",le]]),ge=he;let ve=class extends d.d{constructor(){super(...arguments),this.uploadStatus=J.A.NoData}initialize(e){return super.initialize(e),this.setComponent(ge),this}setUploadStatus(e){this.uploadStatus=e}get emptyText(){return this.getDsl().emptyText||(0,a.cAb)("暂无数据")}get emptyImage(){return this.getDsl().emptyImage||void 0}};(0,n.Cg)([X.x0.Reactive()],ve.prototype,"uploadStatus",void 0),(0,n.Cg)([X.x0.Reactive()],ve.prototype,"emptyText",null),(0,n.Cg)([X.x0.Reactive()],ve.prototype,"emptyImage",null),ve=(0,n.Cg)([l.DF.ClassFactory(d.a_.Token({viewType:r.qi.Gallery,widget:"IconManageGallery"}))],ve);var me=i(54908);const fe={class:"default-icon-draggable"},ye={class:"default-icon-draggable-content"},be={key:0,class:"default-icon-draggable-content-noData"},Ce={class:"default-icon-draggable-content-text"},xe={class:"default-icon-draggable-content-tip"},we={key:1,class:"default-icon-draggable-content-uploading"},Se={key:1,class:"default-icon-draggable-upload-info"},Te={class:"default-icon-draggable-upload-text"},Ee=["onClick"],Ae={class:"default-icon-draggable-upload-progressBar"},ke=(0,u.Lk)("div",{class:"default-icon-upload-progress default-icon-upload-progress-gray"},null,-1),De={class:"default-icon-upload-view"},Fe={class:"default-icon-upload-gallery"},Re={key:0,class:"default-icon-upload-gallery-group"},Oe={key:0,class:"default-icon-upload-gallery-show"},Ne={class:"default-icon-upload-gallery-content"},$e={key:0,class:"default-gallery-pagination"},Me={key:1,class:"default-icon-upload-gallery-empty"};function Ie(e,t,i,r,o,n){const a=(0,u.g2)("OioIcon"),l=(0,u.g2)("OioSpin"),s=(0,u.g2)("FileUpload"),d=(0,u.g2)("OioManageGroup"),c=(0,u.g2)("IconCard"),p=(0,u.g2)("OioPagination"),h=(0,u.g2)("OioEmptyData");return(0,u.uX)(),(0,u.CE)(u.FK,null,[(0,u.Lk)("div",fe,[(0,u.bF)(s,{onChange:e.onFileUpload,beforeUpload:e.beforeUpload,onReject:e.reject,"limit-size":e.limitSize,accept:e.accept},{itemRender:(0,u.k6)(({file:t,actions:i})=>["uploading"===e.uploadStatus?((0,u.uX)(),(0,u.Wv)(l,{key:0,loading:!0})):(0,u.Q3)("",!0),"uploading"===e.uploadStatus?((0,u.uX)(),(0,u.CE)("div",Se,[(0,u.Lk)("div",Te,[(0,u.Lk)("span",{class:"",style:(0,k.Tr)("error"===t.status?"color: red":"color: var(--oio-info-color-hover)"),onClick:i.download},(0,k.v_)(t.name),13,Ee),(0,u.bF)(a,{icon:"oinone-guanbi1",size:"10",color:"var(--oio-info-color-hover)",onClick:i.remove},null,8,["onClick"])]),(0,u.Lk)("div",Ae,[ke,(0,u.Lk)("div",{class:"default-icon-upload-progress default-icon-upload-progress-primary",style:(0,k.Tr)(`width: calc(${t.percent?t.percent:100}%);`)},null,4)])])):(0,u.Q3)("",!0)]),default:(0,u.k6)(()=>[(0,u.Lk)("div",ye,[(0,u.bF)(a,{icon:"oinone-shangchuan1",class:"default-icon-draggable-content-icon",size:"48px"}),"uploading"!==e.uploadStatus?((0,u.uX)(),(0,u.CE)("div",be,[(0,u.Lk)("div",Ce,(0,k.v_)(e.$translate("点击上传 或 拖拽上传图标文件")),1),(0,u.Lk)("div",xe,(0,k.v_)(e.$translate("仅支持上传.zip文件，且zip中 .js，.css，.json必须同时存在，.tff，.woff，.woff2文件可选；目前只支持阿里iconfont的图标文件")),1)])):"uploading"===e.uploadStatus?((0,u.uX)(),(0,u.CE)("div",we)):(0,u.Q3)("",!0)])]),_:1},8,["onChange","beforeUpload","onReject","limit-size","accept"])]),(0,u.Lk)("div",De,[(0,u.Lk)("div",Fe,["showData"===e.uploadStatus?((0,u.uX)(),(0,u.CE)("div",Re,[(0,u.bF)(d,{currentGroup:e.currentGroup,onChangeWidgetGroup:e.onChangeWidgetGroup,"widget-group":{},"group-list":e.manageGroupList,"show-opt-buttons":!1,"adaptive-width":100,showDetail:!1},null,8,["currentGroup","onChangeWidgetGroup","group-list"])])):(0,u.Q3)("",!0),(0,u.bF)(l,{loading:e.loading,tip:"parsing"===e.uploadStatus?e.emptyText:""},{default:(0,u.k6)(()=>[e.dataSource&&e.dataSource.length?((0,u.uX)(),(0,u.CE)("div",Oe,[(0,u.Lk)("div",Ne,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.dataSource,(t,i)=>((0,u.uX)(),(0,u.Wv)(c,{iconData:t,rowIndex:i,key:String(t.outId)},{default:(0,u.k6)(()=>[(0,u.RG)(e.$slots,"rowActions")]),_:2},1032,["iconData","rowIndex"]))),128))]),e.showPagination&&e.pagination?((0,u.uX)(),(0,u.CE)("div",$e,[(0,u.bF)(p,{currentPage:e.pagination.current,pageSizeOptions:e.pageSizeOptions,pageSize:e.pagination.pageSize,total:e.pagination.total,showTotal:!0,showJumper:e.paginationStyle!=e.ListPaginationStyle.SIMPLE,showLastPage:e.paginationStyle!=e.ListPaginationStyle.SIMPLE,onChange:e.onPaginationChange},null,8,["currentPage","pageSizeOptions","pageSize","total","showJumper","showLastPage","onChange"])])):(0,u.Q3)("",!0)])):((0,u.uX)(),(0,u.CE)("div",Me,[(0,u.bF)(h,{description:e.emptyText,image:e.emptyImage},null,8,["description","image"])]))]),_:3},8,["loading","tip"])])])],64)}var Le,_e=i(25873);(function(e){e["SortPanel"]="SortPanel",e["ListPanel"]="ListPanel"})(Le||(Le={}));const Pe=(0,u.pM)({name:"IconUploadGallery",components:{IconCard:ue,FileUpload:_e.ef,OioButton:c._5z,OioPagination:c.gAo,GroupList:K,OioSpin:c.MEy,OioIcon:c.Lky,OioEmptyData:c.hNI,OioManageGroup:_e.C},inheritAttrs:!1,props:{dataSource:{type:Array},cols:{type:Number},gutter:{type:[Number,String,Array,Object]},loading:{type:Boolean,default:!1},pagination:{type:Object},itemWidth:{type:Number},itemMinWidth:{type:Number},itemMaxWidth:{type:Number},showPagination:{type:Boolean,default:!0},pageSizeOptions:{type:Array},paginationStyle:{type:String},onPaginationChange:{type:Function},currentGroup:{type:Object},onChangeWidgetGroup:{type:Function},manageGroupList:{type:Array},emptyText:{type:String,default:""},emptyImage:{type:String,default:void 0},reloadActiveRecords:{type:Function},onFileUpload:{type:Function},beforeUpload:{type:Function},accept:{type:String},reject:{type:Function},limitSize:{type:Number,default:-1},uploadStatus:{type:String}},setup(e){let t=0;const i=()=>{console.log("deleteGroup")},r=()=>{console.log("onUpdateGroupDisplayName")},o=i=>{var r;if(i.length<t)return;const o=i.map(e=>'"'+e.url+'"');i.splice(0,t),null===(r=e.onFileUpload)||void 0===r||r.call(e,o,i)},n=(i,r)=>{var o;return t=r.length,null===(o=e.beforeUpload)||void 0===o?void 0:o.call(e,i,r)};return{ListPaginationStyle:c.qF6,PanelType:Le,handleDeleteGroup:i,onUpdateGroupDisplayName:r,onFileUpload:o,beforeUpload:n}}}),je=(0,V.A)(Pe,[["render",Ie]]),Ve=je,Be="LastIconUploadGroup";let He=class extends d.d{constructor(){super(...arguments),this.uploadStatus=J.A.NoData,this.currentGroup=void 0,this.manageGroupList=[],this.queryTimes=0}initialize(e){return super.initialize(e),this.setComponent(Ve),this}setUploadStatus(e){this.uploadStatus=e}get limitSize(){return this.getDsl().limitSize||10}get accept(){return this.getDsl().accept||".zip"}reject(e){c.Xbm.error((0,a.cAb)("仅支持.zip文件"))}beforeUpload(e,t){const i=e.name.split("."),r=`.${i.slice(-1)}`;let o;return"string"===typeof this.accept&&(o=this.accept.split(",")),Array.isArray(this.accept)&&(o=this.accept),o=o.map(e=>e.toLocaleLowerCase()),o&&!o.includes(r.toLocaleLowerCase())?(this.reject(t),!1):(this.setUploadStatus(J.A.Uploading),this.reloadDataSource([]),!0)}get emptyText(){switch(this.uploadStatus){case J.A.NoData:return this.getDsl().emptyText||(0,a.cAb)("暂无数据");case J.A.Uploading:return(0,a.cAb)("图标文件正在上传");case J.A.Parsing:return(0,a.cAb)("图标文件正在解析，请耐心等待");case J.A.Fail:return(0,a.cAb)("未检测到已上传图标文件");case J.A.ShowData:return this.getDsl().emptyText||(0,a.cAb)("暂无数据");default:break}}get emptyImage(){switch(this.uploadStatus){case J.A.NoData:return this.getDsl().emptyImage||void 0;case J.A.Uploading:return(0,a.CSv)("icon-manage/icon-manage-uploding-2x.png");case J.A.Parsing:return(0,a.CSv)("icon-manage/icon-manage-uploding-2x.png");case J.A.Fail:return this.getDsl().emptyImage||void 0;case J.A.ShowData:return this.getDsl().emptyImage||void 0;default:break}return this.getDsl().emptyImage||void 0}onChangeWidgetGroup(e){var t;return(0,n.sH)(this,void 0,void 0,function*(){if((null===(t=this.currentGroup)||void 0===t?void 0:t.id)===e.id)return;this.currentGroup=e;const i=this.generatorPagination();let r;if(i.current=1,yield this.load(()=>(0,n.sH)(this,void 0,void 0,function*(){var e,t;r=yield(0,ee._y)({model:this.rootRuntimeContext.model.moduleName,pagination:{current:i.current,pageSize:i.pageSize},condition:`(1==1) and (((1==1) and (groupId=='${null===(e=this.currentGroup)||void 0===e?void 0:e.id}')) and (libId=='${null===(t=this.currentGroup)||void 0===t?void 0:t.libId}'))`})})),r){i.total=Number(r.totalElements),i.totalPageSize=Number(r.totalPages);const e=r.content;this.reloadDataSource(e),this.reloadActiveRecords([])}})}setManageGroupList(e){e&&e.length&&(this.manageGroupList.splice(0,this.manageGroupList.length),this.manageGroupList.push(...e))}queryPage(e,t){var i;return(0,n.sH)(this,void 0,void 0,function*(){if(this.queryTimes++,1===this.queryTimes)return this.reloadLocalStroageGroups(Be),{totalElements:0,totalPages:0,content:[]};const e=yield(0,ee._y)({model:"resource",pagination:t,condition:`(1==1) and ((1==1) and (groupId=='${null===(i=this.currentGroup)||void 0===i?void 0:i.id}'))`});return e?{totalElements:Number(e.totalElements),totalPages:Number(e.totalElements),content:e.content}:{totalElements:0,totalPages:0,content:[]}})}onFileUpload(e){var t;return(0,n.sH)(this,void 0,void 0,function*(){this.setUploadStatus(J.A.Parsing),this.currentGroup=void 0;let i=[];try{yield this.load(()=>(0,n.sH)(this,void 0,void 0,function*(){i=yield(0,ee.c_)({model:"resource",urls:e})})),i&&i.length&&(this.setGroup(i),this.setLocalStroageGroups(this.manageGroupList),this.onChangeWidgetGroup(null===(t=this.manageGroupList)||void 0===t?void 0:t[0]),null===i||void 0===i||i.forEach(e=>{const t={js:e.jsUrls,css:e.cssUrls};r.EV.load({mounted:t})}),this.uploadStatus=J.A.ShowData)}catch(o){this.uploadStatus=J.A.Fail}})}setGroup(e){const t=[];e.forEach(e=>{const i=e.libId;e.iconGroupList.forEach(e=>{e&&t.push(Object.assign(Object.assign({},e),{libId:i}))})}),this.setManageGroupList(t)}reloadLocalStroageGroups(e){const t=localStorage.getItem(e),i=t?JSON.parse(t):[];i.length&&(this.uploadStatus=J.A.ShowData,this.setManageGroupList(i),this.onChangeWidgetGroup(i[0]))}setLocalStroageGroups(e){localStorage.setItem(Be,JSON.stringify(e))}clearLocalStorageGroups(){localStorage.removeItem(Be)}$$mounted(){super.$$mounted(),this.prevMatched=(0,me.yE)().prevMatched,this.prevMatched&&this.clearLocalStorageGroups()}};(0,n.Cg)([X.x0.Reactive()],He.prototype,"uploadStatus",void 0),(0,n.Cg)([X.x0.Reactive()],He.prototype,"currentGroup",void 0),(0,n.Cg)([X.x0.Reactive()],He.prototype,"limitSize",null),(0,n.Cg)([X.x0.Method()],He.prototype,"accept",null),(0,n.Cg)([X.x0.Method()],He.prototype,"reject",null),(0,n.Cg)([X.x0.Method()],He.prototype,"beforeUpload",null),(0,n.Cg)([X.x0.Reactive()],He.prototype,"emptyText",null),(0,n.Cg)([X.x0.Reactive()],He.prototype,"emptyImage",null),(0,n.Cg)([X.x0.Method()],He.prototype,"onChangeWidgetGroup",null),(0,n.Cg)([X.x0.Reactive()],He.prototype,"manageGroupList",void 0),(0,n.Cg)([X.x0.Method()],He.prototype,"onFileUpload",null),He=(0,n.Cg)([l.DF.ClassFactory(d.a_.Token({viewType:r.qi.Gallery,widget:"iconUploadGallery"}))],He);var We=i(48798),Ue=i(16022),qe=i(2086),ze=i(20903),Ge=i(16435);function Ke(e){const t=[...e.actions||[]];return t}function Xe(e){var t;return e.groupList&&e.groupList.length&&"-1"!==e.groupList[0].id&&(J.J.name=(0,a.cAb)(J.J.name),null===(t=e.groupList)||void 0===t||t.unshift(J.J)),(0,u.bF)(_e.C,Object.assign({},e))}const Qe=(0,u.pM)({name:"IconSearch",components:{OioManageGroup:_e.C},inheritAttrs:!1,slots:["default","actions"],props:Object.assign(Object.assign(Object.assign({},Ge.mO),_e.Wn),{onSort:{type:Function},onUploadIcon:{type:Function},onManageGroup:{type:Function}}),setup(e){const t=(0,T.KR)(),i=(0,d.sX)(),r=()=>{var t;null===(t=e.onSearch)||void 0===t||t.call(e)},o=()=>{var t;null===(t=e.onReset)||void 0===t||t.call(e)},n=()=>{var t;null===(t=e.onUploadIcon)||void 0===t||t.call(e)},a=()=>{var t;null===(t=e.onManageGroup)||void 0===t||t.call(e)};return(0,d.Cu)(Object.assign(Object.assign({},i),{getTriggerContainer:e=>i.getTriggerContainer?i.getTriggerContainer(e):t.value?t.value:e.parentNode||document.body})),(0,Ge.sq)({selected:(0,u.EW)(()=>e.selectedPrefer),options:(0,u.EW)(()=>e.searchPreferOptions)}),{origin:t,onSearch:r,onReset:o,onUploadIcon:n,onManageGroup:a}},render(){const{onUploadIcon:e,$translate:t}=this,i=()=>{const i=c.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default().map(e=>(e.props&&e.props.dslDefinition&&(e.props.dslDefinition.labelCol={style:{"flex-basis":"0px"}},e.props.dslDefinition.wrapperCol={style:{"max-width":"100%"}},e.props.ttype===r.m1.DateTime?e.props.colStyle={flex:"0 0 40%"}:e.props.colStyle={flex:"0 0 20%","max-width":"20%"}),e)),o=c.$pj.collectionSlots(this.$slots,[{origin:"actions",isNotNull:!0}]).actions(),n=Ke({onUploadIcon:e,$translate:t,actions:o});return[(0,u.bF)("div",{class:"default-iconSearch-searchContent"},[(0,u.bF)("div",{class:"default-iconSearch-searchContent-field"},i),(0,u.bF)("div",{class:"default-iconSearch-searchContent-button"},n)])]},o=()=>[Xe({widgetGroup:this.widgetGroup,currentGroup:this.currentGroup,groupList:this.groupList,queryGroupList:this.queryGroupList,onChangeWidgetGroup:this.onChangeWidgetGroup,onDeleteGroup:this.onDeleteGroup,onModifyGroup:this.onModifyGroup,onCreateGroup:this.onCreateGroup,adaptiveWidth:100})],n=()=>{var e;return[...i(),(0,u.bF)(c.MEy,{loading:!(null===(e=this.groupList)||void 0===e?void 0:e.length),wrapperClassName:"default-iconSearch-item default-iconSearch-group"},()=>(0,u.bF)("div",{style:{display:"flex"}},o()))]};return(0,u.bo)((0,u.bF)("div",{class:"default-iconSearch"},{default:n}),[[p.aG,!this.invisible]])}}),Ye=Qe,Je=Ye;let Ze=class extends d.AT{constructor(){super(...arguments),this.searchString="",this.widgetGroup={},this.currentGroup=void 0,this.groupList=[]}initialize(e){return super.initialize(e),this.setComponent(Je),this}get foldSize(){return Ue.A5.toNumber(this.getDsl().foldSize)||5}onUploadIcon(){}queryGroupList(e=!0){return(0,n.sH)(this,void 0,void 0,function*(){this.groupList=yield(0,ee.xg)(this.rootRuntimeContext.model.moduleName)})}onChangeWidgetGroup(e,t){var i;if((null===(i=this.currentGroup)||void 0===i?void 0:i.id)===e.id)return;if(this.currentGroup=e,t)return;const r=this.getChildren().find(e=>e instanceof Z);r&&("-1"===e.id?r.change(null):r.change(e))}onDeleteGroup(e){return(0,n.sH)(this,void 0,void 0,function*(){const{name:t,id:i}=e;yield(0,ee.Ni)({model:this.rootRuntimeContext.model.moduleName,name:t,id:i})})}onModifyGroup(e){return(0,n.sH)(this,void 0,void 0,function*(){const{name:t,id:i}=e;yield(0,ee.EW)({model:this.rootRuntimeContext.model.moduleName,name:t,id:i})})}onCreateGroup(e){return(0,n.sH)(this,void 0,void 0,function*(){yield(0,ee.wj)({model:this.rootRuntimeContext.model.moduleName,name:e})})}onManageGroup(){}onSearch(){var e,t;const{searchString:i,searchBody:r,searchRequestCondition:o}=this.getSearchCondition(),n=this.searchString===i;n||(this.searchString=i,this.inline||(0,me.ZI)().push({segments:[{path:"page",parameters:o,extra:{preserveParameter:!0}}]})),null===(e=this.flushSearchParameters)||void 0===e||e.call(this,r,[]);const l={scope:a.jZd.search,refreshParent:!1,currentPage:1};null===(t=this.refreshCallChaining)||void 0===t||t.syncCall(l)}getSearchCondition(){const e=Object.assign({},this.formData),t=(0,a.q6g)(e)||"";return{searchString:t,searchBody:e,searchRequestCondition:Object.assign({searchBody:t},{currentPage:"1"})}}registerFieldChangeEventListener(){this.getChildren().forEach(e=>{e instanceof Y.ity?e.on("change",(0,Q.A)(this.onSearch,400)):e instanceof d.Qn&&e.on("change",this.onSearch)})}$$mounted(){var e,t,i;let r,o;super.$$mounted(),this.registerFieldChangeEventListener(),b.subscribe(()=>{this.queryGroupList()});let a=!1;if(!this.inline){const{page:e}=(0,me.yE)().matched.segmentParams;if(e){const{searchBody:t,searchConditions:i}=e;t&&(r=JSON.parse(decodeURIComponent(t))),i&&(o=JSON.parse(decodeURIComponent(i)))}}const{metadataRuntimeContext:l,rootRuntimeContext:s}=this,{model:d}=s,c=(null===(e=l.viewAction)||void 0===e?void 0:e.domain)||l.view.domain||(null===(t=l.viewTemplate)||void 0===t?void 0:t.domain);if(d&&c&&!r&&!o){const{searchBody:e,searchConditions:t}=(0,qe.QM)(Ue.Gf.cast(d),c);r=e,o=t,a=!0}null===(i=this.mountedCallChaining)||void 0===i||i.hook(this.path,()=>(0,n.sH)(this,void 0,void 0,function*(){var e;let t=r;!a&&t||(t=Object.assign(Object.assign({},yield s.getInitialValue()),t||{})),this.reloadActiveRecords(t),null===(e=this.flushSearchParameters)||void 0===e||e.call(this,t,o),this.defaultSearchCondition=(0,ze.A)(this.searchConditions),yield this.queryGroupList()}),Ue.Wl.MAX_PRIORITY)}$$unmounted(){We.Xn.dispose(this.getNodeCode())}};(0,n.Cg)([X.x0.Reactive(),(0,n.Sn)("design:type",Object),(0,n.Sn)("design:paramtypes",[])],Ze.prototype,"foldSize",null),(0,n.Cg)([X.x0.Method(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],Ze.prototype,"onUploadIcon",null),(0,n.Cg)([X.x0.Reactive(),(0,n.Sn)("design:type",Object)],Ze.prototype,"widgetGroup",void 0),(0,n.Cg)([X.x0.Reactive(),(0,n.Sn)("design:type",Object)],Ze.prototype,"currentGroup",void 0),(0,n.Cg)([X.x0.Reactive(),(0,n.Sn)("design:type",Array)],Ze.prototype,"groupList",void 0),(0,n.Cg)([X.x0.Method(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",Promise)],Ze.prototype,"queryGroupList",null),(0,n.Cg)([X.x0.Method(),X.x0.Provide(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object,Boolean]),(0,n.Sn)("design:returntype",void 0)],Ze.prototype,"onChangeWidgetGroup",null),(0,n.Cg)([X.x0.Method(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",Promise)],Ze.prototype,"onDeleteGroup",null),(0,n.Cg)([X.x0.Method(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Object]),(0,n.Sn)("design:returntype",Promise)],Ze.prototype,"onModifyGroup",null),(0,n.Cg)([X.x0.Method(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[String]),(0,n.Sn)("design:returntype",Promise)],Ze.prototype,"onCreateGroup",null),(0,n.Cg)([X.x0.Method(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],Ze.prototype,"onManageGroup",null),(0,n.Cg)([X.x0.Method(),X.x0.Provide(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],Ze.prototype,"onSearch",null),Ze=(0,n.Cg)([l.DF.ClassFactory(d.a_.Token({viewType:r.qi.Search,widget:"iconSearch"}))],Ze),o.Ae.register({viewType:r.qi.Gallery,moduleName:"resource",model:"resource.ResourceIcon",actionName:"resource#图标管理"},"<view type='GALLERY'>\n    <pack widget='group'>\n      <view type='SEARCH'>\n        <element widget='iconSearch' slot='search'>\n          <template slot='actions' />\n        </element>\n      </view>\n    </pack>\n    <element widget='IconManageGallery' slot='gallery'>\n      <template slot='rowActions' />\n    </element>\n</view>"),o.Ae.register({viewType:r.qi.Gallery,moduleName:"resource",model:"resource.ResourceIcon",actionName:"iconUploadAction"},"<view type='GALLERY'>\n      <element widget='iconUploadGallery' slot='gallery'>\n        <template slot='rowActions' />\n      </element>\n  </view>")},39277:(e,t,i)=>{i.d(t,{sT:()=>h,Qg:()=>u,fh:()=>p,Ht:()=>c,Ll:()=>x,Tx:()=>P,VC:()=>H,_B:()=>_,vr:()=>I,E1:()=>N,yy:()=>$,LV:()=>g,cZ:()=>W,qz:()=>T,$D:()=>S,Zy:()=>L,Gu:()=>M,HY:()=>A,QI:()=>k,MW:()=>F,GV:()=>R,yE:()=>D,Oq:()=>O,Cc:()=>B});var r=i(15215),o=i(70164),n=i(67774),a=i(54908),l=i(92049);const s=new Map,d=new Map;var c;(function(e){e["ASC"]="ASC",e["DESC"]="DESC"})(c||(c={}));const u="(1==1) and (1==1)",p="1==1",h="1!=1",g=n.Qq5.getInstance(),v=n.HR_.getInstance(),m=[{name:"model",ttype:o.m1.String},{name:"name",ttype:o.m1.String},{name:"resViewName",ttype:o.m1.String},{name:"viewType",ttype:o.m1.Enum},{name:"template",ttype:o.m1.String},{name:"needCompileView",ttype:o.m1.Boolean},{name:"needCompileMask",ttype:o.m1.Boolean}],f=[...m,{name:"sharedCode",ttype:o.m1.String}],y=(e,t)=>e&&e.length?e:t.modelFields,b=(e,t,i,n,a)=>(0,r.sH)(void 0,void 0,void 0,function*(){var r,l;const s=new Map;for(const e of t)if(e&&e.ttype&&e.ttype===o.m1.Related&&e.related&&e.related.length>1)for(let t=0;t<e.related.length-1;t++){const o=null===(r=e.related)||void 0===r?void 0:r[t],n=null===(l=e.related)||void 0===l?void 0:l[t+1];if(o&&n){const t=`${o}-${i}`;let r=s.get(t);r||(r=[]),r.push(Object.assign(Object.assign({},e),{name:n,ttype:e.relatedTtype})),s.set(`${o}-${i}`,r)}}const d=t.filter(e=>e&&e.ttype).map(t=>C(e,t,i,n,s,a)),c=yield Promise.all(d),u=c.filter(e=>""!==e).join("\n");return u}),C=(e,t,i,n,a,l)=>(0,r.sH)(void 0,void 0,void 0,function*(){var s,d,c;if((0,o.$T)(t))return`${t.name}`;switch(t.ttype){case o.m1.Related:{const{relatedTtype:o}=t,l=(0,r.Tt)(t,["relatedTtype"]);return C(e,Object.assign(Object.assign({},l),{ttype:o}),i,n,a)}case o.m1.ManyToOne:case o.m1.OneToOne:case o.m1.OneToMany:case o.m1.ManyToMany:{if(i>=n&&(!l||!l.names||!l.names.includes(t.name)))return"";const r=t.references||(null===(s=t.referencesModel)||void 0===s?void 0:s.model);r===e&&(t.ttype,o.m1.OneToMany);const u=a.get(`${t.name}-${i}`),p=[];let h=null!==(d=t.modelFields)&&void 0!==d?d:null===(c=t.referencesModel)||void 0===c?void 0:c.modelFields;if(!h||0===h.length){const e=yield $(r);if(h=e.modelFields,u&&u.length)for(const t of u){p.push(t.name);const e=h.findIndex(e=>e.name===t.name);e<0&&h.push(t)}}const g=yield b(r,h,i+1,n,p.length>0?{names:p,depth:i}:void 0);return g?`${t.name} {\n          ${g}\n        }`:""}default:return""}}),x=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){if(!t)return"{}";const i=e.filter(e=>void 0!==t[e.name]).map(e=>w(e,t[e.name])),r=yield Promise.all(i);return`{${r.join("\n")}}`}),w=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){switch(e.ttype){case o.m1.Boolean:{const i=t;return e.multi?`${e.name}: [${i}]`:`${e.name}: ${i}`}case o.m1.Float:case o.m1.Integer:{const i=t;return e.multi?`${e.name}: ${JSON.stringify(i)}`:`${e.name}: ${i}`}case o.m1.Long:{const i=t;return e.multi?`${e.name}: ${JSON.stringify(i)}`:`${e.name}: "${i}"`}case o.m1.Enum:return e.multi?`${e.name}: [${t}]`:(0,l.A)(t)&&t.length>0?`${e.name}: ${t[0]}`:`${e.name}: ${t}`;case o.m1.Related:{const{relatedTtype:i}=e,o=(0,r.Tt)(e,["relatedTtype"]),n=yield w(Object.assign(Object.assign({},o),{ttype:i}),t);return n}case o.m1.ID:case o.m1.Date:case o.m1.DateTime:case o.m1.Year:case o.m1.Time:case o.m1.String:case o.m1.Phone:case o.m1.Email:case o.m1.Text:case o.m1.HTML:{const i=t;return`${e.name}: ${JSON.stringify(i)}`}case o.m1.Currency:return e.multi?`${e.name}: ${JSON.stringify(t)}`:`${e.name}:"${t}"`;case o.m1.OneToOne:case o.m1.ManyToOne:{const i=t;let r=e.modelFields;if(!r||0===r.length){const t=yield $(e.references);r=t.modelFields}const o=yield x(r,i);return"{}"===o?"":`${e.name}: ${o}`}case o.m1.Map:{const i=Object.keys(t||{}).map(e=>`"${e}": ${JSON.stringify(t[e])}`),r=JSON.stringify(`{${i.join(",")}}`);return`${e.name}: ${r}`}case o.m1.OneToMany:case o.m1.ManyToMany:{const i=t||[];let r=e.modelFields;if(!r||0===r.length){const t=yield $(e.references);r=t.modelFields}const o=i.map(e=>x(r,e)),n=yield Promise.all(o);return`${e.name}: [${n.join(",")}]`}default:return console.warn(`暂未支持的ttype类型:${e.ttype}`),""}}),S=e=>(0,r.sH)(void 0,void 0,void 0,function*(){const t=n.J1T`{
    moduleQuery {
      load(module: {name: "${e}"}) {
        homePage {
          ...ViewAction
        }
        id
        name
        module
        displayName
        application
        state
        priority
        logo
        allMenus {
          ...Menu
        }
      }
    }
  }
  ${o.KY.Menu}
  `,i=yield g.query(o.vL.BASE,t);return i.data.moduleQuery.load}),T=({needCompileView:e=!0,needCompileMask:t=!0,module:i})=>(0,r.sH)(void 0,void 0,void 0,function*(){const r={},a=i?`, module: "${i}"`:"",l=n.J1T`
    query {
      viewActionQuery {
        homepage(request: { needCompileView: ${e}, needCompileMask: ${t} ${a} }) {
          ${o.R7.ViewAction}
        }
      }
    }
    ${o.gH.ViewAction}
  `,s=yield g.query(o.vL.BASE,l,r);return s.data.viewActionQuery.homepage}),E=n.J1T`
query (
  $model: String
  $name: String
  $needCompileView: Boolean = true
  $needCompileMask: Boolean = true
) {
  viewActionQuery {
    load(request: {
      model: $model
      name: $name
      needCompileView: $needCompileView
      needCompileMask: $needCompileMask
    } ) {
      ${o.R7.ViewAction}
    }
  }
}
${o.gH.ViewAction}
`,A=(e,t,i=!0,n=!0)=>(0,r.sH)(void 0,void 0,void 0,function*(){const r=yield g.query(o.vL.BASE,E,{model:e,name:t,needCompileView:i,needCompileMask:n});return r.data.viewActionQuery.load}),k=(e,t=!0,i=!0)=>(0,r.sH)(void 0,void 0,void 0,function*(){const r=yield x(f,{sharedCode:e,needCompileView:t,needCompileMask:i}),a=n.J1T`
      query{
        sharedPageQuery {
          load(page: ${r} ) {
            ${o.R7.SharedViewAction}
          }
        }
      }
      ${o.gH.SharedViewAction}
  `,l=yield g.query(o.vL.BASE,a);return l.data.sharedPageQuery.load}),D=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){var i;const r=yield x(m,{model:e,name:t}),a=n.J1T`
    query {
      viewQuery {
        load(viewList: [${r}]) {
          ${o.R7.View}
        }
      }
    }
    ${o.gH.View}
  `,l=yield g.query(o.vL.BASE,a);return null===(i=l.data.viewQuery.load)||void 0===i?void 0:i[0]}),F=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){const i=n.J1T`
    query {
      serverActionQuery {
        load(request: {model: "${e}", name: "${t}"}) {
          ${o.R7.ServerAction}
        }
      }
    }
    ${o.gH.ServerAction}
  `,r=yield g.query(o.vL.BASE,i);return r.data.serverActionQuery.load}),R=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){const i=n.J1T`
    query {
      urlActionQuery {
        load(request: {model: "${e}", name: "${t}"}) {
          ${o.R7.UrlAction}
        }
      }
    }
    ${o.gH.UrlAction}
  `,r=yield g.query(o.vL.BASE,i);return r.data.urlActionQuery.load}),O=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){var i;const r=yield x(m,{model:e,template:t}),a=n.J1T`
    query {
      viewQuery {
        load(viewList: [${r}]) {
          ${o.R7.View}
        }
      }
    }
    ${o.gH.View}
  `,l=yield g.query(o.vL.BASE,a);return null===(i=l.data.viewQuery.load)||void 0===i?void 0:i[0]}),N=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){if(!e)throw new Error("no model name");if(!1!==t){const t=s.get(e);if(t)return t}const i=n.J1T`
    query ($modelModel: String) {
      modelQuery {
        load(modelDefinition: { model: $modelModel }) {
          ...Model
        }
      }
    }
    ${o.KY.Model}
  `,r=yield g.query(o.vL.BASE,i,{modelModel:e}),a=r.data.modelQuery.load;return s.set(e,a),a.pk||(a.pk=[]),(0,o.Go)(a)}),$=e=>(0,r.sH)(void 0,void 0,void 0,function*(){if(!e)throw new Error("no model name");const t=d.get(e);if(t)return t;const i=n.J1T`
    query ($modelModel: String) {
      modelQuery {
        loadModelField(modelDefinition: { model: $modelModel }) {
          ...ModelWithFields
        }
      }
    }
    ${o.KY.ModelWithFields}
  `,r=yield g.query(o.vL.BASE,i,{modelModel:e}),a=r.data.modelQuery.loadModelField;return d.set(e,a),a.pk||(a.pk=[]),(0,o.Go)(a)}),M=(e,t,i,o,n={})=>(0,r.sH)(void 0,void 0,void 0,function*(){return I(e,"queryPage",t,i,i,o,n)}),I=(e,t,i,o,l,s,d={})=>(0,r.sH)(void 0,void 0,void 0,function*(){var r,c;const{maxDepth:u=0}=d,{matched:p}=(0,a.yE)(),h=null===(c=null===(r=p.segmentParams)||void 0===r?void 0:r.page)||void 0===c?void 0:c.scene;h&&(d=Object.assign(Object.assign({},d),{__queryParams:{scene:h}}));const m=yield $(e);o=(null===o||void 0===o?void 0:o.length)?o:m.modelFields,l=(null===l||void 0===l?void 0:l.length)?l:m.modelFields;const{condition:f="",pageSize:y=15,currentPage:C=1,sort:w}=i;let S,T;if(f instanceof n.kWY){const e=f.getConditionBodyData();e&&Object.keys(e).length&&(S=yield x((null===o||void 0===o?void 0:o.length)?o:m.modelFields,e)),T={rsql:f.toString()},S&&(T.queryData=new n.YeH(S))}else T={rsql:f};let E=v.struct(T);i.record&&(E=i.record);let A="";if(w)if(Array.isArray(w)){if(w.length){const e=[];w.forEach(t=>{const{sortField:i,direction:r="ASC"}=t;i&&e.push(v.struct({field:i,direction:v.raw(r)}))}),A=`{orders: [${e.join(",")}]}`}}else{const{sortField:e,direction:t="ASC"}=w;e&&(A=v.struct({orders:v.raw(v.struct({field:e,direction:v.raw(t)}))}))}const k={currentPage:C,size:y};A&&(k.sort=v.raw(A));const D=yield b(e,l,0,u);let F=`page:${v.struct(k)},`;if("string"===typeof E)F+=`queryWrapper: ${E}`;else if(Array.isArray(E)){const e=E.map(e=>x(o,e)),t=yield Promise.all(e);F+=`query: [${t.join(",")}]`}else{const e=yield x(o,E);F+=`query: ${e}`}const R=yield g.commonQuery({module:m.moduleName,model:m.name,method:t,param:F,variables:s,responseBody:`{\n      content {\n        ${D}\n      }\n      size\n      totalPages\n      totalElements\n    }`,context:d}),{content:O,totalElements:N,size:M,totalPages:I}=R;return{content:O,totalElements:Number(N),size:Number(M),totalPages:Number(I)}}),L=(e,t,i,o,n={},l)=>(0,r.sH)(void 0,void 0,void 0,function*(){var r,s;const{maxDepth:d=0}=n,{matched:c}=(0,a.yE)(),u=null===(s=null===(r=c.segmentParams)||void 0===r?void 0:r.page)||void 0===s?void 0:s.scene;u&&(n=Object.assign(Object.assign({},n),{__queryParams:{scene:u}}));const p=l||(yield $(e)),h=y(i,p),v=yield x(p.modelFields,t);if("{}"===v)return{};const m=yield b(e,h,0,d);if(""===m)return{};const f=yield g.commonQuery({module:p.moduleName,model:p.name,method:"queryOne",param:`query: ${v}`,variables:o,responseBody:`{${m}}`,context:n});return f}),_=(e,t,i={},o,n,l,s={})=>(0,r.sH)(void 0,void 0,void 0,function*(){var r,d;const{matched:c}=(0,a.yE)(),u=null===(d=null===(r=c.segmentParams)||void 0===r?void 0:r.page)||void 0===d?void 0:d.scene;u&&(s=Object.assign(Object.assign({},s),{__queryParams:{scene:u}})),"string"===typeof t&&(t={name:t,argumentName:"data"});const{maxDepth:p=1}=s,h=yield $(e);o=o&&o.length?o:h.modelFields,n=n&&n.length?n:h.modelFields;const v=yield b(e,n,0,p);let m="{}";if("string"===typeof i)m=i;else if(Array.isArray(i)){const e=i.map(e=>x(o,e)),t=yield Promise.all(e);m=`[${t.join(",")}]`}else m=yield x(o,i);const f=yield g.commonQuery({module:h.moduleName,model:h.name,method:t.name,param:`${t.argumentName}: ${m}`,variables:l,responseBody:`{${v}}`,context:s});return f}),P=(e,t,i,o,n,a={})=>(0,r.sH)(void 0,void 0,void 0,function*(){return V(e,t,i,o,void 0,n,a)}),j=(e,t,i,o,n,l,s={})=>(0,r.sH)(void 0,void 0,void 0,function*(){var r,d;const{maxDepth:c=0,argumentName:u}=s,{matched:p}=(0,a.yE)(),h=null===(d=null===(r=p.segmentParams)||void 0===r?void 0:r.page)||void 0===d?void 0:d.scene;h&&(s=Object.assign(Object.assign({},s),{__queryParams:{scene:h}}));const v=yield $(e);o=o&&o.length?o:v.modelFields,n=n&&n.length?o:v.modelFields;let m="{}";if(Array.isArray(i)){const e=i.map(e=>x(o,e)),t=yield Promise.all(e);m=`[${t.join(",")}]`}else m=yield x(o,i);const f=yield b(e,n,0,c),y=t.argumentList[0],C=t.name,{type:w}=t,S={module:v.moduleName,model:v.name,method:C,param:`${u||y.name}: ${m}`,variables:l,responseBody:`{${f}}`,context:s};let T;return T=(null===w||void 0===w?void 0:w.includes("QUERY"))?yield g.commonQuery(S):yield g.commonMutate(S),T}),V=(e,t,i,o,a,l,s={})=>(0,r.sH)(void 0,void 0,void 0,function*(){let{sessionPath:r}=t;return r||(r=(0,n.cA5)()),l||(l={}),!l.path&&r&&(l.path=r),j(e,t.functionDefinition||t.function,i,o,a,l,s)}),B=(e,t,i,o,n={})=>(0,r.sH)(void 0,void 0,void 0,function*(){return H(e,"update",t,i,void 0,o,n)}),H=(e,t,i,o,n,l,s={})=>(0,r.sH)(void 0,void 0,void 0,function*(){var r,d;const{maxDepth:c=1}=s,{matched:u}=(0,a.yE)(),p=null===(d=null===(r=u.segmentParams)||void 0===r?void 0:r.page)||void 0===d?void 0:d.scene;p&&(s=Object.assign(Object.assign({},s),{__queryParams:{scene:p}})),"string"===typeof t&&(t={name:t,argumentName:"data"});const h=yield $(e);let v;o=(null===o||void 0===o?void 0:o.length)?o:h.modelFields,n=(null===n||void 0===n?void 0:n.length)?n:h.modelFields,v=Array.isArray(i)?`[${(yield Promise.all(i.map(e=>x(o,e)))).join(",")}]`:yield x(o,i);const m=yield b(e,n,0,c),f=yield g.commonMutate({module:h.moduleName,model:h.name,method:t.name,param:`${t.argumentName}: ${v}`,variables:l,responseBody:`{${m}}`,context:s});return f}),W=(e,t,i,o,n={})=>(0,r.sH)(void 0,void 0,void 0,function*(){return H(e,"create",t,i,void 0,o,n)})},39455:(e,t,i)=>{i.d(t,{P:()=>s});var r=i(15215),o=i(70164),n=i(83247),a=i(91702),l=i(77679);let s=class extends a.td{};s=(0,r.Cg)([n.DF.ClassFactory(a.Qn.Token({viewType:[o.qi.Form,o.qi.Detail],ttype:[o.m1.ManyToOne],widget:["form",l.mi]}))],s)},41196:(e,t,i)=>{i.d(t,{r:()=>d});var r=i(16022),o=i(66401),n=i(9703),a=i(40307),l=i(48182),s=i(20641);function d(e){const t=(0,s.EW)(()=>r.rL.fetchDatetimeFormat({hasDateFormat:e.hasDateFormat,hasTimeFormat:e.hasTimeFormat},e.format,e.dateFormat,e.timeFormat,e.convertFormat,e.convertDateFormat,e.convertTimeFormat)),i=(0,s.EW)(()=>{const i=e.value;if((0,o.A)(i))return;const l=t.value;if(l){let t;if((0,n.A)(i)?t=r.rL.toDate(i,e.valueFormat):(0,a.A)(i)?t=i:console.warn(`无法识别的日期值, 显示的值可能出现异常. value=${i}`),t)return t}}),d=(0,s.EW)(()=>{const n=e.value;if((0,o.A)(n))return"";const a=t.value,s=i.value;return a&&s?r.rL.dateFormat(s,a):(0,l.A)(n)}),c=(0,s.EW)(()=>(0,o.A)(d.value));return{realDateValue:i,realValue:d,isRealEmpty:c}}},41361:(e,t,i)=>{i.d(t,{e:()=>d});var r=i(15215),o=i(16022),n=i(47444),a=i(48182),l=i(97859),s=i(75208);class d extends s.t{get unit(){return this.executeExpression(this.getDsl().unit)}get showThousandth(){return o.Xx.ofNullable(this.getDsl().showThousandth).map(e=>this.executeExpression((0,a.A)(e),(0,a.A)(!1))).map(e=>o.TM.toBoolean(e)).orElse(!1)}get hiddenStepHandle(){return o.TM.toBoolean(this.getDsl().hiddenStepHandle)}get size(){return this.executeExpression(this.getDsl().size,this.field.size)||this.field.size}get precision(){const e=this.executeExpression(this.getDsl().decimal);return(0,l.A)(e)?o.A5.toNumber(this.executeExpression((0,a.A)(this.field.decimal))):o.A5.toNumber(e)}}(0,r.Cg)([n.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],d.prototype,"unit",null),(0,r.Cg)([n.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],d.prototype,"showThousandth",null),(0,r.Cg)([n.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],d.prototype,"hiddenStepHandle",null),(0,r.Cg)([n.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],d.prototype,"size",null),(0,r.Cg)([n.x0.Reactive(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],d.prototype,"precision",null)},41844:(e,t,i)=>{i.d(t,{I:()=>d,g:()=>s});var r=i(16022),o=i(97859),n=i(92049),a=i(20641),l=i(91702);const s={placeholder:{type:[Object,String]},startPlaceholder:{type:String},endPlaceholder:{type:String},startDefaultValue:{type:[Date,String]},endDefaultValue:{type:[Date,String]},operator:{type:String},isSingle:{type:Boolean,default:void 0}};function d(e){const{realValue:t,readonly:i,disabled:s}=(0,l.P1)(e,!0),d=(0,a.EW)(()=>{if((0,o.A)(e.isSingle)){const t=e.operator;return!(0,o.A)(t)&&r.uK.isSingle(t)}return e.isSingle}),c=(0,a.EW)(()=>{if(e.format)return r.rL.fixFormat(e.format)}),u=(0,a.EW)(()=>{const t=e.defaultValue;if((0,n.A)(t)&&2===t.length){const[e,i]=t;return d.value?e:[e,i]}const i=e.startDefaultValue,r=e.endDefaultValue;if(i||r)return d.value?i:[i,r]}),p=(0,a.EW)(()=>{const t=e.placeholder;if((0,n.A)(t)&&2===t.length)return d.value?(0,l.g$)(e,t[0]):(0,l.g$)(e,t);const i=e.startPlaceholder,r=e.endPlaceholder;return i||r?d.value?(0,l.g$)(e,i):(0,l.g$)(e,[i,r]):void 0});return(0,a.wB)(()=>e.value,e=>{(0,o.A)(e)?t.value=void 0:t.value=e},{deep:!0}),(0,a.wB)(u,e=>{(0,o.A)(e)?t.value=void 0:t.value=e},{deep:!0}),{realValue:t,readonly:i,disabled:s,format:c,defaultValue:u,placeholder:p}}},43349:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(20641);function o(e,t,i,o,n,a){const l=(0,r.g2)("oio-date-time-range-picker"),s=(0,r.g2)("default-form-item");return(0,r.uX)(),(0,r.Wv)(s,{name:e.itemName,invisible:e.invisible,colon:e.colon,layout:e.layout,label:e.label,help:e.help,hint:e.hint,required:e.required,"validate-trigger":e.validateTrigger,"validator-info":e.validatorInfo},{default:(0,r.k6)(()=>[(0,r.bF)(l,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"date-format":e.dateFormat,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"show-time":{defaultValue:e.showTimeDefaultValue},"get-trigger-container":e.getTriggerContainer,"popper-class":"vxe-table--ignore-clear","onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","date-format","time-format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","show-time","get-trigger-container","onUpdate:value","onBlur","onFocus"])]),_:1},8,["name","invisible","colon","layout","label","help","hint","required","validate-trigger","validator-info"])}var n=i(30717),a=i(25195),l=i(91702),s=i(41844);const d=(0,r.pM)({name:"DefaultDateTimeRangePicker",components:{OioDateTimeRangePicker:n.E0P,DefaultFormItem:l.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a.w7T),l.jW),l.R7),l.Dn),s.g),{showTimeDefaultValue:{type:Array},itemName:{type:String}}),setup(e){const t=(0,l.sX)();return Object.assign(Object.assign({},(0,s.I)(e)),{getTriggerContainer:e.getPopupContainer||t.getTriggerContainer})}});var c=i(66262);const u=(0,c.A)(d,[["render",o]]),p=u},45383:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(20641),o=i(90033);const n={key:1,class:"common-input-prefix-suffix-text"},a={style:{margin:"unset"}};function l(e,t,i,l,s,d){const c=(0,r.g2)("oio-icon");return(0,r.uX)(),(0,r.CE)("div",{class:"common-input-prefix-suffix",style:(0,o.Tr)(e.style)},[e.contentType===e.InputPreSuffixType.ICON?((0,r.uX)(),(0,r.Wv)(c,{key:0,icon:e.content,color:e.color,size:e.fontSize},null,8,["icon","color","size"])):e.contentType===e.InputPreSuffixType.TEXT?((0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("pre",a,(0,o.v_)(e.content),1)])):(0,r.Q3)("",!0)],4)}var s=i(30717),d=i(75208);const c=(0,r.pM)({name:"InputPreSuffix",components:{OioIcon:s.Lky},inheritAttrs:!1,props:{contentType:{type:String},fixMode:{type:String},content:{type:String},style:{type:Object},color:{type:String,default:"var(--oio-text-color)"},fontSize:{type:String,default:"var(--oio-font-size)"}},setup(){return{InputPreSuffixType:d.X}}});var u=i(66262);const p=(0,u.A)(c,[["render",l]]),h=p},47556:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(20641);function o(e,t,i,o,n,a){const l=(0,r.g2)("oio-year-range-picker"),s=(0,r.g2)("default-form-item");return(0,r.uX)(),(0,r.Wv)(s,{name:e.itemName,invisible:e.invisible,colon:e.colon,layout:e.layout,label:e.label,help:e.help,hint:e.hint,required:e.required,"validate-trigger":e.validateTrigger,"validator-info":e.validatorInfo},{default:(0,r.k6)(()=>[(0,r.bF)(l,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"get-trigger-container":e.getTriggerContainer,"popper-class":"vxe-table--ignore-clear","onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","get-trigger-container","onUpdate:value","onBlur","onFocus"])]),_:1},8,["name","invisible","colon","layout","label","help","hint","required","validate-trigger","validator-info"])}var n=i(30717),a=i(25195),l=i(91702),s=i(41844);const d=(0,r.pM)({name:"DefaultYearRangePicker",components:{OioYearRangePicker:n.Gfg,DefaultFormItem:l.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a.Oe9),l.jW),l.R7),l.Dn),s.g),{itemName:{type:String}}),setup(e){const t=(0,l.sX)();return Object.assign(Object.assign({},(0,s.I)(e)),{getTriggerContainer:e.getPopupContainer||t.getTriggerContainer})}});var c=i(66262);const u=(0,c.A)(d,[["render",o]]),p=u},47600:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(20641);function o(e,t,i,o,n,a){const l=(0,r.g2)("oio-time-range-picker"),s=(0,r.g2)("default-form-item");return(0,r.uX)(),(0,r.Wv)(s,{name:e.itemName,invisible:e.invisible,colon:e.colon,layout:e.layout,label:e.label,help:e.help,hint:e.hint,required:e.required,"validate-trigger":e.validateTrigger,"validator-info":e.validatorInfo},{default:(0,r.k6)(()=>[(0,r.bF)(l,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"get-trigger-container":e.getTriggerContainer,"popper-class":"vxe-table--ignore-clear","onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","time-format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","get-trigger-container","onUpdate:value","onBlur","onFocus"])]),_:1},8,["name","invisible","colon","layout","label","help","hint","required","validate-trigger","validator-info"])}var n=i(30717),a=i(25195),l=i(91702),s=i(41844);const d=(0,r.pM)({name:"DefaultTimeRangePicker",components:{OioTimeRangePicker:n.SXB,DefaultFormItem:l.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a.iAC),l.jW),l.R7),l.Dn),s.g),{itemName:{type:String}}),setup(e){const t=(0,l.sX)();return Object.assign(Object.assign({},(0,s.I)(e)),{getTriggerContainer:e.getPopupContainer||t.getTriggerContainer})}});var c=i(66262);const u=(0,c.A)(d,[["render",o]]),p=u},48798:(e,t,i)=>{i.d(t,{l7:()=>k,hB:()=>w,Fv:()=>V,Xn:()=>z,Mv:()=>P,e6:()=>j});var r=i(15215),o=i(62121),n=i(16022),a=i(83247);const l=Symbol("__event_bus_consumer");function s(e,t){return a.pG.register(l,e,t)}function d(e){return a.pG.selector(l,e)}a.pG.createStorage({key:l,matchKeys:["category","type"]});const c=Symbol("__event_bus_producer");function u(e,t){return a.pG.register(c,e,t)}function p(e){return a.pG.selector(c,e)}a.pG.createStorage({key:c,matchKeys:["category","type"]});class h{static getConsumers(e){return h.consumers.get(h.generatorKeyByMessage(e))}static construct(e,t,i){var r;const a=d(e);if(!a)throw new Error(`Unsupported consumer. category: ${e.category}, type: ${e.type}`);const l=(0,n.Fl)(a,e.type,t,i);return l.el=null===(r=(0,o.EQ)().currentInstance)||void 0===r?void 0:r.vNode.el,l}static init(e){const t=h.generatorKeyByEngine(e);let i=h.consumers.get(t);i||(i=[],h.consumers.set(t,i)),i.push(e),e.start()}static dispose(e){const t=h.generatorKeyByEngine(e),i=e.key,r=h.consumers.get(t);if(!r)return!1;const o=r.findIndex(e=>e.key===i);if(-1===o)return!1;const n=r.splice(o,1);for(const a of n)a.dispose();return!0}static generatorKey(e,t){return`${e}#${t}`}static generatorKeyByEngine(e){return`${e.category}#${e.type}`}static generatorKeyByMessage(e){return`${e.category}#${e.type}`}}h.consumers=new Map;class g{static getProducer(e,t){return g.producers.get(g.generatorKey(e,t))}static construct(e,t){const i=p(e);if(!i)throw new Error(`Unsupported producer. category: ${e.category}, type: ${e.type}`);return(0,n.Fl)(i,e.type,t)}static init(e){const t=g.generatorKeyByEngine(e);g.dispose(t),g.producers.set(t,e),e.start()}static dispose(e){const t=g.producers.get(e);return t&&(g.producers.delete(e),t.isDisposed||t.dispose()),t}static generatorKey(e,t){return`${e}#${t}`}static generatorKeyByEngine(e){return`${e.category}#${e.type}`}}g.producers=new Map;class v{constructor(e,t){this._key=this.generatorKey(),this._category=e,this._type=t,this._isActivated=!1,this._isDisposed=!1}get key(){return this._key}get category(){return this._category}get type(){return this._type}get isActivated(){return this._isActivated}get isDisposed(){return this._isDisposed}start(){return!this.isActivated&&(this._isActivated=!0,this.$$start(),!0)}$$start(){}stop(){return!!this.isActivated&&(this._isActivated=!1,this.$$stop(),!0)}$$stop(){}dispose(){return!this.isDisposed&&(this.isActivated&&this.stop(),this._isDisposed=!0,this.$$dispose(),!0)}$$dispose(){}}let m=0;class f extends v{constructor(e,t,i){super(e,t),this._rawConvert=(null===i||void 0===i?void 0:i.convert)||this.$$convert,this._rawPublish=(null===i||void 0===i?void 0:i.publish)||this.$$publish}get rawConvert(){return this._rawConvert}get rawPublish(){return this._rawPublish}convert(e){return this.rawConvert(this,e)}publish(e){this.rawPublish(this,e)}$$publish(e,t){const i=this.convert(t);if(!i)return;const o=h.getConsumers(i);o&&o.length&&o.filter(e=>e.filter(t,i)).map(e=>(0,r.sH)(this,void 0,void 0,function*(){return e.consumer(i)}))}generatorKey(){return"event_producer_"+m++}$$dispose(){g.dispose(g.generatorKeyByEngine(this))}}let y=0;class b extends v{constructor(e,t,i,r){super(e,t),this._config=(null===r||void 0===r?void 0:r.config)||{},this._rawFilter=(null===r||void 0===r?void 0:r.filter)||this.$$filter.bind(this),this._rawConsumer=i}get config(){return this._config}get rawFilter(){return this._rawFilter}get rawConsumer(){return this._rawConsumer}filter(e,t){return!!this.isActivated&&this.rawFilter(e,t)}$$filter(e,t){return!0}consumer(e){return this.rawConsumer(this,e)}generatorKey(){return"event_consumer_"+y++}$$dispose(){h.dispose(this)}}class C{static init(e,t){const{category:i,type:r}=e;let o=g.getProducer(i,r);return o||(o=g.construct({category:i,type:r},t),g.init(o)),o}static startProducer(e){const{category:t,type:i}=e,r=g.getProducer(t,i);return!!r&&r.start()}static stopProducer(e){const{category:t,type:i}=e,r=g.getProducer(t,i);return!!r&&r.stop()}static publish(e,t){const{category:i,type:r}=e,o=g.getProducer(i,r);if(!o)throw new Error("Invalid producer. please initialize the producer before publish.");o.publish(t)}static subscribe(e,t,i){const r=h.construct(e,t,i);return h.init(r),C.consumerMap.set(t,r),r}static unsubscribe(e){const t=C.consumerMap.get(e);return t&&(C.consumerMap.delete(e),h.dispose(t)),t}static startConsumer(e){const t=C.consumerMap.get(e);return!!t&&t.start()}static stopConsumer(e){const t=C.consumerMap.get(e);return!!t&&t.stop()}}var x,w;C.consumerMap=new Map,function(e){e["global"]="global",e["view"]="view",e["current"]="current"}(x||(x={})),function(e){e["html"]="html",e["keyboard"]="keyboard"}(w||(w={}));const S=["keypress","keyup","keydown"];class T{static init(e){return C.init({category:w.html,type:e})}static dispose(e){return g.dispose(`${w.html}#${e}`)}static subscribe(e,t,i,r=!0){return r&&T.init(e),C.subscribe({category:w.html,type:e},t,i)}}const E="global";class A{static init(){return C.init({category:w.keyboard,type:E})}static dispose(){return g.dispose(`${w.keyboard}#${E}`)}static subscribe(e,t,i,r=!0){return r&&A.init(),C.subscribe({category:w.keyboard,type:e},t,i)}}class k{}k.init=C.init,k.startProducer=C.startProducer,k.stopProducer=C.stopProducer,k.publish=C.publish,k.subscribe=C.subscribe,k.unsubscribe=C.unsubscribe,k.start=C.startConsumer,k.stop=C.stopConsumer,k.disposeProducer=g.dispose,k.disposeConsumer=h.dispose,k.subscribeHTMLEvent=T.subscribe,k.subscribeKeyboardEvent=A.subscribe;class D extends f{constructor(e,t,i){super(e,t,i)}$$convert(e,t){return{category:this.category,type:this.type,origin:t}}$$start(){document.addEventListener(this.type,this.publish.bind(this))}$$stop(){document.removeEventListener(this.type,this.publish.bind(this))}}class F extends b{constructor(e,t,i){super(w.html,e,t,i)}}s({category:w.html},F);class R extends D{constructor(e,t){super(w.html,e,t)}}u({category:w.html},R);class O extends b{constructor(e,t,i,r){super(e,t,i,r),this.initConfig()}initConfig(){const{config:e}=this;null==e.scope&&(e.scope=x.view),void 0===e.ctrl&&(e.ctrl=!1),void 0===e.shift&&(e.shift=!1),void 0===e.alt&&(e.alt=!1)}$$filter(e,t){const{scope:i,ctrl:r,alt:n,shift:a}=this.config;let l=!1;switch(i){case x.global:case x.current:l=!0;break;case x.view:{const{el:e}=this;if(!e)break;const{x:t,y:i}=e.getBoundingClientRect(),r=(0,o.D6)(),n=r.clickVisibleArea[0];if(n){const{el:r,x:o,y:a,ex:s,ey:d}=n;if(r)r.contains(e)&&(l=!0);else if(o<=t&&t<=s&&a<=i&&i<=d){l=!0;break}}break}}return!!l&&((null==r||r===t.ctrl)&&((null==a||a===t.shift)&&(null==n||n===t.alt)))}}class N extends O{constructor(e,t,i){super(w.html,e,t,i)}}class $ extends O{constructor(e,t,i){super(w.keyboard,e,t,i)}}s({category:w.html,type:S},N),s({category:w.keyboard},$);class M extends D{$$convert(e,t){const i=n.my.newInstance(t);if(!i.isStateKey())return{category:this.category,type:this.type,origin:t,code:t.code,key:t.key,ctrl:i.isPressCtrl(),alt:i.isPressAlt(),shift:i.isPressShift()}}}class I extends M{constructor(e,t){super(w.html,e,t)}}class L extends M{constructor(e,t){super(w.keyboard,e,t)}$$convert(e,t){const i=super.$$convert(e,t);return i&&(i.type=t.key),i}onKeydown(e){this.publish(e)}$$start(){document.addEventListener("keydown",this.onKeydown.bind(this))}$$stop(){document.removeEventListener("keydown",this.onKeydown.bind(this))}}var _,P,j,V;u({category:w.html,type:S},I),u({category:w.keyboard},L),function(e){e["FIELD"]="Field",e["VIEW"]="View",e["ACTION"]="Action"}(_||(_={})),function(e){e["ON_VIEW_BEFORE_CREATED"]="onViewBeforeCreated",e["ON_VIEW_CREATED"]="onViewCreated",e["ON_VIEW_BEFORE_MOUNT"]="onViewBeforeMount",e["ON_VIEW_MOUNTED"]="onViewMounted",e["ON_VIEW_BEFORE_UPDATE"]="onViewBeforeUpdate",e["ON_VIEW_UPDATED"]="onViewUpdated",e["ON_VIEW_ACTIVATED"]="onViewActivated",e["ON_VIEW_BEFORE_UNMOUNT"]="onViewBeforeUnmount",e["ON_VIEW_UNMOUNTED"]="onViewUnmounted",e["ON_VIEW_SUBMIT"]="onViewSubmit",e["ON_VIEW_SUBMIT_START"]="onViewSubmitStart",e["ON_VIEW_SUBMIT_END"]="onViewSubmitEnd",e["ON_VIEW_SUBMIT_SUCCESS"]="onViewSubmitSuccess",e["ON_VIEW_SUBMIT_FAILED"]="onViewSubmitFailed",e["ON_VIEW_VALIDATE_START"]="onViewValidateStart",e["ON_VIEW_VALIDATE_SUCCESS"]="onViewValidateSuccess",e["ON_VIEW_VALIDATE_FAILED"]="onViewValidateFailed",e["ON_VIEW_VALIDATE_END"]="onViewValidateEnd",e["ON_FIELD_BEFORE_CREATED"]="onFieldBeforeCreated",e["ON_FIELD_CREATED"]="onFieldCreated",e["ON_FIELD_BEFORE_MOUNT"]="onFieldBeforeMount",e["ON_FIELD_MOUNTED"]="onFieldMounted",e["ON_FIELD_BEFORE_UPDATE"]="onFieldBeforeUpdate",e["ON_FIELD_UPDATED"]="onFieldUpdated",e["ON_FIELD_ACTIVATED"]="onFieldActivated",e["ON_FIELD_BEFORE_UNMOUNT"]="onFieldBeforeUnmount",e["ON_FIELD_UNMOUNTED"]="onFieldUnmounted",e["ON_FIELD_FOCUS"]="onFieldFocus",e["ON_FIELD_CHANGE"]="onFieldChange",e["ON_FIELD_BLUR"]="onFieldBlur",e["ON_FIELD_VALIDATE_START"]="onFieldValidateStart",e["ON_FIELD_VALIDATE_SUCCESS"]="onFieldValidateSuccess",e["ON_FIELD_VALIDATE_FAILED"]="onFieldValidateFailed",e["ON_FIELD_VALIDATE_END"]="onFieldValidateEnd"}(P||(P={})),function(e){e["viewBeforeCreated"]="onViewBeforeCreated",e["viewCreated"]="onViewCreated",e["viewBeforeMount"]="onViewBeforeMount",e["viewMounted"]="onViewMounted",e["viewBeforeUpdate"]="onViewBeforeUpdate",e["viewUpdated"]="onViewUpdated",e["viewActivated"]="onViewActivated",e["viewBeforeUnmount"]="onViewBeforeUnmount",e["viewUnmounted"]="onViewUnmounted",e["viewSubmit"]="onViewSubmit",e["viewSubmitStart"]="onViewSubmitStart",e["viewSubmitEnd"]="onViewSubmitEnd",e["viewSubmitSuccess"]="onViewSubmitSuccess",e["viewSubmitFailed"]="onViewSubmitFailed",e["viewValidateStart"]="onViewValidateStart",e["viewValidateSuccess"]="onViewValidateSuccess",e["viewValidateFailed"]="onViewValidateFailed",e["viewValidateEnd"]="onViewValidateEnd"}(j||(j={})),function(e){e["beforeCreated"]="onFieldBeforeCreated",e["created"]="onFieldCreated",e["beforeMount"]="onFieldBeforeMount",e["mount"]="onFieldMounted",e["beforeUpdate"]="onFieldBeforeUpdate",e["updated"]="onViewUpdated",e["beforeUnmount"]="onFieldBeforeUnmount",e["unmounted"]="onFieldUnmounted",e["focus"]="onFieldFocus",e["change"]="onFieldChange",e["blur"]="onFieldBlur",e["validateStart"]="onFieldValidateStart",e["validateSuccess"]="onFieldValidateSuccess",e["validateFailed"]="onFieldValidateFailed",e["validateEnd"]="onFieldValidateEnd"}(V||(V={}));const B=e=>t=>H(t)===`[object ${e}]`,H=e=>Object.prototype.toString.call(e),W=e=>"function"===typeof e,U=(Array.isArray,B("Object"),B("String"));B("Boolean"),B("Number"),B("RegExp");class q{constructor(e){if(!W(e))throw new Error("life cycle callback must be function");this.listener=this.buildListener(e)}buildListener(e){return t=>{W(e)&&e(t)}}notify(e){this.listener.call(e,e)}}class z{static initialize(e){this.lifeCycles=e}static getLifeCycleIndex(e){return this.lifeCycles.findIndex(t=>t.type===e)}static getLifeCycle(){return this.lifeCycles}static getLifeCycleByType(e){const t=this.getLifeCycleIndex(e);return t>=0?this.lifeCycles[t]:null}static setType(e){this.heartType=e}static setLifeCycle(e,t,i){if(!U(e)||!U(t)||!(i instanceof q))return!1;if(!this.heartType)throw new Error('set fail, use "LifeCycleHeart.setType(type)" first, then call "setLifeCycle"');const r=this.getLifeCycleIndex(e);r>=0?t&&this.lifeCycles[r].pattern.push({identifier:t,lifes:[i]}):this.lifeCycles.push({type:e,registryType:this.heartType,pattern:[{identifier:t,lifes:[i]}]}),this.heartType=null}static publish(e,t,i){if(!e||!t||!i)return!1;const r=this.getLifeCycleIndex(e);if(r>=0&&t){const e=this.lifeCycles[r].pattern.find(e=>e.identifier===t);e&&e.lifes.forEach(e=>{e.notify(i)})}}static disposeLifeCycle(e){}static dispose(e){this.lifeCycles.forEach(t=>{const i=t.pattern.findIndex(t=>t.identifier===e);i>=0&&t.pattern.splice(i,1)})}}function G(e,t){return(i,r)=>{if(!U(i))throw new Error("arg[0] must be string, but now is "+typeof i);if(r){if(!W(r))throw new Error("arg[1] must be function");z.setType(t),z.setLifeCycle(e,i,new q(r))}}}function K(e){return G(e,_.FIELD)}z.lifeCycles=[],z.heartType=null;K(P.ON_FIELD_BEFORE_CREATED),K(P.ON_FIELD_CREATED),K(P.ON_FIELD_BEFORE_MOUNT),K(P.ON_FIELD_MOUNTED),K(P.ON_FIELD_BEFORE_UPDATE),K(P.ON_FIELD_UPDATED),K(P.ON_FIELD_BEFORE_UNMOUNT),K(P.ON_FIELD_UNMOUNTED),K(P.ON_FIELD_VALIDATE_START),K(P.ON_FIELD_VALIDATE_SUCCESS),K(P.ON_FIELD_VALIDATE_FAILED),K(P.ON_FIELD_VALIDATE_END),K(P.ON_FIELD_FOCUS),K(P.ON_FIELD_CHANGE),K(P.ON_FIELD_BLUR);function X(e){return G(e,_.VIEW)}X(P.ON_VIEW_BEFORE_CREATED),X(P.ON_VIEW_CREATED),X(P.ON_VIEW_BEFORE_MOUNT),X(P.ON_VIEW_MOUNTED),X(P.ON_VIEW_BEFORE_UPDATE),X(P.ON_VIEW_UPDATED),X(P.ON_VIEW_BEFORE_UNMOUNT),X(P.ON_VIEW_UNMOUNTED),X(P.ON_VIEW_SUBMIT),X(P.ON_VIEW_SUBMIT_START),X(P.ON_VIEW_SUBMIT_SUCCESS),X(P.ON_VIEW_SUBMIT_FAILED),X(P.ON_VIEW_SUBMIT_END),X(P.ON_VIEW_VALIDATE_START),X(P.ON_VIEW_VALIDATE_SUCCESS),X(P.ON_VIEW_VALIDATE_FAILED),X(P.ON_VIEW_VALIDATE_END)},49464:(e,t,i)=>{i.d(t,{Jw:()=>b,kQ:()=>T,u_:()=>E.A,lj:()=>x.A,YA:()=>R,FQ:()=>C.A});var r=i(20641),o=i(90033);const n={class:"default-countdown"},a={class:"default-countdown-content"};function l(e,t,i,l,s,d){const c=(0,r.g2)("a-tooltip");return(0,r.uX)(),(0,r.CE)("div",n,[e.isRealEmpty?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:0},{title:(0,r.k6)(()=>[(0,r.Lk)("span",null,(0,o.v_)(e.realValue),1)]),default:(0,r.k6)(()=>[(0,r.Lk)("span",a,(0,o.v_)(e.countdownValue),1)]),_:1}))])}var s=i(25195),d=i(78422),c=i(41196);const u=6e4,p=60*u,h=24*p,g=3*h,v=30*h,m=(0,r.pM)({name:"DefaultCountdown",components:{},inheritAttrs:!1,props:Object.assign(Object.assign({},s.SS5),{value:{type:[Date,String],default:""}}),setup(e){const{realValue:t,realDateValue:i,isRealEmpty:o}=(0,c.r)(e),n=(0,r.EW)(()=>{const t=i.value;if(t){let i=t.getTime()-(new Date).getTime();if(i<=0){if(i=-i,e.hasTimeFormat){if(i<u)return(0,d.cAb)("刚刚");if(i<p)return`${Math.round(i/1e3/60)}${(0,d.cAb)("分钟前")}`;if(i<h)return`${Math.round(i/1e3/60/60)}${(0,d.cAb)("小时前")}`}return i<g?`${Math.round(i/1e3/60/60/24)}${(0,d.cAb)("天前")}`:(0,d.cAb)("超过3天以上")}if(e.hasTimeFormat){if(i<u)return(0,d.cAb)("即将");if(i<p)return`${Math.round(i/1e3/60)}${(0,d.cAb)("分钟后")}`;if(i<h)return`${Math.round(i/1e3/60/60)}${(0,d.cAb)("小时后")}`}return i<v?`${Math.round(i/1e3/60/60/24)}${(0,d.cAb)("天后")}`:(0,d.cAb)("大于30天之后")}return""});return{realValue:t,isRealEmpty:o,countdownValue:n}},render(){return[]}});var f=i(66262);const y=(0,f.A)(m,[["render",l]]),b=y;var C=i(14136),x=i(6668);const w=(0,r.pM)({name:"InlineForm",inheritAttrs:!1,render(){var e,t;return(0,r.bF)("div",Object.assign({},s.$pj.collectionBasicProps(this.$attrs,["inline-form"])),(null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))||[])}}),S=w,T=S;var E=i(36603);function A(e,t,i,n,a,l){return(0,r.uX)(),(0,r.CE)("iframe",{class:(0,o.C4)(["oio-preview-html",e.className]),ref:"iframeRef",style:(0,o.Tr)(e.style),width:"100%",border:"none"},null,6)}var k=i(50953);const D=(0,r.pM)({inheritAttrs:!1,props:{class:{type:[String,Array]},style:{type:Object,default:()=>({})},html:{type:String}},setup(e){const t=(0,k.KR)(null);function i(t){if(!t)return;const i='\n  body {\n    margin: 0;\n    padding: 0;\n  }\n  img {\n    max-width: 100%;\n  }\n  blockquote {\n    border-left: 8px solid #d0e5f2;\n    padding: 10px 10px;\n    margin: 10px 0;\n    background-color: #f1f1f1;\n  }\n\n  code {\n    font-family: monospace;\n    background-color: #eee;\n    padding: 3px;\n    border-radius: 3px;\n  }\n  pre > code {\n    display: block;\n    padding: 10px;\n  }\n\n  table {\n    border-collapse: collapse;\n  }\n  td, th {\n    border: 1px solid #ccc;\n    min-width: 50px;\n    height: 20px;\n  }\n  th {\n    background-color: #f1f1f1;\n  }\n\n  ul,\n  ol {\n    padding-left: 20px;\n  }\n\n  input[type="checkbox"] {\n    margin-right: 5px;\n  }\n',r=t.createElement("style");if(r.type="text/css",r.styleSheet?r.styleSheet.cssText=i:r.appendChild(t.createTextNode(i)),t.head.appendChild(r),t.body){let{html:i}=e;i&&(i=i.replaceAll('data-w-e-type="attachment"','data-w-e-type="attachment" target="__blank"')),t.body.innerHTML=i||""}}(0,r.sV)(()=>{(0,r.dY)(()=>{t.value.src="about:blank",t.value.addEventListener("load",()=>{i(t.value.contentDocument)})})});const o=(0,r.EW)(()=>e.class);return{iframeRef:t,className:o}}}),F=(0,f.A)(D,[["render",A]]),R=F;(0,r.pM)({components:{OioIcon:s.Lky}})},49839:(e,t,i)=>{i.d(t,{U:()=>r});const r=Symbol("$$internal_RefreshFormData")},50056:(e,t,i)=>{i.d(t,{Ns:()=>s,eN:()=>c,dM:()=>r,f5:()=>f});const r={currentHandle:{type:String},isVirtual:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},viewType:{type:String},modelModel:{type:String},modelName:{type:String},moduleModule:{type:String},moduleName:{type:String},viewTemplate:{type:Object}};var o=i(15215),n=i(16022),a=i(47444),l=i(98475);class s extends l.PJ{flushSearchParameters(e,t){this.searchBody=e,this.searchConditions=t}$$beforeMount(){super.$$beforeMount(),this.selectModeCallChaining=new n.Wl,this.checkboxAllCallChaining=new n.Wl}$$mounted(){var e;super.$$mounted(),null===(e=this.selectModeCallChaining)||void 0===e||e.hook(this.path,e=>{var t,i;this.selectMode=null===(i=null===(t=null===e||void 0===e?void 0:e[0])||void 0===t?void 0:t.toLowerCase)||void 0===i?void 0:i.call(t)})}$$unmounted(){var e;super.$$unmounted(),null===(e=this.selectModeCallChaining)||void 0===e||e.unhook(this.path)}}(0,o.Cg)([a.x0.Reactive(),a.x0.Provide()],s.prototype,"searchBody",void 0),(0,o.Cg)([a.x0.Reactive(),a.x0.Provide()],s.prototype,"searchConditions",void 0),(0,o.Cg)([a.x0.Reactive(),a.x0.Provide()],s.prototype,"selectMode",void 0),(0,o.Cg)([a.x0.Reactive(),a.x0.Provide()],s.prototype,"selectModeCallChaining",void 0),(0,o.Cg)([a.x0.Reactive(),a.x0.Provide()],s.prototype,"checkboxAllCallChaining",void 0),(0,o.Cg)([a.x0.Method(),a.x0.Provide()],s.prototype,"flushSearchParameters",null);var d=i(97859);class c extends l.PJ{get cols(){let e=n.A5.toNumber(this.getDsl().cols);return(0,d.A)(e)&&(e=this.parentCols),(0,d.A)(e)&&(e=1),e}}(0,o.Cg)([a.x0.Reactive(),a.x0.Inject("cols")],c.prototype,"parentCols",void 0),(0,o.Cg)([a.x0.Reactive(),a.x0.Provide()],c.prototype,"cols",null);var u=i(78422),p=i(74815),h=i(20641);const g=(0,h.pM)({name:"MetadataView",inheritAttrs:!1,props:Object.assign({},r),setup(e){const t=(0,p.zm)();return(0,p.tx)(Object.assign(Object.assign({},t),{viewType:(0,h.EW)(()=>e.viewType||t.viewType.value),model:(0,h.EW)(()=>e.modelModel||t.model.value),modelName:(0,h.EW)(()=>e.modelName||t.modelName.value),module:(0,h.EW)(()=>e.moduleModule||t.module.value),moduleName:(0,h.EW)(()=>e.moduleName||t.moduleName.value),metadataHandle:(0,h.EW)(()=>e.currentHandle||""),rootHandle:(0,h.EW)(()=>e.currentHandle||""),parentHandle:(0,h.EW)(()=>e.currentHandle||""),slotName:(0,h.EW)(()=>{}),inline:(0,h.EW)(()=>e.isVirtual||e.inline)})),{}},render(){var e,t;let i;if(!this.isVirtual){const{viewTemplate:e}=this;if(e){const t=a.MX.render(e,void 0,void 0,{dynamicKey:!0});t&&(i=[t])}}return i||(i=(null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))||[]),(0,h.bF)(h.FK,void 0,i)}}),v=g,m=v;class f extends a.Rc{constructor(){super(...arguments),this.isVirtual=!1,this.inline=!1}initialize(e){return this.isVirtual=e.isVirtual||!1,this.isVirtual&&(e.slotNames=[]),super.initialize(e),this.setComponent(m),this.viewAction=e.viewAction,this.inline=e.inline||!1,this}initContext(e){this.viewAction=e.viewAction,this.runtimeContext=e;const{viewLayout:t,viewDsl:i,viewTemplate:r}=e,{type:o,model:n,modelName:a,module:l,moduleName:s}=e.view;return this.viewType=o,this.modelModel=n,this.modelName=a,this.moduleModule=l,this.moduleName=s,this.viewLayout=t,this.viewDsl=i,this.viewTemplate=r,this.runtimeContext}initContextByViewAction(e){const t=e||this.viewAction;if(!t)throw new Error("Invalid view action define.");const i=(0,p.K)(t,this.inline,this.currentHandle,this.rootHandle);if(!i)throw new Error("Invalid runtime context.");return this.initContext(i),i}initContextByView(e){if(!e)throw new Error("Invalid view define");const t=(0,p.Ms)(e,this.inline,this.currentHandle,this.rootHandle);return this.initContext(t),t}initContextByViewForField(e,t){if(!e)throw new Error("Invalid view define");if(!t)throw new Error("Invalid field define");const i=(0,p.kX)(e,t,this.inline,this.currentHandle,this.rootHandle);return this.initContext(i),i}createWidget(e,t,i={},r,o=!1){const n=i.automatic;return n?super.createWidget(e,t,i,r,o):super.createWidget(e,t,Object.assign(Object.assign({},i),{metadataHandle:this.currentHandle,rootHandle:this.currentHandle}),r,o)}$$unmountedAfterProperties(){super.$$unmountedAfterProperties(),u.HxA.delete(this.currentHandle)}}(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"isVirtual",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"inline",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"viewType",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"modelModel",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"modelName",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"moduleModule",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"moduleName",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"viewLayout",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"viewDsl",void 0),(0,o.Cg)([a.x0.Reactive(),(0,o.Sn)("design:type",Object)],f.prototype,"viewTemplate",void 0);class y extends a.TS{constructor(){super(...arguments),this.isVirtual=!1,this.inline=!1}initialize(e){return this.isVirtual=e.isVirtual||!1,this.isVirtual&&(e.slotNames=[]),super.initialize(e),this.setComponent(m),this.viewAction=e.viewAction,this.inline=e.inline||!1,this}initContext(e){this.viewAction=e.viewAction,this.runtimeContext=e;const{viewLayout:t,viewDsl:i,viewTemplate:r}=e,{type:o,model:n,modelName:a,module:l,moduleName:s}=e.view;return this.viewType=o,this.modelModel=n,this.modelName=a,this.moduleModule=l,this.moduleName=s,this.viewLayout=t,this.viewDsl=i,this.viewTemplate=r,this.runtimeContext}initContextByViewAction(e){const t=e||this.viewAction;if(!t)throw new Error("Invalid view action define.");const i=(0,p.K)(t,this.inline,this.currentHandle,this.rootHandle);if(!i)throw new Error("Invalid runtime context.");return this.initContext(i),i}initContextByView(e){if(!e)throw new Error("Invalid view define");const t=(0,p.Ms)(e,this.inline,this.currentHandle,this.rootHandle);return this.initContext(t),t}initContextByViewForField(e,t){if(!e)throw new Error("Invalid view define");if(!t)throw new Error("Invalid field define");const i=(0,p.kX)(e,t,this.inline,this.currentHandle,this.rootHandle);return this.initContext(i),i}createWidget(e,t,i={},r,o=!1){const n=i.automatic;return n?super.createWidget(e,t,i,r,o):super.createWidget(e,t,Object.assign(Object.assign({},i),{metadataHandle:this.currentHandle,rootHandle:this.currentHandle}),r,o)}$$unmountedAfterProperties(){super.$$unmountedAfterProperties(),u.HxA.delete(this.currentHandle)}}(0,o.Cg)([a.x0.Reactive()],y.prototype,"isVirtual",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"inline",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"viewType",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"modelModel",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"modelName",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"moduleModule",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"moduleName",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"viewLayout",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"viewDsl",void 0),(0,o.Cg)([a.x0.Reactive()],y.prototype,"viewTemplate",void 0)},54908:(e,t,i)=>{i.d(t,{zi:()=>P,ZI:()=>K,Cu:()=>W,B6:()=>Q,$:()=>U,yE:()=>j});var r=i(16022),o=i(26462),n=i(77399),a=i.n(n);const l="primary";class s{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function d(e){return new s(e)}function c(e,t){for(const i in e)e.hasOwnProperty(i)&&t(e[i],i)}class u{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=d(this.queryParams)),this._queryParamMap}toString(){return m.serialize(this)}}class p{constructor(e,t){this.segments=e,this.children=t,this.parent=null,c(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return f(this)}}class h{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=d(this.parameters)),this._parameterMap}toString(){return E(this)}}function g(e,t){let i=[];return c(e.children,(e,r)=>{r===l&&(i=i.concat(t(e,r)))}),c(e.children,(e,r)=>{r!==l&&(i=i.concat(t(e,r)))}),i}class v{parse(e){const t=r.pU.decrypt(e),i=new M(t);return new u(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){const t=`/${y(e.root,!0)}`,i=k(e.queryParams),r="string"===typeof e.fragment?`#${x(e.fragment)}`:"";return`${t}${i}${r}`}}const m=new v;function f(e){return e.segments.map(e=>E(e)).join("/")}function y(e,t){if(!e.hasChildren())return f(e);if(t){const t=e.children[l]?y(e.children[l],!1):"",i=[];return c(e.children,(e,t)=>{t!==l&&i.push(`${t}:${y(e,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}const i=g(e,(t,i)=>i===l?[y(e.children[l],!1)]:[`${i}:${y(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[l]?`${f(e)}/${i[0]}`:`${f(e)}/(${i.join("//")})`}function b(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function C(e){return b(e).replace(/%3B/gi,";")}function x(e){return encodeURI(e)}function w(e){return b(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function S(e){return decodeURIComponent(e)}function T(e){return S(e.replace(/\+/g,"%20"))}function E(e){return`${e.path.split("/").map(w).join("/")}${A(e.parameters)}`}function A(e){const t=Object.keys(e).map(t=>`;${w(t)}=${w(e[t])}`).join("");return r.pU.encryption(t)}function k(e){const t=Object.keys(e).map(t=>{const i=e[t];return Array.isArray(i)?i.map(e=>`${C(t)}=${C(e)}`).join("&"):`${C(t)}=${C(i)}`});return t.length?`?${t.join("&")}`:""}const D=/^[^\/()?;=#]+/;function F(e){const t=e.match(D);return t?t[0]:""}const R=/^[^=?&#]+/;function O(e){const t=e.match(R);return t?t[0]:""}const N=/^[^?&#]+/;function $(e){const t=e.match(N);return t?t[0]:""}class M{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new p([],{}):new p([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];this.peekStartsWith("(")||e.push(this.parseSegment());while(this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/("))this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[l]=new p(e,t)),i}parseSegment(){const e=F(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new h(S(e),this.parseMatrixParams())}parseMatrixParams(){const e={};while(this.consumeOptional(";"))this.parseParam(e);return e}parseParam(e){const t=F(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const e=F(this.remaining);e&&(i=e,this.capture(i))}e[S(t)]=S(i)}parseQueryParam(e){const t=O(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const e=$(this.remaining);e&&(i=e,this.capture(i))}const r=T(t),o=T(i);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(o)}else e[r]=o}parseParens(e){const t={};this.capture("(");while(!this.consumeOptional(")")&&this.remaining.length>0){const i=F(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let o;i.indexOf(":")>-1?(o=i.substr(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=l);const n=this.parseChildren();t[o]=1===Object.keys(n).length?n[l]:new p([],n),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}let I,L=null;const _=new o.tQ(null),P=()=>{let e=null;const t=t=>{e!==t&&(e=t,JSON.stringify(L)!==JSON.stringify(I)&&JSON.stringify(t)!==JSON.stringify(I)&&(L=I),I=t,_.next(t))},i=()=>_;return{globePrevMatched:L,matched:I,getMatched$:i,setMatched:t}},j=()=>{const{matched:e,globePrevMatched:t,getMatched$:i}=P();return{prevMatched:t,matched:e,getMatched$:i}},V=()=>{const{page:e={}}=j().matched.segmentParams;return e},B="mode";var H;(function(e){e["Dev"]="dev",e["Product"]="product"})(H||(H={}));const W=()=>{const e=window[B];if(void 0!==e&&null!==e)return e===H.Dev;const t=V();return!!t&&(Object.keys(t).includes(B)&&!t.mode?localStorage.removeItem(B):t.mode&&localStorage.setItem(B,t.mode),localStorage.getItem(B)===H.Dev)},U=()=>{W(),window[B]=localStorage.getItem(B)},q=new v,z=()=>{const e=a().create({window,click:!1}),t=new o.tQ(null);let i=!1;const n=()=>{i||(i=!0,e(e=>{const i=q.parse(e.path);t.next(Object.assign(Object.assign({},i),{raw:e}))}),e())},l={replaceUrl:!1},s=(e,t=l)=>{"string"===typeof e&&c(e,t)},d=[],c=(i,r)=>{const{replaceUrl:n}=r;t.pipe((0,o.s)(1)).subscribe(t=>{var r;if(i===t.raw.canonicalPath)throw new Error(`NavigationDuplicated: Avoided redundant navigation to current location: ${t.raw.canonicalPath}`);if(n)e.replace(i);else{const t=null===(r=history.state)||void 0===r?void 0:r.path;t&&d.push(t),e(i)}})},g=e=>{const t=e.segments.map(e=>{const t={},i=e.parameters||{};for(const r in i)null!=i[r]&&(t[r]=i[r]);return new h(r._$.relativePath(r._$.appendBasePath(e.path)),t)}),i=e.children||{},o={};for(const r in i){const e=i[r];o[r]=g(e)}return new p(t,o)},v=(e,t)=>{var i,o,n;const{matched:a}=P(),l=null===(o=null===(i=e.segments[0])||void 0===i?void 0:i.extra)||void 0===o?void 0:o.preserveParameter;if(l){const t=a.segmentParams.page;e.segments[0].parameters=Object.assign(Object.assign({},t),e.segments[0].parameters)}const d=g(e),c=new u(d,{},null),p=q.serialize(c);r.$1.info("router change",null===(n=e.segments)||void 0===n?void 0:n[0]),t?window.open(p,t):s(p)},m=()=>{history.back()},f={ignite:n,navigate:s,push:v,back:m,activatedRoute:t.asObservable()};return r.gt&&(f["currentRoute"]={},f["getRoutes"]=()=>[]),Object.defineProperty(f,"_instance",{enumerable:!1,configurable:!0,value:e}),f};let G;const K=()=>G||(G=z(),G);var X=i(5867);const Q=(e,t)=>{const i=`/${e.map(e=>e.path).join("/")}`,{path:r,exact:o=!1,strict:n=!1,sensitive:a=!1}=t;if(!r&&""!==r)return null;const{regexp:l,keys:s}=ee(r,{end:o,strict:n,sensitive:a}),d=l.exec(i);if(!d)return null;const[c,...u]=d,p=i===c;return o&&!p?null:{path:r,url:"/"===r&&""===c?"/":c,isExact:p,params:s.reduce((e,t,i)=>(e[t.name]=u[i],e),{}),segmentParams:e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.path]:t.parameters||{}}),{})}},Y={},J=1e4;let Z=0;const ee=(e,t)=>{const i=`${t.end}${t.strict}${t.sensitive}`,r=Y[i]||(Y[i]={});if(r[e])return r[e];const o=[],n=(0,X.MM)(e,o,t),a={regexp:n,keys:o};return Z<J&&(r[e]=a,Z++),a}},55900:(e,t,i)=>{var r;i.d(t,{Q:()=>r}),function(e){e["COLORFUL"]="COLORFUL",e["SIMPLICITY"]="SIMPLICITY"}(r||(r={}))},61174:(e,t,i)=>{i.d(t,{g:()=>v});var r=i(15215),o=i(78422),n=i(70164),a=i(16022),l=i(25195),s=i(47444),d=i(97859),c=i(48182),u=i(91702),p=i(77679),h=i(55900),g=i(68706);class v extends u.d4{constructor(){super(...arguments),this.internalSelectedOptions=[]}defaultConstructDataTrigger(){return[l.HCy.CHANGE]}defaultClearFieldsTrigger(){return[l.HCy.CHANGE]}get options(){return this.getAvailableOptions()}get autocorrection(){return a.TM.toBoolean(this.getDsl().autocorrection)}compute(){return super.compute()}get orientation(){const e=this.getDsl().orientation;if(e)return e}get radioMode(){const e=this.getDsl().radioMode;if(e)return e}get optionColor(){return this.optionColorStyle===h.Q.COLORFUL}get optionColorStyle(){return this.getDsl().optionColorStyle||h.Q.COLORFUL}get maxNumber(){const e=this.getDsl().maxNumber;return e||1/0}get minNumber(){const e=this.getDsl().minNumber;return e||-1/0}get renderOnParent(){const e=this.getDsl().renderOnParent;return!(0,d.A)(e)&&e}get getPopupContainer(){return this.renderOnParent?e=>e.parentNode||document.body:null}fetchLabelByValue(e){return(0,g.uK)(e,this.options)}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);if(!(0,p.mO)(t))return t;const i=this.value;if(Array.isArray(i)){const e=i.length;if(this.field.multi&&(this.required||e>0)){if(this.required&&!this.invisible){const e=this.options.map(e=>e.name);if(i&&i.length){const t=[];for(const r of i)e.includes(r)&&t.push(r);if(this.setValue(t),!t.length)return this.validatorError(`${this.field.label}${(0,o.cAb)("必填")}`)}}if(!(0,d.A)(this.maxNumber)&&e>this.maxNumber)return this.validatorError(`${this.field.label} ${(0,o.cAb)("最多选择")}${this.maxNumber}${(0,o.cAb)("个")}`);if(!(0,d.A)(this.minNumber)&&e<this.minNumber)return this.validatorError(`${this.field.label} ${(0,o.cAb)("最少选择")}${this.minNumber}${(0,o.cAb)("个")}`)}}return this.validatorSuccess()})}getAvailableOptions(){const e=this.getDsl();let t=null===e||void 0===e?void 0:e.options;t&&Array.isArray(t)&&t.length||(t=this.field.options||[]);let i=[];const r=[];for(const l of t){const e=(0,n.Go)(l);(0,d.A)(e.name)||r.push(e.name);const t=this.executeExpression(e.invisible,!1);if(void 0===t||!t){const r=this.executeExpression(e.displayName,e.displayName);if("NaN"===(null===r||void 0===r?void 0:r.toString())&&r!==e.displayName||r&&(e.displayName=(0,o.cAb)(r)),e.label){const t=this.executeExpression(e.label,e.label);"NaN"===(null===t||void 0===t?void 0:t.toString())&&t!==e.label||t&&(e.label=(0,o.cAb)(t))}e.name=(0,c.A)(e.name),e.invisible=t,i.push(e)}if(t&&this.autocorrection)if(this.field.multi||this.value!==e.name){if(this.field.multi&&this.value&&this.value.includes(e.name)){const e=this.value.indexOf(t);this.value.splice(e,1)}}else this.setValue(void 0)}i&&0!==i.length||(i=this.field.options||[]),i=this.handleOptions(i);const a=((this.field.multi?this.value:[this.value])||[]).filter(e=>e);return!this.internalSelectedOptions.length&&a.length&&(this.internalSelectedOptions=a),i=i.filter(e=>!(!this.internalSelectedOptions.includes(e.name)&&e.state===n.QE.INACTIVE)),i}handleOptions(e){if(!e||!e.length)return[];const t=[],i=this.getMetaOptionNames();return e.forEach(e=>{(null===i||void 0===i?void 0:i.includes(e.name))&&(e.displayName=`${e.displayName}`,e.name=`${e.name}`,e.label=`${e.label||e.displayName||e.name}`,(0,d.A)(e.value)&&(e.value=e.name),t.push(e))}),t}getMetaOptionNames(){const e=this.field.options;return null===e||void 0===e?void 0:e.map(e=>e.name)}}(0,r.Cg)([s.x0.Reactive()],v.prototype,"options",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"autocorrection",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"orientation",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"radioMode",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"optionColor",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"optionColorStyle",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"maxNumber",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"minNumber",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"internalSelectedOptions",void 0),(0,r.Cg)([s.x0.Reactive()],v.prototype,"renderOnParent",null),(0,r.Cg)([s.x0.Method()],v.prototype,"getPopupContainer",null),(0,r.Cg)([s.x0.Reactive()],v.prototype,"fetchLabelByValue",null)},62121:(e,t,i)=>{i.d(t,{AL:()=>r,rO:()=>c,sf:()=>l,tC:()=>v,EQ:()=>f,D6:()=>p,MM:()=>u});const r="oio-click-activated",o="__null__";var n=i(16022);function a(){const{contentSelector:e}=this,t=document.querySelector(e);if(t)return t}function l(e,t){const i={handle:e,el:t};return new Proxy(i,{get(e,t,i){var r,o,n,a,l,s;switch(t){case"w":return(null===(r=e.el)||void 0===r?void 0:r.getBoundingClientRect().width)||0;case"h":return(null===(o=e.el)||void 0===o?void 0:o.getBoundingClientRect().height)||0;case"x":return(null===(n=e.el)||void 0===n?void 0:n.getBoundingClientRect().x)||0;case"y":return(null===(a=e.el)||void 0===a?void 0:a.getBoundingClientRect().y)||0;case"ex":{const t=null===(l=e.el)||void 0===l?void 0:l.getBoundingClientRect();return t?t.x+t.width:0}case"ey":{const t=null===(s=e.el)||void 0===s?void 0:s.getBoundingClientRect();return t?t.y+t.height:0}case"el":{const r=Reflect.get(e,t,i);return"function"===typeof r?r():r}}return Reflect.get(e,t,i)}})}const s={getContentHTMLElement:a};class d extends n.mS{constructor(){super()}generator(e){const t={contentSelector:o,mcx:0,mcy:0,st:0,sl:0,visibleArea:new Map,clickVisibleArea:[]},i=["contentVisibleArea","visibleArea"];for(const[r,o]of Object.entries(s))i.push(r),t[r]=o.bind(t);return t.contentVisibleArea=l(e,()=>t.getContentHTMLElement()),n.BF.readonly(t,i)}}class c{static getGlobalEnvironment(){return c.manager.get(c.ROOT_HANDLE)}static getCurrentEnvironment(){const e=c.currentHandle,t=c.manager.get(e);if(!t)throw new Error(`Invalid current environment. handle: ${e}`);return t}static get(e){return c.manager.get(e)}static createOrReplace(e,t){return c.manager.createOrReplace(e,t)}static delete(e,t=!0){c.manager.delete(e,t)}static select(e){const t=c.manager.get(e);if(!t)throw new Error(`Invalid environment. ${e}`);this.currentHandle=e}}function u(){return c.getGlobalEnvironment()}function p(){return c.getCurrentEnvironment()}c.manager=new d,c.ROOT_HANDLE="__ROOT_HANDLE__",c.currentHandle=c.ROOT_HANDLE,(()=>{c.manager.createOrReplace(c.ROOT_HANDLE)})();var h=i(83247);const g=Symbol("__current_instance_getter");function v(e,t){return h.pG.register(g,e,t)}function m(e){return h.pG.selector(g,e)}function f(){return m({framework:"vue"})()}h.pG.createStorage({key:g,matchKeys:["framework","isMobile"]})},64419:(e,t,i)=>{var r;i.d(t,{A:()=>r,J:()=>o}),function(e){e["NoData"]="noData",e["Uploading"]="uploading",e["Parsing"]="parsing",e["ShowData"]="showData",e["Fail"]="Fail"}(r||(r={}));const o={id:"-1",name:"全部"}},65363:(e,t,i)=>{i.d(t,{jW:()=>s,R7:()=>d,g$:()=>p,P1:()=>c,n$:()=>u});var r=i(16022),o=i(97859),n=i(50953),a=i(20641),l=i(89349);const s={change:{type:Function},focus:{type:Function},blur:{type:Function},translate:{type:Function},getPopupContainer:{type:Function}},d={readonly:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1}};function c(e,t){const i=(0,n.KR)(e.value),l=(0,a.EW)(()=>r.TM.toBoolean(e.readonly)||!1),s=(0,a.EW)(()=>r.TM.toBoolean(e.disabled)||!1);if(!t){const t=e=>{(0,o.A)(e)?i.value=void 0:i.value=e};(0,a.wB)(()=>e.value,e=>{t(e)},{deep:!0}),(0,a.wB)(()=>e.defaultValue,e=>{t(e)})}const{placeholder:d}=u(e);return{placeholder:d,realValue:i,readonly:l,disabled:s}}function u(e,t){return{placeholder:(0,a.EW)(()=>p(e,t))}}function p(e,t){const{readonlyShowPlaceholder:i,disabledShowPlaceholder:r}=(0,l.$h)();return t=t||e.placeholder,!1===i&&!0===e.readonly||!1===r&&!0===e.disabled?Array.isArray(t)?t.map(e=>""):"":t}},65536:(e,t,i)=>{i.d(t,{Os:()=>m});var r=i(15215),o=i(78422),n=i(70164),a=i(67774),l=i(83247),s=i(30717),d=i(47444),c=i(97859),u=i(98916),p=i(89610),h=i(49839),g=i(32093),v=i(87023);let m=class extends v.jk{constructor(){super(...arguments),this.updateActionName="update",this.updateOneWithRelationName="updateOneWithRelations"}get updateData(){let e=s.TMe.toBoolean(this.getDsl().updateData);return(0,c.A)(e)&&(e=!1),e}get submitData(){let e=s.TMe.toBoolean(this.getDsl().submitData);return(0,c.A)(e)&&(e=!1),e}clickAction(){var e;return(0,r.sH)(this,void 0,void 0,function*(){const{action:t}=this;if(!t)return void console.error("无法处理没有运行时动作的点击动作");s.$1g.group(`Click serverAction. ${t.model}:${t.name}`);const i=yield this.submit(t);try{return yield this.executeAction(t,i)}catch(r){console.error(r),this.formValidateProcess(r);const{forceRefreshWhenError:t=!1}=this.getDsl();return t&&(null===(e=this.refreshCallChaining)||void 0===e||e.syncCall()),!1}finally{s.$1g.groupEnd()}})}formValidateProcess(e){var t;if((null===(t=this.view)||void 0===t?void 0:t.type)!==n.qi.Form)return void this.notifyValidateResults(e);const{formValidateCallChaining:i}=this;if(i){const t=this.convertFormValidateResults(e);t.length&&i.syncCall(t)}}convertFormValidateResults(e){var t,i,r;const o=null===(t=e.errors)||void 0===t?void 0:t[0];if(!o)return[];if((null===(i=o.extensions)||void 0===i?void 0:i.errorCode)!==a.jYr.FORM_VALIDATE_ERROR)return[];const n=[];for(const a of(null===(r=o.extensions)||void 0===r?void 0:r.messages)||[]){const{level:e,field:t,path:i,message:r}=a;let o;if(((null===i||void 0===i?void 0:i.length)||0)>=4)o=i.splice(3).join(".");else{if(!t){console.error(a);continue}o=t}n.push({level:e,message:r,path:o})}return n}notifyValidateResults(e){var t,i,r;const o=null===(t=e.errors)||void 0===t?void 0:t[0];if(o&&(null===(i=o.extensions)||void 0===i?void 0:i.errorCode)===a.jYr.FORM_VALIDATE_ERROR)for(const n of(null===(r=o.extensions)||void 0===r?void 0:r.messages)||[])a.BtQ.ignoredFormValidateMessage(n)&&a.PyZ.error(n.message)}submit(e){var t,i,a,l,d,c;return(0,r.sH)(this,void 0,void 0,function*(){let r,u;if(!this.inline&&this.submitCallChaining){s.$1g.run(()=>{var e;[n.qi.Detail,n.qi.Form].includes(this.viewType)&&s.$1g.log("formData in view:",null===(e=this.activeRecords)||void 0===e?void 0:e[0])});const e=yield null===(t=this.submitCallChaining)||void 0===t?void 0:t.syncCall();null!=e&&(r=e.records,u=e.relationRecords)}if(null==r&&(r=this.activeRecords||[]),e.contextType===n.og.Batch||e.contextType===n.og.SingleAndBatch);else if(e.contextType===n.og.Single)Array.isArray(r)&&([r]=r);else{const t=null===(l=null===(a=null===(i=e.functionDefinition)||void 0===i?void 0:i.argumentList)||void 0===a?void 0:a[0])||void 0===l?void 0:l.ttype;t&&[n.m1.ManyToOne,n.m1.OneToOne].includes(t)&&Array.isArray(r)&&([r]=r)}if(!r){if(e.contextType!==n.og.ContextFree){const e=(null===(d=this.action)||void 0===d?void 0:d.displayName)||(null===(c=this.action)||void 0===c?void 0:c.label);throw new Error(`${e} action not params`)}r={}}return new o.StG(r,u)})}clickActionAfter(e){return(0,r.sH)(this,void 0,void 0,function*(){let t=!1;if(this.isDialog){if(this.closeDialog||this.closeAllDialog)return t=!0,yield this.clickActionAfterRefreshData(e,t),this.closeAllDialog?o.lGe.disposeAll():o.lGe.dispose(this.action),e;if(this.goBack)return this.historyBack(),e}else if(this.isDrawer){if(this.closeDrawer||this.closeAllDrawer)return t=!0,yield this.clickActionAfterRefreshData(e,t),this.closeAllDrawer?o._s.disposeAll():o._s.dispose(this.action),e;if(this.goBack)return this.historyBack(),e}else if(this.goBack)return this.historyBack(),e;return this.clickActionAfterRefreshData(e,t)})}clickActionAfterRefreshData(e,t=!1){var i;return(0,r.sH)(this,void 0,void 0,function*(){if(this.submitData){const t=yield this.executeSubmitData(e);if(null!=t)return t}return this.refreshRoot?this.executeRefreshRoot():this.refreshData?this.executeRefreshData(t):this.updateData&&e&&!(0,u.A)(e)&&(this.reloadDataSource(e),this.reloadActiveRecords(e),null===(i=this.reloadFormData$)||void 0===i||i.subject.next(!0)),e})}executeRefreshRoot(){var e;const t=this.findRefreshRootRuntimeContext(),i=o.VGK.INSTANCE.getActiveTab();if(i)o.VGK.INSTANCE.refresh(i.key);else if(t){const i=d.x0.select(t.handle).getOperator();i&&(null===(e=i.refreshCallChaining)||void 0===e||e.syncCall())}}findRefreshRootRuntimeContext(){let e=this.rootRuntimeContext;while(e){const t=e.parentContext,i=null===t||void 0===t?void 0:t.parentContext;if(!i||i.handle===o._wm){e=t;break}if(!t||t.handle===o._wm)break;if(t.field)e=t;else{if(!i.field){e=t;break}e=i}}return e}executeRefreshData(e){var t;null===(t=this.refreshCallChaining)||void 0===t||t.syncCall(e)}executeSubmitData(e){return(0,r.sH)(this,void 0,void 0,function*(){if(null==e||(0,u.A)(e))return e;if(this.metadataRuntimeContext.handle===this.rootRuntimeContext.handle&&(0,p.A)(this.onSubmit)){const t=yield this.onSubmit({parameters:{showRecords:Array.isArray(e)?e:[e],submitRecords:e},mapping:this.action.mapping,action:this.action});return t}})}historyBack(){var e;(0,g.GG)(this.action,e=>(0,o.lP8)(e,this.$router,this.$matched),null===(e=this.$router)||void 0===e?void 0:e.navigate)}usingDiffUpdate(e){const{relationUpdateType:t}=this;return!(!t||![o.A14.diff,o.A14.batch].includes(t))||!!e.relationRecords.length}seekPopupMainRuntimeContext(){var e;if(this.metadataHandle===this.rootHandle){const t=this.model.model;if(t){const i=null===(e=o.HxA.getOthers(this.rootHandle))||void 0===e?void 0:e.find(e=>e.model.model===t);if(i)return i}}return this.rootRuntimeContext}getRequestModelFields(e){return(0,r.sH)(this,void 0,void 0,function*(){const{viewType:t}=this;if(t===n.qi.Tree){const e=yield o.Qvr.get(this.model.model);return e?e.modelFields.map(e=>({field:e})):[]}return this.popupScene?this.seekPopupMainRuntimeContext().getRequestModelFields(e):this.rootRuntimeContext.getRequestModelFields(e)})}executeAction(e,t){return(0,r.sH)(this,void 0,void 0,function*(){if((this.updateOneWithRelationName===e.fun||this.updateActionName===e.name)&&this.usingDiffUpdate(t)){const e=yield this.getRequestModelFields();return this.executeRelationUpdate(e,t)}let{functionDefinition:i}=e;const{model:r,fun:n}=e;if(!i&&n&&(i=yield o.N2X.get(r,n)),!i)return console.error("无法获取可执行函数",e),s.$xc.error((0,o.cAb)("错误"),(0,o.cAb)("无法获取可执行函数")),!1;const a=yield this.getRequestModelFields();return this.executeFunction(i,a,t.records)})}executeFunction(e,t,i){return i=this.mergeContext(i),o.cHX.INSTANCE.simpleExecute(this.model,e,{requestModels:[o.QuJ.ResourceAddress],requestFields:t,variables:this.rootRuntimeContext.generatorVariables({path:this.action.sessionPath})},i)}executeRelationUpdate(e,t){return o.AB1.execute(this.model,t,{requestModels:[o.QuJ.ResourceAddress],requestFields:e,variables:this.rootRuntimeContext.generatorVariables({path:this.action.sessionPath})})}};(0,r.Cg)([d.x0.Method(),d.x0.Inject()],m.prototype,"onSubmit",void 0),(0,r.Cg)([d.x0.SubContext(h.U)],m.prototype,"reloadFormData$",void 0),(0,r.Cg)([d.x0.Reactive()],m.prototype,"updateData",null),(0,r.Cg)([d.x0.Reactive()],m.prototype,"submitData",null),(0,r.Cg)([d.x0.Reactive(),d.x0.Inject()],m.prototype,"formValidateCallChaining",void 0),m=(0,r.Cg)([l.DF.ClassFactory(v.jk.Token({actionType:n.X2.Server}))],m);var f=i(39277),y=i(16022);const b=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){const i=`mutation {\n    eipSendRequestTransientMutation {\n        sendRequest(\n            data: {\n                interfaceName: "${e.interfaceName}"\n                model: "${e.model}"\n                viewName: "${e.viewName}"\n                actionName: "${e.actionName}"\n                requestData: "${y.sK.serializableObject(e.requestData)}"\n            }\n        ) {\n            responseData\n        }\n    }\n}`,r=yield f.LV.mutate("eip",i,{path:t});return r.data.eipSendRequestTransientMutation.sendRequest});let C=class extends m{get updateData(){return!0}get refreshData(){return!1}executeAction(e,t){var i,o;return(0,r.sH)(this,void 0,void 0,function*(){const t=null!==(o=null===(i=this.activeRecords)||void 0===i?void 0:i[0])&&void 0!==o?o:{},r=(0,g.HY)({rootRuntimeContext:this.rootRuntimeContext,metadataRuntimeContext:this.metadataRuntimeContext,isDialog:this.isDialog,isDrawer:this.isDrawer}),n=yield b({interfaceName:this.getDsl().interfaceName,model:this.model.model,viewName:r,actionName:e.name,requestData:t},e.sessionPath);if(n.responseData){let e=setTimeout(()=>{this.reloadFormData$.subject.next(!0),clearTimeout(e),e=null},100);return n.responseData}return null})}};(0,r.Cg)([d.x0.SubContext(h.U)],C.prototype,"reloadFormData$",void 0),(0,r.Cg)([d.x0.Reactive()],C.prototype,"updateData",null),(0,r.Cg)([d.x0.Reactive()],C.prototype,"refreshData",null),C=(0,r.Cg)([l.DF.ClassFactory(v.jk.Token({actionType:n.X2.Server,widget:"EipTandemAction"}))],C);const x=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){const i=`mutation{\n    workflowTriggerTransientMutation {\n      startWorkflow(\n        data: {\n          workflowCode: "${e.workflowCode}"\n          model: "${e.model}"\n          modelDataList: ${JSON.stringify(JSON.stringify(e.modelDataList))}\n        }\n      ) {\n        workflowCode\n      }\n    }\n  }`,r=yield f.LV.mutate("workflow",i,{path:t});return r.data.workflowTriggerTransientMutation.startWorkflow});let w=class extends m{get updateData(){return!1}get refreshData(){return!1}executeAction(e,t){return(0,r.sH)(this,void 0,void 0,function*(){yield x({workflowCode:this.getDsl().workflowCode,model:this.model.model,modelDataList:this.activeRecords||[]},e.sessionPath);return null})}};(0,r.Cg)([d.x0.Reactive()],w.prototype,"updateData",null),(0,r.Cg)([d.x0.Reactive()],w.prototype,"refreshData",null),w=(0,r.Cg)([l.DF.ClassFactory(v.jk.Token({actionType:n.X2.Server,widget:["WorkflowTandemAction","DataflowTandemAction"]}))],w);const S=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){const i=`mutation{\n    microflowTriggerTransientMutation {\n      startWorkflow(\n        data: {\n          workflowCode: "${e.workflowCode}"\n          model: "${e.model}"\n          modelDataList: ${JSON.stringify(JSON.stringify(e.modelDataList))}\n        }\n      ) {\n        workflowCode\n      }\n    }\n  }`,r=yield f.LV.mutate("workflow",i,{path:t});return r.data.microflowTriggerTransientAction.startWorkflow});let T=class extends w{executeAction(e,t){return(0,r.sH)(this,void 0,void 0,function*(){yield S({workflowCode:this.getDsl().workflowCode,model:this.model.model,modelDataList:this.activeRecords||[]},e.sessionPath);return null})}};T=(0,r.Cg)([l.DF.ClassFactory(v.jk.Token({actionType:n.X2.Server,widget:["MicroflowTandemAction"]}))],T);const E=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){const i=`mutation{\n    aiTaskMutation {\n      execute(\n        data: {\n          connectorCode: "${e.connectorCode}"\n          viewName: "${e.viewName}"\n          actionName: "${e.actionName}"\n          data: "${y.sK.serializableObject(e.data)}"\n        }\n      ) {\n        result\n      }\n    }\n  }`,r=yield f.LV.mutate("aiX",i,{path:t});return r.data.aiTaskMutation.execute});let A=class extends m{get updateData(){return!0}get refreshData(){return!1}executeAction(e,t){var i,o;return(0,r.sH)(this,void 0,void 0,function*(){const t=null!==(o=null===(i=this.activeRecords)||void 0===i?void 0:i[0])&&void 0!==o?o:{},r=(0,g.HY)({rootRuntimeContext:this.rootRuntimeContext,metadataRuntimeContext:this.metadataRuntimeContext,isDialog:this.isDialog,isDrawer:this.isDrawer}),{connectorCode:n=""}=this.getDsl(),a=yield E({connectorCode:n,viewName:r,actionName:e.name,data:t},e.sessionPath);if(a.result){let e=setTimeout(()=>{this.reloadFormData$.subject.next(!0),clearTimeout(e),e=null},100);return a.result||{}}return null})}};(0,r.Cg)([d.x0.SubContext(h.U)],A.prototype,"reloadFormData$",void 0),(0,r.Cg)([d.x0.Reactive()],A.prototype,"updateData",null),(0,r.Cg)([d.x0.Reactive()],A.prototype,"refreshData",null),A=(0,r.Cg)([l.DF.ClassFactory(v.jk.Token({actionType:n.X2.Server,widget:["AiTandemAction"]}))],A)},67068:(e,t,i)=>{var r;i.d(t,{je:()=>r,Ex:()=>h}),function(e){e["menu"]="menu",e["designer"]="designer"}(r||(r={}));var o=i(78422),n=i(30717),a=i(25195),l=i(21228),s=i(10020),d=i(20641),c=i(50953);const u=(0,d.pM)({name:"IconSelect",components:{OioInputSearch:n.G9,OioIcon:n.Lky,OioTooltip:n.Xfy,ARadioGroup:l.A,ARadioButton:s.A},props:{value:{type:String},data:{type:[String,Array]}},emits:["update:value"],setup(e,t){const i=(0,c.KR)(""),o=(0,d.EW)(()=>{const t=e.data;return Array.isArray(t)?t:t===r.menu?a.noN:t===r.designer?a.RU5:a.noN}),n=(0,d.EW)(()=>{const e=i.value;return e?o.value.filter(t=>-1!==t.indexOf(e)):o.value}),l=e=>{t.emit("update:value",e.target.value)};return{searchValue:i,currentIconList:n,onChange:l}},render(){return[(0,d.bF)("div",{class:"icon-select"},[(0,d.bF)("div",{class:"icon-search"},[(0,d.bF)(n.G9,{value:this.searchValue,placeholder:(0,o.cAb)("请输入图标名称搜索"),"onUpdate:value":e=>this.searchValue=e})]),(0,d.bF)("div",{class:"icon-select-options oio-scrollbar"},[(0,d.bF)(l.A,{value:this.value,onChange:this.onChange},{default:()=>{const e=this.currentIconList,t=5*(e.length/5-1);return e.map((e,i)=>{const r=[],o=i%5;return 0===o?r.push("icon-item-row-first"):4===o&&r.push("icon-item-row-last"),i>=t&&r.push("icon-item-last-row"),(0,d.bF)(s.A,{class:r,key:e,value:e},{default:()=>[(0,d.bF)("div",{class:"icon-item"},[(0,d.bF)(n.Lky,{size:"20px",icon:e})]),(0,d.bF)(n.Xfy,{class:"icon-item-title",title:e},{default:()=>e})]})})}})])])]}}),p=u,h=p;i(90033),i(53751);var g=i(15215),v=i(63366),m=i(25873),f=i(3746),y=i(64419);(0,d.pM)({components:{OioIcon:n.Lky,OioInputSearch:n.G9,OioManageGroup:m.C,OioEmptyData:n.hNI,OioSpin:n.MEy},props:{placeholder:{type:String,default:"搜索"},value:{type:String},pageSize:{type:Number,default:91}},emits:["update:value"],setup(e,t){const i=(0,c.KR)(""),r=(0,c.KR)(!1),n=e=>{i.value=e,S()};let a;const l=(0,c.KR)(void 0),s=(0,c.KR)(void 0),u=e=>{s.value=e,t.emit("update:value",e.fullFontClass)},p=(0,c.KR)(null),h=(0,v.A)(()=>(0,g.sH)(this,void 0,void 0,function*(){const e=p.value;if(e){const{scrollTop:t,clientHeight:i,scrollHeight:r}=e;if(t+i>=r-10&&m.value.current<C.value){m.value.current++;const e=yield E();b.value.push(...e.content),C.value=e.totalPages}}}),400),m=(0,c.KR)({current:1,pageSize:e.pageSize}),b=(0,c.KR)([]),C=(0,c.KR)(0),x=(0,c.KR)(void 0),w=(0,c.KR)([]),S=(0,v.A)(()=>(0,g.sH)(this,void 0,void 0,function*(){m.value.current=1;const e=yield E();b.value=e.content,C.value=e.totalPages}),400),T=e=>(0,g.sH)(this,void 0,void 0,function*(){x.value=e,m.value.current=1,x.value.id===(null===a||void 0===a?void 0:a.groupId)?l.value={id:null===a||void 0===a?void 0:a.id,fullFontClass:null===a||void 0===a?void 0:a.fullFontClass}:l.value=void 0;const t=yield E();b.value=t.content,C.value=t.totalPages}),E=()=>(0,g.sH)(this,void 0,void 0,function*(){var e,t,o,n;r.value=!0;let a="";a=i.value&&"-1"!==(null===(e=x.value)||void 0===e?void 0:e.id)?`(1==1) and ((((1==1) and (displayName=like='${i.value}')) and (groupId=='${null===(t=x.value)||void 0===t?void 0:t.id}')) and (show==true))`:i.value?`(1==1) and (((1==1) and (displayName=like='${i.value}')) and (show==true))`:"-1"!==(null===(o=x.value)||void 0===o?void 0:o.id)?`(1==1) and (((1==1) and (groupId=='${null===(n=x.value)||void 0===n?void 0:n.id}')) and (show==true))`:"(1==1) and ((1==1) and (show==true))";const l=yield(0,f._y)({model:"resource",pagination:{current:m.value.current,pageSize:m.value.pageSize},condition:a});return r.value=!1,{content:l.content,totalPages:l.totalPages}}),A=()=>(0,g.sH)(this,void 0,void 0,function*(){const e=yield(0,f.bJ)("resource");w.value.push(...e),y.J.name=(0,o.cAb)(y.J.name),w.value.unshift(y.J)}),k=()=>(0,g.sH)(this,void 0,void 0,function*(){e.value&&(a=yield(0,f.gw)({model:"resource",fullFontClass:e.value}),a&&Object.keys(a).length&&(l.value={id:a.id,fullFontClass:e.value},s.value={id:a.id,fullFontClass:e.value},x.value=w.value.find(e=>e.id===a.groupId))),x.value||(x.value=y.J)});return(0,d.KC)(()=>(0,g.sH)(this,void 0,void 0,function*(){yield A(),yield k(),yield T(x.value)})),{loading:r,searchValue:i,onSearch:S,onUpdateValue:n,initialSelectIcon:l,clickedIcon:s,selectIconHandle:u,icons:b,currentGroup:x,groupList:w,onChangeWidgetGroup:T,scrollWrapperRef:p,handleScroll:h}}});i(66262)},67376:(e,t,i)=>{i.d(t,{A:()=>w});var r=i(20641),o=i(90033);const n=["title"],a={key:0,class:"suffix-show-count"},l={key:1,class:"suffix-eye"};function s(e,t,i,s,d,c){const u=(0,r.g2)("oio-select"),p=(0,r.g2)("input-pre-suffix"),h=(0,r.g2)("oio-icon"),g=(0,r.g2)("oio-input");return(0,r.uX)(),(0,r.CE)("div",{class:"form-string-input",title:e.realValueByTranslate},[(0,r.bF)(g,{type:e.realType.toLowerCase(),disabled:e.disabled,readonly:e.readonly&&!e.disabled,allowClear:e.allowClear&&!e.readonly&&!e.disabled,minlength:e.realMinLength?e.realMinLength:0,placeholder:e.placeholder,value:e.realValueByTranslate,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},(0,r.eX)({suffix:(0,r.k6)(()=>[e.showCount?((0,r.uX)(),(0,r.CE)("div",a,(0,o.v_)((e.realValue?e.realValue.length:0)+"/"+e.realMaxLength),1)):(0,r.Q3)("",!0),e.type===e.pwdType?((0,r.uX)(),(0,r.CE)("div",l,[e.eyeStatus(e.pwdType)?((0,r.uX)(),(0,r.Wv)(h,{key:0,color:"var(--oio-icon-color)",size:"var(--oio-font-size)",icon:e.invisibleIcon,onClick:e.pwdShowClick,onselectstart:"return false"},null,8,["icon","onClick"])):(0,r.Q3)("",!0),e.eyeStatus(e.textType)?((0,r.uX)(),(0,r.Wv)(h,{key:1,color:"var(--oio-icon-color)",size:"var(--oio-font-size)",icon:e.visibleIcon,onClick:e.pwdHideClick,onselectstart:"return false"},null,8,["icon","onClick"])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),e.suffix?((0,r.uX)(),(0,r.Wv)(p,{key:2,"content-type":e.suffixType,content:e.suffix},null,8,["content-type","content"])):(0,r.Q3)("",!0)]),_:2},[e.prefixes&&e.prefixes.length?{name:"prepend",fn:(0,r.k6)(()=>[(0,r.bF)(u,{style:{width:"90px"},onChange:e.prefixesChange,options:e.prefixes,value:e.prefixesRealValue,"allow-clear":!0},null,8,["onChange","options","value"])]),key:"0"}:void 0,e.prefix?{name:"prefix",fn:(0,r.k6)(()=>[(0,r.bF)(p,{"content-type":e.prefixType,content:e.prefix},null,8,["content-type","content"])]),key:"1"}:void 0]),1032,["type","disabled","readonly","allowClear","minlength","placeholder","value","onUpdate:value","onBlur","onFocus"])],8,n)}var d=i(16022),c=i(30717),u=i(25195),p=i(78422),h=i(1694),g=i(97859),v=i(50953),m=i(68890),f=i(45383),y=i(91702);const b=(0,r.pM)({name:"DefaultString",inheritAttrs:!1,props:Object.assign({},m.tj),components:{OioInput:c.Gzk,InputPreSuffix:f.A,OioIcon:c.Lky,OioSelect:c.U2I},setup(e,t){const i=(0,v.KR)(e.value),o=(0,r.EW)(()=>d.TM.toBoolean(e.readonly)||!1),n=(0,r.EW)(()=>d.TM.toBoolean(e.disabled)||!1),a=(0,r.EW)(()=>e.translation?(0,p.cAb)(i.value):i.value),l=t=>{var i,r;let o=(0,h.A)(t);return e.showSuffix&&e.suffixStore&&(o-=(null===(i=e.suffix)||void 0===i?void 0:i.length)||0),e.showPrefix&&e.prefixStore&&(o-=(null===(r=e.prefix)||void 0===r?void 0:r.length)||0),o>0?o:0},s=(0,r.EW)(()=>l(e.maxLength)),c=(0,r.EW)(()=>l(e.minLength)),m=(0,v.KR)((0,g.A)(e.prefixesValue)?e.prefixes&&e.prefixes.length?e.prefixes[0]:void 0:e.prefixesValue),f=t=>{e.changePrefixesValue&&e.changePrefixesValue(t?t.key:void 0)},b=(0,v.KR)(e.type),C=(0,v.KR)(u.NZc.PASSWORD),x=(0,v.KR)(u.NZc.TEXT),w=e=>{b.value=u.NZc.PASSWORD},S=e=>{b.value=u.NZc.TEXT},T=e=>b.value===e&&!o.value&&!n.value;(0,r.wB)(()=>e.type,e=>{b.value=e},{immediate:!0}),(0,r.wB)(()=>e.value,t=>{(0,g.A)(t)?i.value=t:e.removePrefixSuffix?i.value=e.removePrefixSuffix(t):i.value=t},{immediate:e.independentlyEditable}),(0,r.wB)(()=>e.defaultValue,e=>{(0,g.A)(e)&&(i.value=void 0)}),(0,r.wB)(()=>i.value,t=>{e.changeInputRealValue&&e.changeInputRealValue(t)},{immediate:!0}),(0,r.wB)(()=>e.prefixesValue,e=>{(0,g.A)(e)?m.value=void 0:m.value=e}),(0,r.wB)(()=>e.prefixes,t=>{t&&t.length?(m.value=t[0],e.changePrefixesValue&&e.changePrefixesValue(m.value)):m.value=void 0},{immediate:!0});const{placeholder:E}=(0,y.n$)(e);return{placeholder:E,realValue:i,realValueByTranslate:a,readonly:o,disabled:n,realType:b,realMinLength:c,realMaxLength:s,pwdType:C,textType:x,prefixesChange:f,prefixesRealValue:m,pwdHideClick:w,pwdShowClick:S,eyeStatus:T}}});var C=i(66262);const x=(0,C.A)(b,[["render",s]]),w=x},67774:(e,t,i)=>{i.d(t,{kWY:()=>d,HR_:()=>g,JhY:()=>s,t98:()=>Ie,Qq5:()=>be,KHK:()=>pe,I6D:()=>Ve,PyZ:()=>We,YeH:()=>o,BtQ:()=>st,jYr:()=>Ze,MkP:()=>w,cA5:()=>ue,J1T:()=>r.J1,Xxh:()=>rt,vGC:()=>S,r5h:()=>at,yQe:()=>nt,MEg:()=>ce,MKG:()=>Ke,D8B:()=>de});var r=i(28740);class o{constructor(e){this.value=e}}const n=e=>e instanceof o;class a{constructor(){this.pivot=0,this.list=[]}append(e){return this.list.splice(this.pivot,0,e),this.pivot++,this}prepend(e){return this.list.unshift(e),this.pivot++,this}postpend(e){return this.list.push(e),this}toString(){return this.list.join("")}}var l,s;(function(e){e["AND"]="and",e["OR"]="or"})(l||(l={})),function(e){e["EQUAL"]="==",e["NOT_EQUAL"]="!=",e["GREATER_THAN"]="=gt=",e["GREATER_THAN_OR_EQUAL"]="=ge=",e["LESS_THAN"]="=lt=",e["LESS_THAN_OR_EQUAL"]="=le=",e["IN"]="=in=",e["NOT_IN"]="=out=",e["COL_EQUAL"]="=cole=",e["COL_NOT_EQUAL"]="=colnot=",e["LIKE"]="=like=",e["STARTS"]="=starts=",e["ENDS"]="=ends=",e["NOT_LIKE"]="=notlike=",e["NOT_STARTS"]="=notstarts=",e["NOT_ENDS"]="=notends=",e["IS_NULL"]="=isnull=true",e["NOT_NULL"]="=notnull=true",e["BIT"]="=bit",e["NOT_BIT"]="=notbit=",e["HAS"]="=has=",e["HAS_NOT"]="=hasnt=",e["HAS_OR"]="=hasor=",e["HAS_NOT_OR"]="=hasntor=",e["BIT_EQUAL"]="=bit=",e["BIT_NOT_EQUAL"]="=notbit=",e["BIT_CONTAIN"]="=has=",e["BIT_NOT_CONTAIN"]="=hasnt=",e["CONTAIN"]="=contain=",e["NOT_CONTAIN"]="=notcontain="}(s||(s={}));class d extends a{constructor(e,t={quote:"'"}){super(),this.config=t,this.comparisonOps=s,this.logicalOps=l,this.conditionBodyData={},this.append(e)}setConditionBodyData(e){this.conditionBodyData=e}getConditionBodyData(){return this.conditionBodyData}toString(){return super.toString()}and(e){return this.prepend("(").append(")").append(" ").append(this.logicalOps.AND).append(" ").append("(").append(e.toString()).append(")")}or(e){return this.prepend("(").append(")").append(" ").append(this.logicalOps.OR).append(" ").append("(").append(e.toString()).append(")")}like(e,t=!0){return this.append(this.comparisonOps.LIKE).append(this.preprocessCondition(e,t))}bitEqual(e){return this.append(this.comparisonOps.BIT_EQUAL).append(this.preprocessCondition(e,!1))}bitNotEqual(e){return this.append(this.comparisonOps.BIT_NOT_EQUAL).append(this.preprocessCondition(e,!1))}bitContain(e){return this.has(e)}has(e){const t=this.preprocessStrArgs(e);return this.append(this.comparisonOps.HAS).append("(").append(t).append(")")}bitNotContain(e){return this.hasNot(e)}hasNot(e){return this.append(this.comparisonOps.HAS_NOT).append("(").append(this.preprocessStrArgs(e)).append(")")}hasOr(e){return this.append(this.comparisonOps.HAS_OR).append("(").append(this.preprocessStrArgs(e)).append(")")}hasNotOr(e){return this.append(this.comparisonOps.HAS_NOT_OR).append("(").append(this.preprocessStrArgs(e)).append(")")}contain(e,t=!0){return this.append(this.comparisonOps.CONTAIN).append(this.preprocessCondition(e,t))}notContain(e,t=!0){return this.append(this.comparisonOps.NOT_CONTAIN).append(this.preprocessCondition(e,t))}starts(e,t=!0){return this.append(this.comparisonOps.STARTS).append(this.preprocessCondition(e,t))}ends(e,t=!0){return this.append(this.comparisonOps.ENDS).append(this.preprocessCondition(e,t))}isNull(){return this.append(this.comparisonOps.IS_NULL)}equal(e,t=!0){return this.append(this.comparisonOps.EQUAL).append(this.preprocessCondition(e,t))}colEqual(e){return this.append(this.comparisonOps.COL_EQUAL).append(this.preprocessCondition(e,!1))}greaterThan(e,t=!0){return this.append(this.comparisonOps.GREATER_THAN).append(this.preprocessCondition(e,t))}greaterThanOrEuqalTo(e,t=!0){return this.append(this.comparisonOps.GREATER_THAN_OR_EQUAL).append(this.preprocessCondition(e,t))}lessThan(e,t=!0){return this.append(this.comparisonOps.LESS_THAN).append(this.preprocessCondition(e,t))}lessThanOrEqualTo(e,t=!0){return this.append(this.comparisonOps.LESS_THAN_OR_EQUAL).append(this.preprocessCondition(e,t))}notLike(e,t=!0){return this.append(this.comparisonOps.NOT_LIKE).append(this.preprocessCondition(e,t))}notStarts(e,t=!0){return this.append(this.comparisonOps.NOT_STARTS).append(this.preprocessCondition(e,t))}notEnds(e,t=!0){return this.append(this.comparisonOps.NOT_ENDS).append(this.preprocessCondition(e,t))}notNull(){return this.append(this.comparisonOps.NOT_NULL)}notEqual(e,t=!0){return this.append(this.comparisonOps.NOT_EQUAL).append(this.preprocessCondition(e,t))}colNotEqual(e){return this.append(this.comparisonOps.COL_NOT_EQUAL).append(this.preprocessCondition(e,!1))}in(e){const t=this.preprocessStrArgs(e);return this.append(this.comparisonOps.IN).append("(").append(t).append(")")}notIn(e){const t=this.preprocessStrArgs(e);return this.append(this.comparisonOps.NOT_IN).append("(").append(t).append(")")}preprocessStrArgs(e,t=","){return Array.isArray(e)?e.join(t):e}preprocessCondition(e,t=!0){if("string"===typeof e&&t){const{quote:t}=this.config;return`${t}${e}${t}`}return e instanceof o?e.value:`${e}`}}const c=e=>e instanceof d,u=e=>"string"===typeof e,p=e=>"undefined"===typeof e,h=e=>null===e;class g{constructor(e={quote:"'"}){this.config=e}static getInstance(){return this.instance||(this.instance=new g),this.instance}struct(e){const t=new a;return t.prepend("{").postpend("}"),Object.entries(e).forEach(([e,i],r,o)=>{this.isEmptyValue(i)||(t.append(`${e}:`),c(i)||u(i)?t.append(`"${i.toString()}"`):n(i)?t.append(i.value):t.append(`${i}`),r+1<o.length&&t.append(","))}),t.toString()}condition(e,t){return new d(e,t||this.config)}comma(...e){return e.join(",")}aggs(e){return e?`${e.field}=${e.method}=${e.alias}`:""}pk(e,t){if(!e.length)throw new Error("Primary key joint error, there's no primary key");const i=this.condition(e.shift());return e.forEach(e=>{const r=t[e];if(p(r))throw new Error(`Primary key joint error, undefined value of ${e},\n data: ${t}`);const o=this.condition(e);o.equal(r),i.and(o)}),i}raw(e){return new o(e)}isEmptyValue(e){return""===e||h(e)||p(e)||n(e)&&""===e.value}}class v extends Error{constructor(e,t,i){super(e),this.originalError=i,this.errors=t.errors,this.extensions=t.extensions,this.networkError=t.networkError}}function m(e){var t,i,r;if(e instanceof v){const o=e;return null===(r=null===(i=null===(t=o.errors)||void 0===t?void 0:t[0])||void 0===i?void 0:i.extensions)||void 0===r?void 0:r.errorCode}}const f="query",y="mutation",b="__is_gql_parameter_map";function C(){const e={},t=e;return t.__is_gql_parameter_map=!0,e}function x(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.__is_gql_parameter_map)}function w(){const e={},t=e;return t.__is_gql_parameter_map=!0,e}function S(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.__is_gql_parameter_map)}var T=i(15215),E=i(16022),A=i(83247),k=i(22316),D=i(65806),F=i(64831),R=i(15155),O=i(82454),N=i(63032);const $=(e,t)=>{var i;const r="1.23452384164.123412415";if(void 0===t)return;if(null!==document.getElementById(r)){const e=document.getElementById(r);null===(i=null===e||void 0===e?void 0:e.parentNode)||void 0===i||i.removeChild(e)}const o=t.offsetWidth,n=t.offsetHeight;t.style.position="relative";const a=document.createElement("canvas");a.width=260,a.height=160;const l=a.getContext("2d");l&&(l.rotate(-20*Math.PI/180),l.font="14px Vedana",l.fillStyle="rgba(0, 0, 0, 0.1)",l.textAlign="left",l.textBaseline="middle",l.fillText(e,0,4*a.height/5));const s=document.createElement("div");return s.id=r,s.style.pointerEvents="none",s.style.top="0px",s.style.left="0px",s.style.position="absolute",s.style.zIndex="100000",s.style.width=`${o}px`,s.style.height=`${n}px`,s.style.background=`url(${a.toDataURL("image/png")}) left top repeat`,t.appendChild(s),r},M={set(e,t){let i=$(e,t);setInterval(()=>{i&&null!==document.getElementById(i)||(i=$(e,t))},500),window.onresize=()=>{$(e,t)}}},I=M;let L;function _(e,t){if(!L){L={code:e,message:t};const i=setTimeout(()=>{I.set(t,document.body),clearTimeout(i)},1e3)}}const P="0",j="1",V="2",B="3",H="5";var W=i(21396),U=i.n(W);const q=U().enc.Utf8.parse("abcdefghijklmnop");class z{static decrypt(e,t){const i=U().lib.CipherParams.create({iv:q,ciphertext:U().enc.Base64.parse(t)});return U().AES.decrypt(i,U().enc.Utf8.parse(e),{iv:q,mode:U().mode.CBC,padding:U().pad.Pkcs7}).toString(U().enc.Utf8)}}class G extends Error{constructor(e){super(e||"Invalid request.")}}const K=j+P+H+j+P+P+j+P,X=j+P+H+j+P+P+j+V,Q=j+P+H+j+P+P+j+B;function Y(e){var t,i;const r=null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.__pl__,o=null===(i=null===e||void 0===e?void 0:e.data)||void 0===i?void 0:i.__ps__;if(!r||!o)return;if("string"!==typeof r)throw new G;if("string"!==typeof o)throw new G;let n;try{n=JSON.parse(z.decrypt(o,r))}catch(a){throw new G}if(n&&n.code&&n.code!==K){if(![X,Q].includes(n.code))throw new G;_(n.code,n.message)}}var J=i(28117);function Z(e){return new F.Ch((t,i)=>new J.A(r=>{let o;const n=e(t,e=>new J.A(t=>{o=i(e).subscribe({next:e=>{e.errors&&e.errors.length?t.error({graphQLErrors:e.errors,response:e}):t.next(e),r.next(e)},error:e=>{t.error({networkError:e,graphQLErrors:e&&e.result&&e.result.errors}),r.error(e)},complete:()=>{t.complete(),r.complete()}})}));return()=>{n&&n.unsubscribe&&n.unsubscribe(),o&&o.unsubscribe()}}))}function ee(e){const t=[],i=[];return e.forEach(e=>{e.success&&t.push(e),e.error&&i.push(e)}),Z((e,r)=>r(e).subscribe({next(e){const i=e;(0,E.cX)(t,e=>{var t;return null===(t=e.success)||void 0===t?void 0:t.call(e,i)})},error:({graphQLErrors:e,networkError:t,response:r})=>{const o={errors:e,extensions:null===r||void 0===r?void 0:r.extensions,networkError:t};(0,E.cX)(i,e=>{var t;return null===(t=e.error)||void 0===t?void 0:t.call(e,o)})}}))}class te{constructor(){this.interceptors={}}register(e,t){if(void 0===t)return;let i;null!==t?(i=(0,E.Fl)(t),this.interceptors[e]=i):i=null}getInterceptors(){return Object.assign({},this.interceptors)}}const ie=new te;function re(){const e=new URL(window.location.href),t=Object.fromEntries(e.searchParams.entries()),i=e.pathname.split(";").slice(1).reduce((e,t)=>{const[i,r]=t.split("=");return e[i]=r,e},{});return Object.assign(Object.assign({},t),i)}function oe(e){const t=new URL(window.location.href),i=t.origin+t.pathname.split(";")[0],r=Object.entries(e).map(([e,t])=>`${e}=${t}`).join(";"),o=`${i};${r}`;return o}function ne(e){const t=oe(e);window.location.href=t}let ae=!1;function le(){if(ae)return;ae=!0;const e=re().ownSign||localStorage.getItem("ownSign")||"",t={position:"fixed",height:"min-content",left:"70%",top:"24px",transform:"translate(-50%, -50%)",cursor:"move",padding:"2px 4px",borderRadius:"2px",backgroundColor:"#fff",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",whiteSpace:"nowrap",fontSize:"12px",fontWeight:"bold",zIndex:"9999",userSelect:"none",transition:"box-shadow 0.3s ease",display:"flex",alignItems:"center"},i=()=>{for(const[e,i]of Object.entries(t))n.style[e]=i};let r,o;const n=document.createElement("div");n.className="own-sign-draggable",i();const a=e=>{e.preventDefault();const t=n.getBoundingClientRect();r=e.clientX-t.left,o=e.clientY-t.top,document.addEventListener("mousemove",l),document.addEventListener("mouseup",s)},l=e=>{t.left=e.clientX-r+"px",t.top=e.clientY-o+"px",i()},s=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",s)},d=()=>{localStorage.removeItem("ownSign"),n.remove();const e=re();delete e.ownSign,ne(e)};if("null"!==e){if(e){localStorage.setItem("ownSign",e),i(),n.addEventListener("mouseover",()=>{n.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"}),n.addEventListener("mouseout",()=>{n.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.1)"});const t=document.createElement("strong");t.textContent="ownSign:",n.appendChild(t);const r=document.createTextNode(` ${e}`);n.appendChild(r);const o=document.createElement("button");o.className="own-sign-delete-btn",o.textContent="✖",o.style.background="transparent",o.style.border="none",o.style.cursor="pointer",o.addEventListener("click",d),n.appendChild(o),n.addEventListener("mousedown",a),document.body.appendChild(n)}}else d()}let se;function de(e,t){return(0,T.sH)(this,void 0,void 0,function*(){const i=se;se=e;try{return yield t()}finally{se=i}})}function ce(e){se=e}function ue(){return se}const pe=(0,A.Bp)("HttpClientHook");let he=class{isSupported(){return!1}};he=(0,T.Cg)([A.DF.Service(pe,{name:"__default__"})],he);const ge="ownSign";let ve=localStorage.getItem(ge);function me(e){return`base64:${(0,E.WG)(e)}`}function fe(e){var t;null===(t=null===e||void 0===e?void 0:e.definitions)||void 0===t||t.forEach(e=>{var t;const{selectionSet:i,operation:r}=e;null===(t=null===i||void 0===i?void 0:i.selections)||void 0===t||t.forEach(e=>{var t,i;null===(i=null===(t=null===e||void 0===e?void 0:e.selectionSet)||void 0===t?void 0:t.selections)||void 0===i||i.forEach(e=>{var t,i;"mutation"===r?"createExportTask"===e.name.value&&(null===(t=null===e||void 0===e?void 0:e.arguments)||void 0===t||t.forEach(e=>{var t;"data"===e.name.value&&(null===(t=e.value)||void 0===t||t.fields.forEach(e=>{ye("conditionWrapper","rsql",e)}))})):"query"===r&&(null===(i=null===e||void 0===e?void 0:e.arguments)||void 0===i||i.forEach(e=>{ye("queryWrapper","rsql",e)}))})})})}function ye(e,t,i){var r,o,n;if(i.name.value===e){const e=null===(o=null===(r=i.value)||void 0===r?void 0:r.fields)||void 0===o?void 0:o.find(e=>e.name.value===t);e&&!(null===(n=e.value.value)||void 0===n?void 0:n.startsWith("base64:"))&&(e.value=Object.assign(Object.assign({},e.value),{value:me(e.value.value)}))}}class be{constructor(){this.clientMap=new Map,this.encodeRsql=!1,this.enableTranslate=!1,this.middleware=[],this.headers={},this.variables={},this.extendVariables=void 0}static getInstance(){return this.instance||(this.instance=new be),this.instance}getBaseURL(){return this.baseURL||window.location.origin}setBaseURL(e){this.baseURL=e}setHeaders(e){this.headers=e}setEncodeRsql(e){this.encodeRsql=e}getEncodeRsql(){return this.encodeRsql}setEnableTranslate(e){this.enableTranslate=e}getEnableTranslate(){return this.enableTranslate}getHeaders(){return this.headers}setDefaultMiddleware(e){const t=ie.getInterceptors(),{translate:i,networkError:r,actionRedirect:o,requestSuccess:n,loginRedirect:a,requestError:l,messageHub:s}=t,{translate:d,networkError:c,actionRedirect:u,requestSuccess:p,loginRedirect:h,requestError:g,messageHub:v,beforeInterceptors:m,afterInterceptors:f}=e,y=[];this.appendInterceptors(y,m),this.getEnableTranslate()&&this.appendInterceptor(y,i,d),this.appendInterceptor(y,r,c),this.appendInterceptor(y,o,u),this.appendInterceptor(y,n,p),this.appendInterceptor(y,a,h),this.appendInterceptor(y,l,g),this.appendInterceptor(y,s,v),this.appendInterceptors(y,f),this.defaultMiddleware=ee(y)}appendInterceptors(e,t){t&&(Array.isArray(t)?t:[t]).forEach(t=>{t&&e.push(t)})}appendInterceptor(e,t,i){if(null===i)return;const r=i||t;r&&e.push(r)}setMiddleware(e){this.middleware=e.map(e=>Z(e))}commonQuery(e){return(0,T.sH)(this,void 0,void 0,function*(){const{module:t,model:i,method:r,param:o,variables:n,responseBody:a="{}",context:l}=e,s=`${i}Query`,d=`query {\n      ${s} {\n        ${r}(${o}) ${a}\n      }\n    }`,c=yield this.query(t,d,Object.assign(Object.assign({},n),this.variables),l);return c.data[s][r]})}commonMutate(e){return(0,T.sH)(this,void 0,void 0,function*(){const{module:t,model:i,method:r,param:o,variables:n,responseBody:a="{}",context:l}=e,s=`${i}Mutation`,d=`mutation {\n      ${s} {\n        ${r}(${o}) ${a}\n      }\n    }`,c=yield this.mutate(t,d,Object.assign(Object.assign({},n),this.variables),l);return c.data[s][r]})}query(e,t,i,r){if(!this.prefetchCheck(f,e))throw new Error("Query module");return this.request(f,e,t,i,r,(e,t)=>this.$$query(e,t))}$$query(e,t){return(0,T.sH)(this,void 0,void 0,function*(){const{moduleName:i}=e,{gql:r,variables:o,context:n}=t,a=n||{},{__queryParams:l}=a,s=(0,T.Tt)(a,["__queryParams"]);try{const e=yield this.getClient(`${i}${this.resolvePostfix(n)}`).query({query:this.parseGQL(r),variables:o,context:s});Y(e),le();const a=t;return a.result=e,a}catch(d){this.throwClientError(d,t)}})}mutate(e,t,i,r){if(!this.prefetchCheck(y,e))throw new Error("Mutate module");return this.request(y,e,t,i,r,(e,t)=>this.$$mutate(e,t))}$$mutate(e,t){return(0,T.sH)(this,void 0,void 0,function*(){const{moduleName:i}=e,{gql:r,variables:o,context:n}=t,a=n||{},{__queryParams:l}=a,s=(0,T.Tt)(a,["__queryParams"]);try{const e=yield this.getClient(`${i}${this.resolvePostfix(n)}`).mutate({mutation:this.parseGQL(r),variables:o,context:s});Y(e);const a=t;return a.result=e,a}catch(d){this.throwClientError(d,t)}})}request(e,t,i,r,o,n){return(0,T.sH)(this,void 0,void 0,function*(){const a=this.prepareRequestParameters(t,r,o);r=a.variables,o=a.context;const l={operation:e,moduleName:t},s={gql:i,variables:r,context:o};yield be.executeHookBefore(l,s);const d=yield n(l,s);return yield be.executeHookAfter(l,d),d.result})}prepareRequestParameters(e,t,i){if(this.extendVariables&&this.extendVariables instanceof Function){const i=this.extendVariables(e,t);t=Object.assign(Object.assign({},t),i)}return{variables:Object.assign(Object.assign({},t||{}),{path:(null===t||void 0===t?void 0:t.path)||ue()}),context:i||{}}}parseGQL(e){let t;return t="string"===typeof e?r.Ay`
        ${e}
      `:e,t}throwClientError(e,t){var i;const r=e;if((null===(i=null===r||void 0===r?void 0:r.message)||void 0===i?void 0:i.startsWith("Syntax Error"))&&console.error("Syntax Error, gql body:",t),e instanceof G)throw new Error("Invalid request.");throw new v(r.message,this.convertThrowError(r),r)}convertThrowError(e){const{graphQLErrors:t,networkError:i,response:r}=e;return{errors:t,extensions:null===r||void 0===r?void 0:r.extensions,networkError:i}}getClient(e){if(this.clientMap.has(e))return this.clientMap.get(e);const t={uri:`${this.getBaseURL()}/pamirs/${e}`,credentials:"include"},i=new F.Ch((t,i)=>{const r={"Accept-Timezone":(0,N.determine)().name()},o=new URL(`${window.location.origin}/${E.pU.decrypt(`${window.location.pathname}${window.location.search}`).replace(";","?").replaceAll(";","&")}`),n=(e,t,i)=>{const n=o.searchParams.get(e),a=n||t;null!=a&&(null===i||void 0===i||i(a)),a&&(r[e]=a)};return n("module",e),n("ownSign",ve,e=>{localStorage.setItem(ge,e),ve=e}),t.setContext(({headers:e={}})=>({headers:Object.assign(Object.assign(Object.assign({},this.headers),r),e)})),i(t)}),r=new O.P(Object.assign({},t)),o=new R.z(Object.assign(Object.assign({},t),{batchInterval:300,batchMax:20,batchDebounce:!0})),n=F.Ch.split(e=>e.getContext().batch,o,r),a=new F.Ch((e,t)=>{if(this.getEncodeRsql()&&e.query)try{fe(e.query)}catch(i){console.error("encodeGqlRsql",i)}return t(e)}),l=F.Ch.from([...this.middleware,...this.defaultMiddleware?[this.defaultMiddleware]:[],i,a,n]),s=new k.D9({addTypename:!1}),d=new D.Ay({link:l,cache:s,defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"},mutate:{fetchPolicy:"no-cache"}}});return this.clientMap.set(e,d),d}prefetchCheck(e,t){if(!t)throw new Error(`Module name is undefined when ${e}`);return!0}resolvePostfix(e){if(!e)return"";let t="",i="";if(e.batch&&(t="/batch"),e.__queryParams){const t=Object.entries(e.__queryParams).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(t))}`);t.length>0&&(i=`?${t.join("&")}`)}return`${t}${i}`}setVariable(e,t){this.variables[e]=t}removeVariable(e){delete this.variables[e]}setExtendVariables(e){this.extendVariables=e}removeExtendVariables(){this.extendVariables=void 0}static executeHookBefore(e,t){return(0,T.sH)(this,void 0,void 0,function*(){yield be.executeHook(e,e=>{var i;return null===(i=e.before)||void 0===i?void 0:i.call(e,t)})})}static executeHookAfter(e,t){return(0,T.sH)(this,void 0,void 0,function*(){yield be.executeHook(e,e=>{var i;return null===(i=e.after)||void 0===i?void 0:i.call(e,t)})})}static executeHook(e,t){return(0,T.sH)(this,void 0,void 0,function*(){yield Promise.all(A.DF.RawInstantiates(pe).filter(t=>t.isSupported(e)).map(e=>t(e)))})}}class Ce{constructor(e){this.parameters=e}stringParameter(e,t,i){return this.parameters[e]={type:"string",key:e,value:t,serialize:i},this}numberParameter(e,t){return this.parameters[e]={type:"number",key:e,value:t},this}enumerationParameter(e,t){return this.parameters[e]={type:"enumeration",key:e,value:t},this}booleanParameter(e,t){return this.parameters[e]={type:"boolean",key:e,value:t},this}objectParameter(e,t){return this.parameters[e]={type:"object",key:e,value:t},this}buildObjectParameter(e,t){const i=C();return this.parameters[e]={type:"object",key:e,value:i},null===t||void 0===t||t(new Ce(i)),this}buildArrayParameter(e,t,i){if(void 0===t)return this;if(null===t)return this.nullParameter(e),this;const r=[];this.parameters[e]={type:"array",key:e,value:r};for(const o of t)if(void 0!==o)if(null===o)r.push(null);else{const e=C();i(new Ce(e),o),r.push(e)}return this}nullParameter(e){return this.parameters[e]={type:"object",key:e,value:"null"},this}nullArrayParameter(e){return this.parameters[e]={type:"object",key:e,value:"[]"},this}}class xe{constructor(e){this.parameters=e}getParameters(){return this.parameters}parameter(...e){return e.forEach(e=>{this.$parameter(this.parameters,e)}),this}buildParameters(e,t){const i=w();return t(new xe(i)),this.parameters[e]=[e,i],this}fragmentParameter(e,t){return this.parameters[e]=[e,t],this}$parameter(e,t){if(Array.isArray(t)){const[i,r]=t;if(Array.isArray(r)){const t=w();e[i]=t,r.forEach(e=>{this.$parameter(t,e)})}else e[i]=[i,r]}else e[t]=t}}function we(e){return Promise.all(Object.entries(e).map(([e,t])=>(0,T.sH)(this,void 0,void 0,function*(){if(e!==b){if(Array.isArray(t)){const[e,i]=t,r=yield Se(i);return r?`${e}{${r}}`:void 0}if(S(t)){const i=yield Se(t);return i?`${e}{${i}}`:void 0}return t}}))).then(e=>e.filter(e=>null!=e).join(","))}function Se(e){return(0,T.sH)(this,void 0,void 0,function*(){if("string"===typeof e)return`...${e}`;if(Array.isArray(e)){if(!e.length)return;return Promise.all(e.map(e=>(0,T.sH)(this,void 0,void 0,function*(){if(Array.isArray(e)){const[t,i]=e;return`${t}{${yield Se(i)}`}return e}))).then(e=>e.filter(e=>null!=e).join(","))}return we(e)})}function Te(e){return Promise.all(e.map(e=>(0,T.sH)(this,void 0,void 0,function*(){const t=yield e;return"string"===typeof t?t:`fragment ${t.name} on ${t.definition} {${yield we(t.parameters)}}`}))).then(e=>e.filter(e=>null!=e).join(""))}function Ee(e,t){return Promise.all(Object.entries(e).map(([e,i])=>(0,T.sH)(this,void 0,void 0,function*(){if(e===b)return;if(Array.isArray(i))throw new Error("Invalid parameter define.");const{type:r,key:o,value:n,serialize:a}=i;switch(r){case"string":return Ae(o,n,a,t);case"number":return De(o,n,t);case"boolean":return Fe(o,n,t);case"enumeration":return Re(o,n,t);case"object":return Oe(o,n,t);case"array":return Ne(o,n,t)}return ke(o,n,t)}))).then(e=>e.filter(e=>null!=e).join(","))}function Ae(e,t,i,r){if(void 0===t)return;if(null===t)return r?`${e}: null`:void 0;let o;return Array.isArray(t)?(o=i?E.sK.serializableStringArray(t.filter(e=>!!e).map(e=>E.sK.serializableSimpleString(`${e}`))):E.sK.serializableStringArray(t.filter(e=>null!=e).map(e=>`${e}`)),`${e}:${o}`):(o=`${t}`,i&&(o=E.sK.serializableSimpleString(o)),`${e}:"${o}"`)}function ke(e,t,i){if(void 0===t)return;if(null===t)return i?`${e}: null`:void 0;let r;return r=Array.isArray(t)?`[${t.filter(e=>null!=e).map(e=>`${e}`).join(",")}]`:`${t}`,`${e}:${r}`}function De(e,t,i){return ke(e,t,i)}function Fe(e,t,i){return ke(e,t,i)}function Re(e,t,i){return ke(e,t,i)}function Oe(e,t,i){return(0,T.sH)(this,void 0,void 0,function*(){if(void 0!==t){if(null===t)return i?`${e}: null`:void 0;if(x(t)){const r=yield Ee(t,i);if(!r&&!i)return;return`${e}:{${r}}`}return`${e}:${t}`}})}function Ne(e,t,i){return(0,T.sH)(this,void 0,void 0,function*(){if(void 0===t)return;if(null===t)return i?`${e}: null`:void 0;const r=yield Promise.all(t.map(e=>(0,T.sH)(this,void 0,void 0,function*(){if(null===e)return i?"null":void 0;const t=yield Ee(e,i);return t||i?`{${t}}`:void 0})));return r.length||i?`${e}:[${r.filter(e=>null!=e).join(",")}]`:void 0})}class $e{constructor(e){this.fragment=e,this.builder=new xe(e.parameters)}getParameters(){return this.builder.getParameters()}parameter(...e){return this.builder.parameter(...e),this}buildParameters(e,t){return this.builder.buildParameters(e,t),this}fragmentParameter(e,t){return this.builder.fragmentParameter(e,t),this}toString(){return Te([this.fragment])}}const Me=be.getInstance();class Ie{static query(e,t,i){return new _e(e,t,i)}static mutation(e,t,i){return new Pe(e,t,i)}static fragment(e,t){return new $e({name:e,definition:t,parameters:{}})}}class Le{constructor(e,t,i,r){this.requestParameters=C(),this.responseParameters=w(),this.responseFragmentParameters=[],this.type=e,this.modelName=t,t||console.error("modelName is blank",e,i),this.name=i,this.fragments=r||[]}buildRequest(e){return e(new Ce(this.requestParameters)),this}buildResponse(e){return e(new xe(this.responseParameters)),this}responseFragmentParameter(e,...t){return[e,...t||[]].forEach(e=>this.responseFragmentParameters.push(e)),this}mountFragment(e,t){return this.fragments.push(t),this}buildFragment(e,t,i){const r=w();return this.fragments.push({name:e,definition:t,parameters:r}),i(new xe(r)),this}toString(){return(0,T.sH)(this,void 0,void 0,function*(){const[e,t,i]=yield Promise.all([this.buildRequestParameters(),this.buildResponseParameters(),this.buildFragments()]);return`${this.type}{${this.modelName}{${this.name}${e?`(${e})`:""}${t?`{${t}}`:""}}}${i}`})}buildRequestParameters(){return Ee(this.requestParameters,!0)}buildResponseParameters(){return we(this.responseParameters).then(e=>[e,...this.responseFragmentParameters.map(e=>`...${e}`)].join(","))}buildFragments(){return Te(this.fragments)}}class _e extends Le{constructor(e,t,i){super("query",je("query",e),t,i)}request(e,t,i){return(0,T.sH)(this,void 0,void 0,function*(){return Me.query(e,yield this.toString(),t,i).then(e=>e.data[this.modelName][this.name])})}}class Pe extends Le{constructor(e,t,i){super("mutation",je("mutation",e),t,i)}request(e,t,i){return(0,T.sH)(this,void 0,void 0,function*(){return Me.mutate(e,yield this.toString(),t,i).then(e=>e.data[this.modelName][this.name])})}}function je(e,t){const i=`${e[0].toUpperCase()}${e.slice(1)}`;return t.endsWith(i)?t:`${t}${i}`}var Ve,Be;(function(e){e["DEBUG"]="DEBUG",e["INFO"]="INFO",e["WARN"]="WARN",e["ERROR"]="ERROR",e["SUCCESS"]="SUCCESS"})(Ve||(Ve={})),function(e){e[e["ERROR"]=1]="ERROR",e[e["WARN"]=2]="WARN",e[e["INFO"]=4]="INFO",e[e["SUCCESS"]=8]="SUCCESS",e[e["DEBUG"]=16]="DEBUG"}(Be||(Be={}));class He extends E.ug{getCurrentMessageLevel(){let{currentMessageLevel:e}=this;if(!e){const t={NODE_ENV:"production",BASE_URL:"/"}.MESSAGE_LEVEL||Ve.SUCCESS;e=Be[t],(!e||e<=0)&&(e=Be.SUCCESS),this.currentMessageLevel=e}return e}isNotify(e){return this.getCurrentMessageLevel()>=(Be[e]||0)}debug(e,t){this.isNotify(Ve.DEBUG)&&this.notifyHandler(Ve.DEBUG,e,t)}info(e,t){this.isNotify(Ve.INFO)&&this.notifyHandler(Ve.INFO,e,t)}warn(e,t){this.isNotify(Ve.WARN)&&this.notifyHandler(Ve.WARN,e,t)}error(e,t){this.isNotify(Ve.ERROR)&&this.notifyHandler(Ve.ERROR,e,t)}success(e,t){this.isNotify(Ve.SUCCESS)&&this.notifyHandler(Ve.SUCCESS,e,t)}onDebug(e){this.on(Ve.DEBUG,e)}onInfo(e){this.on(Ve.INFO,e)}onWarn(e){this.on(Ve.WARN,e)}onError(e){this.on(Ve.ERROR,e)}onSuccess(e){this.on(Ve.SUCCESS,e)}clearAll(){this.eventHandlerMap.clear()}}const We=new He;class Ue{constructor(){this.messageHubs=new Map}getMessageHubConstructor(){return this.messageHubConstructor}setMessageHubConstructor(e){this.messageHubConstructor=e}generatorMessageHub(e){const{messageHubConstructor:t}=this;if(!t)throw new Error("Invalid message hub constructor");return(0,E.Fl)(t,e)}get(e){return this.messageHubs.get(e)}delete(e){this.messageHubs.delete(e)}clearAll(){this.messageHubs.forEach(e=>{e.unsubscribe()}),this.messageHubs.clear()}register(e){if(!e)throw new Error("Please pass in required parameters");const t=this.generatorMessageHub(e);return this.messageHubs.set(e,t),t}publish(e){this.messageHubs.forEach(t=>{t.publish(e)})}}const qe=new Ue;var ze=i(26462);class Ge{constructor(e){this.identifier=e,this.sub$=new ze.B7,this.identifier=e}subscribe(e,t){return t?this.sub$.pipe((0,ze.pb)(e=>e.level===t)).subscribe(e):this.sub$.subscribe(e)}publish(e){this.sub$.next(e)}unsubscribe(){this.sub$.unsubscribe(),qe.delete(this.identifier)}}function Ke(e){return qe.register(e)}qe.setMessageHubConstructor(Ge);class Xe{success(e){var t,i;const r=null===(i=null===(t=e.extensions)||void 0===t?void 0:t.extra)||void 0===i?void 0:i.action;if(r&&"object"===typeof r){const{moduleName:e,viewType:t,model:i,name:o,target:n}=r;if(!e||!t||!i||!o)return!0;const a=[`module=${e}`,`viewType=${t}`,`model=${i}`,`action=${o}`];if(n&&a.push(`target=${n}`),this.redirectToPage(a))return!1}return!0}redirectToPage(e){const t=`${origin}/${E._$.appendBasePath("page",!1)};${e.join(";")}`;return window.location.href=t,!0}}class Qe{error(e){var t;const{errors:i}=e;if(!i||!i.length)return!0;for(const r of i){const i=null===(t=r.extensions)||void 0===t?void 0:t.errorCode,o=Number(i);if(Number.isNaN(o))continue;const{pathname:n}=window.location;if(Qe.USER_NOT_LOGIN_ERROR.includes(o)&&!Qe.NOT_REDIRECT_PATH_NAMES.includes(n)&&this.redirectToLogin(e))return!1}return!0}redirectToLogin(e){if(window.location.href.includes("?redirect_url="))return!0;ce(void 0);const{pathname:t,search:i}=window.location,r=t+i;return window.location.href=`${E._$.appendBasePath("login")}?redirect_url=${r}`,!0}}Qe.USER_NOT_LOGIN_ERROR=[11500001,20080002],Qe.NOT_REDIRECT_PATH_NAMES=["/login","/auth/login"].map(e=>E._$.appendBasePath(e));class Ye{success(e){const{extensions:t}=e;if(t&&t.messages){const e=t.messages[0];[Ve.SUCCESS,Ve.DEBUG,Ve.INFO,Ve.WARN].includes(e.level)&&qe.publish(e)}return!0}error(e){var t;const{errors:i,extensions:r}=e;let o=null===(t=null===r||void 0===r?void 0:r.messages)||void 0===t?void 0:t[0];if(!o){const e=null===i||void 0===i?void 0:i[0];if(!e)return!0;const{message:t,extensions:r}=e;let n={};if(r&&Object.keys(r).length){const{messages:e}=r;if(e&&e.length){const{level:t,code:i,path:r,errorType:o,message:a}=e[0];n={level:t,errorCode:i,path:r,errorType:o,message:a}}else n={level:r.level,errorCode:r.errorCode,errorType:r.errorType}}o=Object.assign({message:t},n)}return o&&Object.keys(o).length&&qe.publish(o),!0}}class Je{error(e){const{networkError:t}=e;if(t){const{name:e,message:i}=t;if(e&&i)if(i.includes("Unexpected token")||i.includes("is not valid JSON")){const e=Reflect.get(window,"translate"),t="后端服务可能未启动或者正在启动中，请检查后端服务状态。";console.error(i),We.error(e&&e(t)||t)}else We.error(i);return!1}return!0}}var Ze,et=i(48182);(function(e){e["NO_PERMISSION_ON_MODULE"]="11040035",e["NO_PERMISSION_ON_VIEW"]="11040017",e["NO_PERMISSION_ON_MODULE_ENTRY"]="11500002",e["NO_PERMISSION_ON_HOMEPAGE"]="11500003",e["FORM_VALIDATE_ERROR"]="10050009"})(Ze||(Ze={}));const tt=[Ze.NO_PERMISSION_ON_MODULE,Ze.NO_PERMISSION_ON_VIEW,Ze.NO_PERMISSION_ON_MODULE_ENTRY,Ze.NO_PERMISSION_ON_HOMEPAGE],it=["10030007","20200008","20060008"];function rt(e){return it.includes((0,et.A)(e))}const ot=["10030078","20060080"];function nt(e){return ot.includes((0,et.A)(e))}function at(e){return lt(e,tt)}function lt(e,t){const i=m(e);return!!i&&t.includes(i)}class st{static ignoredFormValidateMessage(e){return e.code===Ze.FORM_VALIDATE_ERROR||!!e.field||!e.message}error(e){var t,i,r,o,n;const{errors:a}=e;if(a&&a.length){const e=[];for(const l of a){const a=(null===(t=l.extensions)||void 0===t?void 0:t.errorCode)||"";if(!tt.includes(a))if(a===Ze.FORM_VALIDATE_ERROR){let t=!1;for(const r of(null===(i=l.extensions)||void 0===i?void 0:i.messages)||[]){if(st.ignoredFormValidateMessage(r))continue;const i=r.message;if(i&&!e.includes(i)&&(We.error(i),e.push(i),t=!0),!t){const t=l.message;t&&!e.includes(t)&&We.error(t)}}}else{const t=(null===(n=null===(o=null===(r=l.extensions)||void 0===r?void 0:r.messages)||void 0===o?void 0:o[0])||void 0===n?void 0:n.message)||l.message;e.includes(t)||(We.error(t),e.push(t))}}}return!0}}class dt{success(e){var t,i;return null===(i=null===(t=e.extensions)||void 0===t?void 0:t.messages)||void 0===i||i.forEach(e=>{const{level:t,message:i}=e;if(t&&i)switch(t){case Ve.DEBUG:We.debug(i);break;case Ve.INFO:We.info(i);break;case Ve.WARN:We.warn(i);break;case Ve.ERROR:We.error(i);break;case Ve.SUCCESS:We.success(i);break;default:console.warn("Invalid message level",e)}else console.warn("Invalid message",e)}),!0}}function ct(e){var t;const i=JSON.stringify(e);if(i.includes("$t(")){const r=Reflect.get(window,"translate"),o=JSON.parse(i.replace(/\$t\((.*?)\)/g,(e,t)=>{const i=null===r||void 0===r?void 0:r(t);return i?i.replaceAll('"','\\"'):t}));null===(t=e.errors)||void 0===t||t.forEach((e,t)=>{var i;Object.assign(e,null===(i=o.errors)||void 0===i?void 0:i[t])}),Object.assign(e,o)}}class ut{success(e){return ct(e),!0}error(e){return ct(e),!0}}function pt(e,t){ie.register(e,t)}pt("translate",ut),pt("networkError",Je),pt("messageHub",Ye),pt("requestSuccess",dt),pt("actionRedirect",Xe),pt("loginRedirect",Qe),pt("requestError",st)},68691:(e,t,i)=>{i.d(t,{jk:()=>A.jk,w8:()=>I,SJ:()=>A.SJ,Os:()=>r.Os,Sk:()=>kt,fB:()=>y,tS:()=>h});var r=i(65536),o=i(15215),n=i(89284),a=i(78422),l=i(70164),s=i(67774),d=i(16022),c=i(25195),u=i(55543),p=i(88250);function h(e){var t,i,r;const o={},a=null===(t=null===e||void 0===e?void 0:e.widgets)||void 0===t?void 0:t.find(e=>e.dslNodeType===n.zX.TEMPLATE&&e.slot===n.zi);return o.popupViewDslNode=a,o.currentViewDslNode=null===(r=null===(i=a||e)||void 0===i?void 0:i.widgets)||void 0===r?void 0:r.find(e=>e.dslNodeType===n.zX.VIEW),o}function g(e,t){t.forEach(t=>{const{widgets:i}=e,r=i.findIndex(e=>e.dslNodeType===n.zX.TEMPLATE&&e.slot===t);-1!==r&&i.splice(r,1)})}function v(e){switch(e){case l.qi.Table:return{dslNodeType:n.zX.VIEW,type:e,widgets:[{dslNodeType:n.zX.VIEW,type:l.qi.Search,widgets:[{dslNodeType:n.zX.ELEMENT,widget:p.wg,slot:"search",widgets:[]}]},{dslNodeType:n.zX.ELEMENT,widget:"action-bar",slot:"actionBar",widgets:[]},{dslNodeType:n.zX.ELEMENT,widget:p.Uj,slot:"table",style:{height:"400px"},widgets:[{dslNodeType:n.zX.ELEMENT,widget:"expand-column",slot:"expandRow",widgets:[]},{dslNodeType:n.zX.SLOT,name:"fields",widgets:[]},{dslNodeType:n.zX.ELEMENT,widget:"action-column",slot:"rowActions",widgets:[]}]}]};case l.qi.Form:return{dslNodeType:n.zX.VIEW,type:e,widgets:[{dslNodeType:n.zX.ELEMENT,widget:p.mi,slot:"form",cols:2,widgets:[{dslNodeType:n.zX.SLOT,name:"fields",widgets:[]}]}]};case l.qi.Detail:return{dslNodeType:n.zX.VIEW,type:e,widgets:[{dslNodeType:n.zX.ELEMENT,widget:p.bp,slot:"detail",cols:2,widgets:[{dslNodeType:n.zX.SLOT,name:"fields",widgets:[]}]}]};default:throw new Error("Default create popup layout unsupported view type.")}}function m(){return{dslNodeType:n.zX.ELEMENT,widget:"action-bar",slot:"footer",widgets:[]}}function f(e){return{dslNodeType:n.zX.TEMPLATE,slot:"footer",widgets:[{dslNodeType:n.zX.ACTION,actionType:l.X2.Client,model:e,name:l.qh.$$internal_DialogCancel,label:(0,a.cAb)("取消"),type:c.VQ.default.toUpperCase(),widgets:[]},{dslNodeType:n.zX.ACTION,actionType:l.X2.Client,model:e,name:l.qh.$$internal_DialogSubmit,label:(0,a.cAb)("确定"),type:c.VQ.primary.toUpperCase(),widgets:[]}]}}function y(e,t,i){var r;return(0,o.sH)(this,void 0,void 0,function*(){let o,c=t;const p=yield a.Qvr.get(i.model),h=yield a.Qvr.get(i.resModel||i.model);if(!p||!h)return;let y=!0;if(c){let e;n.vV.isView(c)&&(e=c.type),e||(e=i.resViewType),o={type:null===e||void 0===e?void 0:e.toUpperCase(),model:h.model,name:`popupView-${i.name}`,template:""}}else if(i.actionType===l.X2.View){let e;if(e=i.sessionPath?yield(0,s.D8B)(i.sessionPath,()=>a.Sgb.get(p.model,i.name)):yield a.Sgb.get(p.model,i.name),e){y=!!e.resViewName;const{name:t,dsl:i,type:n}=e.resView||{};i&&(o={type:null===(r=n||e.viewType)||void 0===r?void 0:r.toUpperCase(),model:h.model,name:t},c=(0,a.LYz)(i))}}if(!o)return;const C=o.type||i.resViewType;y&&d.Xx.ofNullable(C).map(e=>[l.qi.Form,l.qi.Detail].includes(e)).ifPresent(e=>{y=e}),c||(console.error("view dsl definition not supported."),c=n.Be);const x=Object.assign(Object.assign({name:o.name},c),{widgets:[...c.widgets||[]]}),w=n.Bo.fetchSlotsBySlotNames(x,["actionBar","actions","header","footer"]),S=n.Bo.fetchSlotsBySlotNames(e,["header","footer"]);!w.header&&S.header&&(w.header=S.header),!w.footer&&S.footer&&(w.footer=S.footer);const T=w.actionBar||w.actions;y?(!w.footer&&T&&(w.footer=Object.assign(Object.assign({},T),{dslNodeType:n.zX.TEMPLATE,slot:"footer"})),g(x,["actionBar","actions","header","footer"])):g(x,["header","footer"]);const E=[],{header:A,default:k}=w;let{footer:D}=w;if(A&&E.push(A),k){let t=u.Ae.selector({viewType:C,module:i.resModule||h.module||i.module||p.moduleName,moduleName:i.resModuleName||h.moduleName||i.moduleName||p.moduleName,model:h.model,modelName:h.name,viewName:null===o||void 0===o?void 0:o.name,inline:!0,actionName:i.name,actionWidget:i.widget});t||(t=v(C),d.$1.log("使用弹出层默认layout",t)),e=b(e||{dslNodeType:n.zX.TEMPLATE,slot:n.zi,width:c.width},t),E.push({dslNodeType:n.zX.TEMPLATE,slot:n.zi,widgets:[n.Bo.mergeTemplateToLayout(t,x)]})}const F=m();return D||(D=f(o.model),w.footer=D),E.push(Object.assign(Object.assign({},D),{widgets:[n.Bo.mergeSlotsToLayout(F,D,w)]})),{model:p.model,modelName:p.name,resModel:h.model||p.model,resModelName:h.name||p.name,module:i.module||p.module,moduleName:i.moduleName||p.moduleName,resModule:i.resModule||h.module||i.module||p.module,resModuleName:i.resModuleName||h.moduleName||i.moduleName||p.moduleName,viewType:C,viewDslNode:c,dslDefinition:Object.assign(Object.assign({dslNodeType:n.zX.TEMPLATE,slot:n.zi},e||{}),{title:(null===e||void 0===e?void 0:e.title)||i.label||i.displayName,widgets:E})}})}function b(e,t){return Object.entries(t).forEach(([t,i])=>{[...n.r$,n.gx].includes(t)||(e[t]=i)}),e}var C=i(13193),x=i(30717),w=i(47444),S=i(20903),T=i(91702),E=i(83247),A=i(87023);let k=class extends A.jk{initialize(e){return super.initialize(e),this}resolveChildrenCondition(e,t){t.forEach(t=>{if(t.children&&t.children.length)e[t.name]={},this.resolveChildrenCondition(e[t.name],t.children);else{const i=t.textContent||null;e[t.name]=i}})}clickAction(){var e;return null===(e=this.$router)||void 0===e||e.push({segments:[{path:"page",parameters:{scene:this.action&&this.action.name},extra:{preserveParameter:!0}}]}),!0}};k=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.View}))],k);class D extends k{constructor(){super(...arguments),this.defaultSubviewType=l.qi.Form}get viewMode(){return this.computeViewMode(this.action)}get subviewType(){var e;return(null===(e=this.popupDslDefinition)||void 0===e?void 0:e.viewType)||this.defaultSubviewType}get subviewModel(){var e;return(null===(e=this.popupDslDefinition)||void 0===e?void 0:e.resModel)||super.model.model}get subviewModelName(){var e;return(null===(e=this.popupDslDefinition)||void 0===e?void 0:e.resModelName)||super.model.name}get subviewModule(){var e;return(null===(e=this.popupDslDefinition)||void 0===e?void 0:e.resModule)||super.model.module}get subviewModuleName(){var e;return(null===(e=this.popupDslDefinition)||void 0===e?void 0:e.resModuleName)||super.model.moduleName}get openerDataSource(){return this.currentOpenerDataSource||this.parentOpenerDataSource}get openerActiveRecords(){return this.currentOpenerActiveRecords||this.parentOpenerActiveRecords}initialize(e){super.initialize(e);const{popupViewDslNode:t,currentViewDslNode:i}=h(this.getDsl());return this.popupViewDslNode=t,this.currentViewDslNode=i,this}onSubmit(e){var t;const{showRecords:i,submitRecords:r}=e;i&&i.forEach(e=>{e.__lastUpdateFromLocal=!0,e.__updateTimestamp=`${(new Date).getTime()}`});const o=null===(t=this.action)||void 0===t?void 0:t.contextType;if(o){switch(o){case l.og.Single:this.updateDataSourceByEntityForSubmit({showRecords:[i[0]],submitRecords:r[0]});break;case l.og.Batch:case l.og.SingleAndBatch:this.updateDataSourceByEntityForSubmit({showRecords:i,submitRecords:r});break;case l.og.ContextFree:this.pushDataSourceForSubmit({showRecords:i,submitRecords:r});break;default:throw new Error(`Invalid context type. value = ${o}`)}return this.flushDataSource(),!0}return!1}updateDataSourceByEntityForSubmit(e,t){const{showRecords:i,submitRecords:r}=e,o=this.metadataRuntimeContext.extendData.subviewSubmitCache;o&&a.F1e.operator(this.dataSource,o).updateByEntity(r,t),this.updateDataSourceByEntity(i,t)}pushDataSourceForSubmit(e,t){const{showRecords:i,submitRecords:r}=e,o=this.metadataRuntimeContext.extendData.subviewSubmitCache;o&&(t=t||a.F1e.defaultPushPredict.bind(o),a.F1e.operator(this.dataSource,o).push(r,t)),this.pushDataSource(i,t)}onCancel(e){return!0}clickAction(...e){return(0,o.sH)(this,void 0,void 0,function*(){return d.$1.group(`popupViewAction click:${this.action.model}:${this.action.name}:${this.action.label}`),yield this.generatorPopupWidget(),d.$1.groupEnd(),!0})}generatorPopupWidget(){var e;return(0,o.sH)(this,void 0,void 0,function*(){const t=yield this.generatorPopupDslDefinition();if(!t)return;null===(e=this.metadataSubviewWidget)||void 0===e||e.dispose(),this.metadataSubviewWidget=void 0,this.loadOpenerData();const{data:i,isFetchData:r}=yield this.loadData();this.metadataSubviewWidget||(this.metadataSubviewWidget=this.createMetadataSubviewWidget()),this.initSubview(t,i),this.createPopupWidget(i,r)})}generatorPopupDslDefinition(){return(0,o.sH)(this,void 0,void 0,function*(){const{action:e}=this;let{popupDslDefinition:t,currentViewDslNode:i}=this;if(void 0===i&&(i=yield this.getViewDsl(),this.currentViewDslNode=i||null),void 0===t&&e&&(t=yield y(this.popupViewDslNode,i,Object.assign(Object.assign({},e),{label:this.label})),this.popupDslDefinition=t||null),t)return t;x.$xc.error((0,a.cAb)("错误"),(0,a.cAb)("未配置弹出层视图"))})}createMetadataSubviewWidget(){return this.createWidget(new T.f5,void 0,{metadataHandle:this.metadataHandle,rootHandle:this.rootHandle,internal:!0,isVirtual:!0,inline:!0,automatic:!0})}initSubview(e,t){var i,r,o,n,l,s;const{viewDslNode:d,dslDefinition:c}=e,{action:u}=this,p={type:this.subviewType,model:this.subviewModel,modelName:this.subviewModelName,module:this.subviewModule,moduleName:this.subviewModuleName,dsl:d,template:c,initialValue:t,context:this.buildContext()};if(u){const e=Object.assign(Object.assign({},u),{resViewType:this.subviewType,resModel:this.subviewModel,resModelName:this.subviewModelName,resModule:this.subviewModule,resModuleName:this.subviewModuleName,resViewMode:this.computeViewMode(u),resView:p}),{filter:t}=u;t&&(e.filter=(0,a.GsW)(t,(null===(i=this.activeRecords)||void 0===i?void 0:i[0])||{},(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},(null===(o=this.parentOpenerDataSource)||void 0===o?void 0:o[0])||{},this.scene,(null===(n=this.parentViewActiveRecords)||void 0===n?void 0:n[0])||{})),this.actionDomain&&(e.domain=this.actionDomain),this.subviewRuntimeContext=null===(l=this.metadataSubviewWidget)||void 0===l?void 0:l.initContextByViewAction(e)}else this.subviewRuntimeContext=null===(s=this.metadataSubviewWidget)||void 0===s?void 0:s.initContextByView(p);this.initSubviewAfterProperties()}computeViewMode(e){return(0,a.Ggx)(this.subviewType,e.contextType)}getViewLayout(){}getViewDsl(){var e;return null===(e=this.popupDslDefinition)||void 0===e?void 0:e.viewDslNode}getViewTemplate(){}initSubviewAfterProperties(){}createPopupDslDefinition(){var e;return null===(e=this.popupDslDefinition)||void 0===e?void 0:e.dslDefinition}loadOpenerData(){this.currentOpenerDataSource=this.parentDataSource,this.currentOpenerActiveRecords=this.parentActiveRecords}loadData(){var e,t,i;const r=null===(e=this.popupDslDefinition)||void 0===e?void 0:e.viewType;if(!r)return{data:[],isFetchData:!0};const o=null===(t=this.action)||void 0===t?void 0:t.contextType;if(!o)return{data:[],isFetchData:!0};const n=[l.qi.Form,l.qi.Detail].includes(r);let a,s;switch(o){case l.og.Single:a=[(0,S.A)((null===(i=this.activeRecords)||void 0===i?void 0:i[0])||{})],s=!1;break;case l.og.Batch:case l.og.SingleAndBatch:a=(0,S.A)(this.activeRecords||[]),s=!1;break;case l.og.ContextFree:a=n?[{}]:[],s=!0;break;default:throw new Error(`Invalid context type. value = ${o}`)}return{data:a,isFetchData:s}}isFetchData(e){}isNotNeedFetchData(e,t){var i;return t===l.og.Single&&(!e||!e[0]||!!e[0].__lastUpdateFromLocal||!(null===(i=e[0])||void 0===i?void 0:i.id))}executeExpression(e,t){var i,r;const o=this.activeRecords||[],n=this.scene;return C.r4.run({activeRecords:o,rootRecord:(null===(i=this.rootData)||void 0===i?void 0:i[0])||{},openerRecord:(null===(r=this.parentOpenerActiveRecords)||void 0===r?void 0:r[0])||{},scene:n,activeRecord:o[0]||{}},e,t)}}(0,o.Cg)([w.x0.Reactive()],D.prototype,"popupViewDslNode",void 0),(0,o.Cg)([w.x0.Reactive()],D.prototype,"currentViewDslNode",void 0),(0,o.Cg)([w.x0.Reactive()],D.prototype,"popupDslDefinition",void 0),(0,o.Cg)([w.x0.Reactive(),w.x0.Provide()],D.prototype,"viewMode",null),(0,o.Cg)([w.x0.Reactive()],D.prototype,"subviewType",null),(0,o.Cg)([w.x0.Reactive()],D.prototype,"subviewModel",null),(0,o.Cg)([w.x0.Reactive()],D.prototype,"subviewModelName",null),(0,o.Cg)([w.x0.Reactive()],D.prototype,"subviewModule",null),(0,o.Cg)([w.x0.Reactive()],D.prototype,"subviewModuleName",null),(0,o.Cg)([w.x0.Reactive()],D.prototype,"currentOpenerDataSource",void 0),(0,o.Cg)([w.x0.Reactive(),w.x0.Provide()],D.prototype,"openerDataSource",null),(0,o.Cg)([w.x0.Reactive()],D.prototype,"currentOpenerActiveRecords",void 0),(0,o.Cg)([w.x0.Reactive(),w.x0.Provide()],D.prototype,"openerActiveRecords",null),(0,o.Cg)([w.x0.Method(),w.x0.Provide()],D.prototype,"onSubmit",null),(0,o.Cg)([w.x0.Method(),w.x0.Provide()],D.prototype,"onCancel",null);var F=i(89610);let R=class extends A.jk{get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("取消")}get type(){var e,t;return this.inline?c.VQ.link:(null===(t=null===(e=this.getDsl().type)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||c.VQ.default}clickAction(){return(0,o.sH)(this,void 0,void 0,function*(){if((0,F.A)(this.onCancel)){const e=yield this.onCancel();return e}return!1})}clickActionAfter(e){return this.isDialog?this.closeDialog&&a.lGe.dispose(this.action):this.isDrawer&&this.closeDrawer&&a._s.dispose(this.action),e}};(0,o.Cg)([w.x0.Reactive()],R.prototype,"label",null),(0,o.Cg)([w.x0.Method(),w.x0.Inject()],R.prototype,"onCancel",void 0),(0,o.Cg)([w.x0.Reactive()],R.prototype,"type",null),R=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_DialogCancel}))],R);var O=i(97859),N=i(98916);let $=class extends A.jk{get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("确定")}get updateData(){let e=d.TM.toBoolean(this.getDsl().updateData);return(0,O.A)(e)&&(e=!1),e}get validateForm(){let e=d.TM.toBoolean(this.getDsl().validateForm);return(0,O.A)(e)&&(e=!0),e}clickAction(){return(0,o.sH)(this,void 0,void 0,function*(){if((0,F.A)(this.onSubmit)){const e=yield this.onSubmit({mapping:this.action.mapping,action:this.action});return e}return!1})}reloadDataSourceAndRecords(e){if(this.updateData&&e&&!(0,N.A)(e)){const{submitRecords:t}=e,i=Array.isArray(e)?e:t;this.reloadDataSource(i),this.reloadActiveRecords(i)}}clickActionAfter(e){return this.isDialog?this.closeDialog&&(this.reloadDataSourceAndRecords(),a.lGe.dispose(this.action)):this.isDrawer&&this.closeDrawer&&(this.reloadDataSourceAndRecords(),a._s.dispose(this.action)),e}};(0,o.Cg)([w.x0.Reactive()],$.prototype,"label",null),(0,o.Cg)([w.x0.Reactive()],$.prototype,"updateData",null),(0,o.Cg)([w.x0.Reactive()],$.prototype,"validateForm",null),(0,o.Cg)([w.x0.Method(),w.x0.Inject()],$.prototype,"onSubmit",void 0),(0,o.Cg)([w.x0.Method()],$.prototype,"clickAction",null),$=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_DialogSubmit}))],$);var M=i(52455);let I=class extends D{createPopupWidget(e){var t,i;const{popupDslDefinition:r}=this;if(!r)return;const n=this.createPopupDslDefinition(),a=null===(t=this.action)||void 0===t?void 0:t.contextType;let l=this.isFetchData(e);void 0===l&&a&&(l=!this.isNotNeedFetchData(e,a)),this.dialog=null===(i=this.metadataSubviewWidget)||void 0===i?void 0:i.createWidget(new M.h,void 0,{internal:!0,template:n,dataSource:l?void 0:e,mountedVisible:!0}),this.dialog&&(this.dialog.on("ok",()=>(0,o.sH)(this,void 0,void 0,function*(){this.onCloseDialog()})),this.dialog.on("cancel",()=>{this.onCloseDialog()}))}onCloseDialog(){var e,t,i;const r=null===(e=this.dialog)||void 0===e?void 0:e.getHandle();r&&a.onZ.INSTANCE.dispose(r),null===(t=this.metadataSubviewWidget)||void 0===t||t.dispose(),this.metadataSubviewWidget=null,null===(i=this.dialog)||void 0===i||i.dispose(!0),this.dialog=null,this.getChildrenWidget().forEach(e=>e.dispose()),this.childrenWidget=[],this.forceUpdate()}};I=(0,o.Cg)([E.DF.ClassFactory(T.M_.Token({actionType:l.X2.View,target:l.jq.Dialog}))],I);var L=i(54908),_=i(2086);let P=class extends I{get sharedViewActionName(){return this.getDsl().sharedViewActionName}loadData(){var e;const{sharedViewActionName:t}=this;let i,r,o,n;if(t){const e=this.rootRuntimeContext.model.modelActions.find(e=>e.name===t);if(!this.isValidViewAction(e))return s.PyZ.error((0,a.cAb)("无效的跳转动作")),{isFetchData:!1,data:[]};const l=this.generatorUrlByViewAction(e);o=e.model,n=e.name,i=l.title,r=l.parameters}else{const{matched:t}=(0,L.yE)(),l=null===(e=t.segmentParams)||void 0===e?void 0:e.page;if(!l)return s.PyZ.error((0,a.cAb)("无法获取链接参数")),{isFetchData:!1,data:[]};o=this.action.model,n=this.action.name,i=document.title,r=JSON.stringify(l)}return{isFetchData:!0,data:[{shareActionModel:o,shareActionName:n,parameters:r,browserTitle:i,language:a.YHI.getCodeByLocalStorage(),languageIsoCode:a.YHI.getIsoCodeByLocalStorage()}]}}isValidViewAction(e){return!!e&&(!!(0,a.QRK)(e)&&(!!e.target&&[l.jq.Router,l.jq.OpenWindow].includes(e.target)))}generatorUrlByViewAction(e){var t,i,r;const o=(0,a.Imd)(e,{usingLastedModule:!0});return this.inline&&(o.id=null===(i=null===(t=this.activeRecords)||void 0===t?void 0:t[0])||void 0===i?void 0:i.id,o.context=JSON.stringify(this.buildContext((null===(r=this.activeRecords)||void 0===r?void 0:r[0])||{}))),{title:_.Ap.generatorViewTitle(e)||document.title,parameters:JSON.stringify(o)}}};(0,o.Cg)([w.x0.Reactive()],P.prototype,"sharedViewActionName",null),P=(0,o.Cg)([E.DF.ClassFactory(T.M_.Token({actionType:l.X2.View,target:l.jq.Dialog,name:"SharedPageViewAction"}))],P);var j=i(1212);let V=class extends D{createPopupWidget(e){var t,i;const{popupDslDefinition:r}=this;if(!r)return;const n=null===(t=this.action)||void 0===t?void 0:t.contextType;let a=this.isFetchData(e);void 0===a&&n&&(a=!this.isNotNeedFetchData(e,n));const l=this.createPopupDslDefinition();this.drawer=null===(i=this.metadataSubviewWidget)||void 0===i?void 0:i.createWidget(new j.M,void 0,{internal:!0,template:l,dataSource:a?void 0:e,mountedVisible:!0}),this.drawer&&(this.drawer.on("ok",()=>(0,o.sH)(this,void 0,void 0,function*(){this.onCloseDrawer()})),this.drawer.on("cancel",()=>{this.onCloseDrawer()}))}onCloseDrawer(){var e,t,i;const r=null===(e=this.drawer)||void 0===e?void 0:e.getHandle();r&&a.onZ.INSTANCE.dispose(r),null===(t=this.metadataSubviewWidget)||void 0===t||t.dispose(),this.metadataSubviewWidget=null,null===(i=this.drawer)||void 0===i||i.dispose(!0),this.drawer=null,this.getChildrenWidget().forEach(e=>e.dispose()),this.childrenWidget=[],this.forceUpdate()}};V=(0,o.Cg)([E.DF.ClassFactory(T.M_.Token({actionType:l.X2.View,target:l.jq.Drawer}))],V);var B=i(91796);let H=class extends D{createPopupWidget(e){var t,i;const{popupDslDefinition:r}=this;if(!r)return;const n=null===(t=this.action)||void 0===t?void 0:t.contextType;let a=this.isFetchData(e);void 0===a&&n&&(a=!this.isNotNeedFetchData(e,n));const l=this.createPopupDslDefinition();this.innerPopup=null===(i=this.metadataSubviewWidget)||void 0===i?void 0:i.createWidget(new B.f,void 0,{internal:!0,template:l,dataSource:a?void 0:e,mountedVisible:!0}),this.innerPopup&&(this.innerPopup.on("ok",()=>(0,o.sH)(this,void 0,void 0,function*(){this.onCloseInnerPopup()})),this.innerPopup.on("cancel",()=>{this.onCloseInnerPopup()}))}onCloseInnerPopup(){var e,t,i;const r=null===(e=this.innerPopup)||void 0===e?void 0:e.getHandle();r&&a.onZ.INSTANCE.dispose(r),null===(t=this.metadataSubviewWidget)||void 0===t||t.dispose(),this.metadataSubviewWidget=null,null===(i=this.innerPopup)||void 0===i||i.dispose(!0),this.innerPopup=null,this.getChildrenWidget().forEach(e=>e.dispose()),this.childrenWidget=[],this.forceUpdate()}};H=(0,o.Cg)([E.DF.ClassFactory(T.M_.Token({actionType:l.X2.View,target:l.jq.Inner}))],H);let W=class extends I{isFetchData(e){return!1}};W=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.View,target:l.jq.Dialog,widget:"BatchUpdate"}))],W);let U=class extends V{isFetchData(e){return!1}};U=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.View,target:l.jq.Drawer,widget:"BatchUpdate"}))],U),u.Ae.register({viewType:l.qi.Form,inline:!0,actionWidget:"BatchUpdate"},`<view type="FORM">\n  <element widget="form" slot="form">\n    <xslot name="fields" slotSupport="pack,field" />\n  </element>\n  <pack title="${(0,a.cAb)("待提交数据")}" slot="tableGroup">\n    <view type="TABLE" datasource-clone="true">\n      <element widget="table" checkbox="false" slot="table" slotSupport="field" />\n    </view>\n  </pack>\n</view>`);var q=i(3816),z=i(16435),G=i(20641),K=i(90033);const X={class:"biz-audit-record-detail-list"},Q={key:0,class:"oio-scrollbar content"},Y={class:"left-area"},J={class:"avatar"},Z={key:0,class:"link-line"},ee={class:"right-area"},te={class:"action-area"},ie={class:"action-name"},re={class:"action-time"},oe={class:"user-area"},ne={class:"user-name"},ae={class:"user-location"},le={class:"single-record-detail"},se={key:1};function de(e,t,i,r,o,n){const a=(0,G.g2)("a-image"),l=(0,G.g2)("biz-audit-record-detail"),s=(0,G.g2)("a-empty");return(0,G.uX)(),(0,G.CE)("div",X,[e.dataSource&&e.dataSource.length?((0,G.uX)(),(0,G.CE)("div",Q,[((0,G.uX)(!0),(0,G.CE)(G.FK,null,(0,G.pI)(e.dataSource,(t,i)=>((0,G.uX)(),(0,G.CE)("div",{key:t.id,class:"single-record"},[(0,G.Lk)("div",Y,[(0,G.Lk)("div",J,[(0,G.bF)(a,{src:t.operator.avatarUrl||e.defaultAvatar},null,8,["src"])]),i<e.dataSource.length-1?((0,G.uX)(),(0,G.CE)("div",Z)):(0,G.Q3)("",!0)]),(0,G.Lk)("div",ee,[(0,G.Lk)("div",te,[(0,G.Lk)("div",ie,(0,K.v_)(t.operationName),1),(0,G.Lk)("div",re,(0,K.v_)(t.createDate),1)]),(0,G.Lk)("div",oe,[(0,G.Lk)("div",ne,(0,K.v_)(t.operatorName),1),(0,G.Lk)("div",ae,(0,K.v_)(t.requestPosition),1)]),(0,G.Lk)("div",le,[(0,G.bF)(l,{data:t},null,8,["data"])])])]))),128))])):((0,G.uX)(),(0,G.CE)("div",se,[(0,G.bF)(s,null,{description:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.translateValueByKey("暂无数据")),1)]),_:1})]))])}const ce={key:0,class:"biz-audit-record-detail"},ue={class:"common-field-list"},pe={class:"field-info field-label"},he=["title"],ge=(0,G.Lk)("span",{class:"field-info field-arrow"},"--\x3e",-1),ve=["title"],me={key:0,class:"one-field-list"},fe={key:1,class:"many-field-list"};function ye(e,t,i,r,o,n){const a=(0,G.g2)("oio-group"),l=(0,G.g2)("biz-audit-record-detail-field-value"),s=(0,G.g2)("a-table"),d=(0,G.g2)("a-empty");return e.realData.fieldRecordList||e.realData.oneList||e.realData.manyList?((0,G.uX)(),(0,G.CE)("div",ce,[(0,G.Lk)("div",ue,[e.realData.fieldRecordList?((0,G.uX)(),(0,G.Wv)(a,{key:0,border:!1,title:e.translateValueByKey("基础信息")},{default:(0,G.k6)(()=>[((0,G.uX)(!0),(0,G.CE)(G.FK,null,(0,G.pI)(e.realData.fieldRecordList,e=>((0,G.uX)(),(0,G.CE)("div",{key:e.fieldCode,class:"single-field-data"},[(0,G.Lk)("div",pe,(0,K.v_)(e.fieldName),1),(0,G.Lk)("div",{class:"field-info field-origin-value",title:e.originFieldVal},(0,K.v_)(e.originFieldVal),9,he),ge,(0,G.Lk)("div",{class:"field-info field-target-value",title:e.targetFieldVal},(0,K.v_)(e.targetFieldVal),9,ve)]))),128))]),_:1},8,["title"])):(0,G.Q3)("",!0)]),e.realData.oneList&&e.realData.oneList.length?((0,G.uX)(),(0,G.CE)("div",me,[(0,G.bF)(a,{border:!1,title:e.translateValueByKey("关联信息")+"-"+e.translateValueByKey("单值")},{default:(0,G.k6)(()=>[(0,G.bF)(s,{columns:e.oneFieldsColumns,"data-source":e.realData.oneList},{bodyCell:(0,G.k6)(t=>["fieldList"===t.column.key?((0,G.uX)(),(0,G.Wv)(l,{key:0,"field-list":t.record.fieldList,title:e.translateValueByKey("关联数据"),width:"300px"},null,8,["field-list","title"])):(0,G.Q3)("",!0)]),_:1},8,["columns","data-source"])]),_:1},8,["title"])])):(0,G.Q3)("",!0),e.realData.manyList&&e.realData.manyList.length?((0,G.uX)(),(0,G.CE)("div",fe,[(0,G.bF)(a,{border:!1,title:e.translateValueByKey("关联信息")+"-"+e.translateValueByKey("多值")},{default:(0,G.k6)(()=>[(0,G.bF)(s,{columns:e.manyFieldsColumns,"data-source":e.realData.manyList},{bodyCell:(0,G.k6)(t=>["fieldList"===t.column.key?((0,G.uX)(),(0,G.Wv)(l,{key:0,"field-list":t.record.fieldList,title:e.translateValueByKey("关联数据"),width:"300px"},null,8,["field-list","title"])):(0,G.Q3)("",!0)]),_:1},8,["columns","data-source"])]),_:1},8,["title"])])):(0,G.Q3)("",!0)])):((0,G.uX)(),(0,G.Wv)(d,{key:1}))}const be={class:"biz-audit-record-detail-field-value"},Ce={style:{"margin-left":"4px"}};function xe(e,t,i,r,o,n){const a=(0,G.g2)("common-row"),l=(0,G.g2)("a-popover");return(0,G.uX)(),(0,G.CE)("div",be,[(0,G.bF)(a,{item:e.fieldList[0],divider:!1},null,8,["item"]),e.fieldList.length?((0,G.uX)(),(0,G.Wv)(l,{key:0,overlayClassName:"oio-popover",title:e.$translate(e.title),placement:"left"},{content:(0,G.k6)(()=>[((0,G.uX)(!0),(0,G.CE)(G.FK,null,(0,G.pI)(e.fieldList,t=>((0,G.uX)(),(0,G.CE)("div",{style:(0,K.Tr)({width:e.width}),key:t.fieldCode,class:"multi-field-datOioPopover"},[(0,G.bF)(a,{item:t},null,8,["item"])],4))),128))]),default:(0,G.k6)(()=>[(0,G.Lk)("a",Ce,(0,K.v_)(e.translateValueByKey("查看全部")),1)]),_:1},8,["title"])):(0,G.Q3)("",!0)])}const we={class:"biz-audit-record-detail-common-row"},Se={class:"field-info field-label"},Te={class:"field-info field-origin-value"},Ee=(0,G.Lk)("span",{class:"field-info field-arrow"},"--\x3e",-1),Ae=["title"],ke={key:0,class:"biz-audit-record-detail-common-row-divider"};function De(e,t,i,r,o,n){return(0,G.uX)(),(0,G.CE)(G.FK,null,[(0,G.Lk)("div",we,[(0,G.Lk)("span",Se,(0,K.v_)(e.item.fieldName+"："),1),(0,G.Lk)("span",Te,(0,K.v_)(e.item.originFieldVal),1),Ee,(0,G.Lk)("span",{class:"field-info field-target-value",title:e.item.targetFieldVal},(0,K.v_)(e.item.targetFieldVal),9,Ae)]),e.divider?((0,G.uX)(),(0,G.CE)("div",ke)):(0,G.Q3)("",!0)],64)}const Fe=(0,G.pM)({name:"CommonRow",props:{item:{type:Object,default:()=>({})},divider:{type:Boolean,default:!0}}});var Re=i(66262);const Oe=(0,Re.A)(Fe,[["render",De]]),Ne=Oe,$e=(0,G.pM)({name:"BizAuditRecordDetailFieldValue",components:{CommonRow:Ne,OioIcon:c.Lky},props:{fieldList:{type:Array,default:()=>[]},title:{type:String},width:{type:String}},setup(e){return{translateValueByKey:a.cAb}}}),Me=(0,Re.A)($e,[["render",xe]]),Ie=Me,Le=[{title:(0,a.cAb)("字段编码"),dataIndex:"fieldName",key:"fieldName"},{title:(0,a.cAb)("原值"),dataIndex:"originFieldVal",key:"originFieldVal"},{title:(0,a.cAb)("最新值"),dataIndex:"targetFieldVal",key:"targetFieldVal"}],_e=[{title:(0,a.cAb)("变更内容"),dataIndex:"fieldName",key:"fieldName"},{title:(0,a.cAb)("变更类型"),dataIndex:"type",key:"type"},{title:(0,a.cAb)("变更内容"),dataIndex:"fieldList",key:"fieldList",ellipsis:!0}],Pe=[{title:(0,a.cAb)("变更内容"),dataIndex:"fieldName",key:"fieldName"},{title:(0,a.cAb)("变更类型"),dataIndex:"type",key:"type"},{title:(0,a.cAb)("关联数据ID"),dataIndex:"businessId",key:"businessId"},{title:(0,a.cAb)("关联数据编码"),dataIndex:"businessCode",key:"businessCode"},{title:(0,a.cAb)("变更内容"),dataIndex:"fieldList",key:"fieldList",ellipsis:!0}],je=(0,G.pM)({name:"BizAuditRecordDetail",components:{BizAuditRecordDetailFieldValue:Ie,OioIcon:c.Lky,OioGroup:x.leV},props:{data:{type:Array,default:()=>[]}},setup(e){const t=(0,G.EW)(()=>e.data[0]||e.data||{});return{commonColumns:Le,oneFieldsColumns:_e,manyFieldsColumns:Pe,realData:t,translateValueByKey:a.cAb}}}),Ve=(0,Re.A)(je,[["render",ye]]),Be=Ve,He=(0,G.pM)({name:"BizAuditRecordDetailList",components:{OioIcon:c.Lky,BizAuditRecordDetail:Be},props:{dataSource:{type:Array,default:()=>[]}},setup(e){const t=(0,a.CSv)("default_avatar.png");return{defaultAvatar:t,translateValueByKey:a.cAb}}}),We=(0,Re.A)(He,[["render",de]]),Ue=We;var qe=i(39277);const ze="data.audit.OperationLog",Ge="操作日志detail";function Ke(e,t){return(0,o.sH)(this,void 0,void 0,function*(){const i=`\n    query {\n      operationLogQuery {\n        fetchListByBizId(\n          bizId: "${e}"\n          model: "${t}"\n        ) {\n          id\n          operatorName\n          operator{\n            avatarUrl\n          }\n          operationName\n          requestPosition\n          deviceName\n          model\n          businessId\n          businessCode\n          businessName\n          requestIp\n          requestPosition\n          createDate\n          fieldRecordList {\n            fieldCode\n            fieldName\n            type\n            originFieldVal\n            targetFieldVal\n          }\n          oneList {\n            fieldCode\n            fieldName\n            type\n            businessId\n            businessCode\n            businessName\n            type\n            fieldList {\n              fieldCode\n              fieldName\n              type\n              originFieldVal\n              targetFieldVal\n            }\n          }\n          manyList {\n            fieldCode\n            fieldName\n            type\n            businessId\n            businessCode\n            businessName\n            fieldList {\n              fieldCode\n              fieldName\n              type\n              originFieldVal\n              targetFieldVal\n            }\n          }\n        }\n      }\n    }`,r=yield qe.LV.mutate("dataAudit",i);return r.data.operationLogQuery.fetchListByBizId})}const Xe=e=>(0,o.sH)(void 0,void 0,void 0,function*(){const t=`{\n\toperationLogQuery {\n\t\tqueryOne(query: { id: ${e} }) {\n\t\t\tid\n        logConfig {\n          id\n          code\n          logType\n          model\n          modelName\n          name\n          fieldsDisplayName\n          variationDefinitionName\n          active\n          createDate\n          writeDate\n          createUid\n          writeUid\n        }\n        operatorName\n        deviceName\n        model\n        businessId\n        businessCode\n        businessName\n        requestIp\n        requestPosition\n        createDate\n        fieldRecordList {\n          key\n          fieldCode\n          fieldName\n          fieldTtype\n          fieldLtype\n          fieldModel\n          fieldDictionary\n          relationFields\n          referenceFields\n          type\n          originFieldVal\n          targetFieldVal\n          isSelected\n        }\n        oneList {\n          fieldCode\n          fieldName\n          type\n          businessId\n          businessCode\n          businessName\n          fieldList {\n            fieldCode\n            fieldName\n            type\n            originFieldVal\n            targetFieldVal\n          }\n        }\n        manyList {\n          fieldCode\n          fieldName\n          type\n          businessId\n          businessCode\n          businessName\n          fieldList {\n            fieldCode\n            fieldName\n            type\n            originFieldVal\n            targetFieldVal\n          }\n        }\n        logConfigId\n      }\n    }\n  }`,i=yield qe.LV.mutate("dataAudit",t);return i.data.operationLogQuery.queryOne});let Qe=class extends z.mA{constructor(){super(...arguments),this.commonDetailWidgetList=[]}initialize(e){return super.initialize(e),this.setComponent(Ue),this}watchBizAuditRecordDataSource(e){return(0,o.sH)(this,void 0,void 0,function*(){if(this.disposeDetailWidgets(this.commonDetailWidgetList),this.commonDetailWidgetList=[],e){const t=yield a.soS.get(ze,Ge),i=(0,q.V2)(t),r=i.handle;for(const o of e){const e=this.createWidget(z.mA,o.id,{metadataHandle:r,rootHandle:r,template:i.viewTemplate,internal:!0,inline:!0,dataSource:o,activeRecords:o});this.commonDetailWidgetList.push(e)}}})}disposeDetailWidgets(e){e.forEach(e=>{var t;e.dispose(),a.HxA.delete(null===(t=e.metadataRuntimeContext)||void 0===t?void 0:t.handle)})}};Qe=(0,o.Cg)([E.DF.ClassFactory(T.a_.Token({viewType:l.qi.Detail,widget:"BizAuditRecordDetailList"}))],Qe);let Ye=class extends T.WH{constructor(){super(...arguments),this.data=[]}initialize(e){return super.initialize(e),this.setComponent(Be),this}mountedProcess(){var e;return(0,o.sH)(this,void 0,void 0,function*(){const t=null===(e=this.initialValue)||void 0===e?void 0:e[0].id,i=yield Xe(t);this.data=i})}};(0,o.Cg)([w.x0.Reactive()],Ye.prototype,"data",void 0),Ye=(0,o.Cg)([E.DF.ClassFactory(T.a_.Token({viewType:l.qi.Detail,widget:"BizAuditRecordDetail"}))],Ye);let Je=class extends H{constructor(){super(...arguments),this.isRendRecordWidget=!1}isFetchData(e){return!1}loadData(){const e=Object.create(null,{loadData:{get:()=>super.loadData}});var t,i;return(0,o.sH)(this,void 0,void 0,function*(){const{data:r}=yield e.loadData.call(this);return(null===(t=r[0])||void 0===t?void 0:t.id)||x.Xbm.error((0,a.cAb)("业务数据id不存在")),{data:yield Ke(null===(i=r[0])||void 0===i?void 0:i.id,this.model.model),isFetchData:!1}})}};Je=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.View,target:l.jq.Inner,name:"BizAuditRecordViewAction"}))],Je);const Ze=()=>{u.Ae.register({viewType:l.qi.Detail,viewName:"应用日志listDetail",model:"data.audit.OperationLog"},'<view type="DETAIL" width="large" footerInvisible="true">\n        <custom widget="BizAuditRecordDetailList" slotSupport="field">\n        </custom>\n    </view>'),u.Ae.register({viewType:l.qi.Detail,viewName:"应用日志listDetail",model:"data.audit.DataAuditAppLog"},'<view type="DETAIL" width="large" footerInvisible="true">\n        <custom widget="BizAuditRecordDetailList" slotSupport="field">\n        </custom>\n    </view>'),u.Ae.register({viewType:l.qi.Detail,actionWidget:"dataAuditAppLogListDetail",model:"data.audit.DataAuditAppLog"},'<view type="DETAIL" width="medium">\n        <custom widget="BizAuditRecordDetail" slotSupport="field" slot="fields">\n        </custom>\n    </view>')};Ze();var et=i(77679);function tt(e,t,i,r,o,n){const a=(0,G.g2)("default-action"),l=(0,G.g2)("a-select-option"),s=(0,G.g2)("a-select"),d=(0,G.g2)("oio-form-item"),c=(0,G.g2)("oio-form"),u=(0,G.g2)("a-spin"),p=(0,G.g2)("oio-button"),h=(0,G.g2)("oio-modal");return(0,G.uX)(),(0,G.CE)(G.FK,null,[(0,G.bF)(a,{action:e.action,type:e.type,"biz-style":e.bizStyle,label:e.label,help:e.help,icon:e.icon,invisible:e.invisible,inline:e.inline,"validate-and-click":e.validateAndClick,"validator-form":e.validatorForm},null,8,["action","type","biz-style","label","help","icon","invisible","inline","validate-and-click","validator-form"]),(0,G.bF)(h,{width:"60%",visible:e.visible,"onUpdate:visible":e.change,title:e.$translate("导出")},{footer:(0,G.k6)(()=>[(0,G.bF)(p,{onClick:e.createExportTask,type:"primary"},{default:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.$translate("导出")),1)]),_:1},8,["onClick"]),(0,G.bF)(p,{onClick:t[0]||(t[0]=()=>e.change(!1))},{default:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.$translate("取消")),1)]),_:1})]),default:(0,G.k6)(()=>[(0,G.bF)(u,{spinning:e.loading},{default:(0,G.k6)(()=>[(0,G.bF)(c,null,{default:(0,G.k6)(()=>[(0,G.bF)(d,{label:e.$translate("导出模板"),required:!0,validateStatus:e.validation1.status,help:e.validation1.help},{default:(0,G.k6)(()=>[(0,G.bF)(s,{class:"oio-select","dropdown-class-name":"oio-select-dropdown",value:e.selectValue,onChange:e.handleSelectChange},{default:(0,G.k6)(()=>[((0,G.uX)(!0),(0,G.CE)(G.FK,null,(0,G.pI)(e.workbookList,e=>((0,G.uX)(),(0,G.Wv)(l,{value:e.id,key:e.id},{default:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.displayName||e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1},8,["label","validateStatus","help"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","onUpdate:visible","title"])],64)}var it=i(9322),rt=i(19294);const ot=(0,G.pM)({name:"Action",components:{OioModal:x.NHb,OioButton:x._5z,OioForm:x.ENJ,OioFormItem:x.FX9,DefaultAction:it.A},inheritAttrs:!1,props:Object.assign(Object.assign({},rt.rC),{visible:{type:Boolean,default:void 0},change:Function,createImportTask:Function,handleSelectChange:Function,workbookList:Array,selectValue:String,createExportTask:Function,validation1:Object})}),nt=(0,Re.A)(ot,[["render",tt]]),at=nt;let lt=class extends A.jk{constructor(){super(...arguments),this.file={},this.validation1={status:et.Tc.Success,help:""},this.validation2={status:et.Tc.Success,help:""},this.firstOpen=!0,this.visible=!1,this.selectValue="",this.workbookList=[]}initialize(e){return super.initialize(e),this.setComponent(at),this}get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("导出")}handleSelectChange(e){this.selectValue=e}clickAction(){this.change(!0)}createExportTask(){return(0,o.sH)(this,void 0,void 0,function*(){if(!this.selectValue)return this.validation1.status=et.Tc.Error,void(this.validation1.help=this.translate("kunlun.export.tips"));let e;const t=this.activeRecords;e=t&&t.length?`id =in= (${t.map(e=>e.id).join(",")})`:this.getSearchRsqlAndQueryParams().condition;const i=yield(0,x.a03)(this.selectValue,e);i.id?(x.$xc.success(this.translate("kunlun.common.success")),this.change(!1)):x.$xc.error(this.translate("kunlun.common.error"))})}change(e){return(0,o.sH)(this,void 0,void 0,function*(){this.firstOpen&&e&&(this.firstOpen=!1,this.queryWorkbookList()),this.visible=e})}queryWorkbookList(){return(0,o.sH)(this,void 0,void 0,function*(){const e=this.model.model;e&&(this.workbookList=yield(0,x.Pj5)(e,!0))})}};function st(e,t,i,r,o,n){const a=(0,G.g2)("default-action"),l=(0,G.g2)("a-select-option"),s=(0,G.g2)("a-select"),d=(0,G.g2)("oio-form-item"),c=(0,G.g2)("oio-button"),u=(0,G.g2)("FileUpload"),p=(0,G.g2)("oio-form"),h=(0,G.g2)("a-spin"),g=(0,G.g2)("oio-modal");return(0,G.uX)(),(0,G.CE)(G.FK,null,[(0,G.bF)(a,{action:e.action,type:e.type,"biz-style":e.bizStyle,label:e.label,help:e.help,icon:e.icon,invisible:e.invisible,inline:e.inline,"validate-and-click":e.validateAndClick,"validator-form":e.validatorForm},null,8,["action","type","biz-style","label","help","icon","invisible","inline","validate-and-click","validator-form"]),(0,G.bF)(g,{width:"60%",visible:e.visible,"onUpdate:visible":e.change,title:e.$translate("导入")},{footer:(0,G.k6)(()=>[(0,G.bF)(c,{onClick:e.downloadTemplate,type:"primary"},{default:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.$translate("下载模板")),1)]),_:1},8,["onClick"]),(0,G.bF)(c,{onClick:e.createImportTask,type:"primary"},{default:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.$translate("导入")),1)]),_:1},8,["onClick"])]),default:(0,G.k6)(()=>[(0,G.bF)(h,{spinning:e.loading},{default:(0,G.k6)(()=>[(0,G.bF)(p,null,{default:(0,G.k6)(()=>[(0,G.bF)(d,{label:e.$translate("导入模板"),required:!0,validateStatus:e.validation1.status,help:e.validation1.help},{default:(0,G.k6)(()=>[(0,G.bF)(s,{class:"oio-select","dropdown-class-name":"oio-select-dropdown",value:e.selectValue,onChange:e.handleSelectChange},{default:(0,G.k6)(()=>[((0,G.uX)(!0),(0,G.CE)(G.FK,null,(0,G.pI)(e.workbookList,e=>((0,G.uX)(),(0,G.Wv)(l,{value:e.id,key:e.id},{default:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.displayName||e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1},8,["label","validateStatus","help"]),(0,G.bF)(d,{label:e.$translate("上传文件"),required:!0,validateStatus:e.validation2.status,help:e.validation2.help},{default:(0,G.k6)(()=>[(0,G.bF)(u,{value:e.file&&e.file.id?[e.file]:null,accept:".xls,.xlsx",onChange:e.getImportFile,limit:1,remove:e.remove},{default:(0,G.k6)(()=>[(0,G.bF)(c,null,{default:(0,G.k6)(()=>[(0,G.eW)((0,K.v_)(e.$translate("点击上传")),1)]),_:1})]),_:1},8,["value","onChange","remove"])]),_:1},8,["label","validateStatus","help"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","onUpdate:visible","title"])],64)}(0,o.Cg)([w.x0.Reactive()],lt.prototype,"label",null),(0,o.Cg)([w.x0.Reactive()],lt.prototype,"validation1",void 0),(0,o.Cg)([w.x0.Reactive()],lt.prototype,"validation2",void 0),(0,o.Cg)([w.x0.Reactive()],lt.prototype,"visible",void 0),(0,o.Cg)([w.x0.Reactive()],lt.prototype,"selectValue",void 0),(0,o.Cg)([w.x0.Reactive()],lt.prototype,"workbookList",void 0),(0,o.Cg)([w.x0.Reactive()],lt.prototype,"handleSelectChange",null),(0,o.Cg)([w.x0.Method()],lt.prototype,"createExportTask",null),(0,o.Cg)([w.x0.Method()],lt.prototype,"change",null),lt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_GotoListExportDialog}))],lt);var dt=i(25873);const ct=(0,G.pM)({name:"Action",components:{FileUpload:dt.ef,OioButton:x._5z,OioForm:x.ENJ,OioFormItem:x.FX9,OioModal:x.NHb,DefaultAction:it.A},inheritAttrs:!1,props:Object.assign(Object.assign({},rt.rC),{visible:{type:Boolean,default:void 0},change:Function,createImportTask:Function,downloadTemplate:Function,handleSelectChange:Function,workbookList:Array,selectValue:String,getImportFile:Function,validation1:Object,validation2:Object,remove:Function,file:Object}),setup(){const e=(0,A.Uo)();return Object.assign({},e)}}),ut=(0,Re.A)(ct,[["render",st]]),pt=ut;let ht=class extends A.jk{constructor(){super(...arguments),this.file={},this.validation1={status:et.Tc.Success,help:""},this.validation2={status:et.Tc.Success,help:""},this.firstOpen=!0,this.visible=!1,this.selectValue="",this.workbookList=[]}initialize(e){return super.initialize(e),this.setComponent(pt),this}get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("导入")}handleSelectChange(e){this.selectValue=e}clickAction(){this.change(!0)}downloadTemplate(){return(0,o.sH)(this,void 0,void 0,function*(){if(!this.selectValue)return this.validation1.status=et.Tc.Error,void(this.validation1.help=this.translate("kunlun.import.tips"));const e=yield(0,c.fEv)(this.selectValue);window.open(e.redirectUri)})}createImportTask(){var e,t,i;return(0,o.sH)(this,void 0,void 0,function*(){if(!this.selectValue)return this.validation1.status=et.Tc.Error,void(this.validation1.help=this.translate("kunlun.import.tips"));if(this.validation1.status=et.Tc.Success,this.validation1.help="",!this.file.id&&0===Object.keys(this.file).length)return this.validation2.status=et.Tc.Error,void(this.validation2.help=this.translate("kunlun.import.uploadField"));const{forceRefreshWhenError:r=!1}=this.getDsl();this.loading=!0;try{const i=yield(0,c.xLZ)(this.selectValue,this.file);i?(this.loading=!1,null===(e=this.refreshCallChaining)||void 0===e||e.syncCall(),x.$xc.success(this.translate("kunlun.common.success")),this.change(!1)):r&&(null===(t=this.refreshCallChaining)||void 0===t||t.syncCall(),this.change(!1))}catch(o){r&&(null===(i=this.refreshCallChaining)||void 0===i||i.syncCall(),this.change(!1))}finally{this.loading=!1}})}getImportFile(e){if(!e||!e.length)return;const t=e.length>1?e[e.length-1]:e[0];this.file=t}remove(e){this.file={}}change(e){return(0,o.sH)(this,void 0,void 0,function*(){this.validation1={status:et.Tc.Success,help:""},this.validation2={status:et.Tc.Success,help:""},this.selectValue="",this.file={},this.firstOpen&&e&&(this.firstOpen=!1,this.queryWorkbookList()),this.visible=e})}queryWorkbookList(){return(0,o.sH)(this,void 0,void 0,function*(){const e=this.model.model;e&&(this.workbookList=yield(0,x.Pj5)(e,!1))})}};(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object),(0,o.Sn)("design:paramtypes",[])],ht.prototype,"label",null),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object)],ht.prototype,"file",void 0),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object)],ht.prototype,"validation1",void 0),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object)],ht.prototype,"validation2",void 0),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object)],ht.prototype,"visible",void 0),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object)],ht.prototype,"selectValue",void 0),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Array)],ht.prototype,"workbookList",void 0),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],ht.prototype,"handleSelectChange",null),(0,o.Cg)([w.x0.Method(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",Promise)],ht.prototype,"downloadTemplate",null),(0,o.Cg)([w.x0.Method(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[]),(0,o.Sn)("design:returntype",Promise)],ht.prototype,"createImportTask",null),(0,o.Cg)([w.x0.Method(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],ht.prototype,"getImportFile",null),(0,o.Cg)([w.x0.Method(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],ht.prototype,"remove",null),(0,o.Cg)([w.x0.Method(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",Promise)],ht.prototype,"change",null),ht=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_GotoListImportDialog}))],ht);let gt=class extends I{initialize(e){super.initialize(e);const{action:t}=this;return t&&(t.contextType=t.contextType||l.og.ContextFree),this}get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("添加")}};(0,o.Cg)([w.x0.Reactive()],gt.prototype,"label",null),gt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_GotoM2MListDialog}))],gt);let vt=class extends I{initialize(e){super.initialize(e);const{action:t}=this;return t&&(t.contextType=t.contextType||l.og.ContextFree),this}get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("创建")}};(0,o.Cg)([w.x0.Reactive()],vt.prototype,"label",null),vt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_GotoO2MCreateDialog}))],vt);let mt=class extends I{initialize(e){super.initialize(e);const{action:t}=this;return t&&(t.contextType=t.contextType||l.og.Single),this}get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("编辑")}};(0,o.Cg)([w.x0.Reactive()],mt.prototype,"label",null),mt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_GotoO2MEditDialog}))],mt);var ft=i(32093);let yt=class extends A.jk{constructor(){super(...arguments),this.defaultType=c.VQ.default,this.isFormChange=!1}initialize(e){return super.initialize(e),this}get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.TlY)("kunlun.common.back")||"返回"}get confirmText(){if(this.isFormChange)return super.confirmText}clickAction(){var e;return(0,o.sH)(this,void 0,void 0,function*(){this.isDialog?a.lGe.dispose(this.action):this.isDrawer?a._s.dispose(this.action):(a.zDc.disposeAll(),(0,ft.GG)(this.action,e=>(0,a.lP8)(e,this.$router,this.$matched),null===(e=this.$router)||void 0===e?void 0:e.navigate))})}get formData(){var e;return null===(e=this.activeRecords)||void 0===e?void 0:e[0]}watchFormData(e){this.initFormData&&e&&!this.isFormChange&&(this.isFormChange=(0,a.q6g)(e)!==this.initFormData)}mountedProcess(){var e;this.viewType===l.qi.Form&&(this.initFormData=(0,a.q6g)((null===(e=this.activeRecords)||void 0===e?void 0:e[0])||{}))}$$mounted(){var e;super.$$mounted(),null===(e=this.mountedCallChaining)||void 0===e||e.hook(this.path,()=>{this.mountedProcess()})}$$unmounted(){var e;super.$$unmounted(),null===(e=this.mountedCallChaining)||void 0===e||e.unhook(this.path)}};(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object),(0,o.Sn)("design:paramtypes",[])],yt.prototype,"label",null),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object),(0,o.Sn)("design:paramtypes",[])],yt.prototype,"confirmText",null),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object)],yt.prototype,"isFormChange",void 0),(0,o.Cg)([w.x0.Reactive(),(0,o.Sn)("design:type",Object),(0,o.Sn)("design:paramtypes",[])],yt.prototype,"formData",null),(0,o.Cg)([w.x0.Watch("formData",{deep:!0}),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",void 0)],yt.prototype,"watchFormData",null),(0,o.Cg)([w.x0.Reactive(),w.x0.Inject(),(0,o.Sn)("design:type",Object)],yt.prototype,"mountedCallChaining",void 0),yt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_GotoListTableRouter}))],yt);let bt=class extends A.jk{get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("刷新")}clickAction(){var e;null===(e=this.refreshCallChaining)||void 0===e||e.syncCall(!1)}};(0,o.Cg)([w.x0.Reactive()],bt.prototype,"label",null),bt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_ReloadData}))],bt);let Ct=class extends k{get router(){return this.$router}set router(e){this.$router=e}get matched(){return this.$matched}set matched(e){this.$matched=e}initialize(e){return super.initialize(e),this}clickAction(){var e,t;return(0,o.sH)(this,void 0,void 0,function*(){const{$router:i,$matched:r,action:o}=this;if(!i||!r)return;a.zDc.disposeAll(),d.$1.group(`routerViewAction click:${o.model}:${o.name}:${o.label}`);const n={},{resViewType:s,contextType:c}=o;let u=!1;if(s&&(u=[l.qi.Table,l.qi.Gallery,l.qi.Tree].includes(s)),u){n.id=null,n.ids=null;const e=this.actionDomain;if(e){const t=yield(0,qe.E1)(o.resModel||o.model),{searchBody:i,searchConditions:r}=(0,_.QM)(t,e);d.$1.log("search",{domain:e,searchBody:i,searchConditions:r}),(0,l.B6)(i)||(n.searchBody=encodeURIComponent(JSON.stringify(i))),(0,l.B6)(r)||(n.searchConditions=encodeURIComponent(JSON.stringify(r)))}else n.searchBody=null,n.searchConditions=null}else switch(n.searchBody=null,n.searchConditions=null,c){case l.og.Single:n.id=null===(e=this.activeRecords)||void 0===e?void 0:e[0].id,n.ids=null,d.$1.log("id",n.id);break;case l.og.SingleAndBatch:case l.og.Batch:n.id=null,n.ids=null===(t=this.activeRecords)||void 0===t?void 0:t.map(e=>e.id).filter(e=>!!e).join(d.MZ.ARRAY_DEFAULT_SEPARATOR),d.$1.log("ids",n.ids);break;case l.og.ContextFree:n.id=null,n.ids=null;break}const p=this.buildContext();p&&Object.keys(p).length?n.context=JSON.stringify(p):n.context=null,this.executeAction(o,n),d.$1.groupEnd()})}executeAction(e,t){this.realExecuteAction(e,t)}realExecuteAction(e,t){(0,a.lP8)(e,this.$router,this.$matched,t)}};Ct=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.View,target:l.jq.Router}))],Ct);let xt=class extends Ct{executeAction(e,t){let i=a.nHy.BLANK;a.EVn.isEnabled()&&(i=void 0),(0,a.lP8)(e,this.router,this.matched,t,i)}};xt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.View,target:l.jq.OpenWindow}))],xt);var wt=i(30655);const St=(0,G.pM)({name:"CompositionAction",components:{DefaultAction:it.A},inheritAttrs:!1,props:Object.assign({},rt.rC),setup(e){return Object.assign({},(0,rt.y3)(e))},render(){return(0,G.bF)(it.A,x.$pj.convert(rt.rC,d.Gf.cast(this)),{default:()=>{var e,t;return(0,G.bF)("div",{class:"composition-actions"},(null===(t=null===(e=this.$slots)||void 0===e?void 0:e.default)||void 0===t?void 0:t.call(e))||[])}})}}),Tt=St,Et=Tt;let At=class extends A.jk{constructor(){super(...arguments),this.childrenActions=[]}initialize(e){var t,i;return super.initialize(e),this.setComponent(Et),null===(i=null===(t=this.template)||void 0===t?void 0:t.widgets)||void 0===i||i.forEach(e=>{if(e.dslNodeType===n.zX.ACTION){const t=(0,wt.pT)(Object.assign(Object.assign({},e),{template:e,metadataHandle:this.metadataHandle,rootHandle:this.rootHandle,parentHandle:this.currentHandle}));t&&this.childrenActions.push(t.widget)}}),this}clickAction(){return(0,o.sH)(this,void 0,void 0,function*(){const e=t=>(0,o.sH)(this,void 0,void 0,function*(){const i=this.childrenActions[t];if(i){if(i instanceof Ct){const{matched:e}=(0,L.yE)();i.router=this.$router,i.matched=e}const r=yield i.click();return(0,N.A)(r)&&!r?r:e(t+1)}});return e(0)})}};At=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.Composition}))],At);let kt=class extends A.jk{initialize(e){return super.initialize(e),this}get url(){var e;return this.getDsl().url||(null===(e=this.action)||void 0===e?void 0:e.url)||"#"}get target(){var e;return this.getDsl().target||(null===(e=this.action)||void 0===e?void 0:e.target)||l.jq.OpenWindow}get queryBody(){const e=this.action,t=C.r4.getInstance();if(!e||!e.context)return null;const i={};return Object.keys(e.context||{}).forEach(r=>{var o;t.initExpressionContext(this.activeRecords,null===(o=this.rootData)||void 0===o?void 0:o[0],{},"");try{const o=t.exec(e.context[r]);void 0!==o&&(i[r]=o)}catch(n){console.error(n)}finally{t.cleanupExpressionContext()}}),i}seekPopupMainRuntimeContext(){var e;if(this.metadataHandle===this.rootHandle){const t=this.model.model;if(t){const i=null===(e=a.HxA.getOthers(this.rootHandle))||void 0===e?void 0:e.find(e=>e.model.model===t);if(i)return i}}return this.rootRuntimeContext}getRequestModelFields(e){return(0,o.sH)(this,void 0,void 0,function*(){const{viewType:t}=this;if(t===l.qi.Tree){const e=yield a.Qvr.get(this.model.model);return e?e.modelFields.map(e=>({field:e})):[]}return this.popupScene?this.seekPopupMainRuntimeContext().getRequestModelFields(e):this.rootRuntimeContext.getRequestModelFields(e)})}executeFunction(e,t,i){var r,o;const n=null===(o=null===(r=e.argumentList)||void 0===r?void 0:r[0])||void 0===o?void 0:o.multi,l=this.mergeContext(i),s=n?l:null===l||void 0===l?void 0:l[0];return a.cHX.INSTANCE.simpleExecute(this.model,e,{requestModels:[a.QuJ.ResourceAddress],requestFields:t,variables:{path:this.action.sessionPath}},s)}getUrlByComputed(){return(0,o.sH)(this,void 0,void 0,function*(){const{compute:e}=this.getDsl(),t=yield a.N2X.get(this.action.model,e);if(!t)return console.error("无法获取可执行函数",this.action),void x.$xc.error((0,a.cAb)("错误"),(0,a.cAb)("无法获取可执行函数"));const i=yield this.getRequestModelFields();return this.executeFunction(t,i,this.activeRecords)})}getUrlByUrlAttr(){let{url:e}=this;if(this.queryBody){const t=this.resolveQueryBody();t&&(e=`${e}?${t}`)}return e=this.resolveDynamicDomain(e),e=encodeURI(decodeURI(e)),e}getUrl(){const{compute:e}=this.getDsl();return e?this.getUrlByComputed():this.getUrlByUrlAttr()}clickAction(){return(0,o.sH)(this,void 0,void 0,function*(){const e=yield this.getUrl();e?this.executeAction(this.action,e):x.Xbm.error((0,a.cAb)("未设置正确的URL"))})}executeAction(e,t){switch(this.target){case l.jq.Router:window.open(t,a.nHy.SELF);break;case l.jq.OpenWindow:case l.jq.Frame:window.open(t,a.nHy.BLANK);break;default:throw new Error(`Invalid target type. value = ${this.target}`)}}resolveQueryBody(){return Object.keys(this.queryBody).map(e=>`${e}=${this.queryBody[e]}`).join("&")}};(0,o.Cg)([w.x0.Reactive()],kt.prototype,"url",null),(0,o.Cg)([w.x0.Reactive()],kt.prototype,"target",null),(0,o.Cg)([w.x0.Reactive()],kt.prototype,"queryBody",null),kt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({actionType:l.X2.URL}))],kt);let Dt=class extends r.Os{get disabled(){return!1}submit(e){var t,i,r;return(0,o.sH)(this,void 0,void 0,function*(){const e=null===(r=null===(i=yield null===(t=this.submitCallChaining)||void 0===t?void 0:t.syncCall())||void 0===i?void 0:i.records)||void 0===r?void 0:r[0];null==e&&console.error("Invalid submit data.");const{model:o}=this;return new a.StG((this.activeRecords||[]).map(t=>{const i=ft.Zd.generatorPksObject(o,t);if(i)return Object.assign(Object.assign({},e),i);console.error("Invalid pks object.")}).filter(e=>!!e))})}executeAction(e,t){return(0,o.sH)(this,void 0,void 0,function*(){let{functionDefinition:i}=e;const{model:r,fun:o}=e;return!i&&o&&(i=yield a.N2X.get(r,o)),i||(i=a.MLz.updateWithFieldBatch),this.executeFunction(i,yield this.getRequestModelFields(),t.records)})}};(0,o.Cg)([w.x0.Reactive()],Dt.prototype,"disabled",null),Dt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_BatchUpdate}))],Dt);let Ft=class extends A.jk{get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("删除")}initialize(e){super.initialize(e);const{action:t}=this;return t&&(t.contextType=t.contextType||l.og.SingleAndBatch),this}get isAsync(){return!1}clickAction(){return(0,o.sH)(this,void 0,void 0,function*(){this.activeRecords&&(this.deleteDataSourceByEntity(this.activeRecords),this.reloadActiveRecords([]),this.flushDataSource())})}};(0,o.Cg)([w.x0.Reactive()],Ft.prototype,"label",null),(0,o.Cg)([w.x0.Reactive()],Ft.prototype,"isAsync",null),Ft=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_DeleteOne}))],Ft);let Rt=class extends A.jk{downloadUrl(e){return(0,o.sH)(this,void 0,void 0,function*(){const t=yield fetch(e),i=yield t.blob();let r=document.createElement("a");r.setAttribute("href",URL.createObjectURL(i)),r.setAttribute("download",""),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(r.href),document.body.removeChild(r),r=null})}clickAction(){return(0,o.sH)(this,void 0,void 0,function*(){const e=this.activeRecords||[],t=this.getDsl().downloadKey||"url";Promise.all(e.filter(e=>e[t]).map(e=>this.downloadUrl(e[t])))})}};Rt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_Download}))],Rt);let Ot=class extends A.jk{clickAction(){var e;return(0,o.sH)(this,void 0,void 0,function*(){const t=a.F1e.repairRecordsNullable({});t&&(this.createDataSourceByEntity(t),null===(e=this.editRowCallChaining)||void 0===e||e.call(et.Uo.CREATE,{record:t[0],action:this.action}))})}};(0,o.Cg)([w.x0.Reactive(),w.x0.Inject()],Ot.prototype,"editRowCallChaining",void 0),Ot=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_AddOne}))],Ot);let Nt=class extends A.jk{clickAction(){var e;return(0,o.sH)(this,void 0,void 0,function*(){const{activeRecords:t}=this,i=null===t||void 0===t?void 0:t.map(e=>{const t=(0,l.Go)(e);return Reflect.deleteProperty(t,"__draftId"),Reflect.deleteProperty(t,"__parentDraftId"),Reflect.deleteProperty(t,"__hasChildren"),Reflect.deleteProperty(t,"__lastUpdateFromLocal"),Reflect.deleteProperty(t,"__updateTimestamp"),Reflect.deleteProperty(t,"_X_ROW_KEY"),t}),r=a.F1e.repairRecordsNullable(i);r&&(this.createDataSourceByEntity(r),null===(e=this.editRowCallChaining)||void 0===e||e.call(et.Uo.COPY,{record:r[0],action:this.action}))})}};(0,o.Cg)([w.x0.Reactive(),w.x0.Inject(),(0,o.Sn)("design:type",Object)],Nt.prototype,"editRowCallChaining",void 0),Nt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_CopyOne}))],Nt);let $t=class extends A.jk{clickAction(){return(0,o.sH)(this,void 0,void 0,function*(){console.log("edit")})}};$t=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_EditOne}))],$t);let Mt=class extends A.jk{get label(){var e;return this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName)||(0,a.cAb)("校验")}get validateForm(){return!0}validateAndClick(){return(0,o.sH)(this,void 0,void 0,function*(){const e=yield this.validatorForm();return e})}};(0,o.Cg)([w.x0.Reactive()],Mt.prototype,"label",null),(0,o.Cg)([w.x0.Method()],Mt.prototype,"validateAndClick",null),Mt=(0,o.Cg)([E.DF.ClassFactory(A.jk.Token({name:l.qh.$$internal_ValidateForm}))],Mt)},68706:(e,t,i)=>{i.d(t,{Cm:()=>f,Dx:()=>c,G6:()=>x,HB:()=>m,MQ:()=>p,U6:()=>S,fe:()=>v,kf:()=>C,lC:()=>h,li:()=>g,pL:()=>w,sX:()=>y,uK:()=>d});var r=i(70164),o=i(16022),n=i(97859),a=i(48182),l=i(66401),s=i(1694);const d=(e,t)=>{var i;let r=e;if(!1!==e&&!0!==e||(r=e.toString()),t&&t.length>0)for(const o of t)if((null===(i=o.name)||void 0===i?void 0:i.toString())===r)return o.label||o.displayName||o.name},c=(e,t)=>{const i=[];for(const r of e){const e=d(r,t);null!=e&&i.push(e)}return i.join(", ")},u=(e,t)=>{if(null!=e)return null===t||void 0===t?void 0:t.find(t=>t.name===e)},p=(e,t)=>{const i=[];if(e){for(const r of e){const e=u(r,t);e&&i.push(e)}return i}},h=(e,t)=>{if(Array.isArray(e))return p(e,t);const i=u(e,t);return i?[i]:[]},g=e=>(0,n.A)(e)?e:(0,a.A)(e).replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,"),v=(e,t)=>{if((0,l.A)(e)||!t&&0!==t)return e;const i=e,r=i.split(".");r.length<2&&r.push("");const o=r[1].length,n=r[0];let a=r[1];if(0===t){if(a[0]){const e=(0,s.A)(a[0]);if(e>=5)return`${(0,s.A)(n)+1}`}return n}const d=t-o;if(d<0){let e=(0,s.A)(a.substring(0,t-1)),i=(0,s.A)(a.substring(t-1,t));const r=(0,s.A)(a.substring(t,t+1));return r>=5&&(i+=1,i>9&&(e+=1,i-=10)),`${n}.${e}${i}`}for(let l=0;l<d;l++)a=a.concat("0");return`${n}.${a}`},m=e=>{const t=new RegExp(/^[-\\+]?[0-9]*$/);return t.test(e)},f=e=>{let t="";for(let i=0;i<e.length;i++)t=t.concat("•");return t},y=(e,t)=>{const i=[];let r=0;const o=e.length/t;for(let n=0;n<o;n++){const o=[];for(let i=0;i<t;i++)if(o[i]=e[r++],r===e.length)break;i[n]=o}return i};var b;function C(e,t,i,r,n){var a;const{submitType:l,customSubmitFields:s}=n;let d=r;switch(l){case b.ALL:case b.CURRENT:d=i;break;case b.ROOT:d=t;break;case b.CUSTOM:null===(a=o.MZ.convertArray(s))||void 0===a||a.filter(e=>!!e).forEach(t=>{const r=e.modelFields.find(e=>e.data===t);r&&(d[r.name]=i[r.data])});break}return d}function x(e,t){let i=!1;if(e&&e.length)for(const r of e){const e=t[r];null!=e&&(Array.isArray(e)?(i=!0,t[r]=[]):(i=!0,t[r]=null))}return i}function w(e){return(null===e||void 0===e?void 0:e.map(e=>({key:e.name,value:e.name,label:e.label||e.displayName||e.name,data:e,state:e.state,disabled:!!e.disabled||e.state===r.QE.INACTIVE})))||[]}(function(e){e["ALL"]="ALL",e["CURRENT"]="CURRENT",e["ROOT"]="ROOT",e["SELF"]="SELF",e["CUSTOM"]="CUSTOM"})(b||(b={}));function S(e,t){var i,r;const[o,n]=t;let a,l;if(o){const{data:t,name:r}=o,n=t||r;n&&(a=null===(i=e.getModelField(n))||void 0===i?void 0:i.modelField)}if(n){const{data:t,name:i}=n,o=t||i;o&&(l=null===(r=e.getModelField(o))||void 0===r?void 0:r.modelField)}return{startField:a,endField:l}}},68786:(e,t,i)=>{i.d(t,{A5:()=>S,uk:()=>N,Nn:()=>r.N,d4:()=>j.d,v$:()=>d,HG:()=>c,dP:()=>u,jQ:()=>P,I_:()=>C,td:()=>w,tz:()=>g,Zq:()=>k,u:()=>D});i(71928);var r=i(12606),o=i(15215),n=i(47444);class a extends r.N{refreshProcess(e){return(0,o.sH)(this,void 0,void 0,function*(){})}mountedProcess(){this.setCurrentDataSource(this.value||[])}}(0,o.Cg)([n.x0.Method(),n.x0.Inject("refreshProcess")],a.prototype,"parentRefreshProcess",void 0),(0,o.Cg)([n.x0.Method(),n.x0.Provide()],a.prototype,"refreshProcess",null);class l extends r.N{refreshProcess(e){return(0,o.sH)(this,void 0,void 0,function*(){})}mountedProcess(){const{value:e}=this;this.setCurrentDataSource(null==e?[]:[e])}}(0,o.Cg)([n.x0.Method(),n.x0.Inject("refreshProcess")],l.prototype,"parentRefreshProcess",void 0),(0,o.Cg)([n.x0.Method(),n.x0.Provide()],l.prototype,"refreshProcess",null);var s=i(78422);class d extends a{submit(e){return(0,o.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return s.hLl.M2M(t,i,e,r,o,n,a,l)})}}class c extends l{submit(e){return(0,o.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return s.hLl.M2O(t,i,e,r,o,n,a,l)})}}class u extends a{submit(e){return(0,o.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;return s.hLl.O2M(t,i,e,r,o,n,a,l)})}}var p=i(70164),h=i(32093);class g{static isNeedQuery(e,t,i,r){const{store:o,relationFields:n,referenceFields:a}=e;return!(o||!t||!n.length||!a.length)&&(t===p.nE.Lookup||t===p.nE.Editor&&(i===s.TNZ.increment||r&&[s.A14.diff,s.A14.batch].includes(r)))}static generatorO2MCondition(e,t){const{relationFields:i,referenceFields:r}=e,o={};let n=0;for(let a=0;a<i.length;a++){const e=i[a],l=r[a];if((0,s.$RY)(l))continue;let d;d=(0,s.$RY)(e)?(0,s.pF0)(e):t[e],null!=d&&(o[l]=d,n++)}if(n===i.length)return h.Zd.generatorSimpleCondition(o)}static generatorM2MQueryData(e,t,i){const r=h.Zd.generatorUniqueObject(e,i),{relationFields:o}=t;let n=0;for(const a of o){let e;e=(0,s.$RY)(a)?(0,s.pF0)(a):i[a],null!=e&&(null==r[a]&&(r[a]=e),n++)}if(n===o.length)return r}}var v=i(89284),m=i(50056);class f extends r.N{constructor(){super(...arguments),this.defaultSubviewType=p.qi.Form}get currentParentViewActiveRecords(){return this.parentActiveRecords}get subviewType(){var e;return(null===(e=this.currentViewDsl)||void 0===e?void 0:e.type)||this.defaultSubviewType}get subviewModel(){var e;return(null===(e=this.referencesModel)||void 0===e?void 0:e.model)||this.field.references||super.model.model}get subviewModelName(){var e;return null===(e=this.referencesModel)||void 0===e?void 0:e.name}get subviewModule(){var e;return null===(e=this.referencesModel)||void 0===e?void 0:e.module}get subviewModuleName(){var e;return null===(e=this.referencesModel)||void 0===e?void 0:e.moduleName}get formData(){var e;return(null===(e=this.parentActiveRecords)||void 0===e?void 0:e[0])||{}}initialize(e){super.initialize(e);const{rootHandle:t}=this;return t?(this.metadataSubviewWidget=this.createMetadataSubviewWidget(e),this.initSubview(e),this):(console.error("Invalid root handle. subview init error."),this)}createMetadataSubviewWidget(e){let t;const{rootRuntimeContext:i,field:r}=this;return i&&r&&(t=s.HxA.generatorFieldRuntimeContextHandle(i,r)),this.createWidget(new m.f5(t),void 0,{metadataHandle:this.metadataHandle,rootHandle:this.rootHandle,automatic:!0,internal:!0,inline:!0})}initSubview(e){const{currentViewDsl:t,metadataSubviewWidget:i}=this;let r=t;r||(r=this.getViewDsl(e),this.currentViewDsl=r);const o=this.generatorRuntimeSubview(e);this.runtimeSubviewContext=this.initRuntimeContext(i,o),this.initSubviewAfterProperties(e)}generatorRuntimeSubview(e){return{type:this.subviewType,model:this.subviewModel,modelName:this.subviewModelName||"",module:this.subviewModule,moduleName:this.subviewModuleName,layout:this.getViewLayout(e),dsl:this.currentViewDsl,template:this.getViewTemplate(e)}}getViewLayout(e){}getViewDsl(e){const{template:t}=e;return t&&this.findViewDslNode(t)}getViewTemplate(e){}initSubviewAfterProperties(e){}findViewDslNode(e){var t;return null===(t=e.widgets)||void 0===t?void 0:t.find(e=>e.dslNodeType===v.zX.VIEW)}initRuntimeContext(e,t){return e.initContextByViewForField(t,this.field)}}(0,o.Cg)([n.x0.Reactive(),n.x0.Provide("parentViewActiveRecords")],f.prototype,"currentParentViewActiveRecords",null),(0,o.Cg)([n.x0.Reactive()],f.prototype,"currentViewDsl",void 0),(0,o.Cg)([n.x0.Reactive()],f.prototype,"subviewType",null),(0,o.Cg)([n.x0.Reactive()],f.prototype,"subviewModel",null),(0,o.Cg)([n.x0.Reactive()],f.prototype,"subviewModelName",null),(0,o.Cg)([n.x0.Reactive()],f.prototype,"subviewModule",null),(0,o.Cg)([n.x0.Reactive()],f.prototype,"subviewModuleName",null),(0,o.Cg)([n.x0.Reactive()],f.prototype,"formData",null);var y=i(25195),b=i(25873);class C extends f{constructor(){super(...arguments),this.defaultSubviewType=p.qi.Table,this.defaultComputeTrigger=[y._Vw.CHANGE]}initialize(e){return super.initialize(e),this.setComponent(b.u_),this}initSubviewAfterProperties(e){const{submitCache:t}=this;t&&(this.subviewSubmitCache=t.clone(),this.runtimeSubviewContext.extendData.subviewSubmitCache=this.subviewSubmitCache)}refreshProcess(e){return(0,o.sH)(this,void 0,void 0,function*(){})}get dataSource(){return this.getCurrentDataSource()||void 0}set dataSource(e){this.setCurrentDataSource(e)}reloadDataSource(e){this.setCurrentDataSource(e),this.updateValue(this.dataSource)}get activeRecords(){return this.getCurrentActiveRecords()||void 0}set activeRecords(e){this.setCurrentActiveRecords(e)}reloadActiveRecords(e){this.setCurrentActiveRecords(e)}deleteDataSource(e){const{subviewSubmitCache:t}=this;t&&s.F1e.operator(this.dataSource,t).delete(e),super.deleteDataSource(e)}deleteDataSourceByEntity(e,t){const{subviewSubmitCache:i}=this;i&&s.F1e.operator(this.dataSource,i).deleteByEntity(e,t),super.deleteDataSourceByEntity(e,t)}afterTriggerExecute(e){const t=Object.create(null,{afterTriggerExecute:{get:()=>super.afterTriggerExecute}});var i;return(0,o.sH)(this,void 0,void 0,function*(){yield t.afterTriggerExecute.call(this,e),null===(i=this.refreshCallChaining)||void 0===i||i.syncCall()})}flushDataSource(e=!0){const{dataSource:t,submitCache:i,subviewSubmitCache:r}=this;let o=t;i&&(o=i.submit(t||[])),r&&r.submit(t||[]),e&&this.reloadDataSource(o),this.change(o),this.repairTablePagination()}repairTablePagination(){var e;const t=this.getChildrenWidget().find(e=>"TableView"==e.constructor.name);if(!t)return;const i=t.getChildrenWidget().find(e=>"TableWidget"==e.constructor.name);null===(e=i)||void 0===e||e.repairPaginationAfterDelete()}defaultConstructDataTrigger(){return[y.HCy.CHANGE]}defaultClearFieldsTrigger(){return[y.HCy.CHANGE]}mountedProcess(){return(0,o.sH)(this,void 0,void 0,function*(){yield this.initSubviewData()})}refreshParentProcess(){return(0,o.sH)(this,void 0,void 0,function*(){yield this.initSubviewData()})}refreshValueProcess(){var e;return(0,o.sH)(this,void 0,void 0,function*(){yield this.initSubviewData(),null===(e=this.refreshCallChaining)||void 0===e||e.syncCall()})}initSubviewData(){let e=this.value;null==e&&(e=[]),this.reloadDataSource(e)}}(0,o.Cg)([n.x0.Method(),n.x0.Inject("refreshProcess")],C.prototype,"parentRefreshProcess",void 0),(0,o.Cg)([n.x0.Method(),n.x0.Provide()],C.prototype,"refreshProcess",null),(0,o.Cg)([n.x0.Reactive(),n.x0.Provide()],C.prototype,"dataSource",null),(0,o.Cg)([n.x0.Reactive(),n.x0.Provide()],C.prototype,"activeRecords",null);var x=i(48798);class w extends f{constructor(){super(...arguments),this.defaultSubviewType=p.qi.Form}initialize(e){return super.initialize(e),this.setComponent(b.kQ),this}refreshProcess(e){return(0,o.sH)(this,void 0,void 0,function*(){})}reloadDataSource(e){this.setCurrentDataSource(e)}mountedProcess(){return(0,o.sH)(this,void 0,void 0,function*(){yield this.initSubviewData()})}refreshParentProcess(){return(0,o.sH)(this,void 0,void 0,function*(){yield this.initSubviewData()})}refreshValueProcess(){return(0,o.sH)(this,void 0,void 0,function*(){yield this.initSubviewData()})}onValueChange(){this.notify(x.Mv.ON_FIELD_CHANGE)}initSubviewData(){let e=this.value;null==e&&(e={},this.setValue(e)),this.dataSource=[e],this.activeRecords=[e]}}(0,o.Cg)([n.x0.Method(),n.x0.Inject("refreshProcess")],w.prototype,"parentRefreshProcess",void 0),(0,o.Cg)([n.x0.Method(),n.x0.Provide()],w.prototype,"refreshProcess",null),(0,o.Cg)([n.x0.Watch("value",{deep:!0})],w.prototype,"onValueChange",null);class S extends C{initSubview(e){return(0,o.sH)(this,void 0,void 0,function*(){const{currentViewDsl:t,metadataSubviewWidget:i}=this;if(!i)return;let r=t;r||(r=yield this.getViewDsl(e),this.currentViewDsl=r);const o=yield this.generatorRuntimeSubview(e);this.runtimeSubviewContext=this.initRuntimeContext(i,o),this.initSubviewAfterProperties(e)})}generatorRuntimeSubview(e){return(0,o.sH)(this,void 0,void 0,function*(){return{type:this.subviewType,model:this.subviewModel,modelName:this.subviewModelName||"",module:this.subviewModule,moduleName:this.subviewModuleName,layout:yield this.getViewLayout(e),dsl:this.currentViewDsl,template:yield this.getViewTemplate(e)}})}getViewLayout(e){return(0,o.sH)(this,void 0,void 0,function*(){})}getViewDsl(e){return(0,o.sH)(this,void 0,void 0,function*(){const{template:t}=e;return t&&this.findViewDslNode(t)})}getViewTemplate(e){return(0,o.sH)(this,void 0,void 0,function*(){})}}var T=i(2086),E=i(98165);class A extends E.S8{get referencesModel(){return this.field.referencesModel}get labelFields(){var e;return(null===(e=this.referencesModel)||void 0===e?void 0:e.labelFields)||[]}get searchFields(){var e;return this.getDsl().searchFields||(null===(e=this.referencesModel)||void 0===e?void 0:e.labelFields)}get separator(){return this.getDsl().separator||", "}get relationFieldKey(){var e,t;return(null===(t=null===(e=this.referencesModel)||void 0===e?void 0:e.pks)||void 0===t?void 0:t[0])||"id"}handleTableLabel(e){var t;const i=this.optionLabel||(null===(t=this.referencesModel)||void 0===t?void 0:t.label);let r;return r=(0,p.Po)(i)?(0,T.$r)(this.relationFieldKey,e,this.labelFields,this.separator):(0,T.IR)(this.relationFieldKey,e,i,this.optionLabelContextArgs),r.label}get optionLabel(){const e=this.getDsl().optionLabel;return e||""}get optionLabelContextArgs(){const e=this.getDsl().optionLabelContextArgs;return e||""}resolveReferenceModel(){return(0,o.sH)(this,void 0,void 0,function*(){let{referencesModel:e}=this;if(!e){const t=this.field.references;t&&(e=yield s.Qvr.get(t),e&&(this.field.referencesModel=e))}})}$$mounted(){var e;super.$$mounted(),null===(e=this.parentMountedCallChaining)||void 0===e||e.hook(this.path,()=>(0,o.sH)(this,void 0,void 0,function*(){yield this.resolveReferenceModel()}))}$$unmounted(){var e;super.$$unmounted(),null===(e=this.parentMountedCallChaining)||void 0===e||e.unhook(this.path)}}(0,o.Cg)([n.x0.Reactive()],A.prototype,"referencesModel",null),(0,o.Cg)([n.x0.Reactive(),n.x0.Inject("mountedCallChaining")],A.prototype,"parentMountedCallChaining",void 0),(0,o.Cg)([n.x0.Reactive()],A.prototype,"labelFields",null),(0,o.Cg)([n.x0.Reactive()],A.prototype,"searchFields",null),(0,o.Cg)([n.x0.Reactive()],A.prototype,"separator",null),(0,o.Cg)([n.x0.Reactive()],A.prototype,"relationFieldKey",null),(0,o.Cg)([n.x0.Reactive()],A.prototype,"optionLabel",null),(0,o.Cg)([n.x0.Reactive()],A.prototype,"optionLabelContextArgs",null);class k extends A{renderDefaultSlot(e){var t;const i=null===(t=this.compute(e))||void 0===t?void 0:t.map(e=>this.handleTableLabel(e));return i&&i.length?i.join(", "):""}}(0,o.Cg)([n.x0.Method()],k.prototype,"renderDefaultSlot",null);class D extends A{renderDefaultSlot(e){const t=this.compute(e);return t?this.handleTableLabel(t):""}}(0,o.Cg)([n.x0.Method()],D.prototype,"renderDefaultSlot",null);var F=i(16022);function R(e){return null==e}function O(e){return Array.isArray(e)}class N extends r.N{get labelFields(){var e;return(null===(e=this.referencesModel)||void 0===e?void 0:e.labelFields)||[]}get searchFields(){return F.MZ.convertArray(this.getDsl().searchFields)||this.labelFields}get separator(){return this.getDsl().separator||","}get maxTagCount(){const{maxTagCount:e}=this.getDsl();return F.A5.toNumber(e)||void 0}get optionLabel(){const e=this.getDsl().optionLabel;return e||""}get optionLabelContextArgs(){const e=this.getDsl().optionLabelContextArgs;return e||""}mountedProcess(){const{value:e}=this,t=this.field.multi;null==t?R(e)?this.dataSource=[]:this.dataSource=s.F1e.repairRecords(e):t?R(e)?this.dataSource=[]:O(e)?this.dataSource=s.F1e.repairRecords(e):this.dataSource=[]:R(e)?this.dataSource=[]:O(e)?this.dataSource=s.F1e.repairRecords(e[0]):this.dataSource=s.F1e.repairRecords(e)}}(0,o.Cg)([n.x0.Reactive()],N.prototype,"labelFields",null),(0,o.Cg)([n.x0.Reactive()],N.prototype,"searchFields",null),(0,o.Cg)([n.x0.Reactive()],N.prototype,"separator",null),(0,o.Cg)([n.x0.Reactive()],N.prototype,"maxTagCount",null),(0,o.Cg)([n.x0.Reactive()],N.prototype,"optionLabel",null),(0,o.Cg)([n.x0.Reactive()],N.prototype,"optionLabelContextArgs",null);var $=i(67774),M=i(39277),I=i(97859),L=i(34963),_=i(77679);class P extends N{constructor(){super(...arguments),this.searchValue="",this.queryFieldName="name",this.loadMoreLoading=!1,this.showMoreButton=!1,this.isInitOptions=!1,this.totalPages=1e4,this.currentPage=1,this.pageSize=y.ap5.OPTION_2,this.options=[],this.dataList=[],this.oldDomain=""}get loadFunctionFun(){return this.getDsl().load}defaultConstructDataTrigger(){return[y.HCy.CHANGE]}defaultClearFieldsTrigger(){return[y.HCy.CHANGE]}watchValue(){this.field.multi?this.selectedValues=this.value:this.selectedValue=this.value,(0,p.Po)(this.value)?this.oldDomain&&this.oldDomain!==this.domain&&(this.currentPage=1,this.initLoadOptions(),this.oldDomain=""):this.fillOptions(this.dataList||[])}loadMetadata(){return(0,o.sH)(this,void 0,void 0,function*(){})}generatorSelectOption(e){return this.handleSelectOption(e,this.referencesModel)}handleSelectOption(e,t){const{separator:i=" "}=this.getDsl(),r=this.optionLabel,o=null===t||void 0===t?void 0:t.label;if((0,p.Po)(r)&&(0,p.Po)(o)){let r=[];return r=(null===t||void 0===t?void 0:t.labelFields)||[],(0,T.ot)(this.relationFieldKey,this.value,e,r,i)}return(0,T.vp)(this.relationFieldKey,this.value,e,r,o,this.optionLabelContextArgs)}setQueryFieldName(e){this.queryFieldName=e}fillOptionsForMulti(e){return(0,o.sH)(this,void 0,void 0,function*(){const t=this.referencesModel.pks;if(this.selectedValues)for(let i=0;i<this.selectedValues.length;i++){const r=this.selectedValues[i];if(!r)continue;const o=e.findIndex(e=>{for(let i=0;i<t.length;i++)if(r[t[i]]!==e[t[i]])return!1;return!0});if(o<0)e=[r,...e];else{const i=e.slice(o+1).findIndex(e=>{for(let i=0;i<t.length;i++)if(r[t[i]]!==e[t[i]])return!1;return!0});i>=0&&e.splice(i+1,1)}}this.dataList=e,this.options=this.handleSelectOption(this.dataList,this.referencesModel)})}fillOptionsForSingle(e,t=!0){var i;return(0,o.sH)(this,void 0,void 0,function*(){const r=(null===(i=this.referencesModel)||void 0===i?void 0:i.pks)||[];let o=!0;for(let e=0;e<r.length;e++)if(this.selectedValue&&null==this.selectedValue[r[e]]){o=!1;break}if(this.selectedValue&&o){const i=e.findIndex(e=>{for(let t=0;t<r.length;t++)if(this.selectedValue&&this.selectedValue[r[t]]!==e[r[t]])return!1;return!0});if(i<0&&t)e=[this.selectedValue,...e];else{const t=e.slice(i+1).findIndex(e=>{for(let t=0;t<r.length;t++)if(this.selectedValue&&this.selectedValue[r[t]]!==e[r[t]])return!1;return!0});t>=0&&e.splice(t+1,1)}}this.dataList=e,this.options=this.handleSelectOption(this.dataList,this.referencesModel)})}get renderOnParent(){const e=this.getDsl().renderOnParent;return!(0,I.A)(e)&&e}get clearBackFillSelected(){const e=this.getDsl().clearBackFillSelected;return!(0,I.A)(e)&&e}get relationFieldKey(){return(0,s.q)(this.field,this.referencesModel)}get allowClear(){const{allowClear:e}=this.getDsl();return!!(0,I.A)(e)||e}get showSearch(){const e=this.getDsl().showSearch;return!!(0,I.A)(e)||e}loadMore(){return(0,o.sH)(this,void 0,void 0,function*(){if(this.currentPage+=1,this.currentPage>this.totalPages)return void(this.showMoreButton=!1);this.loadMoreLoading=!0;const e=yield this.loadOptions({condition:(0,T.sR)(this.referencesModel,this.queryFieldName,this.searchValue,this.domain),currentPage:this.currentPage}),t=[...this.dataList,...e.content];yield this.fillOptions(t,!0),this.loadMoreLoading=!1})}onSelect(e){return(0,o.sH)(this,void 0,void 0,function*(){this.selectedOption=e,this.searchValue&&this.search("")})}get maxDepth(){let e=F.A5.toNumber(this.getDsl().maxDepth);return((0,I.A)(e)||-1!==e&&e<=0)&&(e=1),e}loadOriginValue(){return(0,o.sH)(this,void 0,void 0,function*(){const{value:e}=this;if(Array.isArray(e)&&e.length){const t=e.map(e=>e[this.relationFieldKey]),i=this.options.filter(e=>t.includes(e.value)),{references:r}=this.field;if(!i.length&&r){const e=this.handleSelectOption(this.dataList,this.referencesModel);this.options.unshift(...e),this.dataList.unshift(...e)}}})}get needInitOptions(){return Array.isArray(this.value)?!!this.value.length:(this.readonly||this.disabled,!1)}mountedProcess(){super.mountedProcess();const{searchFields:e}=this;e.length&&this.setQueryFieldName(e.join(",")),this.needInitOptions&&this.initLoadOptions()}initLoadOptions(){return(0,o.sH)(this,void 0,void 0,function*(){this.loadMoreLoading=!0;try{const e=yield this.loadOptions({condition:(0,T.sR)(this.referencesModel,this.queryFieldName,this.searchValue,this.domain),currentPage:this.currentPage});e&&(yield this.fillOptions(e.content,!0),this.isInitOptions=!0)}catch(e){console.error("initLoadOptions exp",e)}finally{this.loadMoreLoading=!1}})}loadOptions(e={}){var t;return(0,o.sH)(this,void 0,void 0,function*(){const{references:i}=this.field,r=Object.assign(Object.assign({condition:this.domain,queryData:this.queryData},e),{pageSize:this.pageSize});let{type:o}=this.referencesModel;const n=(null===(t=this.referencesModel)||void 0===t?void 0:t.modelFields)||[];let a;if(i){if(!o){const e=this.referencesModel;o=e.type}if(o===p.e3.STORE||o===p.e3.PROXY){const e=this.model,t=[],o=e.modelFields;if(o)for(const r of o)if(r&&(0,s.s$u)(r)&&r.relatedTtype&&r.related&&r.related.length>1){const e=r.related[0],o=r.related[1];this.field.name===e&&t.push(Object.assign(Object.assign({},r),{model:i,name:o,ttype:r.relatedTtype}))}for(const i of t){const e=null===n||void 0===n?void 0:n.findIndex(e=>e.name===i.name);e<0&&(null===n||void 0===n||n.push(i))}const l=yield this.innerQueryPage(i,r,n,void 0,{maxDepth:this.maxDepth});this.totalPages=P.getRealPages(l.totalPages),this.showMoreButton=this.currentPage<this.totalPages,a=l}}else a={content:[],totalPages:0,totalElements:0,size:0};return a&&!a.content&&(a.content=[]),a})}dropdownVisibleChange(e){var t;const i=this.value&&(0,L.A)(this.value)&&Object.keys(this.value).length,r=this.value&&Array.isArray(this.value)&&this.value.length,o=this.value&&(i||r);e||o||this.search("",!0),e&&!(null===(t=this.options)||void 0===t?void 0:t.length)&&this.initLoadOptions()}search(e,t=!1){return(0,o.sH)(this,void 0,void 0,function*(){if(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),!t&&this.searchValue===e)return;this.searchValue=e,this.currentPage=1,this.timeout=setTimeout(r,400);const i=this;function r(){return(0,o.sH)(this,void 0,void 0,function*(){const e=yield i.loadOptions({condition:(0,T.sR)(i.referencesModel,i.queryFieldName,i.searchValue,i.domain),currentPage:i.currentPage});e&&(i.totalPages=P.getRealPages(e.totalPages),yield i.fillOptions(e.content,!1))})}})}onDomainChange(e,t){return(0,o.sH)(this,void 0,void 0,function*(){e!==t&&(this.oldDomain=t,this.currentPage=1,this.initLoadOptions())})}onQueryChange(e,t){return(0,o.sH)(this,void 0,void 0,function*(){JSON.stringify(e)!==JSON.stringify(t)&&(this.currentPage=1,this.initLoadOptions())})}get maxNumber(){const e=this.getDsl().maxNumber;return e||1/0}get minNumber(){const e=this.getDsl().minNumber;return e||0}get valueEqualOptions(){var e;let t=!1;if(this.value){const i=this.field.multi?null!==(e=this.value)&&void 0!==e?e:[]:[this.value];t=this.options.length===i.length&&this.options.every(e=>!!i.find(t=>t[this.relationFieldKey]===e.value))}return t}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,o.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);if(!(0,_.mO)(t))return t;const{value:i}=this;if(!(0,I.A)(i)&&this.field.multi){const e=F.Gf.cast(i),{length:t}=e;if(t>0){if(!(0,I.A)(this.maxNumber)&&t>this.maxNumber)return this.validatorError(`${this.field.label} ${(0,s.cAb)("最多选择")}${this.maxNumber}${(0,s.cAb)("个")}`);if(!(0,I.A)(this.minNumber)&&t<this.minNumber)return this.validatorError(`${this.field.label} ${(0,s.cAb)("最少选择")}${this.minNumber}${(0,s.cAb)("个")}`)}}return this.validatorSuccess()})}handleEmpty(e=!1){this.selectedOption={},this.search(null,e)}focus(){super.focus(),this.readonly||this.disabled||(!this.options.length||this.valueEqualOptions?this.initLoadOptions():this.isInitOptions||(this.isInitOptions=!0))}blur(){this.options.length||this.handleEmpty(!0),super.blur()}changeSearchValue(e){this.searchValue=e}static getRealPages(e){return(0,I.A)(e)?1e3:e}get queryData(){return this.buildQueryData()}buildQueryData(){return this.genQueryData()}genQueryData(){const e={},t=this.getDsl(),{queryDataConfig:i}=(0,s.RbF)(t,{key:"queryDataConfig",prefix:"queryData"});if(i){for(const t in i){const r=i[t];e[t]=this.executeExpression(r,r)}return e}return{}}innerQueryPage(e,t,i,r,n={}){return(0,o.sH)(this,void 0,void 0,function*(){let{condition:e}=t;if(!(0,p.Po)(t.queryData)){const{queryData:i}=t;"string"===typeof e&&(e=new $.kWY(e)),e||(e=new $.kWY(M.fh)),e.setConditionBodyData(Object.assign(Object.assign({},e.getConditionBodyData()||{}),i))}return s.cqT.queryPage(this.referencesModel,{fun:this.loadFunctionFun,currentPage:t.currentPage,pageSize:t.pageSize,condition:e,requestFields:s.g6N.convertRequestFields(i||[]),variables:r,context:n})})}}(0,o.Cg)([n.x0.Reactive()],P.prototype,"loadMoreLoading",void 0),(0,o.Cg)([n.x0.Reactive()],P.prototype,"showMoreButton",void 0),(0,o.Cg)([n.x0.Reactive()],P.prototype,"isInitOptions",void 0),(0,o.Cg)([n.x0.Reactive()],P.prototype,"options",void 0),(0,o.Cg)([n.x0.Reactive()],P.prototype,"loadFunctionFun",null),(0,o.Cg)([n.x0.Watch("value",{deep:!0})],P.prototype,"watchValue",null),(0,o.Cg)([n.x0.Method()],P.prototype,"generatorSelectOption",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"renderOnParent",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"clearBackFillSelected",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"relationFieldKey",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"allowClear",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"showSearch",null),(0,o.Cg)([n.x0.Method()],P.prototype,"loadMore",null),(0,o.Cg)([n.x0.Method()],P.prototype,"onSelect",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"maxDepth",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"needInitOptions",null),(0,o.Cg)([n.x0.Method()],P.prototype,"dropdownVisibleChange",null),(0,o.Cg)([n.x0.Method()],P.prototype,"search",null),(0,o.Cg)([n.x0.Watch("domain")],P.prototype,"onDomainChange",null),(0,o.Cg)([n.x0.Watch("queryData")],P.prototype,"onQueryChange",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"maxNumber",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"minNumber",null),(0,o.Cg)([n.x0.Reactive()],P.prototype,"valueEqualOptions",null),(0,o.Cg)([n.x0.Method()],P.prototype,"handleEmpty",null),(0,o.Cg)([n.x0.Method()],P.prototype,"focus",null),(0,o.Cg)([n.x0.Method()],P.prototype,"blur",null),(0,o.Cg)([n.x0.Method()],P.prototype,"changeSearchValue",null),(0,o.Cg)([n.x0.Reactive(),n.x0.Provide()],P.prototype,"queryData",null);var j=i(20435)},68890:(e,t,i)=>{i.d(t,{F6:()=>l,tj:()=>a,V5:()=>n,DZ:()=>p,sc:()=>h});var r=i(25195),o=i(65363);const n={showPrefix:{type:Boolean},showSuffix:{type:Boolean},prefix:{type:String,default:""},suffix:{type:String,default:""},prefixStore:{type:Boolean},suffixStore:{type:Boolean},prefixType:{type:String},suffixType:{type:String},prefixes:{type:Array},prefixesValue:{type:String},type:{type:String},clearSetEmpty:{type:[Boolean,String],default:!0},addPrefixSuffix:{type:Function,default:()=>()=>{}},removePrefixSuffix:{type:Function},changeInputRealValue:{type:Function,default:()=>()=>{}},changePrefixesValue:{type:Function,default:()=>()=>{}}},a=Object.assign(Object.assign(Object.assign(Object.assign({},o.jW),o.R7),n),{type:{type:[String,Object],default:r.NZc.TEXT},value:{type:String},defaultValue:{type:String},visibleIcon:{type:String,default:"oinone-visible"},invisibleIcon:{type:String,default:"oinone-invisible"},placeholder:{type:String},allowClear:{type:Boolean},independentlyEditable:{type:Boolean},showCount:{type:Boolean},maxLength:{type:[Number,String]},minLength:{type:[Number,String]},translation:{type:Boolean}}),l=Object.assign(Object.assign({},a),{mode:{type:String},fileSource:{type:String}});var s=i(16022),d=i(20641),c=i(50953),u=i(91702);const p={dropdownClassName:{type:String,default:"oio-select-dropdown form-relation-select-dropdown oio-ant-select-dropdown-global"},readonly:{type:[Boolean,String],default:!1},open:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},maxTagCount:{type:[Number,String],default:"responsive"},maxNumber:{type:Number},relationFieldKey:{type:String,default:"id"},showSearch:{type:[Boolean,String],default:!0},isInitOptions:{type:Boolean},showMoreButton:{type:Boolean},loadMoreLoading:{type:Boolean},allowClear:{type:Boolean},placeholder:{type:String},options:{type:Array},change:{type:Function,default:()=>({})},blur:{type:Function,default:()=>({})},focus:{type:Function,default:()=>({})},search:{type:Function,default:()=>({})},dropdownVisibleChange:{type:Function,default:()=>({})},onSelect:{type:Function,default:()=>({})},loadMore:{type:Function,default:()=>({})},translate:{type:Function,default:()=>({})},getPopupContainer:{type:Function}};function h(e){const t=(0,d.EW)(()=>s.TM.toBoolean(e.readonly)),i=(0,d.EW)(()=>s.TM.toBoolean(e.disabled)),r=(0,d.EW)(()=>{const t=[];return(Array.isArray(e.value)?e.value:[]).forEach(i=>{i&&t.push({value:i[e.relationFieldKey]})}),t}),o=(0,c.KR)(),n=t=>{e.change&&e.change(t),o.value.focus()},a=t=>{e.onSelect(t)},l=t=>{const{scrollHeight:i,scrollTop:r,clientHeight:o}=t.target;i-r-1<=o&&e.loadMore()},{placeholder:p}=(0,u.n$)(e);return{placeholder:p,innerReadonly:t,innerDisabled:i,selectRef:o,currentValue:r,innerChange:n,innerSelect:a,slipSelect:l}}},70164:(e,t,i)=>{i.d(t,{og:()=>y,X2:()=>f,RJ:()=>k,QE:()=>u,eo:()=>_e,KY:()=>X,gH:()=>me,R7:()=>fe,qh:()=>S,G6:()=>c,m1:()=>a,l3:()=>d,e3:()=>n,EV:()=>Le,Bi:()=>Ve,hQ:()=>I,vL:()=>L,Ry:()=>M,T9:()=>D,jq:()=>$,ZN:()=>R,nE:()=>N,qi:()=>O,_E:()=>qe,Go:()=>Ue,M:()=>ze,pE:()=>Qe,tV:()=>Ye,B6:()=>et,Po:()=>it,CG:()=>Je,yL:()=>Ke,vq:()=>T,$T:()=>Xe,aw:()=>Ze,KU:()=>tt,_Y:()=>Ge});var r,o,n,a,l=i(15215),s=i(67774);(function(e){e["ACTIVE"]="ACTIVE",e["INACTIVE"]="INACTIVE"})(r||(r={})),function(e){e["DRAFT"]="DRAFT",e["NOT_ENABLED"]="NOT_ENABLED",e["ENABLED"]="ENABLED",e["DISABLED"]="DISABLED"}(o||(o={})),function(e){e["STORE"]="STORE",e["TRANSIENT"]="TRANSIENT",e["ABSTRACT"]="ABSTRACT",e["PROXY"]="PROXY",e["CLIENT"]="CLIENT"}(n||(n={})),function(e){e["String"]="STRING",e["Text"]="TEXT",e["HTML"]="HTML",e["Phone"]="PHONE",e["Email"]="EMAIL",e["Integer"]="INTEGER",e["Long"]="LONG",e["Float"]="FLOAT",e["Currency"]="MONEY",e["DateTime"]="DATETIME",e["Date"]="DATE",e["Time"]="TIME",e["Year"]="YEAR",e["Boolean"]="BOOLEAN",e["Enum"]="ENUM",e["Map"]="MAP",e["Related"]="RELATED",e["OneToOne"]="O2O",e["OneToMany"]="O2M",e["ManyToOne"]="M2O",e["ManyToMany"]="M2M",e["OBJ"]="OBJ",e["ID"]="ID",e["Null"]="NULL",e["UID"]="UID",e["MultiEnum"]="MULTI_ENUM"}(a||(a={}));const d={ID:"ID",NULL:"空",INTEGER:"整数",LONG:"长整型",FLOAT:"浮点数",BOOLEAN:"布尔型",STRING:"文本",TEXT:"多行文本",DATETIME:"时间日期",DATE:"日期",TIME:"时间",YEAR:"年份",HTML:"富文本",MONEY:"金额",ENUM:"数据字典",MULTI_ENUM:"多枚举",O2O:"一对一",O2M:"一对多",M2O:"多对一",M2M:"多对多",RELATED:"引用类型",MAP:"键值对",UID:"用户ID",PHONE:"手机",EMAIL:"邮箱"};d.STRING,a.String,d.TEXT,a.Text,d.HTML,a.HTML,d.PHONE,a.Phone,d.EMAIL,a.Email,d.INTEGER,a.Integer,d.LONG,a.Long,d.FLOAT,a.Float,d.MONEY,a.Currency,d.DATETIME,a.DateTime,d.DATE,a.Date,d.TIME,a.Time,d.YEAR,a.Year,d.BOOLEAN,a.Boolean,d.ENUM,a.Enum,d.MAP,a.Map,d.O2M,a.OneToMany,d.M2O,a.ManyToOne,d.M2M,a.ManyToMany;var c,u,p,h,g,v,m,f,y,b,C,x,w,S;function T(e){return[a.OneToOne,a.OneToMany,a.ManyToOne,a.ManyToMany].includes(e)}(function(e){e["NON"]="NON",e["JSON"]="JSON",e["COMMA"]="COMMA",e["BIT"]="BIT",e["DOT"]="DOT"})(c||(c={})),function(e){e["ACTIVE"]="ACTIVE",e["INACTIVE"]="INACTIVE"}(u||(u={})),function(e){e["GRAPHQL"]="graphql",e["RESTFUL"]="restful"}(p||(p={})),function(e){e["PRIMITIVE"]="primitive",e["OBJECT"]="object",e["LIST"]="list"}(h||(h={})),function(e){e["CLIENT"]="client",e["SERVER"]="server"}(g||(g={})),function(e){e["CLIENT"]="client",e["SERVER"]="server",e["BOTH"]="both"}(v||(v={})),function(e){e["DOMAIN"]="domain",e["OBJECT"]="object",e["LIST"]="list"}(m||(m={})),function(e){e["Server"]="SERVER",e["View"]="VIEW",e["URL"]="URL",e["Client"]="CLIENT",e["Model"]="model",e["Composition"]="COMPOSITION",e["Custom"]="custom"}(f||(f={})),function(e){e["Single"]="SINGLE",e["Batch"]="BATCH",e["SingleAndBatch"]="SINGLE_AND_BATCH",e["ContextFree"]="CONTEXT_FREE"}(y||(y={})),function(e){e["JAVA"]="JAVA",e["JS"]="JS",e["GROOVY"]="GROOVY"}(b||(b={})),function(e){e["FindOne"]="FindOne",e["FindList"]="FindList",e["FindAll"]="FindAll",e["InsertOne"]="InsertOne",e["UpdateOne"]="UpdateOne",e["DeleteOne"]="DeleteOne",e["DeleteOneInline"]="DeleteOneInline",e["UpdateList"]="UpdateList",e["DeleteList"]="DeleteList"}(C||(C={})),function(e){e["ContextAction"]="contextFreeAction",e["SingleAction"]="singleAction",e["FooterAction"]="footer"}(x||(x={})),function(e){e["ValidateForm"]="validateForm",e["UpdateContext"]="updateContext",e["ShowDialog"]="showDialog",e["SubmitDialog"]="submitDialog",e["CloseDialog"]="closeDialog",e["InsertEmptyItemToList"]="insertEmptyItemToList",e["InsertEmptyItemToBefore"]="insertEmptyItemToBefore",e["InsertEmptyItemToAfter"]="insertEmptyItemToAfter",e["DeleteListItem"]="deleteListItem",e["ReloadData"]="reloadData",e["CopyText"]="copyText",e["Confirm"]="confirm",e["StartCreate"]="startCreate",e["StartInlineEdit"]="startInlineEdit",e["SubmitInlineEdit"]="submitInlineEdit",e["CancelInlineEdit"]="cancelInlineEdit",e["HistoryBack"]="historyBack",e["O2MCreateForm"]="O2MCreateForm",e["O2MEditForm"]="O2MEditForm",e["O2MDelete"]="O2MDelete",e["O2MCreateFormConfirm"]="O2MCreateFormConfirm",e["O2MEditFormConfirm"]="O2MEditFormConfirm",e["M2MCreateTable"]="M2MCreateTable",e["M2MDelete"]="M2MDelete",e["M2MCreateTableConfirm"]="M2MCreateTableConfirm",e["O2MCloseForm"]="O2MCloseForm"}(w||(w={})),function(e){e["create"]="create",e["update"]="update",e["delete"]="delete",e["redirectDetailPage"]="redirectDetailPage",e["redirectCreatePage"]="redirectCreatePage",e["redirectUpdatePage"]="redirectUpdatePage",e["$$internal_AddOne"]="$$internal_AddOne",e["$$internal_EditOne"]="$$internal_EditOne",e["$$internal_CopyOne"]="$$internal_CopyOne",e["$$internal_DeleteOne"]="$$internal_DeleteOne",e["$$internal_ListInsertOneAndBackToList"]="$$internal_ListInsertOneAndBackToList",e["$$internal_ListUpdateOneAndBackToList"]="$$internal_ListUpdateOneAndBackToList",e["$$internal_GotoListImportDialog"]="$$internal_GotoListImportDialog",e["$$internal_GotoListExportDialog"]="$$internal_GotoListExportDialog",e["$$internal_GotoListTableRouter"]="$$internal_GotoListTableRouter",e["$$internal_DialogCancel"]="$$internal_DialogCancel",e["$$internal_GotoO2MCreateDialog"]="$$internal_GotoO2MCreateDialog",e["$$internal_GotoO2MEditDialog"]="$$internal_GotoO2MEditDialog",e["$$internal_O2MUpdateOneAndSubmitDialog"]="$$internal_O2MUpdateOneAndSubmitDialog",e["$$internal_O2MDeleteOne"]="$$internal_O2MDeleteOne",e["$$internal_DialogSubmit"]="$$internal_DialogSubmit",e["$$internal_O2MInsertOneAndSubmitDialog"]="$$internal_O2MInsertOneAndSubmitDialog",e["$$internal_ListUpdateAndCloseDialogReloadOpenerAction"]="$$internal_ListUpdateAndCloseDialogReloadOpenerAction",e["$$internal_ListInsertOneAndCloseDialog"]="$$internal_ListInsertOneAndCloseDialog",e["$$internal_GotoM2MListDialog"]="$$internal_GotoM2MListDialog",e["$$internal_ReloadData"]="$$internal_ReloadData",e["$$internal_ValidateForm"]="$$internal_ValidateForm",e["$$internal_Download"]="$$internal_Download",e["$$internal_BatchUpdate"]="$$internal_BatchUpdate",e["$$internal_DownloadImportWorkbook"]="$$internal_DownloadImportWorkbook",e["$$internal_ImportWorkbook"]="$$internal_ImportWorkbook",e["$$internal_ExportWorkbook"]="$$internal_ExportWorkbook",e["$$internal_PrintPdfDocument"]="$$internal_PrintPdfDocument"}(S||(S={}));S.create,S.update,S.delete,S.redirectDetailPage,S.redirectCreatePage,S.redirectUpdatePage;var E,A,k,D,F,R,O,N,$,M;(function(e){e["Sequential"]="sequential",e["Parallel"]="parallel",e["ForkJoin"]="fork-join",e["Race"]="race"})(E||(E={})),function(e){e["Client"]="client",e["Server"]="server",e["Both"]="both"}(A||(A={})),function(e){e["MASK"]="MASK",e["BLOCK"]="BLOCK",e["HEADER"]="HEADER",e["CONTAINER"]="CONTAINER",e["SIDEBAR"]="SIDEBAR",e["CONTENT"]="CONTENT",e["VIEW"]="VIEW",e["FIELD"]="FIELD",e["GROUP"]="GROUP",e["GRID"]="GRID",e["ACTION"]="ACTION",e["API"]="API",e["CONTEXT"]="CONTEXT",e["REQUEST"]="REQUEST",e["RESPONSE"]="RESPONSE",e["CLEAR"]="CLEAR",e["FILTER"]="FILTER",e["WIDGET"]="WIDGET",e["PROP"]="PROP",e["VALIDATION"]="VALIDATION"}(k||(k={})),function(e){e["SIGN_UP_PHONE"]="SIGN_UP_PHONE",e["SIGN_UP_EMAIL"]="SIGN_UP_EMAIL",e["PHONE_MODIFY_PASSWORD_BY_PHONE_SUBMIT"]="MODIFY_PASSWORD_BY_PHONE",e["PHONE_MODIFY_PASSWORD_BY_PHONE_SEND_CODE"]="MODIFY_PASSWORD_BYPHONE_SEND_CODE",e["EMAIL_MODIFY_PASSWORD_BY_EMAIL_SUBMIT"]="MODIFY_PASSWORD_BY_EMAIL",e["EMAIL_MODIFY_PASSWORD_BY_EMAIL_SEND_CODE"]="MODIFY_PASSWORD_SEND_RESET_EMAIL",e["PHONE_MODIFY_PHONE_SUBMIT"]="MODIFY_PHONE",e["PHONE_MODIFY_PHONE_OLD_PHONE_CODE"]="MODIFY_PHONE_OLD_PHONE_CODE",e["EMAIL_MODIFY_PHONE_SEND_EMAIL_CODE"]="MODIFY_PHONE_SEND_EMAIL",e["PHONE_MODIFY_PHONE_NEW_PHONE_CODE"]="MODIFY_PHONE_NEW_PHONE_CODE",e["EMAIL_MODIFY_EMAIL_SUBMIT"]="MODIFY_EMAIL",e["EMAIL_MODIFY_EMAIL_SEND_OLD_EMAIL"]="MODIFY_EMAIL_SEND_OLD_EMAIL",e["PHONE_MODIFY_EMAIL_SEND_PHONE_CODE"]="MODIFY_EMAIL_SEND_PHONE_CODE",e["EMAIL_MODIFY_EMAIL_SEND_NEW_EMAIL"]="MODIFY_EMAIL_SEND_NEW_EMAIL",e["PHONE_ADD_CORP_SEND_PHONE_CODE"]="ADD_CORP_SEND_PHONE_CODE",e["EMAIL_ADD_CORP_SEND_EMAIL_CODE"]="ADD_CORP_SEND_EMAIL_CODE",e["PHONE_LOGIN_BY_PHONE_CODE"]="LOGIN_BY_PHONE_CODE",e["PHONE_SEND_LOGIN_BY_PHONE_CODE"]="SEND_LOGIN_BY_PHONE_CODE",e["EMAIL_LOGIN_BY_EMAIL_CODE"]="LOGIN_BY_EMAIL_CODE",e["EMAIL_SEND_LOGIN_BY_EMAIL_CODE"]="SEND_LOGIN_BY_EMAIL_CODE"}(D||(D={})),function(e){e["List"]="LIST",e["Object"]="OBJECT"}(F||(F={})),function(e){e["PC"]="PC",e["MOBILE"]="MOBILE"}(R||(R={})),function(e){e["Table"]="TABLE",e["Form"]="FORM",e["Detail"]="DETAIL",e["Search"]="SEARCH",e["Gallery"]="GALLERY",e["Tree"]="TREE",e["Multiple"]="MULTIPLE",e["Custom"]="CUSTOM"}(O||(O={})),function(e){e["Create"]="CREATE",e["Editor"]="EDITOR",e["Lookup"]="LOOKUP"}(N||(N={})),function(e){e["Router"]="ROUTER",e["Dialog"]="DIALOG",e["Drawer"]="DRAWER",e["Inner"]="INNER",e["OpenWindow"]="OPEN_WINDOW",e["Frame"]="iframe"}($||($={})),function(e){e["SYSTEM"]="SYSTEM",e["BASE"]="BASE",e["MANUAL"]="MANUAL",e["UI"]="UI",e["RELATION"]="RELATION",e["ABSTRACT_INHERITED"]="ABSTRACT_INHERITED",e["TRANSIENT_INHERITED"]="TRANSIENT_INHERITED",e["EXTEND_INHERITED"]="EXTEND_INHERITED",e["MULTI_TABLE_INHERITED"]="MULTI_TABLE_INHERITED",e["PROXY_INHERITED"]="PROXY_INHERITED"}(M||(M={}));const I={BASE:"base",COMMON:"common",USER:"user",AUTH:"auth",MESSAGE:"message",RESOURCE:"resource",FILE:"file",DESIGNER_COMMON:"designer_common"},L={BASE:"base",COMMON:"common",USER:"user",AUTH:"auth",MESSAGE:"message",RESOURCE:"resource",FILE:"file",DESIGNER_COMMON:"designerCommon"};var _=i(28740);const P=_.Ay`
  fragment Action on Action {
    id
    name
    displayName
    label
    description
    actionType
    contextType
    bindingType
    sessionPath
    model
    modelName
    invisible
    priority
    attributes
  }
`,j=_.Ay`
  fragment ViewAction on ViewAction {
    id
    name
    title
    displayName
    actionType
    target
    domain
    viewType
    dataType
    contextType
    bindingType
    bindingViewName
    sessionPath
    model
    resModel
    invisible
    moduleName
    resModule
    resModuleName
    context
    priority
    attributes
  }
`,V=_.Ay`
  fragment UrlAction on UrlAction {
    id
    name
    displayName
    url
    target
    description
    actionType
    contextType
    bindingType
    sessionPath
    model
    modelName
    invisible
    compute
    context
    priority
  }
`,B=_.Ay`
  fragment ServerAction on ServerAction {
    id
    name
    displayName
    label
    description
    actionType
    contextType
    bindingType
    sessionPath
    model
    modelName
    invisible
    priority
    fun
    functionDefinition {
      method
      name
      type
      argumentList {
        name
      }
    }
  }
`,H=_.Ay`
  fragment ClientAction on ClientAction {
    id
    name
    displayName
    label
    description
    actionType
    contextType
    bindingType
    sessionPath
    model
    modelName
    invisible
    priority
    fun
  }
`,W=_.Ay`
  fragment Field on Field {
    id
    name
    displayName
    ttype
    model
    multi
    references
    size
    limit
    related
    relatedTtype
    store
    storeSerialize
    relationStore
    required
    relationFields
    referenceFields
    throughRelationFields
    throughReferenceFields
    through
    invisible
    field
    domainSize
    index
    unique
    decimal
    systemSource
    format
    options {
      name
      displayName
      value
    }
    attributes
  }
`,U=_.Ay`
  fragment Func on Function {
    type
    namespace
    fun
    name
    argumentList {
      name
      ttype
      model
    }
    returnType {
      ttype
      model
    }
  }
`,q=_.Ay`
  fragment Menu on Menu {
    serverAction {
      ...ServerAction
    }
    viewAction {
      ...ViewAction
    }
    urlAction {
      ...UrlAction
    }
    id
    icon
    name
    displayName
    priority
    actionType
    mapping
    context
    parentName
    moduleDefinition {
      name
      displayName
      id
    }
  }
  ${B}
  ${j}
  ${V}
`,z=_.Ay`
  fragment View on View {
    id
    name
    type
    model
    title
    template
    active
    priority
    systemSource
  }
`,G=_.Ay`
  fragment Model on Model {
    id
    pk
    model
    name
    displayName
    labelFields
    label
    moduleName
    module
    type
    attributes
    ordering
    indexes
    uniques
    modelFields {
      ...Field
    }
    viewActionList {
      ...ViewAction
    }
    serverActionList {
      ...ServerAction
    }
    urlActionList {
      ...UrlAction
    }
    viewList {
      ...View
    }
    clientActionList {
      ...ClientAction
    }
    functions {
      ...Func
    }
  }
  ${W}
  ${j}
  ${B}
  ${V}
  ${H}
  ${z}
  ${U}
`,K=_.Ay`
  fragment ModelWithFields on Model {
    id
    pk
    model
    name
    displayName
    labelFields
    label
    moduleName
    module
    type
    attributes
    ordering
    indexes
    uniques
    modelFields {
      ...Field
    }
  }
  ${W}
`,X={Model:G,ModelWithFields:K,Field:W,UrlAction:V,ServerAction:B,ViewAction:j,ClientAction:H,Action:P,Menu:q,View:z,Func:U},Q="...FuncV3",Y=_.Ay`
  fragment FuncV3 on Function {
    type
    namespace
    fun
    name
    argumentList {
      name
      ttype
      multi
      model
    }
    returnType {
      ttype
      multi
      model
    }
  }
`,J="...ModelV3",Z=_.Ay`
  fragment ModelV3 on ModelDefinition {
    id
    model
    name
    type
    module
    moduleName
    pk
    uniques
    indexes
    ordering
  }
`,ee="...ModuleV3",te=_.Ay`
  fragment ModuleV3 on ModuleDefinition {
    module
    name
    displayName
  }
`,ie="...MaskV3",re=_.Ay`
  fragment MaskV3 on MaskDefinition {
    name
    template
  }
`,oe="...LayoutV3",ne=_.Ay`
  fragment LayoutV3 on LayoutDefinition {
    name
    template
  }
`,ae="...ViewV3",le=_.Ay`
  fragment ViewV3 on View {
    id
    model
    modelDefinition {
      model
      name
      module
      moduleName
    }
    name
    title
    type
    template
    extension
    baseLayoutName
    baseLayoutDefinition {
      ${oe}
    }
  }
  ${ne}
`,se="...ViewActionV3",de="...SharedPageViewActionV3",ce="...ServerActionV3",ue="...UrlActionV3",pe=_.Ay`
  fragment ViewActionV3 on ViewAction {
    id
    name
    title
    displayName
    contextType
    viewType
    target
    theme
    domain
    filter
    load
    mapping
    context
    sessionPath
    model
    modelName
    modelDefinition {
      ${J}
    }
    module
    moduleName
    moduleDefinition {
      ${ee}
    }
    resModel
    resModelDefinition {
      ${J}
    }
    resModule
    resModuleName
    resModuleDefinition {
      ${ee}
    }
    mask
    maskDefinition {
      ${ie}
    }
    resViewName
    resView {
      ${ae}
    }
  }
  ${Z}
  ${te}
  ${re}
  ${le}
`,he=_.Ay`
  fragment SharedPageViewActionV3 on SharedPageViewAction {
    id
    name
    title
    displayName
    contextType
    viewType
    target
    theme
    domain
    filter
    load
    sessionPath
    sharedCode
    authorizationCode
    sharedParameters
    browserTitle
    language
    languageIsoCode
    model
    modelName
    modelDefinition {
      ${J}
    }
    module
    moduleName
    moduleDefinition {
      ${ee}
    }
    resModel
    resModelDefinition {
      ${J}
    }
    resModule
    resModuleName
    resModuleDefinition {
      ${ee}
    }
    mask
    maskDefinition {
      ${ie}
    }
    resViewName
    resView {
      ${ae}
    }
  }
  ${Z}
  ${te}
  ${re}
  ${le}
`,ge=_.Ay`
  fragment ServerActionV3 on ServerAction {
    id
    name
    displayName
    label
    description
    actionType
    contextType
    bindingType
    sessionPath
    model
    modelName
    invisible
    priority
    fun
    functionDefinition {
      ${Q}
    }
  }

  ${Y}
`,ve=_.Ay`
  fragment UrlActionV3 on UrlAction {
    id
    name
    displayName
    url
    target
    description
    actionType
    contextType
    bindingType
    sessionPath
    model
    modelName
    invisible
    compute
    context
    priority
  }
`,me={Module:te,Model:Z,ViewAction:pe,SharedViewAction:he,ServerAction:ge,UrlAction:ve,View:le,Function:Y},fe={Module:ee,Model:J,ViewAction:se,SharedViewAction:de,ServerAction:ce,UrlAction:ue,View:ae,Function:Q};function ye(e,t){e.onload=Ce(e.src,t),e.onerror=xe(e.src,t)}function be(e,t){e.onload=Ce(e.href,t),e.onerror=xe(e.href,t)}function Ce(e,t){return()=>{t()}}function xe(e,t){return()=>{t(),console.error(`load error. ${e}`)}}let we=0;class Se{constructor(){}load(e){return(0,l.sH)(this,void 0,void 0,function*(){const{id:t,path:i,dependencies:r}=e,o=document.getElementById(t);if(!o)return r&&(yield this.loadDependencies(r)),new Promise(e=>{const r=document.createElement("script");r.id=t,r.src=i,r.type="module",ye(r,e),document.body.append(r)})})}loadDependencies(e){return(0,l.sH)(this,void 0,void 0,function*(){const t={};if(Object.entries(e).forEach(([e,i])=>{"string"===typeof i&&(t[e]=i)}),Object.keys(t).length)return new Promise(e=>{const i=document.createElement("script");i.id="import-map-"+we++,i.type="importmap",i.text=JSON.stringify({imports:t}),ye(i,e),document.body.append(i)})})}}Se.INSTANCE=new Se;class Te{constructor(){}load(e){return Se.INSTANCE.load(e)}loadDependencies(e){return Se.INSTANCE.loadDependencies(e)}}Te.INSTANCE=new Te;class Ee{constructor(){}load(e){return(0,l.sH)(this,void 0,void 0,function*(){const{id:t,path:i}=e,r=document.getElementById(t);if(!r)return new Promise(e=>{const r=document.createElement("link");r.id=t,r.href=i,r.rel="stylesheet",r.type="text/css",be(r,e),document.body.append(r)})})}loadDependencies(){return(0,l.sH)(this,void 0,void 0,function*(){})}}Ee.INSTANCE=new Ee;class Ae{load(e){return(0,l.sH)(this,void 0,void 0,function*(){const{id:t,path:i,dependencies:r}=e,o=document.getElementById(t);if(!o)return r&&(yield this.loadDependencies(r)),new Promise(e=>{const r=document.createElement("script");r.id=t,r.src=i,r.type="text/javascript",ye(r,e),document.body.append(r)})})}loadDependencies(e){return(0,l.sH)(this,void 0,void 0,function*(){if(!e)return;const t=window;yield Promise.allSettled(Object.entries(e).map(([e,r])=>(0,l.sH)(this,void 0,void 0,function*(){if(void 0===t[e]){let o;o="string"===typeof r?yield i(80419)(r):yield r,o||(o=null),void 0===t[e]&&(t[e]=o)}})))})}}Ae.INSTANCE=new Ae;class ke{constructor(){}load(e){return Ae.INSTANCE.load(e)}loadDependencies(e){return Ae.INSTANCE.loadDependencies(e)}}ke.INSTANCE=new ke;class De{static get(e){switch(e){case"esm":return Se.INSTANCE;case"cjs":return Te.INSTANCE;case"umd":return Ae.INSTANCE;case"iife":return ke.INSTANCE;case"css":return Ee.INSTANCE}}}class Fe{static load(e){return(0,l.sH)(this,void 0,void 0,function*(){yield Promise.allSettled(e.map(e=>{var t;return null===(t=De.get(e.type))||void 0===t?void 0:t.load(e)}))})}static loadDependencies(e,t){var i;return(0,l.sH)(this,void 0,void 0,function*(){yield null===(i=De.get(e))||void 0===i?void 0:i.loadDependencies(t)})}}let Re=1;function Oe(e){return!!e}class Ne{constructor(){}static loadDependencies(e){return(0,l.sH)(this,void 0,void 0,function*(){let t;t=Array.isArray(e)?e:[{type:"umd",dependencies:e}],yield Promise.allSettled(t.map(e=>Fe.loadDependencies(e.type,e.dependencies)))})}static loadJavascript(e){return Fe.load(e.map(e=>"string"===typeof e?{id:"plugin-"+Re++,type:"umd",path:e}:e.path?{id:"plugin-"+Re++,type:e.type||"umd",path:e.path}:void console.error("Invalid javascript plugin.",e)).filter(Oe))}static loadCSS(e){return Fe.load(e.map(e=>({id:"plugin-css-"+Re++,type:"css",path:e})))}}const $e=s.Qq5.getInstance();class Me{load(){return(0,l.sH)(this,void 0,void 0,function*(){let e=this.cache;if(void 0===e&&(e=yield Ie(),e||(e=null),this.cache=e),e){const{javascript:t,css:i}=e,r=[];t&&r.push(Ne.loadJavascript(t)),i&&r.push(Ne.loadCSS(i)),yield Promise.allSettled(r)}})}}function Ie(){return(0,l.sH)(this,void 0,void 0,function*(){const e=s.J1T`
    {
      widgetDefinitionQuery {
        loadSDK(data: {}) {
          javascript
          css
        }
      }
    }
  `;try{const t=yield $e.query(L.BASE,e);return t.data.widgetDefinitionQuery.loadSDK}catch(t){return void console.error("remote plugin load error.",t)}})}Me.INSTANCE=new Me;class Le{static load(e,t){return(0,l.sH)(this,void 0,void 0,function*(){const{dependencies:i,mounted:r,usingRemote:o}=e;if(t&&(yield Ne.loadDependencies(t)),i&&(yield Ne.loadDependencies(i)),r)if(Array.isArray(r))yield Ne.loadJavascript(r);else{const{js:e,css:t}=r;e&&(yield Ne.loadJavascript(e)),t&&(yield Ne.loadCSS(t))}o&&(yield Me.INSTANCE.load())})}}class _e{static resister(e){this._config=e}static getConfig(){return this._config}static getConfigByName(e){return"login"===e?this._config.login||this.defaultLoginPath:this._config[e]}}_e.defaultLoginPath="/login",_e._config={};const Pe="runtimeConfigResolve",je={init:!1,updateTime:new Date,value:{}};class Ve{static init(e){return(0,l.sH)(this,void 0,void 0,function*(){if(!je.init)return We()})}static get(){return je.init&&je.value||{}}static getConfig(e){return Ve.get()[e]}}function Be(e){return()=>{e({}),Reflect.deleteProperty(window,Pe)}}function He(){return new Promise(e=>{Reflect.set(window,Pe,t=>{e(t),Reflect.deleteProperty(window,Pe)});const t=document.createElement("script");t.src=`${{NODE_ENV:"production",BASE_URL:"/"}.RUNTIME_CONFIG_BASE_URL||""}/${{NODE_ENV:"production",BASE_URL:"/"}.RUNTIME_CONFIG_FILENAME||"manifest"}.js`;const i=Be(e);t.onload=i,t.onerror=i,document.body.appendChild(t)})}function We(){if(!je.init&&!Reflect.get(window,Pe))return He().then(e=>(0,l.sH)(this,void 0,void 0,function*(){je.updateTime=new Date,je.value=e})).finally(()=>{je.init=!0})}function Ue(e){return null==e?e:JSON.parse(JSON.stringify(e))}const qe=e=>e?Array.isArray(e)?null:Ue(e):{};const ze=e=>({name:e.data,ttype:e.ttype,references:e.references,relatedTtype:e.relatedTtype}),Ge=e=>({data:e.name,name:e.name,ttype:e.ttype,references:e.references,relatedTtype:e.relatedTtype});function Ke(e){return!!e&&"function"===typeof e.then}const Xe=e=>{switch(e.ttype){case a.Boolean:case a.Integer:case a.Long:case a.Float:case a.Currency:case a.String:case a.Email:case a.Phone:case a.ID:case a.Date:case a.DateTime:case a.Time:case a.Year:case a.Enum:case a.MultiEnum:case a.HTML:case a.Map:case a.Text:return!0;default:return!1}},Qe=e=>[a.OneToOne,a.OneToMany,a.ManyToOne,a.ManyToMany].includes(e),Ye=e=>[a.Date,a.DateTime,a.Year,a.Time].includes(e),Je=e=>[a.ID,a.UID,a.Integer,a.Long,a.Float,a.Currency].includes(e),Ze=e=>[a.String,a.Text,a.HTML,a.Phone,a.Email].includes(e),et=e=>{if(!1===e||0===e)return!1;if(!e)return!0;if(e instanceof Object){if(0===Object.keys(e||{}).length)return!0;const t=Object.keys(e||{}).filter(e=>!e.startsWith("_"));return 0===t.length}return!(!Array.isArray(e)||0!==e.length)},tt=e=>et(e)||Array.isArray(e)&&0===e.length,it=e=>void 0===e||null===e||""===e||Array.isArray(e)&&0===e.length||"object"===typeof e&&0===Object.keys(e).length},70409:(e,t,i)=>{i.d(t,{j:()=>r.j});var r=i(87547)},71928:(e,t,i)=>{i.d(t,{C:()=>a});var r=i(20641),o=i(16022),n=i(78422);function a(e){const t=(0,r.EW)(()=>{const t=o.TM.toBoolean(e.value);return"boolean"!==typeof t?"":t?(0,n.cAb)("是"):(0,n.cAb)("否")});return{realLabel:t}}},72831:(e,t,i)=>{i.d(t,{V:()=>r});const r={change:{type:Function},blur:{type:Function},focus:{type:Function},readonly:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},value:{type:[Array,Object]},multiple:{type:Boolean},limit:{type:[Number,String],default:-1},limitSize:{type:[Number,String],default:-1},allLimitSize:{type:String,default:""},emptyStyle:{type:String},uploadPlaceholder:{type:String},uploadIcon:{type:String},uploadIconText:{type:String},limitFileExtensions:{type:[String,Array]},remove:{type:Function},translate:{type:Function},progress:{type:Object},cdnKey:{type:String},privateLink:{type:Boolean,default:void 0},contentType:{type:String,default:""},drop:{type:Function},managed:{type:Boolean,default:!0},partSize:{type:Number},chunkUploadThreshold:{type:Number},parallel:{type:Number}}},74905:(e,t,i)=>{i.d(t,{Ai:()=>o,Un:()=>s.U,w:()=>n,EC:()=>r,WC:()=>l});const r=0,o=100,n=200;function a(e){return null==e||e}const l=(e,t,i)=>!!a(t)&&(i.status?i.results.every(e=>a(e)):i.status);var s=i(49839)},75208:(e,t,i)=>{i.d(t,{X:()=>r,t:()=>u});var r,o=i(15215),n=i(78422),a=i(16022),l=i(25195),s=i(47444),d=i(97859),c=i(91702);(function(e){e["ICON"]="ICON",e["TEXT"]="TEXT"})(r||(r={}));class u extends c.d4{get showPrefix(){const e=this.getDsl().showSuffix;return e||!1}get showSuffix(){const e=this.getDsl().showSuffix;return e||!1}get prefix(){const{prefix:e=""}=this.getDsl();return(0,n.cAb)(e)}get suffix(){const{suffix:e=""}=this.getDsl();return(0,n.cAb)(e)}get independentlyEditable(){return a.TM.toBoolean(this.getDsl().independentlyEditable)}get prefixType(){return this.getDsl().prefixType}get suffixType(){return this.getDsl().suffixType}get prefixStore(){const e=this.getDsl().prefixStore;return e||!1}get suffixStore(){const e=this.getDsl().suffixStore;return e||!1}get prefixes(){const e=this.getDsl().prefixes;return e?e.split(","):e}get mode(){return this.getDsl().mode||l.Mmj.DYNAMIC}get type(){return this.getDsl().type}addPrefixSuffix(e){let t=e;return this.mode===l.Mmj.DYNAMIC&&this.prefixStore&&!(0,d.A)(this.prefix)&&this.prefixType===r.TEXT&&(t&&t.startsWith(this.prefix)||(t=`${this.prefix}${t||""}`)),this.suffixStore&&!(0,d.A)(this.suffix)&&this.suffixType===r.TEXT&&(t&&t.endsWith(this.suffix)||(t=`${t||""}${this.suffix}`)),(0,d.A)(this.prefixesValue)||(t=`${this.prefixesValue}${t||""}`),t}removePrefixSuffix(e){let t=e;if(this.mode===l.Mmj.DYNAMIC&&this.prefixes&&this.prefixes.length&&t)for(const i of this.prefixes)if(i&&t.startsWith(i)){this.prefixesValue=i,t=t.replace(i,"");break}if(this.prefixStore&&!(0,d.A)(this.prefix)&&this.prefixType===r.TEXT)if(t){const e=this.prefix.length,i=t.length;if(e<=i)if(this.prefix===t)t="";else{const i=t.substring(0,e-1===0?1:e);i===this.prefix&&(t=t.replace(this.prefix,""))}}else t="";if(this.suffixStore&&!(0,d.A)(this.suffix)&&this.suffixType===r.TEXT){if(!t)return t="",t;const e=this.suffix.length,i=t.length;if(e>i)return t;if(this.suffix===t)return t="",t;const r=t.substring(i-e,i-1===0?1:i);r===this.suffix&&(t=t.substring(0,i-e))}return t}changeInputRealValue(e){this.inputRealValue=e,this.change(this.addPrefixSuffix(e))}changePrefixesValue(e){let t="";e&&(t=e);const i=this.value;this.prefixesValue&&i?this.change(i.replace(this.prefixesValue,t)):this.prefixesValue&&!i||(!this.prefixesValue&&i?this.change(t+i):this.change(t)),this.prefixesValue=e}}(0,o.Cg)([s.x0.Reactive()],u.prototype,"showPrefix",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"showSuffix",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"prefix",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"suffix",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"independentlyEditable",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"prefixType",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"suffixType",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"prefixStore",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"suffixStore",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"prefixes",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"mode",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"type",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"addPrefixSuffix",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"removePrefixSuffix",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"inputRealValue",void 0),(0,o.Cg)([s.x0.Reactive()],u.prototype,"prefixesValue",void 0),(0,o.Cg)([s.x0.Reactive()],u.prototype,"changeInputRealValue",null),(0,o.Cg)([s.x0.Reactive()],u.prototype,"changePrefixesValue",null)},76533:(e,t,i)=>{i.d(t,{D:()=>S});var r=i(15215),o=i(78422),n=i(16022),a=i(25195),l=i(47444),s=i(31095),d=i(22237),c=i(30717),u=i(97859),p=i(98916),h=i(20641),g=i(50953),v=i(53751),m=i(3816),f=i(32093),y=i(3640);const b=f.m9.SELECT_ALL_KEY,C=(0,h.pM)({name:"DefaultFieldTree",components:{OioTree:c.qbe,OioInputSearch:c.G9},inheritAttrs:!1,props:Object.assign(Object.assign({},y.y),{viewType:{type:String},template:{type:Object},autoExpandParent:{type:Boolean},showIcon:{type:Boolean}}),setup(e){const t=(0,h.EW)(()=>{var t,i;const r=[];e.checkAll&&r.push({isLeaf:!0,title:(0,o.cAb)(e.checkAllLabel),class:f.m9.SELECT_ALL_CLASS_NAME,key:b,value:{}});const n=null===(t=e.searchRootNode)||void 0===t?void 0:t.children;return n?(r.push(...n),r):(r.push(...f.m9.fillLoadMoreAction([...(null===(i=e.rootNode)||void 0===i?void 0:i.children)||[]])),r)}),i=(0,h.EW)(()=>{var t,i;let r,o=null===(i=null===(t=e.rootNode)||void 0===t?void 0:t.value)||void 0===i?void 0:i.metadata;while(o){const e=o.model;if(e)if(r){if(r!==e)return!1}else r=e;o=o.child}return!!r}),n=(0,g.KR)([]),a=(0,h.EW)({get(){return e.expandedKeys||n.value},set(t){var i;n.value=t,null===(i=e.onUpdateExpandedKeys)||void 0===i||i.call(e,t)}}),l=e=>{a.value=e},s=(0,g.KR)([]),d=(0,h.EW)({get(){return e.selectedKeys||s.value},set(t){var i;s.value=t,null===(i=e.onUpdateSelectedKeys)||void 0===i||i.call(e,t)}}),c=e=>{d.value=e},v=(0,g.KR)([]),m=(0,h.EW)({get(){return e.checkedKeys||v.value},set(t){var i;v.value=t,null===(i=e.onUpdateCheckedKeys)||void 0===i||i.call(e,t)}}),y=(0,g.KR)([]),C=(0,h.EW)({get(){return e.halfCheckedKeys||y.value},set(t){var i;y.value=t,null===(i=e.onUpdateHalfCheckedKeys)||void 0===i||i.call(e,t)}}),x=(0,h.EW)(()=>({checked:m.value,halfChecked:C.value})),w=({checked:e,halfChecked:t})=>{m.value=e,y.value=t},S=({node:t,selected:i})=>(0,r.sH)(this,void 0,void 0,function*(){var r;null===(r=e.onSelected)||void 0===r||r.call(e,t,i)}),T=({node:t,checked:i})=>(0,r.sH)(this,void 0,void 0,function*(){var r;null===(r=e.onChecked)||void 0===r||r.call(e,t,i)}),E=({value:t})=>{var i;null===(i=e.onSearch)||void 0===i||i.call(e,t)},A=t=>(0,r.sH)(this,void 0,void 0,function*(){var i;const{key:r,parent:o}=t,n=null===o||void 0===o?void 0:o.children;if(n){const o=n[n.length-2];t.loadingMore=!0;try{yield null===(i=e.loadMoreData)||void 0===i?void 0:i.call(e,o);let t=-1;for(let e=n.length-1;e>=0;e--){const i=n[e];if(i.key===r){t=e;break}}-1!==t&&n.splice(t,1)}finally{t.loadingMore=!1}}}),k=t=>{const i=e.nodeCheckedAll;return!(0,u.A)(i)&&((0,p.A)(i)?i:i(t))};return{treeData:t,isSameModel:i,selectedKeys:d,expandedKeys:a,checkedKeys:m,finalCheckedKeys:x,onUpdateSelectedKeys:c,onUpdateExpandedKeys:l,onUpdateCheckedKeys:w,onSelected:S,onChecked:T,onSearch:E,onClickLoadMore:A,nodeCheckedAll:k}},render(){var e,t,i,r,n;const a=(0,h.bF)(c.qbe,{key:null===(e=this.rootNode)||void 0===e?void 0:e.key,data:this.treeData,loading:this.loading,wrapperClassName:"default-tree-wrapper",selectable:this.selectable,checkable:this.checkable,checkStrictly:this.checkStrictly,expandedKeys:this.expandedKeys,selectedKeys:this.selectedKeys,checkedKeys:this.finalCheckedKeys,loadData:this.loadData,blockNode:!0,autoExpandParent:this.autoExpandParent,showIcon:this.showIcon,"onUpdate:expandedKeys":this.onUpdateExpandedKeys,"onUpdate:selectedKeys":this.onUpdateSelectedKeys,"onUpdate:checkedKeys":this.onUpdateCheckedKeys,onSelected:this.onSelected,onChecked:this.onChecked},{title:({title:e,dataRef:t})=>{var i,r;let n=e;if(!t.isLeaf&&this.nodeCheckedAll(t)&&(n=[(0,h.bF)("div",{class:"default-tree-node-title-wrapper"},[(0,h.bF)("div",{class:"default-tree-node-title"},e),(0,h.bF)("div",{class:"default-tree-node-title-actions",onClick:(0,v.D$)(()=>{},["stop","prevent"])},[(0,h.bF)(c._5z,{type:c.VQ.link,onClick:(0,v.D$)(()=>{var e;return null===(e=this.onNodeCheckedAll)||void 0===e?void 0:e.call(this,t,!0)},["stop","prevent"])},{default:()=>(0,o.cAb)(this.nodeCheckedAllLabel)}),(0,h.bF)(c._5z,{type:c.VQ.link,onClick:(0,v.D$)(()=>{var e;return null===(e=this.onNodeCheckedAll)||void 0===e?void 0:e.call(this,t,!1)},["stop","prevent"])},{default:()=>(0,o.cAb)(this.nodeUncheckedAllLabel)})])])]),(null===t||void 0===t?void 0:t.class)===f.m9.LOAD_MORE_NODE_CLASS_NAME)return[(0,h.bF)(c._5z,{type:c.VQ.link,loading:t.loadingMore,onMouseover:(0,v.D$)(()=>{},["stop","prevent"]),onMouseout:(0,v.D$)(()=>{},["stop","prevent"]),onMouseenter:(0,v.D$)(()=>{},["stop","prevent"]),onMouseleave:(0,v.D$)(()=>{},["stop","prevent"]),onClick:(0,v.D$)(()=>this.onClickLoadMore(t),["stop","prevent"])},{default:()=>n})];let a=null===(r=null===(i=t.value)||void 0===i?void 0:i.metadata)||void 0===r?void 0:r.rowActionsSlot;return!a&&this.isSameModel&&(a=this.$slots.rowActions),a&&(n=[(0,h.bF)("div",{class:"default-tree-node-wrapper"},[(0,h.bF)("div",{class:"default-tree-node-title"},e),(0,h.bF)("div",{class:"default-tree-node-row-actions",onClick:(0,v.D$)(()=>{},["stop","prevent"])},[(0,h.bF)(m.E7,{widget:"TreeNodeActions",inline:!0,node:t},{default:a})])])]),n},icon:({value:e})=>{var t,i;return(null===(t=e.data)||void 0===t?void 0:t.logo)?(0,h.bF)(c.Lky,{icon:null===(i=e.data)||void 0===i?void 0:i.logo,size:12,class:"default-tree-icon"}):null}});let l=[a];this.enableSearch&&(l=[(0,h.bF)("div",{class:c.MZC.append(["default-search-tree-wrapper"],c.Gfm.cast(null===(t=this.template)||void 0===t?void 0:t.wrapperClass)),style:c.WbJ.parse(null===(i=this.template)||void 0===i?void 0:i.wrapperStyle)},[(0,h.bF)("div",{class:"default-search-tree-input"},[(0,h.bF)(c.G9,{value:this.searchValue,placeholder:(0,o.cAb)(this.searchPlaceHolder),"onUpdate:value":this.onUpdateSearchValue,onSearch:this.onSearch})]),a])]);const s=["default-field-tree"];return this.viewType&&s.push(`default-tree-${this.viewType.toLowerCase()}`),(0,h.bo)((0,h.bF)("div",c.$pj.collectionBasicProps(this.$attrs,c.MZC.append(s,c.Gfm.cast(null===(r=this.template)||void 0===r?void 0:r.class)),c.Gfm.cast(null===(n=this.template)||void 0===n?void 0:n.style)),l),[[v.aG,!this.invisible]])}}),x=C,w=x;class S extends d.n{initialize(e){return super.initialize(e),this.setComponent(w),this}get onlySelectedLeaf(){return this.getDsl().onlySelectedLeaf||!1}get checkable(){return!0}get checkStrictly(){return n.TM.toBoolean(this.getDsl().checkStrictly)||!1}onSelected(e,t){return(0,r.sH)(this,void 0,void 0,function*(){if(this.selectMode!==a.SBT.multiple)throw new o.e$E;yield this.onChecked(e,t)})}onChecked(e,t){return(0,r.sH)(this,void 0,void 0,function*(){const i=this.getCurrentSelectedValue(),r=this.collectionSelectedNodes(e);this.onSelectedValueChange(i,r,t)})}nodeCheckedAll(e){return n.TM.toBoolean(this.getDsl().nodeCheckedAll)||!1}get nodeCheckedAllLabel(){return this.getDsl().nodeCheckedAllLabel}get nodeUncheckedAllLabel(){return this.getDsl().nodeUncheckedAllLabel}onNodeCheckedAll(e,t){const i=this.getCurrentSelectedValue(),r=this.collectionSelectedAllNodes(e);this.onSelectedValueChange(i,r,t)}getCurrentSelectedValue(){const{selectedValue:e}=this;let t;return t=e?Array.isArray(e)?e:[e]:[],t}collectionSelectedNodes(e){if(this.checkStrictly)return this.collectionSelectedAllNodes(e);const t=this.field.references;return this.collectionSelectedNodesFilter(e,t)?[e]:[]}collectionSelectedAllNodes(e){const t=this.field.references,i=[];return this.$collectionSelectedNodes(i,[e],e=>this.collectionSelectedNodesFilter(e,t)),i}collectionSelectedNodesFilter(e,t){return e.value.metadata.model===t&&!e.disabled}$collectionSelectedNodes(e,t,i){for(const r of t)i(r)&&e.push(r),this.$collectionSelectedNodes(e,r.children,i)}onSelectedValueChange(e,t,i){let r=!1;if(i){const i=new o.qOJ(e,e=>e.key);for(const o of t)null==i.get(o.key)&&(e=[...e,o],r=!0)}else{const i=new o.qOJ(t,e=>e.key),n=e.length;e=e.filter(e=>null==i.get(e.key)),r=n!==e.length}r&&(this.setSelectedValue(e),this.$onSelectedChange(e))}generatorNewTreeNode(e,t,i,r,o){const n=super.generatorNewTreeNode(e,t,i,r,o);return this.generatorTreeNodeAfterProperties(n),n}fetchBackfillData(e,t){return(0,r.sH)(this,void 0,void 0,function*(){return this.enableLoadData=!1,s.yU.fetchAll(t,{expressionParameters:this.generatorExpressionParameters()})})}backfillDataProcess({selectedNodes:e}){this.selectMode===a.SBT.multiple?this.setSelectedValue(e):this.setSelectedValue(e[0])}backfillDataByValue(){const e=Object.create(null,{backfillDataByValue:{get:()=>super.backfillDataByValue}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.backfillDataByValue.call(this);if(!t){const{treeDefinition:e}=this;if(e)return this.rootNode=this.generatorRootNode(e),yield this.loadAllData(),!0}return t})}clearBackfillDataProcess(){return(0,r.sH)(this,void 0,void 0,function*(){const{treeDefinition:e}=this;this.rootNode=e?this.generatorRootNode(e):void 0,this.expandedKeys=[],this.setSelectedValue(void 0)})}convertBackfillData(e,t,i,r,o){return super.convertBackfillData(e,t,i,r||((e,t)=>{t&&this.generatorTreeNodeAfterProperties(e)}),o||(e=>{this.generatorTreeNodeAfterProperties(e)}))}generatorTreeNodeAfterProperties(e){e.selectable=e.value.metadata.model===this.field.references}setSelectedValue(e){if(!e)return this.selectedValue=void 0,void(this.checkedKeys=void 0);this.selectedValue=e,Array.isArray(e)?this.checkedKeys=e.map(e=>e.key):this.checkedKeys=[e.key]}$onSelectedChange(e){if(void 0===e)return;if(null===e)return void this.change(null);const t=e.map(e=>e.value.data).filter(e=>!!e)||[];this.selectMode===a.SBT.multiple?this.change(n.Gf.cast(t)):this.change(n.Gf.cast(t[0]))}}(0,r.Cg)([l.x0.Reactive()],S.prototype,"selectedValue",void 0),(0,r.Cg)([l.x0.Reactive()],S.prototype,"onlySelectedLeaf",null),(0,r.Cg)([l.x0.Reactive()],S.prototype,"checkable",null),(0,r.Cg)([l.x0.Reactive()],S.prototype,"checkStrictly",null),(0,r.Cg)([l.x0.Method()],S.prototype,"onSelected",null),(0,r.Cg)([l.x0.Method()],S.prototype,"onChecked",null),(0,r.Cg)([l.x0.Method()],S.prototype,"nodeCheckedAll",null),(0,r.Cg)([l.x0.Reactive()],S.prototype,"nodeCheckedAllLabel",null),(0,r.Cg)([l.x0.Reactive()],S.prototype,"nodeUncheckedAllLabel",null),(0,r.Cg)([l.x0.Method()],S.prototype,"onNodeCheckedAll",null)},77283:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(25195),o=i(97859),n=i(48182),a=i(98916),l=i(89610),s=i(92049),d=i(20641);const c=(0,d.pM)({name:"DetailCommonField",inheritAttrs:!1,props:{value:{type:[String,Number,Boolean,Object],default:void 0},isEmpty:{type:[Boolean,Function],default:void 0},emptyStyle:{type:String}},slots:["default","empty"],setup(e){const t=(0,d.EW)(()=>{const t=e.value;return(0,o.A)(t)?"":(0,n.A)(t)}),i=(0,d.EW)(()=>{const i=e.isEmpty;return(0,a.A)(i)?i:(0,l.A)(i)?i(t.value):""===e.value||(!!((0,s.A)(e.value)&&e.value.length<=0)||(0,o.A)(e.value))});return{realValue:t,isRealEmpty:i}},render(){const{$attrs:e,$slots:t,isRealEmpty:i,emptyStyle:o}=this,n=r.$pj.collectionSlots(t,[{origin:"default",default:({realValue:e})=>[(0,d.bF)("div",{class:"detail-common-field-value",title:e,style:{whiteSpace:"pre-line"}},e)]},{origin:"empty",default:()=>[(0,d.bF)(r.fwf,{emptyStyle:o})]}]),a=i?n.empty():n.default({realValue:this.realValue});return(0,d.bF)("div",r.$pj.collectionBasicProps(e,["detail-common-field"]),a)}}),u=c,p=u},77991:(e,t,i)=>{i.d(t,{t:()=>n});var r=i(20641),o=i(74815);const n={props:{metadataHandle:{type:String},rootHandle:{type:String},currentHandle:{type:String}},data(){const e=(0,o.zm)();return(0,o.tx)(Object.assign(Object.assign({},e),{metadataHandle:(0,r.EW)(()=>this.metadataHandle||e.metadataHandle.value),rootHandle:(0,r.EW)(()=>this.rootHandle||e.rootHandle.value),parentHandle:(0,r.EW)(()=>this.currentHandle||e.parentHandle.value)})),{}}}},78422:(e,t,i)=>{i.d(t,{nN1:()=>We,Cbz:()=>mt,F1e:()=>ut,y27:()=>xc,z$3:()=>pi,iSR:()=>q,sKj:()=>Mi,_Yj:()=>St,C_M:()=>Et,aot:()=>Nd,JPl:()=>ui,YHI:()=>cr,lGe:()=>Oi,_s:()=>Ni,j25:()=>mi,Y$5:()=>Ld,syF:()=>yd,R0m:()=>$i,N2X:()=>J,MLz:()=>Fc,cHX:()=>Oc,RKz:()=>E,Zku:()=>Ic,tXI:()=>pr,qOJ:()=>ge,Mxx:()=>Ac,Qvr:()=>ne,Nyc:()=>ue,wIc:()=>vi,LPI:()=>gi,tVJ:()=>bi,QYv:()=>xi,VGK:()=>fi,Dmh:()=>wi,EVn:()=>yi,w5m:()=>wc,PM1:()=>Pi,$md:()=>Ii,r44:()=>nr,zDc:()=>Ri,onZ:()=>Ti,cqT:()=>Mc,_wm:()=>Yt,nHy:()=>$d,jZd:()=>at,A14:()=>ot,g6N:()=>kc,HxA:()=>ei,OBC:()=>on,q1j:()=>ke,QnE:()=>_i,pf_:()=>Li,QuJ:()=>Dc,iY4:()=>Ft,pFK:()=>Ut,hLl:()=>qt,E6O:()=>Ht,TNZ:()=>rt,StG:()=>Wt,e$E:()=>rn,AB1:()=>Lc,Wp3:()=>Fe,erd:()=>lr,Sgb:()=>xe,soS:()=>Oe,L$f:()=>li,q6g:()=>ft,TWi:()=>jc,if5:()=>zd,Ggx:()=>Se,krP:()=>Wo,XZm:()=>fc,$IR:()=>yc,lP8:()=>bc,L6e:()=>Ir,fig:()=>Bi,CSv:()=>M,Imd:()=>Ci,w6O:()=>zi,GYs:()=>Ui,IPu:()=>Gi,H$Y:()=>Id,VkM:()=>qi,azW:()=>je,PWn:()=>Ve,vtW:()=>h,KxQ:()=>pt,q:()=>mc,E83:()=>gt,ggj:()=>ht,pF0:()=>y,Jxj:()=>N,tHq:()=>vt,LEb:()=>Fr,Pig:()=>C,egF:()=>qd,zH5:()=>b,s$u:()=>p,_6l:()=>m,CjI:()=>v,HOt:()=>g,a33:()=>F,_ZV:()=>A,W3P:()=>D,QRK:()=>k,$RY:()=>f,RbF:()=>R,Nkk:()=>Bc,c6Q:()=>ki,S8f:()=>Cr,LYz:()=>tn,GsW:()=>ci,AEW:()=>di,Eg$:()=>en,xdE:()=>Be,plJ:()=>He,TlY:()=>xr,cAb:()=>Mr,ok2:()=>yr});var r=i(16022),o=i(70164);const n=[o.m1.String,o.m1.Text,o.m1.HTML,o.m1.Phone,o.m1.Email],a=[o.m1.Integer,o.m1.Long,o.m1.Float,o.m1.Currency],l=[o.m1.DateTime,o.m1.Date,o.m1.Time,o.m1.Year],s=[o.m1.OneToOne,o.m1.ManyToOne],d=[o.m1.OneToMany,o.m1.ManyToMany],c=[...s,...d],u="#";function p(e){return e.ttype===o.m1.Related}function h(e){let t=e.ttype;return p(e)&&(t=e.relatedTtype),t}function g(e){return c.includes(h(e))}function v(e){return s.includes(h(e))}function m(e){return d.includes(h(e))}function f(e){return e.startsWith(u)&&e.endsWith(u)}function y(e){return e.substring(1,e.length-1)}function b(e){return h(e)===o.m1.OneToMany}function C(e){return h(e)===o.m1.ManyToMany}var x=i(89284);function w(e,t,i){i.fun=t.fun}function S(e){var t;const i=e.split("."),r=i[i.length-1];return 1===r.length?r.toLowerCase():r.length>=2?`${null===(t=r.substring(0,1))||void 0===t?void 0:t.toLowerCase()}${r.substring(1)}`:void 0}const T="__self__";var E;function A(e){return(null===e||void 0===e?void 0:e.actionType)===o.X2.Server}function k(e){return(null===e||void 0===e?void 0:e.actionType)===o.X2.View}function D(e){return(null===e||void 0===e?void 0:e.actionType)===o.X2.URL}function F(e){return(null===e||void 0===e?void 0:e.actionType)===o.X2.Client}function R(e,t){const i={};let o;return o=Array.isArray(t)?t:[t],o=o.map(e=>(e.prefix=`${e.prefix}-`,e)),Object.entries(e).forEach(([e,t])=>{if(null!=t)for(const n of o){const{key:o,prefix:a}=n;if(e.length>=a.length+1&&e.startsWith(a)){let n=i[o];return null==n&&(n={},i[o]=n),"string"===typeof t&&r.TM.isStringBoolean(t)&&(t=r.TM.toBoolean(t)),void(n[r.MZ.kebabCaseToCamelCase(e.substring(a.length))]=t)}}}),i}(function(e){e["CREATE"]="CREATE",e["DELETE"]="DELETE",e["UPDATE"]="UPDATE",e["QUERY"]="QUERY"})(E||(E={}));new Map,new Map;var O=i(54908);const N=e=>(0,O.yE)().matched.segmentParams.page[e]||"",$=()=>{const e=o.Bi.get();return e.STATIC_IMG||"https://pamirs.oss-cn-hangzhou.aliyuncs.com/oinone/static/images"},M=e=>`${$()}/${e}`;var I=i(15215),L=i(67774),_=i(39277),P=i(26462);class j{clear(e){if(null==e)this.clearAll();else{const t=this.cacheKeyFormat(this.keyGenerator(e));this.clearCache(t)}}keyGenerator(e){return"string"===typeof e?e:`${JSON.stringify(e)}`}cacheKeyFormat(e){return`pamirs_cache_${e}`}}class V extends j{get(e){const t=this.cacheKeyFormat(this.keyGenerator(e));let i=this.getCache(t);if(null!==i)return void 0===i&&(i=this.fetchValueAndSetter(t,e)),i}fetchValueAndSetter(e,t){let i;try{i=this.fetchValue(t)}catch(r){console.error(r),i=null}return i=this.unsafeSetCache(e,i),i}getOrThrow(e){const t=this.cacheKeyFormat(this.keyGenerator(e));let i=this.getCache(t);if(null!==i)return void 0===i&&(i=this.fetchValueAndSetterOrThrow(t,e)),i}fetchValueAndSetterOrThrow(e,t){let i=this.fetchValue(t);return i=this.unsafeSetCache(e,i),i}unsafeSetCache(e,t){return null==t?(this.setNullCache(e),t=void 0):this.setCache(e,t),t}}class B extends j{get(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=this.cacheKeyFormat(this.keyGenerator(e));let i;try{i=yield this.getCache(t)}catch(r){i=null}if(null!==i)return void 0===i&&(i=yield this.fetchValueAndSetter(t,e)),i})}fetchValueAndSetter(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const i=this.$$fetchValueAndSetter(e,t);return this.setCache(e,i),i.then(e=>{if(null!==e)return e})})}getOrThrow(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=this.cacheKeyFormat(this.keyGenerator(e));let i=yield this.getCache(t);if(null!==i)return void 0===i&&(i=yield this.fetchValueAndSetterOrThrow(t,e)),i})}fetchValueAndSetterOrThrow(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const i=this.fetchValue(t);return this.setCache(e,i),i})}$$fetchValueAndSetter(e,t){return(0,I.sH)(this,void 0,void 0,function*(){let e;try{e=yield this.fetchValue(t)}catch(i){console.error(i),e=null}return e})}unsafeSetCache(e,t){return(0,I.sH)(this,void 0,void 0,function*(){let i=yield t;return null==i?(this.setNullCache(e),i=void 0):yield this.setCache(e,i),i})}}class H extends V{constructor(){super(...arguments),this.cache=new Map}getCache(e){return this.cache.get(e)}setCache(e,t){return this.cache.set(e,t)}setNullCache(e){return this.cache.set(e,null)}clearCache(e){this.cache.delete(e)}clearAll(){this.cache.clear()}}class W extends B{constructor(){super(...arguments),this.cache=new Map}getCache(e){return(0,I.sH)(this,void 0,void 0,function*(){return this.cache.get(e)})}setCache(e,t){this.cache.set(e,t)}setNullCache(e){return this.cache.set(e,null)}clearCache(e){this.cache.delete(e)}clearAll(){this.cache.clear()}}class U extends V{getCache(e){const t=localStorage.getItem(e);return t===U.NULL_STRING?null:t}setCache(e,t){localStorage.setItem(e,t)}setNullCache(e){localStorage.setItem(e,U.NULL_STRING)}clearCache(e){localStorage.removeItem(e)}clearAll(){localStorage.clear()}}U.NULL_STRING="___null___";class q{static register(e){q.functionList.push(e)}static clear(){q.functionList.forEach(e=>null===e||void 0===e?void 0:e())}}q.functionList=[];var z,G=i(28740);(function(e){e["queryOne"]="queryOne",e["load"]="load"})(z||(z={}));class K{static checkMethod(){return(0,I.sH)(this,void 0,void 0,function*(){if(this.executed)return;const e=yield ee("base.Function","load");this.existing=!(!e||!e.name),this.executed=!0})}}K.existing=!1,K.executed=!1;class X extends W{setOfNullable(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const i=this.cacheKeyFormat(this.keyGenerator(e)),r=yield this.getCache(i);return null==r&&(t=yield this.unsafeSetCache(i,t)),t})}}class Q extends X{fetchValue(e){return Z(e.namespace,e.fun)}keyGenerator(e){return`${e.namespace}#${e.fun}`}}Q.INSTANCE=new Q;class Y extends X{fetchValue(e){return ee(e.namespace,e.name)}keyGenerator(e){return`${e.namespace}#${e.name}`}}Y.INSTANCE=new Y;class J{static get(e,t){return(0,I.sH)(this,void 0,void 0,function*(){if(!e)return void console.error("function namespace is required.");if(!t)return void console.error("function fun is required.");yield K.checkMethod();const i=yield Q.INSTANCE.get({namespace:e,fun:t});return i&&i.name&&Y.INSTANCE.setOfNullable({namespace:i.namespace,name:i.name},i),i})}static getByName(e,t){return(0,I.sH)(this,void 0,void 0,function*(){if(!e)return void console.error("function namespace is required.");if(!t)return void console.error("function name is required.");yield K.checkMethod();const i=yield Y.INSTANCE.get({namespace:e,name:t});return i&&i.fun&&Q.INSTANCE.setOfNullable({namespace:i.namespace,fun:i.fun},i),i})}}function Z(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const i=K.existing?z.load:z.queryOne,r=G.Ay`
    query {
      functionQuery {
        ${i}(query: { namespace: "${e}", fun: "${t}" }) {
          ${o.R7.Function}
        }
      }
    }
    ${o.gH.Function}
  `;try{const e=yield _.LV.query(o.vL.BASE,r),t=e.data.functionQuery[i];if(!t.name)return;return t}catch(n){return}})}function ee(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const i=K.existing?z.load:z.queryOne,r=G.Ay`
    query {
      functionQuery {
        ${i}(query: { namespace: "${e}", name: "${t}" }) {
          ${o.R7.Function}
        }
      }
    }
    ${o.gH.Function}
  `;try{const e=yield _.LV.query(o.vL.BASE,r),t=e.data.functionQuery[i];if(!t.fun)return;return t}catch(n){return}})}q.register(()=>{Q.INSTANCE.clear(),Y.INSTANCE.clear()});var te=i(23149);class ie{static toArray(e,t=","){let i;return Array.isArray(e)&&(i=e.map(e=>{var t;return null===(t=null===e||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}).filter(e=>!!e)),"string"===typeof e&&(i=e.split(t).map(e=>e.trim()).filter(e=>!!e)),i}static toNumberOrStringNullable(e){if("number"===typeof e)return e;if("string"===typeof e){if("Infinity"===e)return 1/0;if("-Infinity"===e)return-1/0;const t=Number(e);if(!Number.isNaN(t))return t}return e}static toNumberOrString(e,t){const i=ie.toNumberOrStringNullable(e);return null==i?t:i}static toNumberNullable(e){const t=ie.toNumberOrStringNullable(e);if("string"!==typeof t)return t;console.warn(`${e} do not convert to number.`)}static toNumber(e,t){const i=ie.toNumberNullable(e);return null==i?t:i}static toRecord(e){if("string"===typeof e)try{return JSON.parse(e)}catch(t){return void console.error("Don't convert record.",e,t)}return e}static getAndRepairModel(e,t,i){const r=e.model.model,o=t.model||r;if(!(null===i||void 0===i?void 0:i.verifyModelConsistency)||o===r)return t.model=o,o}static clearUndefined(e){Array.isArray(e)?ie.clearArrayUndefined(e):(0,te.A)(e)&&ie.clearObjectUndefined(e)}static clearObjectUndefined(e){Object.entries(e).forEach(([t,i])=>{void 0===i&&delete e[t],Array.isArray(i)?ie.clearArrayUndefined(i):(0,te.A)(i)&&ie.clearObjectUndefined(i)})}static clearArrayUndefined(e){let t=e.length;for(let i=0;i<t;i++){const r=e[i];void 0===r?(e.splice(i,1),i--,t--):Array.isArray(r)?ie.clearArrayUndefined(r):(0,te.A)(r)&&ie.clearObjectUndefined(r)}}}class re extends W{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=yield(0,_.yy)(e);if(t.model)return ae(t)})}}re.INSTANCE=new re;class oe extends W{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=yield(0,_.E1)(e);if(t.model)return ae(t)})}}oe.INSTANCE=new oe;class ne{static get(e,t=!1){return(0,I.sH)(this,void 0,void 0,function*(){const i=e;return t?re.INSTANCE.fetchValue(i):re.INSTANCE.get(i)})}static getAll(e,t=!1){return(0,I.sH)(this,void 0,void 0,function*(){const i=e;return t?oe.INSTANCE.fetchValue(i):oe.INSTANCE.get(i)})}}function ae(e){var t;const{id:i,model:r,name:o,type:n,module:a,moduleName:l,pk:s,uniques:d,label:c,labelFields:u,modelFields:p,serverActionList:h,viewActionList:g,urlActionList:v,clientActionList:m}=e,f={id:i,model:r,name:o,type:n,module:a,moduleName:l,pks:s,uniques:(null===d||void 0===d?void 0:d.map(e=>ie.toArray(e)))||[],label:c,labelFields:u,modelFields:[],modelActions:[]};return f.modelFields=(null===p||void 0===p?void 0:p.map(e=>le(f,e)))||[],f.modelActions=(null===(t=[...h||[],...g||[],...v||[],...m||[]])||void 0===t?void 0:t.map(e=>de(f,e)))||[],f}function le(e,t){const{id:i,field:r,name:o,ttype:n,multi:a,defaultValue:l,store:s,storeSerialize:d,displayName:c,label:u,required:p,readonly:h,invisible:g,related:v,relatedTtype:m,relationStore:f,references:y,relationFields:b,referenceFields:C,through:x,throughRelationFields:w,throughReferenceFields:S,limit:T,domain:E,size:A,decimal:k,max:D,min:F,options:R}=t,O={id:i,model:e.model,modelName:e.name,modelDefinition:e,data:r||o,name:o||r,ttype:n,multi:a,defaultValue:l,store:s||!1,storeSerialize:d,displayName:c,label:u,required:p,readonly:h,invisible:g,related:v||[],relatedTtype:m,relationStore:f,references:y,relationFields:b,referenceFields:C,through:x,throughRelationFields:w,throughReferenceFields:S,limit:ie.toNumberOrStringNullable(T),domain:E,size:ie.toNumberOrStringNullable(A),decimal:ie.toNumberOrStringNullable(k),max:ie.toNumberOrStringNullable(D),min:ie.toNumberOrStringNullable(F)};return O.options=se(R),O}function se(e){const t=[];return null===e||void 0===e||e.forEach(e=>{const{name:i,value:r,label:o,displayName:n,hint:a,thumbnail:l,invisible:s,isDefault:d,color:c,backgroundColor:u,icon:p,state:h}=e;i&&t.push({state:h,name:i,value:r,displayName:n||o,hint:a,thumbnail:l,invisible:s,isDefault:d,color:c,backgroundColor:u,icon:p})}),t}function de(e,t){const{id:i,name:r,actionType:o,contextType:n,bindingType:a,priority:l,invisible:s,displayName:d,label:c,target:u,domain:p,filter:h,module:g,moduleName:v,fun:m,url:f}=t,y={id:i,model:e.model,modelName:e.name,modelDefinition:e,name:r,actionType:o,contextType:n,bindingType:a,priority:l,invisible:s,displayName:d,label:c,target:u,domain:p,filter:h,module:g,moduleName:v,fun:m,url:f};return y}q.register(()=>{re.INSTANCE.clear(),oe.INSTANCE.clear()});class ce extends W{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=yield(0,_.$D)(e);if(null===t||void 0===t?void 0:t.module)return t})}}ce.INSTANCE=new ce;class ue{static get(e,t=!1){const i=e;return t?ce.INSTANCE.fetchValue(i):ce.INSTANCE.get(i)}}q.register(()=>{ce.INSTANCE.clear()});const pe={isProcess:!0,isNull:!0};class he{constructor(e,t){this.origin=e,this.cache=new Map,this.keyGetter=t}keyGenerator(e){return this.keyGetter(e)}get(e){return this.searchBody(e).value}searchBody(e,t=()=>pe){let i=this.cache.get(e);if(null==i){let r=this.next();while(null!=r){i=this.getInitializationBodyByValue(r);const{key:t}=i;if(this.cache.set(t,i),t===e)return i;r=this.next()}i=null===t||void 0===t?void 0:t(e),i.isNull?this.cache.set(e,i):this.cache.set(i.key,i)}return i}getInitializationBody(e,t){return{key:e,value:t,isProcess:!1}}getInitializationBodyByValue(e){return this.getInitializationBody(this.keyGenerator(e),e)}}class ge extends he{constructor(e,t){super(e,t),this.index=-1}next(){this.index++;const{origin:e,index:t}=this;if(t<e.length)return e[t]}}var ve=i(9703);function me(e){if(!e)return{};const t={};return Object.entries(e).forEach(([e,i])=>{let r=!1;if((0,ve.A)(i)){const o=i.trim();"{"===o[0]&&"}"===o[o.length-1]&&(t[e]=JSON.parse(i),r=!0)}r||(t[e]=i)}),t}class fe extends W{set(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const i=this.cacheKeyFormat(this.keyGenerator(e));return t=yield this.unsafeSetCache(i,t),t})}setOfNullable(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const i=this.cacheKeyFormat(this.keyGenerator(e)),r=yield this.getCache(i);return null==r&&(t=yield this.unsafeSetCache(i,t)),t})}}class ye extends fe{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=yield(0,_.HY)(e.model,e.name);if(t)return we(t)})}keyGenerator(e){return`${e.model}#${e.name}`}}ye.INSTANCE=new ye;class be extends fe{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){let t;try{return t=yield(0,_.qz)({module:e===be.APPLICATION_HOMEPAGE?void 0:e}),t?we(t):t}catch(i){if((0,L.r5h)(i))return;throw i}})}}be.INSTANCE=new be,be.APPLICATION_HOMEPAGE="__application_homepage__";class Ce extends fe{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=yield(0,_.QI)(e);if(t.sharedParameters){const e=yield we(t);return e.sharedCode=t.sharedCode,e.authorizationCode=t.authorizationCode,e.sharedParameters=JSON.parse(t.sharedParameters),e.browserTitle=t.browserTitle,e.language=t.language,e.languageIsoCode=t.languageIsoCode,e}})}}Ce.INSTANCE=new Ce;class xe{static get(e,t,i=!1){return(0,I.sH)(this,void 0,void 0,function*(){if(!e)return void console.error("view action model is required.");if(!t)return void console.error("view action name is required.");const r={model:e,name:t};return i?ye.INSTANCE.fetchValue(r):ye.INSTANCE.get(r)})}static getOrThrow(e,t,i=!1){return(0,I.sH)(this,void 0,void 0,function*(){if(!e)return void console.error("view action model is required.");if(!t)return void console.error("view action name is required.");const r={model:e,name:t};return i?ye.INSTANCE.fetchValue(r):ye.INSTANCE.getOrThrow(r)})}static getHomepage(e,t=!1){return(0,I.sH)(this,void 0,void 0,function*(){const i=e||be.APPLICATION_HOMEPAGE;if(t)return be.INSTANCE.fetchValue(i);const r=yield be.INSTANCE.get(i);return r&&r.name&&(i===be.APPLICATION_HOMEPAGE&&r.module&&be.INSTANCE.setOfNullable(r.module,r),ye.INSTANCE.setOfNullable({model:r.model,name:r.name},r)),r})}static getSharedAction(e,t=!1){return(0,I.sH)(this,void 0,void 0,function*(){if(!e)return void console.error("shared code is required.");if(t)return Ce.INSTANCE.fetchValue(e);const i=yield Ce.INSTANCE.get(e);return i&&i.model&&i.name&&ye.INSTANCE.setOfNullable({model:i.model,name:i.name},i),i})}static set(e){return(0,I.sH)(this,void 0,void 0,function*(){yield ye.INSTANCE.set({model:e.model,name:e.name},e)})}}function we(e){return(0,I.sH)(this,void 0,void 0,function*(){const{name:t,title:i,displayName:n,contextType:a,target:l,domain:s,filter:d,load:c,loadFunction:u,viewType:p,model:h,module:g,moduleName:v,moduleDefinition:m,maskDefinition:f,resModel:y,resModule:b,resModuleName:C,resModuleDefinition:x,resView:w,resViewName:S,theme:T,sessionPath:E,context:A}=e;let k;r.$1.prettySuccess("viewAction debug url",`${location.origin}${r._$.appendBasePath(`/debug;module=${v};viewType=${p};model=${h};action=${t};target=${l}`)}`);const D=(null===m||void 0===m?void 0:m.module)||g;let F;D&&v&&(k=Te(m||{},D,v));const R=(null===x||void 0===x?void 0:x.module)||b;let O;R&&C&&(F=Te(x||{},R,C));const{modelDefinition:N,resModelDefinition:$}=e;let M;N?O=Ee(N,k):h&&(O=yield ne.get(h)),$?M=Ee(h===y?Object.assign(Object.assign({},N||{}),$):$,F):y&&(M=yield ne.get(y));const I=(null===O||void 0===O?void 0:O.name)||(null===N||void 0===N?void 0:N.name)||h,L=(null===M||void 0===M?void 0:M.name)||(null===$||void 0===$?void 0:$.name)||y,_={actionType:o.X2.View,name:t,title:i,displayName:n,contextType:a,target:l,domain:s,filter:d,load:c,model:h,modelName:I,module:g,moduleName:v,maskDefinition:f,resModel:y,resModelName:L,resModule:b,resModuleName:C,resMaskDefinition:f,resViewType:p,resViewMode:Se(p,a),theme:T,sessionPath:E,context:A};if(k&&(_.moduleDefinition=k),F&&(_.resModuleDefinition=F),O&&(_.modelDefinition=O),M&&(_.resModelDefinition=M),_.resViewName=S,w){const{id:e,name:t,title:i,type:r,template:o,extension:n,baseLayoutDefinition:a}=w;if(a){const{name:e,template:t}=a;_.resViewLayout={name:e,template:t}}_.resViewType=r,_.resView={id:e,name:t,title:i,type:r,model:y||h,modelName:L||I,module:R||D,moduleName:L||v,dsl:o,extension:me(n)}}return u&&(_.loadFunctionDefinition=u),_})}function Se(e,t){switch(e){case o.qi.Table:case o.qi.Gallery:case o.qi.Detail:return o.nE.Lookup;case o.qi.Form:return t===o.og.ContextFree?o.nE.Create:o.nE.Editor;default:return o.nE.Create}}function Te(e,t,i){return{module:t||e.module,name:i||e.name,displayName:e.displayName}}function Ee(e,t){var i;return{model:e.model,name:e.name,modelFields:[],modelActions:[],type:e.type,module:null===t||void 0===t?void 0:t.module,moduleName:(null===t||void 0===t?void 0:t.name)||e.moduleName,moduleDefinition:t,pks:e.pk,uniques:null===(i=e.uniques)||void 0===i?void 0:i.map(e=>e.split(",")),label:e.label,labelFields:e.labelFields}}q.register(()=>{ye.INSTANCE.clear(),be.INSTANCE.clear()});class Ae extends W{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){const{model:t,name:i}=e,r=yield(0,_.MW)(t,i);return r||void 0})}}Ae.INSTANCE=new Ae;class ke{static get(e,t,i=!1){return(0,I.sH)(this,void 0,void 0,function*(){const r={model:e,name:t};return i?Ae.INSTANCE.fetchValue(r):Ae.INSTANCE.get(r)})}}q.register(()=>{Ae.INSTANCE.clear()});class De extends W{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){const{model:t,name:i}=e,r=yield(0,_.GV)(t,i);return r||void 0})}}De.INSTANCE=new De;class Fe{static get(e,t,i=!1){return(0,I.sH)(this,void 0,void 0,function*(){const r={model:e,name:t};return i?De.INSTANCE.fetchValue(r):De.INSTANCE.get(r)})}}q.register(()=>{De.INSTANCE.clear()});class Re extends W{fetchValue(e){return(0,I.sH)(this,void 0,void 0,function*(){let t;const{model:i,name:r,template:o}=e;if(t=o?yield(0,_.Oq)(i,o):yield(0,_.yE)(i,r),t)return t.name||(t.name=r),Ne(t)})}keyGenerator(e){return`${e.model}#${e.name}`}}Re.INSTANCE=new Re;class Oe{static get(e,t,i=!1){return(0,I.sH)(this,void 0,void 0,function*(){const r={model:e,name:t};return i?Re.INSTANCE.fetchValue(r):Re.INSTANCE.get(r)})}static compile(e,t,i,r=!1){return(0,I.sH)(this,void 0,void 0,function*(){const o={model:e,name:t,template:i};return r?Re.INSTANCE.fetchValue(o):Re.INSTANCE.get(o)})}}function Ne(e){const{model:t,name:i,type:r,id:o,title:n,template:a,extension:l,modelDefinition:s,baseLayoutDefinition:d}=e,c={id:o,model:t,modelName:(null===s||void 0===s?void 0:s.name)||"",moduleName:(null===s||void 0===s?void 0:s.moduleName)||"",module:(null===s||void 0===s?void 0:s.module)||"",name:i,title:n,type:r,dsl:a,extension:me(l)};if(d){const{name:e,template:t}=d;c.layoutName=e,c.layout=t}return c}q.register(()=>{Re.INSTANCE.clear()});const $e=()=>M("oinone-logo.png"),Me=()=>M("default_app_switch_logo.png?x-oss-process=image/resize,m_lfit,h_800"),Ie=()=>M("default_favicon.ico"),Le=()=>M("default_app_side_logo.png?x-oss-process=image/resize,m_lfit,h_800"),_e=()=>(0,I.sH)(void 0,void 0,void 0,function*(){const e=yield _.LV.mutate(o.vL.BASE,L.J1T`
      {
        appConfigQuery {
          queryListByWrapper(queryWrapper: { rsql: "1==1" }) {
            id
            browserTitle
            scope
            code
            app
            logo
            smallLogo
            partnerName
            officialWebsite
            slogan
            icpDesc
            appSideLogo
            favicon
            browserTitle
            loginPageLogo
            loginBackground
            loginLayoutType
            mode
            size
            sideBarTheme {
              mode
              theme
            }
            multiTabTheme {
              inline
              theme
            }
            extend
          }
        }
      }
    `);let t=e.data.appConfigQuery.queryListByWrapper||[];return t&&t.length?(t=t.map(e=>Object.assign(Object.assign({},e),{loginPageLogo:e.loginPageLogo,browserIcon:e.favicon})),JSON.stringify(t)):"[]"});let Pe;const je=(e="login",t)=>(0,I.sH)(void 0,void 0,void 0,function*(){try{const i=yield _e(),r=JSON.parse(i).find(e=>"GLOBAL"===e.scope);return Be(Object.assign(Object.assign({},r),t),e)}catch(i){console.error(i)}return Pe}),Ve=e=>(0,I.sH)(void 0,void 0,void 0,function*(){return He}),Be=(e,t="login")=>(e=e||{},e.appSideLogo||(e.appSideLogo=Le()),e.loginPageLogo||(e.loginPageLogo="login"===t?$e():Me()),e.logo||(e.logo=Me()),e.favicon||(e.favicon=Ie()),e.browserTitle||(e.browserTitle="Oinone - 构你想象!"),e);let He={};const We=new P.B7;function Ue(){return He}function qe(e){He=e}function ze(){return(0,I.sH)(this,void 0,void 0,function*(){return He=yield je(),We.next(He),He})}q.register(()=>{Pe=void 0});var Ge=i(82499);function Ke(){var e;null===(e=this.model)||void 0===e||e.modelFields.forEach(e=>{if(g(e)){const{referencesModel:t}=e;if(!t)return;const i=Xe(e);if(!i)return;const r=this.createFieldRuntimeContext(e);en(r,{type:i.type,model:t.model,modelName:t.name,dsl:i}),Ke.bind(r)()}})}function Xe(e){var t,i;const r=(null===(t=e.template)||void 0===t?void 0:t.widgets)||[];let o;for(const n of r){const e=n.dslNodeType;if(e){if(x.vV.isTemplate(n))o=null===(i=n.widgets)||void 0===i?void 0:i.find(x.vV.isView);else if(x.vV.isView(n)){o=n;break}if(o)break}}return o}function Qe(e){return e||(e={}),this.virtualModels?(e.metadata=this.virtualModels,e):e}var Ye=i(20903);function Je(e,t){var i;const r=t.data,o=t.__index,n=e.field?null===(i=e.childrenContext[0])||void 0===i?void 0:i.childrenContext:e.childrenContext;return null===n||void 0===n?void 0:n.find(e=>!!e.field&&e.field.data===r&&e.field.__index===o)}function Ze(){return(0,I.sH)(this,void 0,void 0,function*(){let e=this.defaultValueCache;return e||(e=yield et.bind(this)(),this.defaultValueCache=e),(0,Ye.A)(e)})}function et(){var e;return(0,I.sH)(this,void 0,void 0,function*(){const t={};return yield Promise.allSettled(null===(e=this.model)||void 0===e?void 0:e.modelFields.map(e=>(0,I.sH)(this,void 0,void 0,function*(){if(v(e)){const i=Je(this,e);if(i){const r=yield Ze.bind(i)();Object.keys(r).length&&(t[e.data]=r)}}else{let{defaultValue:i}=e;void 0!==i&&(Array.isArray(i)&&(i=(0,Ye.A)(i)),t[e.data]=i)}}))),t})}function tt(){return(0,I.sH)(this,void 0,void 0,function*(){let e=this.initialValueCache;return e||(e=yield it.bind(this)(),this.initialValueCache=e),(0,Ye.A)(e)})}function it(){return(0,I.sH)(this,void 0,void 0,function*(){const e=yield this.getDefaultValue();return e})}var rt,ot,nt,at,lt=i(98916),st=i(89610),dt=i(97859),ct=i(92049);class ut{constructor(e,t){this.activeRecords=e,this.submitCache=t}static operator(e,t){return new ut(ut.repairRecords(e),t)}static defaultPushPredict(e,t){return!e.some(e=>this.isEquals(e,t))}push(e,t){e=ut.repairRecords(e);const i=[];return this.activeRecords.forEach(e=>{i.push(e)}),e.forEach(e=>{t?t(i,e)&&(i.push(e),this.submitToCreateCache(e)):(i.push(e),this.submitToCreateCache(e))}),this.activeRecords=i,this}update(e){return e.forEach(e=>{this.activeRecords.splice(e.index,1,e.value),this.submitToUpdateCache(e)}),this}updateByEntity(e,t){t||(t=this.submitCache?this.submitCache.isEquals.bind(this.submitCache):ut.DEFAULT_UPDATE_PREDICT),e=ut.repairRecords(e);let i=e.length;const r=[],o=this.activeRecords.length;for(let n=0;n<o;n++){let o=this.activeRecords[n];if(!i){r.push(this.activeRecords[n]);continue}let a=0;for(;a<i;a++){const i=e[a];if(t(o,i)){o=i;break}}a!==i&&(i--,this.submitToUpdateCache({value:o,index:n})),r.push(o)}return this.activeRecords=r,this}delete(e){throw new Error("delete unsupported")}deleteByEntity(e,t){e=ut.repairRecords(e),t||(t=this.submitCache?this.submitCache.isEquals.bind(this.submitCache):ut.DEFAULT_DELETE_PREDICT);const i=[...this.activeRecords];return e.forEach(e=>{const r=i.findIndex(i=>t(i,e));if(-1!==r){const e=i.splice(r,1)[0];this.submitToDeleteCache({value:e,index:r})}}),this.activeRecords=i,this}get(){return this.activeRecords}submitToCache(e){const{submitCache:t}=this;t&&e(t)}submitToCreateCache(e){this.submitToCache(t=>{t.pushRecord(e)})}submitToUpdateCache(e){this.submitToCache(t=>{t.updateRecord(e)})}submitToDeleteCache(e){this.submitToCache(t=>{t.deleteRecord(e)})}static repairRecords(e,t){return(0,dt.A)(e)?[]:ut.convertActiveRecords(e,t)}static repairRecordsNullable(e,t){return(0,dt.A)(e)?e:ut.convertActiveRecords(e,t)}static convertActiveRecords(e,t){(0,ct.A)(e)||(e=[e]);let i=null===t||void 0===t?void 0:t.fillDraftId;(0,dt.A)(i)&&(i=!0);const r=Object.assign(Object.assign({},t||{}),{fillDraftId:i});return e.map(e=>ut.repairActiveRecord(e,r))}static convertActiveRecord(e,t=!0){return e?(t&&!e.__draftId&&(e.__draftId=(0,r._N)()),e):e}static repairActiveRecord(e,t){if(!e)return e;const i=e,{fillDraftId:o,parentDraftId:n,hasChildren:a}=t;return o&&!i.__draftId&&(i.__draftId=(0,r._N)()),n&&(i.__parentDraftId=n),a&&(i.__hasChildren=!0),i}}function pt(e){const t=null===e||void 0===e?void 0:e[0];let i=!1;if(!(0,dt.A)(t)){if(!(0,lt.A)(t))return t;i=r.TM.toBoolean(t)||!1}return{refreshParent:i}}function ht(e){const t=null===e||void 0===e?void 0:e[0];if(null==t)throw new Error("Invalid refresh main view parameters");return t}function gt(e){const t=null===e||void 0===e?void 0:e[0];if(null==t)throw new Error("Invalid refresh main view parameters");return t}function vt(e){const t=null===e||void 0===e?void 0:e[0];let i=!0;if(!(0,dt.A)(t)){if(!(0,lt.A)(t))return t;i=r.TM.toBoolean(t)||!1}return{notify:i}}ut.DEFAULT_UPDATE_PREDICT=(e,t)=>e.__draftId===t.__draftId,ut.DEFAULT_DELETE_PREDICT=ut.DEFAULT_UPDATE_PREDICT,function(e){e["default"]="default",e["none"]="none",e["relation"]="relation",e["increment"]="increment",e["all"]="all"}(rt||(rt={})),function(e){e["default"]="default",e["diff"]="diff",e["batch"]="batch",e["all"]="all"}(ot||(ot={})),function(e){e[e["SKIP"]=0]="SKIP",e[e["SUCCESS"]=1]="SUCCESS",e[e["SET_NULL"]=2]="SET_NULL",e[e["ERROR"]=3]="ERROR"}(nt||(nt={})),function(e){e[e["search"]=0]="search",e[e["searchReset"]=1]="searchReset"}(at||(at={}));const mt={DRAFT_ID:"__draftId",PARENT_DRAFT_ID:"__parentDraftId",HAS_CHILDREN:"__hasChildren",LAST_UPDATE_FROM_LOCAL:"__lastUpdateFromLocal",UPDATE_TIMESTAMP:"__updateTimestamp"};function ft(e){if(null!=e)return r.eG.toJSONString(e,e=>e.startsWith("__"))}var yt,bt,Ct,xt,wt;(function(e){e["LTR"]="ltr",e["RTL"]="rtl"})(yt||(yt={})),function(e){e["Before"]="BEFORE",e["After"]="AFTER"}(bt||(bt={})),function(e){e[e["Monday"]=1]="Monday",e[e["Tuesday"]=2]="Tuesday",e[e["Wednesday"]=3]="Wednesday",e[e["Thursday"]=4]="Thursday",e[e["Friday"]=5]="Friday",e[e["Saturday"]=6]="Saturday",e[e["Sunday"]=7]="Sunday"}(Ct||(Ct={})),function(e){e["View"]="VIEW",e["Block"]="BLOCK",e["Grid"]="GRID",e["Step"]="STEP",e["Group"]="GROUP",e["Pack"]="PACK",e["DataV"]="DATA-V",e["Media"]="MEDIA",e["Field"]="FIELD",e["Filter"]="FILTER",e["Mask"]="MASK",e["Header"]="HEADER",e["Widget"]="WIDGET",e["Container"]="CONTAINER",e["Sidebar"]="SIDEBAR",e["Content"]="CONTENT",e["Placeholder"]="PLACEHOLDER",e["Template"]="TEMPLATE"}(xt||(xt={})),function(e){e["Horizontal"]="horizontal",e["Vertical"]="vertical"}(wt||(wt={}));const St={FULL:1,HALF:.5,THIRD:1/3,TWO_THIRDS:2/3,QUARTER:1/4,THREE_QUARTERS:3/4};Symbol("PaginationChangeSubSymbol");var Tt;(function(e){e["NONE"]="NONE",e["WEB_SITE"]="WEB_SITE",e["ID_CARD"]="ID_CARD",e["PASSWORD"]="PASSWORD",e["EMAIL"]="EMAIL",e["PHONE"]="PHONE"})(Tt||(Tt={}));const Et=new Map,At=[{help:"无",errorMsg:"",patternType:Tt.NONE,pattern:""},{help:"网址",errorMsg:"网址格式有误",patternType:Tt.WEB_SITE,pattern:"((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)"},{help:"身份证",errorMsg:"身份证号格式有误",patternType:Tt.ID_CARD,pattern:"(^\\d{8}(0\\d|10|11|12)([0-2]\\d|30|31)\\d{3}$)|(^\\d{6}(18|19|20)\\d{2}(0[1-9]|10|11|12)([0-2]\\d|30|31)\\d{3}(\\d|X|x)$)"},{help:"密码",errorMsg:"密码格式有误",patternType:Tt.PASSWORD,pattern:"^(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9~!@&%#_(.)]{8,16}$"},{help:"邮箱",errorMsg:"邮箱格式有误",patternType:Tt.EMAIL,pattern:"^[a-z0-9A-Z]+[-|a-z0-9A-Z._]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\\\.)+[a-z]{2,}$"},{help:"电话",errorMsg:"手机号码格式有误",patternType:Tt.PHONE,pattern:"^(1[3-9])\\\\d{9}$"}];function kt(){At.forEach(e=>{Et.set(e.patternType,e)})}var Dt;kt(),function(e){e["PUSH"]="PUSH",e["UPDATE"]="UPDATE",e["DELETE"]="DELETE"}(Dt||(Dt={}));class Ft{constructor(e){this.pushRecordResult=[],this.updateRecordResult=[],this.deleteRecordResult=[],this.excludes=[],this.model=e,this.operatorQueue=[],this.pushRecordResult=[],this.updateRecordResult=[],this.deleteRecordResult=[]}reload(){this.operatorQueue=[],this.pushRecordResult=[],this.updateRecordResult=[],this.deleteRecordResult=[]}getModel(){return this.model}getExcludes(){return this.excludes}setExcludes(e){e?(0,ve.A)(e)?this.excludes=e.split(",").filter(e=>!!e):this.excludes=e:this.excludes=[]}pushRecord(e){this.pushRecords([e])}pushRecords(e){e.forEach(e=>{const t={operator:Dt.PUSH,records:[e]};this.predictOperatorRecord(e,Dt.PUSH)&&(this.operatorQueue.push(t),this.pushRecordResult.push(e))})}updateRecord(e){this.updateRecords([e])}updateRecords(e){e.forEach(e=>{const{value:t,index:i}=e,r={operator:Dt.UPDATE,record:t,index:i};this.operatorQueue.push(r),this.predictOperatorRecord(t,Dt.UPDATE)&&this.updateRecordResult.push(t)})}deleteRecord(e){this.deleteRecords([e])}deleteRecords(e){e.forEach(e=>{const{value:t,index:i}=e,r={operator:Dt.DELETE,record:t,index:i};this.operatorQueue.push(r),this.predictOperatorRecord(t,Dt.DELETE)&&this.deleteRecordResult.push(t)})}predictOperatorRecord(e,t){const i=this.pushRecordResult.length;let r=0;for(;r<i;r++){const t=this.pushRecordResult[r];if(this.isEquals(e,t))break}if(r!==i){switch(t){case Dt.PUSH:break;case Dt.UPDATE:this.pushRecordResult.splice(r,1,e);break;case Dt.DELETE:this.pushRecordResult.splice(r,1);break}return!1}const o=this.updateRecordResult.length;for(r=0;r<o;r++){const t=this.updateRecordResult[r];if(this.isEquals(e,t))break}if(r!==o){switch(t){case Dt.PUSH:break;case Dt.UPDATE:this.updateRecordResult.splice(r,1,e);break;case Dt.DELETE:this.updateRecordResult.splice(r,1);break}return!1}return!0}submit(e){return e=(0,o.Go)(e),this.operatorQueue.forEach(t=>{const{operator:i}=t;switch(i){case Dt.PUSH:e=this.pushOperator(e,t);break;case Dt.UPDATE:e=this.updateOperator(e,t).records;break;case Dt.DELETE:e=this.deleteOperator(e,t).records;break;default:throw new Error(`Invalid submit operator value. value = ${i}`)}}),this.operatorQueue=[],e}getOperatorResult(){return{operatorQueue:this.operatorQueue,createRecords:this.pushRecordResult,updateRecords:this.updateRecordResult,deleteRecords:this.deleteRecordResult}}clone(){const e=new Ft(this.model);return e.excludes=this.excludes,e}pushOperator(e,t){return t.records.forEach(t=>{e.push(t)}),e}updateOperator(e,t){const i=e.findIndex(e=>this.isEquals(e,t.record));if(i<0)return{result:!1,records:e};const r=Object.assign(e[i],t.record);return e.splice(i,1,r),{result:!0,records:e}}deleteOperator(e,t){const i=e.findIndex(e=>this.isEquals(e,t.record));return i<0?{result:!1,records:e}:(e.splice(i,1),{result:!0,records:e})}analysisEqualKeys(){const e=[],t=this.model.pks;return this.excludes&&this.excludes.length?e.push(this.excludes):t&&e.push(t),e.push([mt.DRAFT_ID]),e}isEquals(e,t){if(this.equalKeys||(this.equalKeys=this.analysisEqualKeys()),this.equalKeys.length){for(const i of this.equalKeys){let r=!0;for(const o of i){const i=e[o],n=t[o];if((0,dt.A)(i)||(0,dt.A)(n)){r=!1;break}if(i!==n){r=!1;break}}if(r)return!0}return!1}return!0}}const Rt=(e,t,i,r)=>{const o=i.records;if(!o||(0,ct.A)(o))return;const n={};return n[t]=r,n},Ot=(e,t,i,o)=>{if(void 0===o)return;if(e.submitType===rt.none)return;const n=i.records;if(!n||(0,ct.A)(n))return;const a={},l=n[t];if(void 0===l?a[t]=o:(0,te.A)(l)&&(0,te.A)(o)&&(r.BF.shallowMerge(l,o),a[t]=l),p(e)){const r=Rt(e,t,i,o);r&&Object.keys(r).forEach(e=>{a[e]=r[e]})}return a},Nt=(e,t,i,o)=>Ot(e,t,i,r.TM.toBoolean(o)),$t=(e,t,i,r,o)=>{const n=Mt(e,r);switch(n){case nt.SKIP:return;case nt.ERROR:return(o||Ot)(e,t,i,r);case nt.SET_NULL:return{[t]:[]}}const a=It(e,r);if(null!=a)return{[t]:a};console.error("Don't submit values.",e,r)};function Mt(e,t){if(void 0===t)return nt.SKIP;if(null===t||!t.length)return nt.SET_NULL;const{submitType:i,store:r,relationStore:o,relationFields:n,referenceFields:a}=e;return i===rt.none?nt.SKIP:!r&&n.length&&a.length&&o&&n.length&&a.length?nt.SUCCESS:nt.ERROR}function It(e,t){const{referenceFields:i}=e,r=[];let o=!0;for(const n of t){if(null===n||!Object.keys(n).length)continue;const e={};for(let t=0;t<i.length;t++){const r=i[t];let a;if(a=f(r)?y(r):n[r],null==a){o=!1;break}e[r]=a}if(!o)break;r.push(e)}if(o)return r}const Lt=(e,t,i,r,o)=>{const n=Pt(e,r);switch(n){case nt.SKIP:return;case nt.ERROR:return(o||Ot)(e,t,i,r)}const a=jt(e,r);if(null!=a)return a;console.error("Don't submit value.",e,r)};function _t(e){return null===e||!Object.keys(e).length}function Pt(e,t){if(void 0===t)return nt.SKIP;const{submitType:i,store:r,relationStore:o,relationFields:n,referenceFields:a}=e;return i===rt.none?nt.SKIP:r&&!o||!n.length||!a.length||n.length!==a.length?nt.ERROR:nt.SUCCESS}function jt(e,t){const{relationFields:i,referenceFields:r}=e,o=_t(t),n={};let a=!0;for(let l=0;l<i.length;l++){const e=i[l],s=r[l];if(f(e))continue;let d;if(d=o?null:f(s)?y(s):t[s],void 0===d){a=!1;break}n[e]=d}if(a)return n}const Vt=(e,t,i,r,o)=>(o||Ot)(e,t,i,r),Bt=(e,t,i,r,o)=>(o||Ot)(e,t,i,r);class Ht{constructor(e,t,i){this.relationUpdateType=ot.default,this.createRecords=[],this.updateRecords=[],this.deleteRecords=[],this.relationUpdateType=e,this.field=t,this.value=i}getRelationUpdateType(){return this.relationUpdateType}getField(){return this.field}getValue(){return this.value}getCreateRecords(){return this.createRecords}getUpdateRecords(){return this.updateRecords}getDeleteRecords(){return this.deleteRecords}submitByCache(e){const{createRecords:t,updateRecords:i,deleteRecords:r}=e.getOperatorResult();return this.createRecords=t,this.updateRecords=i,this.deleteRecords=r,this}}class Wt{constructor(e,t){this.relationRecords=[],this.records=e,this.relationRecords=t||[]}}class Ut{}Ut.DEFAULT=Ot,Ut.BOOLEAN=Nt,Ut.O2O=Bt,Ut.O2M=Vt,Ut.M2O=Lt,Ut.M2M=$t;class qt{static $submitRelationHandler(e,t,i,r,n,a,l,s,d){return(0,I.sH)(this,void 0,void 0,function*(){let c;switch(s){case rt.none:return;case rt.default:case rt.relation:case rt.increment:c=yield e(t,i,r,n);break;case rt.all:c=yield Ut.DEFAULT(t,i,r,n);break;default:throw new Error("Invalid submit type.")}return a===o.nE.Editor&&l&&(s===rt.increment||[ot.diff,ot.batch].includes(d))?new Ht(d,t,c).submitByCache(l):c})}}function zt(){var e;const t=[];return null===(e=this.model)||void 0===e||e.modelFields.forEach(e=>{if(t.push(e),g(e)){const t=Je(this,e);e.modelFields=t?zt.bind(t)():e.referencesModel?e.referencesModel.modelFields:[]}}),t}function Gt(e){var t;const i=null===(t=this.model)||void 0===t?void 0:t.modelFields;return i?Kt(i,(null===e||void 0===e?void 0:e.viewType)||o.qi.Custom,(null===e||void 0===e?void 0:e.viewMode)||o.nE.Create,(null===e||void 0===e?void 0:e.submitType)||rt.default,(null===e||void 0===e?void 0:e.relationUpdateType)||ot.default,(null===e||void 0===e?void 0:e.filter)||!1,this):[]}function Kt(e,t,i,r,o,n,a){const l=[];return e.forEach(e=>{const s={field:e};if(!Xt(e,t,i,r,o,n)){if(g(e)){const{referencesModel:l}=e;let d=!1;if(a){const n=Je(a,e);n&&(s.referencesFields=Gt.bind(n)({viewType:t,viewMode:i,submitType:r,relationUpdateType:o}),d=!0)}if(!d){const e=null===l||void 0===l?void 0:l.modelFields;e&&(s.referencesFields=Kt(e,t,i,r,o,n),d=!0)}if(!d)return void console.error("referencesFields collection failure.",e)}l.push(s)}}),l}function Xt(e,t,i,r,n,a){if((0,lt.A)(a)&&a&&t===o.qi.Form&&m(e)){if(r===rt.increment||[ot.diff,ot.batch].includes(n))return!0;const{submitType:t,relationUpdateType:i}=e;if(t&&t===rt.increment||i&&[ot.diff,ot.batch].includes(i))return!0}return!!(0,st.A)(a)&&!a(e,t,i,r,n)}function Qt(e,t=!0){t?(e.viewAction=(0,Ye.A)(this.viewAction),e.field=(0,Ye.A)(this.field),e.module=(0,Ye.A)(this.module),e.model=(0,Ye.A)(this.model),e.view=(0,Ye.A)(this.view),e.viewLayout=(0,Ye.A)(this.viewLayout),e.viewDsl=(0,Ye.A)(this.viewDsl),e.viewTemplate=(0,Ye.A)(this.viewTemplate),e.extendData=(0,Ye.A)(this.extendData)):(e.viewAction=this.viewAction,e.field=this.field,e.module=this.module,e.model=this.model,e.view=this.view,e.viewLayout=this.viewLayout,e.viewDsl=this.viewDsl,e.viewTemplate=this.viewTemplate,e.extendData=this.extendData)}qt.O2O=(e,t,i,r,o,n,a,l)=>(0,I.sH)(void 0,void 0,void 0,function*(){return Ut.O2O(e,t,i,r)}),qt.O2M=(e,t,i,r,o,n,a,l)=>(0,I.sH)(void 0,void 0,void 0,function*(){return qt.$submitRelationHandler(Ut.O2M,e,t,i,r,o,n,a,l)}),qt.M2O=(e,t,i,r,o,n,a,l)=>(0,I.sH)(void 0,void 0,void 0,function*(){return Ut.M2O(e,t,i,r)}),qt.M2M=(e,t,i,r,o,n,a,l)=>(0,I.sH)(void 0,void 0,void 0,function*(){return qt.$submitRelationHandler(Ut.M2M,e,t,i,r,o,n,a,l)});const Yt="__ROOT_HANDLE__",Jt={getModel:ti,getModelField:ii,createFieldRuntimeContext:ri,deepResolve:Ke,transfer:Qt,generatorVariables:Qe,getDefaultValue:Ze,getInitialValue:tt,getRequestFields:zt,getRequestModelFields:Gt};class Zt extends r.mS{constructor(){super()}generator(){var e;const t={frameworkInstance:null===(e=ei.get(Yt))||void 0===e?void 0:e.frameworkInstance,routers:[],extendData:{}},i=[];for(const[r,o]of Object.entries(Jt))i.push(r),t[r]=o.bind(t);return r.BF.readonly(t,i)}}class ei{static get(e=Yt){return ei.manager.get(e)}static getOthers(e=Yt,t=!0){const i=[];let r,o=[Yt];if(e!==Yt){const i=ei.get(e);t&&i&&(r=i),o=[...o,e]}return ei.manager.forEach((e,t)=>{o.includes(t)||(r?ei.isBelongRuntimeContext(e,r.handle)&&i.push(e):i.push(e))}),i}static createOrReplace(e=Yt,t){return ei.manager.createOrReplace(e,t)}static getOrCreate(e=Yt,t){const i=ei.get(e);return i||ei.createOrReplace(e,t)}static delete(e,t=!0){e&&ei.manager.delete(e,t)}static clearRuntimeContext(){const e=ei.manager.keys();let t=e.next();while(!t.done){const i=t.value;i!==Yt&&ei.manager.delete(i),t=e.next()}}static isBelongRuntimeContext(e,t){let i=e.parentContext;while(i){if(i.handle===t)return!0;i=i.parentContext}return!1}static generatorFieldRuntimeContextHandle(e,t){return`${e.handle}#${t.model}#${t.name}#${t.__index}`}static onCreate(e){ei.manager.onCreate(e)}static onReplace(e){ei.manager.onReplace(e)}static onDelete(e){ei.manager.onDelete(e)}}function ti(e,t=!0){const i=this.model;if(i&&e===i.model)return{model:i,runtimeContext:this,isOther:!1};const r=ei.getOthers(this.handle,t);for(const o of r){const t=o.model;if(t&&e===t.model)return{model:t,runtimeContext:o,isOther:!0}}}function ii(e,t=!0){const i=this.model;if(!i)return;const{model:r,modelFields:o}=i;let n=o.find(t=>t.data===e);if(n)return{modelField:n,runtimeContext:this,isOther:!1};const a=ei.getOthers(this.handle,t);for(const l of a){const t=l.model;if(!t)continue;const{model:i,modelFields:o}=t;if(i===r&&(n=o.find(t=>t.data===e),n))return{modelField:n,runtimeContext:l,isOther:!0}}}function ri(e){const t=ei.generatorFieldRuntimeContextHandle(this,e),i=ei.createOrReplace(t,this);return i.field=e,i}ei.manager=new Zt;var oi=i(48798),ni=i(34963);class ai{constructor(e){var t;this.id="",this.children=[];const{parent:i}=e;this.id="$$vm"+ai.id++,this.parent=i,null===(t=this.parent)||void 0===t||t.children.push(this)}getParent(){return this.parent}getChildren(){return this.children}dispose(){this.children=[]}}ai.id=0;class li extends ai{constructor(e){super(e),this.pageViewState="",this.rootData=null,this.loading=!1,this.isRootWidget=!0,this.isDialogView=!1,this.launchWatch=!1,this.ownEventListeners={},this.streamOpened=!0;const{view:t,model:i,isRootWidget:r,isDialogView:o}=e;this.view=t,this.model=i,this.isRootWidget=r||!0,this.isDialogView=o||!1,this.openStream()}getStreamState(){return this.streamOpened}openStream(){this.viewDataSource$=new P.tQ(this.viewData),this.rootData$=new P.B7,this.loading$=new P.tQ(!1)}nextIfStreamOpened(e,t){"unmount"!==this.pageViewState?e?e.closed?console.error("Assignment failed. Current data stream has been destroyed!"):e.next(t):console.error("Assignment failed. Current data stream has not been created!"):console.warn("Execute stream fail, Because the page was destroyed")}getPageViewState(){return this.pageViewState}setPageViewState(e){this.pageViewState=e}setViewData(e){const t=null==e?{}:(0,o.Go)(e);this.viewData=t,this.launchWatch&&this.nextIfStreamOpened(this.viewDataSource$,t)}setBusy(e){this.loading=e,this.nextIfStreamOpened(this.loading$,e)}getBusy(){return this.loading}getView(){return this.view}getModel(){return this.model}isRoot(){return this.isRootWidget}getDslNode(){return this.dslNode}setRootData(e){this.rootData=e,this.rootData&&this.nextIfStreamOpened(this.rootData$,this.rootData)}setRootDataByKey(e,t){this.rootData&&(this.rootData[e]=t,this.nextIfStreamOpened(this.rootData$,this.rootData))}getRootData(){return this.rootData}getHandle(){return this.id}watchLoading(e){this.loading$.subscribe({next(t){e(t)}})}watchRootData(e){this.rootData$.closed||this.rootData$.subscribe({next(t){e(t)}}),this.rootData&&this.nextIfStreamOpened(this.rootData$,this.rootData)}loadMetadata(e,t,i,r){if(e){if(this.model=e,i&&(this.view=i),!this.view||!Object.keys(this.view).length){let t=r;if(!r&&this.isRoot()){const e=(0,O.yE)().matched.segmentParams.page;t=e.viewType}this.view=(e.viewList||[]).sort((e,t)=>Number(e.priority)-Number(t.priority)).find(e=>e.type===t),this.view||(this.view={template:(0,x.Pu)(this.model,t),model:this.model.model,type:t,id:this.getHandle(),name:`inner_view_${this.getHandle()}`,priority:-1})}t&&Object.keys(t).length?(i||(this.view=Object.assign(Object.assign({},this.view),{template:""})),this.dslNode=t):this.dslNode&&Object.keys(this.dslNode).length||(t=(new x.Nz).parser(this.view.template).root,Nr(t),this.dslNode=t)}}on(e,t){let i;if((0,ve.A)(e)){if(!(0,st.A)(t))return;i={[e]:t}}else{if(!(0,ni.A)(e))return;i=e}Object.entries(i).forEach(([e,t])=>{const i=oi.e6[e];i&&(this.ownEventListeners[i]&&this.ownEventListeners[i].push(t),this.ownEventListeners[i]=[t])})}watch(e,t){if(this.launchWatch=!0,this.viewDataSource$){let i=this.viewDataSource$.pipe((0,P.Ju)());t&&(t.watchKey&&(i=i.pipe((0,P.pb)(([e,i])=>this.filterWatchData(e,i,t.watchKey)))),t.distinct&&(i=i.pipe((0,P.F)((e,t)=>JSON.stringify(t[0]||{})===JSON.stringify(t[1]||{}))))),this.stream$=i.subscribe({next:([t,i])=>{e(i,t)}}),this.viewDataSource$.next(this.viewData)}else console.error("viewDataSource$ has not been created.",this)}filterWatchData(e,t,i){if(!i)return!0;if(Array.isArray(e)||Array.isArray(t))return!0;if("string"===typeof i)return e[i]!==t[i];if(Array.isArray(i)){const r=i.map(t=>e?e[t]:null).filter(e=>null!==e&&void 0!==e),o=i.map(e=>t?t[e]:null).filter(e=>null!==e&&void 0!==e);return JSON.stringify(r)!==JSON.stringify(o)}return!0}notify(e){this.ownEventListeners[e]&&this.ownEventListeners[e].forEach(e=>e(this)),this.view&&this.view.name&&oi.Xn.publish(e,this.view.name,this)}unsubscribe(){var e;this.viewDataSource$.unsubscribe(),this.loading$.unsubscribe(),this.rootData$.unsubscribe(),null===(e=this.stream$)||void 0===e||e.unsubscribe(),this.ownEventListeners={},this.view&&this.view.name&&oi.Xn.disposeLifeCycle(this.view.name),this.streamOpened=!1,this.dispose()}}_.Ht.DESC,_.Ht.ASC;var si=i(13193);const di=(e,t={},i={},r,o,n)=>{const{page:a={}}=(0,O.yE)().matched.segmentParams;if(t=Array.isArray(t)?t:[t||{}],si.r4.getInstance().initExpressionContext(t,i||{},r,o||a.scene,null,n),!e)return si.r4.getInstance().cleanupExpressionContext(),"";const l=/\$[\!,\?,\#]?\{([^\}]+)\}/g,s={},d=[];let c=l.exec(e);const u=[];while(null!==c){d.push(c[1]);const t=c[0].charAt(1);"{"!==t?u.push(c[0].substr(1,1)):u.push(""),c=l.exec(e)}if(0===d.length)return e;const p=d.length;for(let v=0;v<p;v++){const t=d[v],i=u[v];if("#"===i)s[t]=`\${${t}}`;else try{const e=si.r4.getInstance().exec(t);s[t]=!1===e?"false":e||null,"!"===i&&null===s[t]&&(s[t]="")}catch(g){console.warn(`parse expression fail, expression:${e} , currentExpressionItem: ${t} , and then return the origin value`,g),s[t]=`\${${t}}`}}si.r4.getInstance().cleanupExpressionContext();const h=e.replace(l,(e,t)=>t?s[t]:"");return h},ci=(e,t={},i={},r,o,n)=>{si.r4.getInstance().cleanupExpressionContext();let a=di(e,t,i,r,o,n);const l=" 1==1 ";return a=null===a||void 0===a?void 0:a.replaceAll("=='null'","==null"),a=null===a||void 0===a?void 0:a.replaceAll("!='null'","!=null"),a=null===a||void 0===a?void 0:a.replaceAll("==null","=isnull=true"),a=null===a||void 0===a?void 0:a.replaceAll("!=null","=notnull=true"),a=null===a||void 0===a?void 0:a.replaceAll(/\s*[a-zA-Z]+\w*\s*=(in|out)=\s*(\(\)|\(null\))/g,l),a=null===a||void 0===a?void 0:a.replaceAll(/\s*[a-zA-Z]+\w*\s*=(notbit|bit|contain|notcontain)=\s*(''|null|'null')/g,l),a=null===a||void 0===a?void 0:a.replaceAll(/\s*[a-zA-Z]+\w*\s*=(has|hasnt)=\s*(\(\)|\(''\)|\(null\)|\('null'\))/g,l),a};class ui{static getConfig(e){if(null==e)return{};const t=r.TM.toBoolean(e);return null==t?e||{}:{enabled:t}}static getBoolean(e,t=!1){return r.Xx.ofNullable(e).map(r.TM.toBoolean).orElse(t)}static getNumberNullable(e){return r.Xx.ofNullable(e).map(r.A5.toNumber).orElse(void 0)}static getNumber(e,t){return r.Xx.ofNullable(e).map(r.A5.toNumber).orElse(t)}}class pi{constructor(){}static getConfig(){return ui.getConfig(o.Bi.getConfig("breadcrumb"))}static isEnabled(){return ui.getBoolean(pi.getConfig().enabled,!0)}static getHomepageConfig(){return ui.getConfig(pi.getConfig().homepage)}}var hi,gi,vi,mi;(function(e){e["init"]="init",e["reset"]="reset",e["push"]="push",e["close"]="close",e["change"]="change",e["active"]="active",e["refresh"]="refresh"})(hi||(hi={}));class fi extends r.j2{constructor(){super(),this._isInit=!1,this._keepAlive=!1,this.tabs=[],this.sortKeys=[]}get isInit(){return this._isInit}setInit(e){this._isInit=!0,this.notifyHandler(hi.init,e)}get isKeepAlive(){return this._keepAlive}enabledKeepAlive(){this._keepAlive=!0}disabledKeepAlive(){this._keepAlive=!1}getTabs(){const{sortKeys:e}=this;if(e.length){const e=[...this.tabs],t=[];for(const i of this.sortKeys){const r=e.findIndex(e=>e.key===i);-1!==r&&(t.push(e[r]),e.splice(r,1))}return[...t,...e]}return[...this.tabs]}setSortKeys(e){this.sortKeys=e}getTab(e){return this.tabs.find(t=>t.key===e)}getActiveTab(){return this.activeTab}init(e){this._isInit=!0,this.tabs=[],this.activeTab=void 0,this.rawPush(e,!0,!1),this.notifyHandler(hi.init,e)}reset(){this._isInit=!1,this.tabs=[],this.notifyHandler(hi.reset)}push(e,t=!0){this.rawPush(e,t)}rawPush(e,t=!0,i=!0){this.tabs.push(e),!t&&this.activeTab||this.rawActive(e,!1),i&&(this.notifyHandler(hi.push,e),this.notifyHandler(hi.change,e))}close(e){this.operator(e,(e,t)=>{this.rawClose(e,t)})}rawClose(e,t,i=!0){var r,o,n;this.tabs.splice(t,1),null===(o=null===(r=e.widget)||void 0===r?void 0:r.onClose)||void 0===o||o.call(r),(null===(n=this.activeTab)||void 0===n?void 0:n.key)===e.key&&(this.activeTab=void 0),i&&(this.notifyHandler(hi.close,e),this.notifyHandler(hi.change,e))}active(e){this.operator(e,e=>{this.rawActive(e)})}rawActive(e,t=!0){var i,r;const o=this.activeTab;this.activeTab=e,null===(r=null===(i=e.widget)||void 0===i?void 0:i.onActive)||void 0===r||r.call(i,o),t&&this.notifyHandler(hi.active,e,o)}refresh(e,...t){this.operator(e,e=>{var i,r;null===(r=null===(i=e.widget)||void 0===i?void 0:i.onRefresh)||void 0===r||r.call(i,...t),this.notifyHandler(hi.refresh,e)})}operator(e,t){let i;const r=this.tabs.find((t,r)=>t.key===e&&(i=r,!0));r?t(r,i):console.error("Invalid tab key.",e)}onInit(e){this.on(hi.init,e)}clearOnInit(e){this.clearOn(hi.init,e)}onReset(e){this.on(hi.init,e)}clearOnReset(e){this.clearOn(hi.init,e)}onPush(e){this.on(hi.push,e)}clearOnPush(e){this.clearOn(hi.push,e)}onClose(e){this.on(hi.close,e)}clearOnClose(e){this.clearOn(hi.close,e)}onChange(e){this.on(hi.change,e)}clearOnChange(e){this.clearOn(hi.change,e)}onActive(e){this.on(hi.active,e)}clearOnActive(e){this.clearOn(hi.active,e)}onRefresh(e){this.on(hi.refresh,e)}clearOnRefresh(e){this.clearOn(hi.refresh,e)}}fi.INSTANCE=new fi,q.register(()=>{fi.INSTANCE.reset()});class yi{constructor(){}static refreshConfig(e){var t,i;const r=ui.getConfig(yi.runtimeManifestMergedConfigCache);return Object.assign(r,e.multiTabTheme),Object.assign(r,null===(i=null===(t=e.extend)||void 0===t?void 0:t.systemStyleConfig)||void 0===i?void 0:i.multiTabConfig),yi.runtimeManifestMergedConfigCache=r,r}static getConfig(){var e,t;if(yi.runtimeManifestMergedConfigCache)return yi.runtimeManifestMergedConfigCache;const i=ui.getConfig(o.Bi.getConfig("multiTabs")),r=Ue();return Object.assign(i,r.multiTabTheme),Object.assign(i,null===(t=null===(e=r.extend)||void 0===e?void 0:e.systemStyleConfig)||void 0===t?void 0:t.multiTabConfig),yi.runtimeManifestMergedConfigCache=i,i}static getApplicationHomepageConfig(){return ui.getConfig(yi.getConfig().homepage)}static getModuleHomepageConfig(){return ui.getConfig(yi.getConfig().moduleHomepage)}static isEnabled(e){let{enabled:t}=yi.getConfig();return null==t&&(t=!0),t&&e?!bi.getFilter().includes(e):t}static isInline(){return!!yi.isEnabledModuleHomepage()||ui.getBoolean(yi.getConfig().inline)}static isShowModuleLogo(){return!yi.isEnabledModuleHomepage()&&ui.getBoolean(yi.getConfig().showModuleLogo,!0)}static getMaxCount(){return ui.getNumberNullable(yi.getConfig().maxCount)}static getMaxCacheCount(){return ui.getNumber(yi.getConfig().maxCacheCount,10)}static isEnabledHomepage(){return!yi.isEnabledModuleHomepage()&&ui.getBoolean(yi.getApplicationHomepageConfig().enabled,!0)}static isEnabledModuleHomepage(){return ui.getBoolean(yi.getModuleHomepageConfig().enabled)}}yi.runtimeManifestMergedConfigCache=void 0;class bi{constructor(){}static getConfig(){return ui.getConfig(o.Bi.getConfig("multiTabs"))}static getApplicationHomepageConfig(){return ui.getConfig(bi.getConfig().homepage)}static getModuleHomepageConfig(){return ui.getConfig(bi.getConfig().moduleHomepage)}static isEnabled(e){let{enabled:t}=bi.getConfig();return null==t&&(t=!0),t&&e?!bi.getFilter().includes(e):t}static isInline(){return!!bi.isEnabledModuleHomepage()||ui.getBoolean(bi.getConfig().inline)}static isShowModuleLogo(){return!bi.isEnabledModuleHomepage()&&ui.getBoolean(bi.getConfig().showModuleLogo,!0)}static getMaxCount(){return ui.getNumberNullable(bi.getConfig().maxCount)}static getMaxCacheCount(){return ui.getNumber(bi.getConfig().maxCacheCount,10)}static isEnabledHomepage(){return!bi.isEnabledModuleHomepage()&&ui.getBoolean(bi.getApplicationHomepageConfig().enabled,!0)}static isEnabledModuleHomepage(){return ui.getBoolean(bi.getModuleHomepageConfig().enabled)}static getInternalFilter(){return["dataDesigner","uiDesigner","printDesigner","modelDesigner","logicDesigner","workflowDesigner","eipDesigner","dataflowDesigner","datavi"]}static getFilter(){const{filter:e}=bi.getConfig();return[...new Set(r.MZ.append(bi.getInternalFilter(),e))]}}function Ci(e,t){const{page:{module:i,language:r}}=(0,O.yE)().matched.segmentParams,{resModuleName:n,resModuleDefinition:a,moduleName:l,moduleDefinition:s,resViewType:d,viewType:c,model:u,name:p,target:h}=e;let g=null===t||void 0===t?void 0:t.moduleName;return g||(g=(null===t||void 0===t?void 0:t.usingLastedModule)||(null===t||void 0===t?void 0:t.usingLastedUrlParameters)?n||(null===a||void 0===a?void 0:a.name)||i||l||(null===s||void 0===s?void 0:s.name):n||(null===a||void 0===a?void 0:a.name)||l||(null===s||void 0===s?void 0:s.name)),{module:g,viewType:d||c,model:u,action:p,target:yi.isEnabled((null===t||void 0===t?void 0:t.moduleName)||g)?o.jq.OpenWindow:h,scene:p,language:r}}class xi{static generatorParameters(e){return(0,I.sH)(this,void 0,void 0,function*(){let{parameters:t}=e;if(!t){const{action:i}=e;t=(e.generatorParameters||Ci)(i)}return t})}}class wi{constructor(e){this.router=e}static useRouter(e){return e||(e=(0,O.ZI)()),new wi(e)}to(e){this.operator(e,e=>{const t=e.stack,i=t[t.length-1];this.$to(i)})}back(){return(0,I.sH)(this,void 0,void 0,function*(){const e=fi.INSTANCE.getActiveTab();if(!e)return void console.error("Invalid active tab.");const{key:t,stack:i}=e,r=i[i.length-2];r?yield this.$to(r):fi.INSTANCE.refresh(t)})}forward(){throw new Error("Invalid forward method")}operator(e,t){let i;i=(0,ve.A)(e)?fi.INSTANCE.getTab(e):e,i?t(i):console.error("Invalid tab instance.")}$to(e){return(0,I.sH)(this,void 0,void 0,function*(){this.router.push({segments:[{path:"page",extra:{preserveParameter:!1},parameters:yield xi.generatorParameters(e)}]})})}}class Si{closeCurrentTab(){const e=fi.INSTANCE.getActiveTab();this.closeTab(e)}closeTab(e){this.consumerTargetTab(e,(e,t)=>{if(e===t){const t=this.findNextActiveTab(e);t&&this.activeTabInstance(t)}}),fi.INSTANCE.close(e.key)}activeTabInstance(e){fi.INSTANCE.active(e.key),wi.useRouter((0,O.ZI)()).to(e)}consumerTargetTab(e,t){const{key:i}=fi.INSTANCE.getActiveTab(),r=fi.INSTANCE.getTabs().findIndex(e=>e.key===i),o=e.key,n=fi.INSTANCE.getTabs().findIndex(e=>e.key===o);t(r,n)}findNextActiveTab(e){const t=fi.INSTANCE.getTabs();let i;return i=0===e?t[e+1]:t[e-1],i}}(function(e){e[e["NORMAL"]=0]="NORMAL",e[e["HOMEPAGE"]=1]="HOMEPAGE",e[e["MODULE_HOMEPAGE"]=2]="MODULE_HOMEPAGE"})(gi||(gi={})),function(e){e["tab1"]="theme1",e["tab2"]="theme2",e["tab3"]="theme3",e["tab4"]="theme4"}(vi||(vi={})),Object.assign(fi.INSTANCE,new Si),function(e){e["push"]="push",e["created"]="created",e["open"]="open",e["close"]="close",e["dispose"]="dispose",e["disposeAll"]="disposeAll"}(mi||(mi={}));class Ti extends r.j2{constructor(){super(),this.instances=[]}getInstances(e){return e?[...this.instances].filter(t=>t.type===e):[...this.instances]}getInstance(e){return this.instances.find(t=>t.key===e)}peek(e){const t=this.getInstances(e);return t[t.length-1]}push(e,t=!0){this.rawPush(e,t)}rawPush(e,t=!0,i=!0){this.instances.push(e),i&&this.notifyHandler(mi.push,e),t&&this.rawOpen(e,i)}open(e){this.operator(e,e=>{this.rawOpen(e)})}rawOpen(e,t=!0){var i,r;(null===(i=e.widget)||void 0===i?void 0:i.isVisible)||(null===(r=e.widget)||void 0===r||r.onVisibleChange(!0),t&&this.notifyHandler(mi.open,e))}close(e){this.operator(e,e=>{this.rawClose(e)})}rawClose(e,t=!0){var i,r;(null===(i=e.widget)||void 0===i?void 0:i.isVisible)&&(null===(r=e.widget)||void 0===r||r.onVisibleChange(!1),t&&this.notifyHandler(mi.close,e))}dispose(e,t){this.operator(e,(e,i)=>{this.rawDispose(e,i,!0,t)})}rawDispose(e,t,i=!0,r){const{widget:o}=e;o&&(o.onVisibleChange(!1,r),o.dispose()),this.instances.splice(t,1),i&&this.notifyHandler(mi.dispose,e,r)}disposeAll(e){for(let t=this.instances.length-1;t>=0;t--){const i=this.instances[t];e&&i.type!==e||this.rawDispose(i,t)}this.notifyHandler(mi.disposeAll)}operator(e,t){let i,r;e?i=this.instances.find((t,i)=>t.key===e&&(r=i,!0)):(i=this.peek(),i&&(r=this.instances.length-1)),i?t(i,r):console.error("Invalid tab key.",e)}onPush(e){this.on(mi.push,e)}clearOnPush(e){this.clearOn(mi.push,e)}onCreated(e){this.on(mi.created,e)}clearOnCreated(e){this.clearOn(mi.created,e)}onOpen(e){this.on(mi.open,e)}clearOnOpen(e){this.clearOn(mi.open,e)}onClose(e){this.on(mi.close,e)}clearOnClose(e){this.clearOn(mi.close,e)}onDispose(e){this.on(mi.dispose,e)}clearOnDispose(e){this.clearOn(mi.dispose,e)}onDisposeAll(e){this.on(mi.disposeAll,e)}clearOnDisposeAll(e){this.clearOn(mi.disposeAll,e)}}Ti.INSTANCE=new Ti;var Ei=i(83247);const Ai="__popup_constructor";function ki(e,t){return Ei.pG.register(Ai,e,t,!1)}function Di(e){return Ei.pG.selector(Ai,e)}Ei.pG.createStorage({key:Ai,matchKeys:["type"]});let Fi=0;class Ri{static create(e){const t=Di({type:e}),i=(0,r.Fl)(t);let o=!1;return new Proxy(i,{get(e,t,i){const r=e.getOperator();if(!o&&r!==e){o=!0;const e=Reflect.get(r,t,r);return o=!1,e}return Reflect.get(e,t,i)},set(e,t,i,r){const n=e.getOperator();if(!o&&n!==e){o=!0;const e=Reflect.set(n,t,i,n);return o=!1,e}return Reflect.set(e,t,i,r)}})}static createByViewAction(e,t,i){const r="oio-popup-"+Fi++;return Ti.INSTANCE.push({type:e,key:r,initialConfig:{action:t,extra:i}}),r}static peek(e){return Ti.INSTANCE.peek(e)}static peekActive(e){var t;const i=Ti.INSTANCE.getInstances(e);for(let r=i.length-1;r>=0;r--){const e=i[r];if(null===(t=e.widget)||void 0===t?void 0:t.isVisible)return e}}static close(e){return Ri.dispose(e)}static dispose(e,t){const i=Ri.peekActive(e);return!!i&&(Ti.INSTANCE.dispose(i.key,t),!0)}static disposeAll(e){Ti.INSTANCE.disposeAll(e)}}class Oi{static create(){return Ri.create(Oi.type)}static createByViewAction(e,t){return Ri.createByViewAction(Oi.type,e,t)}static peek(){return Ri.peek(Oi.type)}static peekActive(){return Ri.peekActive(Oi.type)}static close(){return Ri.close(Oi.type)}static dispose(e){return Ri.dispose(Oi.type,e)}static disposeAll(){Ri.disposeAll(Oi.type)}}Oi.type="dialog";class Ni{static create(){return Ri.create(Ni.type)}static createByViewAction(e,t){return Ri.createByViewAction(Ni.type,e,t)}static peek(){return Ri.peek(Ni.type)}static peekActive(){return Ri.peekActive(Ni.type)}static close(){return Ri.close(Ni.type)}static dispose(e){return Ri.dispose(Ni.type,e)}static disposeAll(){Ri.disposeAll(Ni.type)}}Ni.type="drawer";let $i=class{};var Mi,Ii,Li,_i,Pi;$i=(0,I.Cg)([Ei.ds.Storage(["framework","isMobile"],{selector:e=>t=>Ei.pG.selectors(e,t)})],$i),function(e){e["pc"]="pc",e["mobile"]="mobile"}(Mi||(Mi={})),function(e){e["LEFT_STICK"]="LEFT_STICK",e["RIGHT_STICK"]="RIGHT_STICK",e["CENTER_STICK"]="CENTER_STICK",e["CENTER_STICK_LOGO"]="CENTER_STICK_LOGO",e["STAND_LEFT"]="STAND_LEFT",e["STAND_RIGHT"]="STAND_RIGHT"}(Ii||(Ii={})),function(e){e["default"]="default",e["dark"]="dark"}(Li||(Li={})),function(e){e["side1"]="theme1",e["side2"]="theme2",e["side3"]="theme3",e["side4"]="theme4",e["side5"]="theme5",e["side6"]="theme6"}(_i||(_i={})),function(e){e["LEFT"]="LEFT",e["RIGHT"]="RIGHT",e["CENTER"]="CENTER"}(Pi||(Pi={}));const ji={name:Ii.STAND_RIGHT,get backgroundImage(){return M("login_bg_left.jpg")}},Vi={language:"zh-CN",enableI18n:!0,enableLowNoIntegration:!0,enableScrollToErrorField:!0,http:{url:window.location.origin,enableTranslate:!0,encodeRsql:!1},framework:"vue",router:[],loginTheme:{name:Ii.STAND_RIGHT},theme:[],sideBarTheme:{mode:Li.default,theme:_i.side1},multiTabTheme:{inline:!1,theme:vi.tab1},extend:{translationManage:!1,toolboxTranslation:!1}},Bi=new Map;let Hi=[];const Wi=()=>Vi.theme,Ui=()=>{const e=Wi();return e.includes(Ge.Gk.DARK_LARGE)||e.includes(Ge.Gk.DEFAULT_LARGE)?"large":e.includes(Ge.Gk.DARK_MEDIUM)||e.includes(Ge.Gk.DEFAULT_MEDIUM)?"medium":e.includes(Ge.Gk.DARK_SMALL)||e.includes(Ge.Gk.DEFAULT_SMALL)?"small":void 0},qi=()=>Vi.loginTheme,zi=()=>Vi.copyrightStatus,Gi=()=>Vi.browser,Ki=()=>!!Vi.enableI18n;function Xi(){return(0,I.sH)(this,void 0,void 0,function*(){const e=yield ze();yi.refreshConfig(e);const{mode:t,size:i,extend:r}=e,o=(t||"default").toLocaleLowerCase(),n=(i||"medium").toLocaleLowerCase();return yield nr.setTheme([`${o}-${n}`],!1),Vi.extend=r,e})}function Qi(){return Vi}function Yi(e){Vi.loginTheme=Object.assign(Object.assign({},Vi.loginTheme),e)}function Ji(e){const{url:t,encodeRsql:i,enableTranslate:r,interceptor:o,middleware:n}=e,a=L.Qq5.getInstance();a.setBaseURL(t),a.setEncodeRsql(i),a.setEnableTranslate(r),a.setDefaultMiddleware(o||{});const l=n||[];a.setMiddleware(Array.isArray(l)?l:[l])}function Zi(e){return(0,I.sH)(this,void 0,void 0,function*(){const t=Bi.get(e.framework)();return e.install&&(yield e.install(t)),ei.createOrReplace().frameworkInstance=t,t})}function er(e){ei.createOrReplace().routers=e}function tr(){return(0,I.sH)(this,void 0,void 0,function*(){})}function ir(e,t=!0){return(0,I.sH)(this,void 0,void 0,function*(){let i=t?[...Hi,...e]:[...e,...Hi];i=i.filter((e,t)=>i.lastIndexOf(e)===t),Vi.theme=i,yield(0,Ge.y3)(Vi.theme)})}let rr;function or(e){return(0,I.sH)(this,void 0,void 0,function*(){const{title:t,favicon:i}=e||{},{browserTitle:r,favicon:o}=Ue()||{};document.title=t||r||document.title;const n=i||o;n&&(rr||(rr=document.createElement("link"),document.head.append(rr)),rr.href=n||rr.href,rr.rel="icon")})}function nr(e,t,i=!0){var n,a,l;return(0,I.sH)(this,void 0,void 0,function*(){Object.assign(Vi,Object.assign(Object.assign({},e),{http:Object.assign(Object.assign({},Vi.http),null===e||void 0===e?void 0:e.http),loginTheme:Object.assign(Object.assign({},Vi.loginTheme),null===e||void 0===e?void 0:e.loginTheme)}));const s=Vi;Hi=s.theme,r.pU.toggleUrlEncryption(s.encryptionUrlParams);const{enableLowNoIntegration:d}=s;let c;null!=d?d&&(yield o.Bi.init(),c=o.Bi.get()):!1!==s.enableRuntimeConfig&&(yield o.Bi.init(),c=o.Bi.get());const u=$i.Selector({framework:s.framework,isMobile:!!r.Fr.phone}).map(r.Fl);yield(0,r.ln)(u,e=>{var t;return null===(t=e.before)||void 0===t?void 0:t.call(e,s)}),!0!==s.enableI18n&&(s.http.enableTranslate=!1),nr.createHttp(s.http);const p=null===c||void 0===c?void 0:c.plugins;p&&(yield o.EV.load(p,s.dependencies));let h=Ue();i&&(h=yield je(),qe(h));const{loginBackground:g,loginPageLogo:v,loginLayoutType:m,mode:f,size:y,favicon:b,extend:C}=h||{};C&&(Vi.extend=null!==(n=Vi.extend)&&void 0!==n?n:{},Vi.extend.toolboxTranslation=null!==(a=C.toolboxTranslation)&&void 0!==a&&a,Vi.extend.translationManage=null!==(l=C.translationManage)&&void 0!==l&&l),"boolean"===typeof s.copyrightStatus?Vi.copyrightStatus=s.copyrightStatus:(null===h||void 0===h?void 0:h.partnerName)&&(Vi.copyrightStatus=!0),s.appSwitcher&&(s.appSwitcher.logo&&(h.logo=s.appSwitcher.logo),s.appSwitcher.appSideLogo&&(h.appSideLogo=s.appSwitcher.appSideLogo));const x={name:m||ji.name,backgroundImage:g||ji.backgroundImage};v&&(x.logo=v);const w=(null===e||void 0===e?void 0:e.loginTheme)||{},{length:S}=Object.keys(w);S&&(Object.entries(w).forEach(([e,t])=>{x[e]=t}),""===x.backgroundImage&&(x.backgroundImage="null")),nr.setLoginTheme(x);const T=(f||"default").toLocaleLowerCase(),E=(y||"medium").toLocaleLowerCase();(0,Ge.gd)({sideBarTheme:h.sideBarTheme}),yield nr.setTheme([`${T}-${E}`],!1),yield nr.createRouter(s.router),yield nr.createFrameworkInstance(s),yield nr.createCache();const A=(null===s||void 0===s?void 0:s.browser)||{};b&&(A.favicon=b),Vi.browser=A,yield nr.setBrowserConfig(A),t&&Array.isArray(t)&&(yield Promise.allSettled(t.map(e=>e.call(s)))),yield(0,r.ln)(u,e=>{var t;return null===(t=e.after)||void 0===t?void 0:t.call(e,s)})})}nr.getConfig=Qi,nr.setLoginTheme=Yi,nr.setTheme=ir,nr.createFrameworkInstance=Zi,nr.createRouter=er,nr.setBrowserConfig=or,nr.createCache=tr,nr.createHttp=Ji,nr.refreshSystemMajorConfig=Xi;const ar=(0,Ei.Bp)("LanguageService"),lr=(0,Ei.Bp)("UserService");let sr=class{get(){var e,t;return(0,I.sH)(this,void 0,void 0,function*(){const i=yield null===(e=this.userService)||void 0===e?void 0:e.getUserInfo();if(i)return null===(t=i.pamirsUser)||void 0===t?void 0:t.lang})}};var dr;(0,I.Cg)([Ei.DF.Autowired(lr,{required:!1})],sr.prototype,"userService",void 0),sr=(0,I.Cg)([Ei.DF.Service(ar)],sr),function(e){e["refreshLocalStorage"]="refreshLocalStorage",e["refreshSessionStorage"]="refreshSessionStorage"}(dr||(dr={}));class cr{static get(){return(0,I.sH)(this,void 0,void 0,function*(){if(!cr.languageService&&(cr.languageService=Ei.DF.RawInstantiate(ar),!cr.languageService))throw new Error("Invalid current language service.");return cr.languageService.get()})}static getCode(){return(0,I.sH)(this,void 0,void 0,function*(){const e=yield cr.get();return(null===e||void 0===e?void 0:e.code)||cr.DEFAULT_LANGUAGE})}static getIsoCode(){return(0,I.sH)(this,void 0,void 0,function*(){const e=yield cr.get();return(null===e||void 0===e?void 0:e.isoCode)||cr.DEFAULT_LANGUAGE})}static getCodeByLocalStorage(){return sessionStorage.getItem(cr.LOCAL_STORAGE_CODE_KEY)||localStorage.getItem(cr.LOCAL_STORAGE_CODE_KEY)||cr.DEFAULT_LANGUAGE}static getIsoCodeByLocalStorage(e=""){return sessionStorage.getItem(e||cr.LOCAL_STORAGE_ISO_CODE_KEY)||localStorage.getItem(e||cr.LOCAL_STORAGE_ISO_CODE_KEY)||cr.DEFAULT_LANGUAGE}static refreshLocalStorage(){return(0,I.sH)(this,void 0,void 0,function*(){const e=yield cr.getCode(),t=yield cr.getIsoCode();localStorage.setItem(cr.LOCAL_STORAGE_CODE_KEY,e),localStorage.setItem(cr.LOCAL_STORAGE_ISO_CODE_KEY,t),cr.eventManager.notifyHandler("refreshLocalStorage",e,t)})}static refreshSessionStorage(e,t){sessionStorage.setItem(cr.LOCAL_STORAGE_CODE_KEY,e),sessionStorage.setItem(cr.LOCAL_STORAGE_ISO_CODE_KEY,t),cr.eventManager.notifyHandler("refreshSessionStorage",e,t)}static onRefreshLocalStorage(e){cr.eventManager.on("refreshLocalStorage",e)}static onRefreshSessionStorage(e){cr.eventManager.on("refreshSessionStorage",e)}static clearOnRefreshLocalStorage(e){cr.eventManager.clearOn("refreshLocalStorage",e)}static clearOnRefreshSessionStorage(e){cr.eventManager.clearOn("refreshSessionStorage",e)}}cr.eventManager=new r.ug,cr.LOCAL_STORAGE_CODE_KEY="language",cr.LOCAL_STORAGE_ISO_CODE_KEY="languageIsoCode",cr.DEFAULT_LANGUAGE="zh-CN";const ur={kunlun:{common:{loading:"加载中...",success:"成功",error:"失败",info:"提示",debug:"调试",save:"保存",confirm:"确定",cancel:"取消",delete:"删除",back:"返回",more:"更多",loadmore:"加载更多",displayAll:"显示所有",noViewAction:"应用没有视图动作",create:"创建",deleteConfirm:"确定要删除吗？",edit:"编辑",revise:"修改",add:"添加",copy:"复制",executeResult:"执行结果",executeSuccess:"执行成功",runError:"运行表达式错误",custom:"自定义",showOption:"展示选项",verificationCode:"短信验证码",prompt:"提示",PackUpMenu:"收起菜单"},fields:{upload:{fileType:"只支持{exts}格式的文件",fileSize:"文件大小不能超过{size}",uploadImage:"上传图片",preview:"预览"},boolean:{true:"是",false:"否"}},o2mImport:{notConfig:"未配置导入字段Fields not configured for import",dataError:"数据格式不正确，未找到{col}列",dataEmpty:'第{index}条数据的"{key}"不能为空',dataNotExist:"{key}为{errorData}的产品不存在或出库数量不足",or:"或"},button:{search:"搜索",create:"创建",edit:"编辑",delete:"删除",confirm:"提交",reset:"重置",expand:"展开",fold:"收起",upload:"点击上传"},message:"消息",breadcrumbs:{currentPosition:"当前位置",index:"首页"},menu:{searchMenu:"搜索菜单",collapseMenu:"收起菜单",jumpTip:"是否要跳转？",tip:"提示"},field:{discountTip:"优惠金额不得大于或等于所选商品的总金额",required:"必填"},customs:{deleteCategoryConfirm:"是否删除？"},table:{strip:"条",page:"页",operation:"操作",emptyText:"暂无数据"},export:{tips:"请选择模版"},import:{tips:"请选择模版",uploadField:"请上传文件"},condition:{equal:"等于",notEqual:"不等于",null:"为空",notNull:"不为空",contain:"包含",notContain:"不包含",greater:"大于",lessThan:"小于",greaterOrEqual:"大于或等于",lessThanOrEqual:"小于或等于",laterThat:"晚于",laterThatOrEqual:"晚于或等于",soonerThan:"早于",soonerThanOrEqual:"早于或等于",between:"介于"}}};var pr;function hr(){return window.__language}function gr(e){window.__language=Object.assign(Object.assign({},hr()),e)}function vr(){return window.__lang}function mr(e){window.__lang=e}(function(e){e["zh-CN"]="zh-CN",e["en-US"]="en-US"})(pr||(pr={})),Reflect.set(window,"__language",{}),Reflect.set(window,"__lang","zh-CN");const fr=new Map,yr=e=>(0,I.sH)(void 0,void 0,void 0,function*(){const t=ur;gr(t),mr(e)}),br=localStorage.getItem("language")||"zh-CN";yr(br);const Cr=(e,t)=>{vr()===e&&gr(t)},xr=e=>{const t=e.split(".");let i=window.__language;for(let r=0;r<t.length;r++){if(!i)return;i=i[t[r]]}return Mr("string"===typeof i?i:e)};Reflect.set(window,"translate",xr);let wr="";const Sr="global",Tr="common",Er=e=>{let t=null,i=null;if(fr.forEach((r,o)=>{o.module===wr&&o.lang===e&&(t=r),o.module===Sr&&o.lang===e&&(i=r)}),!t&&!i)return null;const r={};return new Proxy(r,{get(e,r){var o,n;return null!==(n=null!==(o=null===t||void 0===t?void 0:t[r])&&void 0!==o?o:null===i||void 0===i?void 0:i[r])&&void 0!==n?n:r}})},Ar="i18nResolve",kr=(e,t)=>(0,I.sH)(void 0,void 0,void 0,function*(){return new Promise((i,r)=>{var n;const a=o.Bi.get(),l=cr.getIsoCodeByLocalStorage(t);if(l===cr.DEFAULT_LANGUAGE)return void r();const s=`${a.I18N_OSS_URL||"https://pamirs.oss-cn-hangzhou.aliyuncs.com/kubernetes/upload/libra/sstest"}/translate/${e}/i18n_${l}.js`,d=(null===(n=Ue().extend)||void 0===n?void 0:n.resourceTranslations)||[],c=e===Sr?Tr:e,u=d.find(e=>e.moduleName===c),p=u&&u.remoteUrl||s,h=document.createElement("script");h.src=p,h.onload=i,h.onerror=r,document.body.appendChild(h)})}),Dr=(e,t)=>(0,I.sH)(void 0,void 0,void 0,function*(){const i=[],r=[],o=e=>{i.push(e)};Reflect.has(window,Ar)||Reflect.set(window,Ar,e=>{o(e)}),yield Promise.all(e.map(e=>(0,I.sH)(void 0,void 0,void 0,function*(){try{yield kr(e,t),r.push(e)}catch(i){}}))),r.forEach((e,t)=>{fr.set({module:e,lang:vr()},i[t])}),Reflect.deleteProperty(window,Ar)}),Fr=(e,t="")=>(0,I.sH)(void 0,void 0,void 0,function*(){if(Reflect.get(window,"i18nResolve")&&wr===e)return;wr=e;const i=[Sr,e];yield Dr(i,t)}),Rr=["false","true"],Or=["label","displayName","hint","placeholder","confirm","enterText","cancelText"],Nr=e=>{const{__lang:t}=window,i=Er(t);i&&e&&(Object.keys(e).forEach(t=>{const r=e[t];"string"!==typeof r||Rr.includes(r)||(e[t]=i[e[t]]||e[t])}),e.children&&Array.isArray(e.children)&&e.children.forEach(e=>Nr(e)))},$r=(e,t=!1)=>{var i;if(!Ki())return e;const{__lang:r}=window,o=Er(r),n=t||x.vV.isAction(e)||x.vV.isField(e)||!1;if(o&&e){Object.keys(e).forEach(t=>{if(n&&!Or.includes(t))return;const i=e[t];"string"!==typeof i||Rr.includes(i)||(e[t]=o[e[t]]||e[t])}),null===(i=e.widgets)||void 0===i||i.forEach(e=>$r(e,n));const{options:t}=e;t&&Array.isArray(t)&&(null===t||void 0===t||t.forEach(e=>$r(e,n)))}},Mr=e=>{if(!e||!Ki())return e;const{__lang:t}=window,i=Er(t);return i&&i[e]||e},Ir=e=>e?e.replace("_","-").toLowerCase():"",Lr="RESOLVE_RUNTIME_ACTION";function _r(e,t){return Ei.pG.register(Lr,e,t)}function Pr(e){return Ei.pG.selectors(Lr,e).reverse()}function jr(e,t){const i=e.model.modelActions,r=Vr(e,t);if(r){const e=i.length;t.__metadata_index=e,r.__index=e,i.push(r)}return r}function Vr(e,t){const i=ie.getAndRepairModel(e,t);if(i)return Br(e,i,t,i=>{Pr({actionType:i.actionType}).forEach(r=>r(e,t,i))});console.error("action model is required.",e,t)}function Br(e,t,i,r){var o,n;const a=Hr(i);if(!a)return void console.error("action type is required.",i);const l=Wr(i);if(!l)return void console.error("action name is required.",i);const{mappingConfig:s,contextConfig:d}=R(i,[{key:"mappingConfig",prefix:"mapping"},{key:"contextConfig",prefix:"context"}]),c={id:i.id,template:i,model:t,modelName:i.modelName||S(t),name:l,widget:i.widget,actionType:a,contextType:null===(o=i.contextType)||void 0===o?void 0:o.toUpperCase(),bindingType:null===(n=ie.toArray(i.bindingType))||void 0===n?void 0:n.map(e=>e.toUpperCase()),bindingViewName:i.bindingViewName,priority:ie.toNumberNullable(i.priority),invisible:i.invisible,disabled:i.disabled,displayName:i.displayName,label:i.label,mapping:Object.assign(Object.assign({},ie.toRecord(i.mapping)),s||{}),context:Object.assign(Object.assign({},ie.toRecord(i.context)),d||{}),sessionPath:i.sessionPath};return null===r||void 0===r||r(c),ie.clearUndefined(c),c.modelDefinition=e.model,c}function Hr(e){const t=e.widget;let i=e.actionType;if(!i)switch(t){case"UrlAction":i=o.X2.URL;break;case"ServerAction":i=o.X2.Server;break;case"ViewAction":i=o.X2.View;break;default:i=o.X2.Client;break}return e.actionType=i,i}function Wr(e){let{name:t}=e;if(!t){const{actionType:i}=e;i===o.X2.Client?t=e.fun:i===o.X2.Composition&&(t=(0,r._N)()),e.name=t}return t}function Ur(e,t,i){const r=t.widgets||[],o=[];for(const n of r)if(x.vV.isAction(n)){const t=Vr(e,n);t&&(t.__index=o.length,o.push(t))}i.actions=o}function qr(e,t){var i;const r={type:t.type,namespace:t.namespace||e,fun:t.fun,name:t.name,argumentList:(null===(i=t.argumentList)||void 0===i?void 0:i.map(t=>({name:t.name,ttype:t.ttype,multi:t.multi,model:t.model||e})))||[]},o=null===t||void 0===t?void 0:t.returnType;return o&&(r.returnType={ttype:o.ttype,multi:o.multi,model:o.model||e}),r}function zr(e,t,i){i.fun=t.fun;const r=t.function;r&&(i.functionDefinition=qr(i.model,r))}function Gr(e,t,i){var r,o;i.url=t.url,i.target=null===(o=null===(r=t.target)||void 0===r?void 0:r.toUpperCase)||void 0===o?void 0:o.call(r),i.computeFunction=t.computeFunction,i.compute=t.compute}function Kr(e,t,i){var r,o;i.title=t.title,i.target=null===(o=null===(r=t.target)||void 0===r?void 0:r.toUpperCase)||void 0===o?void 0:o.call(r),i.domain=t.domain,i.filter=t.filter,i.module=t.module,i.moduleName=t.moduleName,i.resModel=t.resModel,i.resModelName=t.resModelName,i.resModule=t.resModule,i.resModuleName=t.resModuleName,i.resViewLayout=t.resViewLayout,i.resViewName=t.resViewName,i.resViewType=t.viewType,i.resView=t.resView,i.theme=t.theme,i.load=t.load;const n=t.loadFunction;n&&(i.loadFunctionDefinition=qr(i.model,n))}function Xr(e,t,i){i.format=t.format,i.valueFormat=t.valueFormat,i.dateFormat=t.dateFormat}function Qr(e,t,i){i.format=t.format,i.valueFormat=t.valueFormat,i.dateFormat=t.dateFormat,i.timeFormat=t.timeFormat}Ei.pG.createStorage({key:Lr,matchKeys:["actionType"]}),_r({actionType:o.X2.Client},w),_r({actionType:o.X2.Composition},Ur),_r({actionType:o.X2.Server},zr),_r({actionType:o.X2.URL},Gr),_r({actionType:o.X2.View},Kr);var Yr=i(48182);function Jr(e,t,i){var r;const o=[];null===(r=t.options)||void 0===r||r.forEach(e=>{const{name:t,value:i,label:r,displayName:n,hint:a,thumbnail:l,invisible:s,disabled:d,isDefault:c,color:u,backgroundColor:p,borderColor:h,icon:g,state:v}=e;null!=t&&o.push({name:(0,Yr.A)(t),value:i,displayName:r||n,label:r||n,hint:a,thumbnail:l,state:v,invisible:s,disabled:d,isDefault:c,color:u,backgroundColor:p,borderColor:h,icon:g})}),i.options=o}function Zr(e,t,i){const{size:r,decimal:o,max:n,min:a,limit:l}=t;i.size=ie.toNumberOrStringNullable(r),i.decimal=ie.toNumberOrStringNullable(o),i.max=ie.toNumberOrStringNullable(n),i.min=ie.toNumberOrStringNullable(a),i.limit=ie.toNumberOrStringNullable(l)}const eo="RESOLVE_RUNTIME_FIELD";function to(e,t){return Ei.pG.register(eo,e,t)}function io(e){return Ei.pG.selectors(eo,e).reverse()}function ro(e,t,i){var r;const o=null===(r=t.relatedTtype)||void 0===r?void 0:r.toUpperCase();o&&(i.relatedTtype=o,i.related=ie.toArray(t.related)||[],i.related.length||console.error("field related is empty.",i),io({viewType:e.view.type,ttype:o,multi:i.multi||!1}).forEach(r=>r(e,t,i)))}function oo(e,t){const i=e.model.modelFields,r=ao(e,t);if(r){const n=i.length;t.__metadata_index=n,r.__index=n,i.push(r),(0,o.vq)(r.ttype)||no(e,t)}return r}function no(e,t){var i;null===(i=null===t||void 0===t?void 0:t.widgets)||void 0===i||i.forEach(t=>{if(!x.vV.isView(t))if(x.vV.isTemplate(t))no(e,t);else if(x.vV.isAction(t))jr(e,t);else if(x.vV.isField(t)){const i=e.model.modelFields,{data:r}=so(t),o=i.find(e=>e.data===r);o||oo(e,t)}})}function ao(e,t){const i=ie.getAndRepairModel(e,t,{verifyModelConsistency:!0});if(i)return lo(e,i,t,i=>{var r;io({viewType:null===(r=e.view)||void 0===r?void 0:r.type,ttype:i.ttype,multi:i.multi}).forEach(r=>r(e,t,i))});console.error("field model is required.",e,t)}function lo(e,t,i,o){var n,a,l,s,d;const{data:c,name:u}=so(i);if(!c||!u)return void console.error("field data is required.",i);const p={id:i.id,template:i,model:t,modelName:i.modelName||S(t),data:c,name:u,ttype:null===(n=i.ttype)||void 0===n?void 0:n.toUpperCase(),multi:i.multi||!1,store:i.store,sortable:i.sortable,storeSerialize:null===(l=null===(a=i.storeSerialize)||void 0===a?void 0:a.toUpperCase)||void 0===l?void 0:l.call(a),displayName:i.displayName,label:i.label,readonly:i.readonly,invisible:i.invisible,disabled:i.disabled,compute:i.compute,submitType:null===(d=null===(s=i.submitType)||void 0===s?void 0:s.toLowerCase)||void 0===d?void 0:d.call(s),translate:r.TM.toBoolean(i.translate),isVirtual:r.TM.toBoolean(i.isVirtual)};return null===o||void 0===o||o(p),ie.clearUndefined(p),p.modelDefinition=e.model,p}function so(e){e.name=e.name||e.data,e.data=e.data||e.name;const{data:t,name:i}=e;return{data:t,name:i}}function co(e){return g(e)}function uo(e,t,i){var o,n,a,l;i.relationStore=t.relationStore,i.filter=t.filter,i.domain=t.domain,i.relationUpdateType=null===(n=null===(o=t.relationUpdateType)||void 0===o?void 0:o.toLowerCase)||void 0===n?void 0:n.call(o);const s=ie.toArray(t.sortFields)||[];s.length&&(i.sortFields=s);const d=null===(a=t.options)||void 0===a?void 0:a[0],c=t.references;if(!c)throw new Error("Invalid relation field. references is required.");if(d){const e={model:c,type:d.referencesType,name:d.referencesModelName,moduleName:d.referencesModuleName,pks:ie.toArray(d.referencesPks),uniques:null===(l=ie.toArray(d.referencesUniques,";"))||void 0===l?void 0:l.map(e=>ie.toArray(e)).filter(e=>!!e),label:d.optionLabel||d.referencesLabel,labelFields:ie.toArray(d.optionFields||d.referencesLabelFields),modelFields:[],modelActions:[]};i.referencesModel=e;const o=ei.createOrReplace((0,r._N)());o.model=e,fo(o,t),mo(e,d.widgets),ei.delete(o.handle)}i.references=c,i.relationFields=ie.toArray(t.relationFields)||[],i.referenceFields=ie.toArray(t.referenceFields)||[]}function po(e,t,i){!i.store&&i.relationStore&&Co(i,i.relationFields,i.referenceFields)}function ho(e,t,i){!i.store&&i.relationStore&&Co(i,i.relationFields,i.referenceFields)}function go(e,t,i){i.limit=ie.toNumberOrStringNullable(t.limit),!i.store&&i.relationStore&&Co(i,i.relationFields,i.referenceFields)}function vo(e,t,i){i.through=t.through,i.limit=ie.toNumberOrStringNullable(t.limit),i.throughRelationFields=ie.toArray(t.throughRelationFields)||[],i.throughReferenceFields=ie.toArray(t.throughReferenceFields)||[],!i.store&&i.relationStore&&(Co(i,i.relationFields,i.throughRelationFields),Co(i,i.referenceFields,i.throughReferenceFields))}function mo(e,t){const{modelFields:i}=e;null===t||void 0===t||t.forEach(e=>{var t;if(!i.some(t=>t.data===e.data)){if(co(e)){const r=Object.assign({},e),o=null===(t=e.options)||void 0===t?void 0:t[0];if(o){const e={model:o.references,type:o.referencesType,name:o.referencesModelName,moduleName:o.referencesModuleName,pks:ie.toArray(o.referencesPks),label:o.optionLabel||o.referencesLabel,labelFields:ie.toArray(o.referencesLabelFields),modelFields:[],modelActions:[]};r.referencesModel=e,mo(e,o.widgets)}return delete r.options,void i.push(r)}i.push(e)}})}function fo(e,t){var i;null===(i=null===t||void 0===t?void 0:t.widgets)||void 0===i||i.forEach(t=>{x.vV.isView(t)||(x.vV.isField(t)?yo(e,t):x.vV.isAction(t)?bo(e,t):x.vV.isTemplate(t)&&fo(e,t))})}function yo(e,t){const i=e.model.modelFields,{data:r}=so(t);if(i.some(e=>e.data===r))return;const o=ao(e,t);o&&(o.modelDefinition=void 0,i.push(o))}function bo(e,t){const i=e.model.modelActions,r=Wr(t);if(i.some(e=>e.name===r))return;const o=Vr(e,t);o&&(o.modelDefinition=void 0,i.push(o))}function Co(e,t,i){const r=t.length,o=i.length;if(!r||!o||r!==o)throw console.error("Invalid relationFields and referenceFields",e),new Error("Invalid relationFields and referenceFields")}Ei.pG.createStorage({key:eo,matchKeys:["viewType","ttype","multi"]});var xo=i(13222),wo=i.n(xo);function So(e,t,i){const{defaultValue:r}=t;void 0===i.defaultValue&&To(r)&&(i.multi?Ao(e,i,r):Eo(e,i,r))}function To(e){return null!=e&&("string"!==typeof e||""!==e)}function Eo(e,t,i){t.defaultValue=i}function Ao(e,t,i){t.defaultValue=wo()(i).split(",").map(e=>e.trim())}function ko(e,t,i){const{startDefaultValue:r,endDefaultValue:o}=t,n=i.defaultValue;if(null==n){let e,t;To(r)&&(e=r),To(o)&&(t=o),(e||t)&&(i.defaultValue=[e,t])}}function Do(e,t,i){i.operator=Fo(t.operator),i.allowSearch=r.TM.toBoolean(t.allowSearch)}function Fo(e){if(e){switch(e){case"EQUAL":return r.uK.EQUAL.symbol;case"IN":return r.uK.IN.symbol;case"LIKE":return r.uK.LIKE.symbol;case"STARTS":return r.uK.LIKE_RIGHT.symbol;case"ENDS":return r.uK.LIKE_LEFT.symbol;case"GT":return r.uK.GREATER_THAN.symbol;case"GE":return r.uK.GREATER_THAN_OR_EQUAL.symbol;case"LT":return r.uK.LESS_THAN.symbol;case"LE":return r.uK.LESS_THAN_OR_EQUAL.symbol;case"HAS":return r.uK.HAS.symbol;case"HAS_OR":return r.uK.HAS_OR.symbol;case"GE_LT":return`${r.uK.GREATER_THAN_OR_EQUAL.symbol},${r.uK.LESS_THAN.symbol}`;case"GE_LE":return`${r.uK.GREATER_THAN_OR_EQUAL.symbol},${r.uK.LESS_THAN_OR_EQUAL.symbol}`}return e}}function Ro(e,t,i){const{size:r,limit:o,min:n,max:a}=t;i.size=ie.toNumberNullable(r),i.limit=ie.toNumberNullable(o),i.min=ie.toNumberNullable(n),i.max=ie.toNumberNullable(a)}function Oo(e,t,i){i.format=t.format,i.valueFormat=t.valueFormat,i.timeFormat=t.timeFormat}function No(e,t,i){i.format=t.format,i.valueFormat=t.valueFormat}to({},So),to({viewType:o.qi.Search},Do),to({viewType:o.qi.Search,ttype:[o.m1.DateTime,o.m1.Date,o.m1.Time,o.m1.Year]},ko),to({ttype:o.m1.Related},ro),to({ttype:n},Ro),to({ttype:a},Zr),to({ttype:[o.m1.Enum,o.m1.Boolean]},Jr),to({ttype:o.m1.DateTime},Qr),to({ttype:o.m1.Date},Xr),to({ttype:o.m1.Time},Oo),to({ttype:o.m1.Year},No),to({ttype:c},uo),to({ttype:o.m1.OneToOne},po),to({ttype:o.m1.ManyToOne},ho),to({ttype:o.m1.OneToMany},go),to({ttype:o.m1.ManyToMany},vo);var $o=i(53098);const Mo=["widgets"];function Io(e,t){Object.entries(t).forEach(([e,i])=>{Mo.includes(e)||("dslNodeType"===e&&"xslot"===i&&(t[e]=x.zX.SLOT),Lo(t,e,i))})}function Lo(e,t,i){"string"===typeof i?"null"===i?e[t]=null:"undefined"===i?e[t]=void 0:Po(e,t,r.TM.toBoolean(i)):_o(i)}function _o(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t];"string"===typeof i?jo(e,t,r.TM.toBoolean(i)):_o(i)}else if((0,$o.A)(e)){const t=e;Object.entries(t).forEach(([e,i])=>{Lo(t,e,i)})}}function Po(e,t,i){return null!=i&&(e[t]=i,!0)}function jo(e,t,i){null!=i&&(e[t]=i)}const Vo="RESOLVE_TEMPLATE";function Bo(e,t){return Ei.pG.register(Vo,e,t)}function Ho(e){return Ei.pG.selectors(Vo,e).reverse()}function Wo(e,t){let i;switch(e){case o.qi.Table:i=t?'<view type="TABLE">\n    <view type="SEARCH">\n        <element widget="search" slot="search" slotSupport="field">\n            <xslot name="searchFields" slotSupport="field" />\n        </element>\n    </view>\n    <element widget="actionBar" slot="actionBar" slotSupport="action">\n        <xslot name="actions" slotSupport="action" />\n    </element>\n    <element widget="table" slot="table">\n        <element widget="expandColumn" slot="expandRow" />\n        <xslot name="fields" slotSupport="field" />\n        <element widget="rowActions" slot="rowActions" />\n    </element>\n</view>':'<view type="TABLE">\n    <pack widget="group">\n        <view type="SEARCH">\n            <element widget="search" slot="search" slotSupport="field">\n                <xslot name="searchFields" slotSupport="field" />\n            </element>\n        </view>\n    </pack>\n    <pack widget="group" slot="tableGroup">\n        <element widget="actionBar" slot="actionBar" slotSupport="action">\n            <xslot name="actions" slotSupport="action" />\n        </element>\n        <element widget="table" slot="table" slotSupport="field">\n            <element widget="expandColumn" slot="expandRow" />\n            <xslot name="fields" slotSupport="field" />\n            <element widget="rowActions" slot="rowActions" slotSupport="action" />\n        </element>\n    </pack>\n</view>';break;case o.qi.Form:i=t?'<view type="FORM">\n    <element widget="form" slot="form">\n        <xslot name="fields" slotSupport="pack,field" />\n    </element>\n</view>':'<view type="FORM">\n    <element widget="actionBar" slot="actionBar" slotSupport="action">\n        <xslot name="actions" slotSupport="action" />\n    </element>\n    <element widget="form" slot="form">\n        <xslot name="fields" slotSupport="pack,field" />\n    </element>\n</view>';break;case o.qi.Detail:i=t?'<view type="DETAIL">\n    <element widget="detail" slot="detail">\n        <xslot name="fields" slotSupport="pack,field" />\n    </element>\n</view>':'<view type="DETAIL">\n    <element widget="actionBar" slot="actionBar" slotSupport="action">\n        <xslot name="actions" slotSupport="action" />\n    </element>\n    <element widget="detail" slot="detail">\n        <xslot name="fields" slotSupport="pack,field" />\n    </element>\n</view>';break;case o.qi.Gallery:i='<view type="GALLERY">\n    <view type="SEARCH">\n        <element widget="search" slot="search" slotSupport="field">\n            <xslot name="searchFields" slotSupport="field" />\n        </element>\n    </view>\n    <element widget="actionBar" slot="actionBar" slotSupport="action">\n        <xslot name="actions" slotSupport="action" />\n    </element>\n    <element widget="gallery" slot="gallery">\n        <element widget="card" slot="card" slotSupport="pack,field" />\n    </element>\n</view>';break;case o.qi.Tree:i='<view type="TREE">\n    <pack widget="group">\n        <view type="SEARCH">\n            <element widget="search" slot="search" slotSupport="field">\n                <xslot name="searchFields" slotSupport="field" />\n            </element>\n        </view>\n    </pack>\n    <pack widget="group">\n        <element widget="actionBar" slot="actionBar" slotSupport="action">\n            <xslot name="actions" slotSupport="action" />\n        </element>\n        <element widget="card-cascader" slot="tree" slotSupport="nodes,node" />\n    </pack>\n</view>';break;default:break}if(r.$1.log("使用默认layout",i),i)return x.Vc.INSTANCE.parse(i)}function Uo(e){var t,i,r,o,n,a,l;let s=e.view.modelDefinition||(null===(t=e.viewAction)||void 0===t?void 0:t.resModelDefinition)||(null===(i=e.viewAction)||void 0===i?void 0:i.modelDefinition);s?s=(0,Ye.A)(s):(s=e.model||(null===(r=e.getModel(e.view.model))||void 0===r?void 0:r.model),s&&(s=(0,Ye.A)(s)));const{model:d,modelName:c,module:u,moduleName:p}=e.view,h=e.viewTemplate;e.model=Object.assign(Object.assign({},s||{}),{model:d,name:c,module:u||(null===(o=e.module)||void 0===o?void 0:o.module),moduleName:p||(null===(n=e.module)||void 0===n?void 0:n.name),modelFields:[],modelActions:[],pks:ie.toArray(h.pk)||(null===s||void 0===s?void 0:s.pks),uniques:(null===(a=ie.toArray(h.uniques))||void 0===a?void 0:a.map(e=>ie.toArray(e)).filter(e=>!e))||(null===s||void 0===s?void 0:s.uniques),indexes:(null===(l=ie.toArray(h.indexes))||void 0===l?void 0:l.map(e=>ie.toArray(e)).filter(e=>!e))||(null===s||void 0===s?void 0:s.indexes),sorting:h.ordering||(null===s||void 0===s?void 0:s.sorting)})}function qo(e){const{module:t,moduleName:i}=e.view;let r;i&&(r={name:i}),r&&t&&(r.module=t),r&&(e.module=r)}function zo(e){return p(e)&&!!e.related.length}function Go(e){e.model.modelFields.filter(zo).forEach(t=>Ko(e,t))}function Ko(e,t){var i,r;const{related:o,compute:n}=t;if(null!=n)return;let a,l=si.A8.activeRecord.toString(),s=!1;for(let d=0;d<o.length;d++){const t=o[d];let n;if(a){if(n=null===(r=null===(i=a.referencesModel)||void 0===i?void 0:i.modelFields)||void 0===r?void 0:r.find(e=>e.data===t),!n){const i=a.references,r=Xo(e,i,a);if(!r)return;n=Qo(r,t)}}else{if(n=Qo(e,t),!n||!g(n))return;a=n}if(!n)return;if((n.multi||m(n))&&(s=!0),0===d?l=`${l}.${t}`:s||m(a)?(l=`LIST_FIELD_VALUES(${l}, '', '${t}')`,s=!0):l=`${l}.${t}`,!g(n)){if(d===o.length-1)break;return}a=n}t.compute=l}function Xo(e,t,i){var r;let o;e.model.model===t&&(o=e);const n=ei.getOthers(e.handle);for(const a of n){const e=a.model;if(e&&t===e.model&&(null===(r=a.field)||void 0===r?void 0:r.data)===i.data){o=a;break}}return o}function Qo(e,t){const i=e.getModelField(t);if(!i)return;const{modelField:r,isOther:o}=i;return o?void 0:r}function Yo(e,t){x.vV.isView(t)&&Zo(e,t),Jo(e,t)}function Jo(e,t){var i;const{dslNodeType:r}=t;Ho({dslNodeType:r}).forEach(i=>i(e,t)),x.vV.isAction(t)||x.vV.isField(t)||null===(i=null===t||void 0===t?void 0:t.widgets)||void 0===i||i.forEach(t=>{x.vV.isView(t)||Jo(e,t)})}function Zo(e,t){var i;for(const r of(null===(i=t.metadata)||void 0===i?void 0:i.model)||[]){const{model:t,field:i}=r;let{virtualModels:n}=e;n||(n={},e.virtualModels=n);let a=n[t];a||(a={model:t,fields:{}},n[t]=a);const l={view:e.view,model:{model:t}};for(const e of i)if(e.ttype===o.m1.Related){const t=(ie.toArray(e.related)||[]).join(".");t&&(a.fields[e.data]=t)}else{const t=ao(l,e);t&&(t.modelDefinition=void 0,t.template=void 0,a.fields[t.data]=t)}}}function en(e,t){const{name:i,layout:r,dsl:o,template:n}=t;let a;if(e.view=t,r&&(e.viewLayout=tn(r)),o&&(e.viewDsl=tn(o)),n&&(a=tn(n)),!a){const{viewLayout:t,viewDsl:i}=e;if(t)a=i?x.Bo.mergeTemplateToLayout(t,i):t;else{if(!i)throw new Error("Invalid view template.");a=i}}a.name||(a.name=i),$r(a),e.viewTemplate=a,qo(e),Uo(e),Yo(e,a),Go(e)}function tn(e){if((0,ve.A)(e)){if(!e)return;return e=e.trim(),"{"===e[0]?JSON.parse(e):"<"===e[0]?x.Vc.INSTANCE.parse(e):void console.error("dsl is not json/xml format.",e)}return e}Ei.pG.createStorage({key:Vo,matchKeys:["dslNodeType"]}),Bo({},Io),Bo({dslNodeType:x.zX.FIELD},oo),Bo({dslNodeType:x.zX.ACTION},jr);class rn extends Error{constructor(e){super(e||"Unsupported operation exception.")}}const on=(0,Ei.Bp)("RuntimeContextService");let nn=class{createRuntimeContextByViewAction(e,t,i,r){throw new rn}seekViewMask(e){throw new rn}};function an(e){return"UnaryExpression"===(null===e||void 0===e?void 0:e.type)}function ln(e){return"BinaryExpression"===(null===e||void 0===e?void 0:e.type)}function sn(e){return"LogicalExpression"===(null===e||void 0===e?void 0:e.type)}function dn(e){return"ConditionalExpression"===(null===e||void 0===e?void 0:e.type)}function cn(e){return"MemberExpression"===(null===e||void 0===e?void 0:e.type)}function un(e){return"CallExpression"===(null===e||void 0===e?void 0:e.type)}function pn(e){return"Identifier"===(null===e||void 0===e?void 0:e.type)}function hn(e,t){return Object.assign(Object.assign({},t),{type:e,__node:!0,__literal:!0})}function gn(e,t){return Object.assign(Object.assign({},t),{type:e,__node:!0,__expression:!0})}function vn(e,t){return Object.assign(Object.assign({},t),{type:e,__node:!0,__statement:!0})}function mn(e,t){return Object.assign(Object.assign({},t),{type:e,__node:!0,__pattern:!0})}function fn(e){return!!e.__node}function yn(e){return!!e.__literal}function bn(e){return!!e.__expression}function Cn(e){return!!e.__statement}function xn(e){return!!e.__pattern}function wn(e){return!!e.__declare}function Sn(e){if(yn(e))return"literal";if(bn(e))return"expression";if(Cn(e))return"statement";if(xn(e))return"pattern";if(wn(e))return"declaration";throw new Error("Invalid node.")}function Tn(e){return bn(e)||yn(e)||xn(e)}nn=(0,I.Cg)([Ei.DF.Service(on)],nn);class En{constructor(e){this._pos=0,this._source=e,this.length=e.length,this.eofPos=e.length}get source(){return this._source}get pos(){return this._pos}set pos(e){const t=this._pos+e;this._pos=t>this.eofPos?this.eofPos:t}next(){return this._source.charCodeAt(this._pos++)}get(){return this._source.charCodeAt(this._pos-1)}peek(e){return this._source.charCodeAt(this._pos+(e||0))}skip(e){const t=this._pos+e;this._pos=t>=this.eofPos?this.eofPos:t}eof(){return this._pos>=this.eofPos||Number.isNaN(this.peek())}}function An(e){return Object.assign(Object.assign({},e),{tokens:[]})}const kn=9,Dn=10,Fn=13,Rn=32,On=33,Nn=34,$n=35,Mn=36,In=37,Ln=38,_n=39,Pn=40,jn=41,Vn=42,Bn=43,Hn=44,Wn=45,Un=46,qn=47,zn=48,Gn=57,Kn=58,Xn=60,Qn=61,Yn=62,Jn=63,Zn=65,ea=90,ta=91,ia=92,ra=93,oa=94,na=95,aa=96,la=97,sa=122,da=123,ca=124,ua=125,pa=126,ha=160,ga=5760,va=8232,ma=8233,fa=19968,ya=40917,ba=63743;class Ca{constructor(e,t){this.keyword=e,this.before=!!(null===t||void 0===t?void 0:t.before),this.start=!!(null===t||void 0===t?void 0:t.start),this.binop=null===t||void 0===t?void 0:t.binop}}const xa=!0,wa=!0,Sa=new Ca("[",{before:xa,start:wa}),Ta=(new Ca("#[",{before:xa,start:wa}),new Ca("[|",{before:xa,start:wa}),new Ca("]")),Ea=(new Ca("|]"),new Ca("{",{before:xa,start:wa}),new Ca("{|",{before:xa,start:wa}),new Ca("#{",{before:xa,start:wa}),new Ca("}")),Aa=(new Ca("|}"),new Ca("(",{before:xa,start:wa})),ka=new Ca(")"),Da=new Ca(",",{before:xa}),Fa=(new Ca(";",{before:xa}),new Ca(":",{before:xa})),Ra=(new Ca("::",{before:xa}),new Ca(".")),Oa=(new Ca("?",{before:xa}),new Ca("?.")),Na=new Ca("...",{before:xa}),$a=(new Ca("`",{start:wa}),new Ca("${",{before:xa,start:wa}),new Ca(" ")),Ma=new Ca("conditional"),Ia=!0,La=new Ca("int",{start:Ia}),_a=new Ca("bigint",{start:Ia}),Pa=new Ca("number",{start:Ia}),ja=new Ca("bignumber",{start:Ia}),Va=new Ca("string",{start:Ia}),Ba=new Ca("template",{start:Ia});new Ca("regexp",{start:Ia});function Ha(e,t){return new Ca(e,{binop:t})}const Wa=Ha("|>",0),Ua=Ha("??",1),qa=Ha("||",1),za=Ha("&&",2),Ga=Ha("|",3),Ka=Ha("^",4),Xa=Ha("&",5),Qa=Ha("==/!=/===/!==",6),Ya=Ha("</>/<=/>=",7),Ja=Ha("<</>>/>>>",8),Za=Ha("+/-",9),el=Ha("%",10),tl=Ha("*",10),il=Ha("/",10),rl=Ha("**",11),ol="/";function nl(){const e=[];return[Wa,Ua,qa,za,Ga,Ka,Xa,Qa,Ya,Ja,Za,el,tl,il,rl].forEach(t=>{t.keyword===ol?e.push({key:ol,binop:il.binop}):t.keyword.split(ol).forEach(i=>{e.push({key:i,binop:t.binop})})}),e}const al=nl();function ll(e){var t;return null===(t=al.find(t=>t.key===e))||void 0===t?void 0:t.binop}const sl=new Ca("word"),dl=new Ca("operator"),cl=new Ca("unary-operator"),ul=new Ca("function");class pl{readText(e,t){return this.$$readText(e,t)}$$readText(e,t,i){const{inputStream:r}=e,o=r.pos-1;null==t&&(t=1);const n=o+t;return{start:o,end:n,length:t,text:i||r.source.substring(o,n)}}finishRead(e,t){const{inputStream:i}=e,{start:r,end:o,length:n,text:a}=this.$$readText(e,t.length,t.text),l=Object.assign(Object.assign({},t),{start:r,end:o,text:a});return i.skip(n-1),l}}class hl{eat(e,t){const{tokens:i}=e,r=i[i.length-1];return(null===r||void 0===r?void 0:r.type)===t&&(i.pop(),!0)}parseAnyExpression(e,t){const i=this.parseAtomicExpression(e,t);if(!i)return;const{node:r,tokens:o}=i;return e.tokens.push(...o),r}parseSubscript(e,t){const{parser:i}=e,r=this.parseAtomicExpression(e,t);if(!r)return;const{tokens:o}=r;do{const t=o.pop();if(!t)break;const n=i.nextNode(r,t);if(!n)return e.tokens.push(...o,t),r.node;r.node=n}while(o.length);return r.node}parseAtomicExpression(e,t,i){const r=null===t||void 0===t?void 0:t.type.binop,{parser:o,inputStream:n}=e,a=An({parser:o,inputStream:n,node:i}),{tokens:l}=a;while(!n.eof()){let e=l.pop();if(e||(e=o.nextToken(a)),a.node){const{type:t}=e,{binop:i}=t;let n;if([$a,Ra,Oa,ul].includes(t))n=o.nextNode(a,e);else{if(!(null!=r&&null!=i&&r<i))return a.tokens.push(e),a;n=o.nextNode(a,e)}if(!n)return a.tokens.push(e),a;a.node=n}else a.node=o.nextNode(a,e)}return a}parseArrayElements(e){const{inputStream:t}=e,i=[];while(!t.eof()){const t=this.parseArrayElement(e);if(!t)throw new Error("Invalid array element.");const{node:r,isEnd:o}=t;if(r&&i.push(r),o)break}return i}parseArrayElement(e){const{parser:t,inputStream:i}=e,r=An({parser:t,inputStream:i}),{tokens:o}=r;while(!i.eof()){let i=o.pop();if(i||(i=t.nextToken(r)),this.isBrokenParseArrayElement(r,i))return{node:r.node,isEnd:this.isParseArrayElementEnd(e,i)};r.node=t.nextNode(r,i)}if(r.node)return{node:r.node,isEnd:!0}}isBrokenParseArrayElement(e,t){const{type:i}=t;return i===Da||this.isParseArrayElementEnd(e,t)}isParseArrayElementEnd(e,t){return t.type===Ta}}class gl extends pl{isSupported(e,t){return t===Hn}read(e){return this.finishRead(e,{type:Da})}}gl.INSTANCE=new gl;class vl extends pl{isSupported(e,t){return[_n,Nn].includes(t)}read(e){const{inputStream:t}=e,i=t.get(),r=[i],o=[];let n,a=!1,l=0;do{if(n=t.peek(l++),this.isSupported(e,n)){if(a){a=!1,o.push(l-1);continue}this.stackPop(r,n)||r.push(n)}else if(n===ia){if(t.peek(l+1)!==ia){a=!0;continue}o.push(l),l++}a=!1}while(!Number.isNaN(n)&&r.length);if(!r.length){const{length:t,text:i}=this.readText(e,l+1);let r=i;return o.length&&(r=this.clearEscape(r,o)),this.finishRead(e,{type:Va,length:t,text:r})}}clearEscape(e,t){let i=0,r="";for(const o of t)r=`${r}${e.substring(i,o)}`,i=o+1;return i<e.length&&(r=`${r}${e.substring(i)}`),r}stackPop(e,t){let i=-1;for(let r=e.length-1;r>=0;r--)if(e[r]===t){i=r;break}return-1!==i&&(e.splice(i,e.length-i),!0)}}vl.INSTANCE=new vl;class ml{isSupported(e,t){return t.type===Va}parse(e,t){return this.generatorNode(t.text)}generatorNode(e){const t=e.charCodeAt(0)===Nn;return hn("StringLiteral",{value:e.substring(1,e.length-1),quote:t})}}ml.INSTANCE=new ml;class fl extends vl{isSupported(e,t){return[aa].includes(t)}finishRead(e,t){return super.finishRead(e,Object.assign(Object.assign({},t),{type:Ba}))}}fl.INSTANCE=new fl;class yl extends hl{isSupported(e,t){return t.type===Ba}parse(e,t){return this.generatorNode(e,t.text)}generatorNode(e,t){const i=t.substring(1,t.length-1);return hn("TemplateLiteral",{expressions:this.generatorExpressions(e,i)})}generatorExpressions(e,t){const i=[],r=new En(t),o=[];let n,a=-1,l=-1;while(!r.eof())if(n=r.next(),n===Mn)n=r.peek(),n===da&&(o.push(r.pos),r.skip(1),d());else if(n===ua){const n=o.pop();if(null==n)s();else{const o=this.generatorExpression(e,t.substring(n+1,r.pos-1));o&&i.push(o)}}else o.length||s();return d(),i;function s(){-1===a?(a=r.pos,l=r.pos):l=r.pos}function d(){if(-1!==a&&-1!==l){let e=a-1;e<0&&(e=0),i.push(hn("StringLiteral",{value:t.substring(e,l)})),a=-1,l=-1}}}generatorExpression(e,t){const{parser:i}=e,r=An({parser:i,inputStream:new En(t)});return this.parseSubscript(r)}}yl.INSTANCE=new yl;class bl extends pl{isSupported(e,t){return t>=zn&&t<=Gn}read(e){const{inputStream:t}=e;let i=0,r=0,o=t.get();const n=o===Un;let a,l=!1;while(this.isSupported(e,o)||o===Un){if(o=t.peek(i++),o===Un){if(l)return;l=!0}l||r++}if(n&&l)throw new Error(`Invalid number. source=${t.source}, pos=${t.pos}`);return a=l?r<=bl.INT_MAX_LENGTH?Pa:ja:r<=bl.INT_MAX_LENGTH?La:_a,this.finishRead(e,{type:a,length:i})}}bl.INSTANCE=new bl,bl.INT_MAX_LENGTH=15;class Cl{isSupported(e,t){return[La,_a,Pa,ja].includes(t.type)}parse(e,t){const{type:i,text:o}=t;switch(i){case La:case Pa:return this.generatorNode(Number(o));case _a:return this.generatorStringNode(o);case ja:return this.generatorNode(new r.gH(o))}}generatorStringNode(e){return hn("StringLiteral",{value:e})}generatorNode(e){return hn("NumberLiteral",{value:e})}}Cl.INSTANCE=new Cl;class xl extends pl{isSupported(e,t){return fa<=t&&t<=ya||t>=ba||(t<Zn?t===Mn:t<=ea||(t<la?t===na:t<=sa))}read(e){const{inputStream:t}=e;let i,r=0,o=!1;do{i=t.peek(r),o=r>=1&&bl.INSTANCE.isSupported(e,i)||this.isSupported(e,i),r++}while(o);return this.finishRead(e,{type:sl,length:r})}}xl.INSTANCE=new xl;class wl extends hl{isSupported(e,t){return t.type===sl}parse(e,t){switch(t.text){case"true":return this.createBooleanLiteral(!0);case"false":return this.createBooleanLiteral(!1);case"undefined":return hn("UndefinedLiteral",{});case"null":return hn("NullLiteral",{})}return mn("Identifier",{value:t.text})}createBooleanLiteral(e){return hn("BooleanLiteral",{value:e})}}wl.INSTANCE=new wl;class Sl extends pl{isSupported(e,t){if(t===Un)return!0;const{inputStream:i}=e;return t===Jn&&i.peek()===Un}read(e){const{inputStream:t}=e,i=t.peek();if(bl.INSTANCE.isSupported(e,i))return bl.INSTANCE.read(e);if(i===Un){if(t.get()===Jn)return this.finishRead(e,{type:Oa,length:2});if(t.peek(1)===Un)return this.finishRead(e,{type:Na,length:3})}return this.finishRead(e,{type:Ra})}}Sl.INSTANCE=new Sl;class Tl extends hl{isSupported(e,t){return[Ra,Oa].includes(t.type)}parse(e,t){const{parser:i,inputStream:r,node:o}=e,n=An({parser:i,inputStream:r}),a=null===o||void 0===o?void 0:o.type;if(!a)throw new Error("Invalid node.");if(xl.INSTANCE.isSupported(e,r.peek(t.text.length-1))&&Tn(o))return r.skip(t.text.length),gn("MemberExpression",{object:o,property:this.parseMemberProperty(n)});throw new Error("Invalid dot node.")}parseMemberProperty(e){return this.parseWord(e)}parseWord(e){const t=xl.INSTANCE.read(e);return wl.INSTANCE.parse(e,t)}}Tl.INSTANCE=new Tl;class El extends pl{isSupported(e,t){return[jn,ra,ua,Kn].includes(t)}read(e){const{inputStream:t}=e;switch(t.get()){case jn:return this.finishRead(e,{type:ka});case ra:return this.finishRead(e,{type:Ta});case ua:return this.finishRead(e,{type:Ea});case Kn:return this.finishRead(e,{type:Fa})}}}El.INSTANCE=new El;class Al{constructor(e){this.readers=(null===e||void 0===e?void 0:e.readers)||[],this.parsers=(null===e||void 0===e?void 0:e.parsers)||[]}getReader(e,t,i){for(let r=i||0;r<this.readers.length;r++){const i=this.readers[r];if(i.isSupported(e,t))return{reader:i,index:r}}}getParser(e,t,i){for(let r=i||0;r<this.parsers.length;r++){const i=this.parsers[r];if(i.isSupported(e,t))return{parser:i,index:r}}}}class kl extends pl{isSupported(e,t){if(!e.node)return!1;if([Bn,Wn,Vn,qn,In,oa,Xn,Yn].includes(t))return!0;const{inputStream:i}=e,r=i.peek();return!(![Qn,On].includes(t)||r!==Qn)||!(![ca,Ln].includes(t)||[ca,Ln].includes(r))}read(e){const{inputStream:t}=e,i=t.get();let r=1;[Qn,On].includes(i)&&(r++,t.peek(1)===Qn&&r++);const o=t.peek();i===Vn&&o===Vn&&r++,i===Xn&&[Qn,Xn].includes(o)&&r++,i===Yn&&[Qn,Yn].includes(o)&&(r++,t.peek(1)===Yn&&r++);const{text:n}=this.readText(e,r);return this.finishRead(e,{type:new Ca(dl.keyword,{binop:ll(n)}),length:r,text:n})}}kl.INSTANCE=new kl;class Dl extends hl{isSupported(e,t){if(!e.node)return!1;const{type:i,text:r}=t;return i.keyword===dl.keyword&&["+","-","*","/","==","===","!=","!==","<","<=",">",">=","%","**","&","|","^","<<",">>",">>>"].includes(r)}parse(e,t){const{node:i}=e;if(!i)throw new Error("Invalid binary operator.");const r=this.parseAnyExpression(e,t);if(r)return gn("BinaryExpression",{operator:t.text,left:i,right:r})}}Dl.INSTANCE=new Dl;class Fl extends pl{isSupported(e,t){const{node:i}=e;return!(!i||!Tn(i))&&t===Jn}read(e){return this.finishRead(e,{type:Ma})}}Fl.INSTANCE=new Fl;class Rl extends hl{isSupported(e,t){return t.type===Ma}parse(e,t){const{node:i}=e;if(!i)throw new Error("Invalid conditional expression.");const r=this.parseConditionalExpressionResult(e,t);if(!r)return;const{consequent:o,alternate:n}=r;return gn("ConditionalExpression",{test:i,consequent:o,alternate:n})}parseConditionalExpressionResult(e,t){const i=this.parseConsequentExpression(e,t);if(!i)return;const r=this.parseAlternateExpression(e,t);return r?{consequent:i,alternate:r}:void 0}parseConsequentExpression(e,t){const i=this.parseSubscript(e,t);return this.eat(e,Fa),i}parseAlternateExpression(e,t){return this.parseSubscript(e,t)}}Rl.INSTANCE=new Rl;class Ol extends pl{isSupported(e,t){const{inputStream:i}=e,r=i.peek();return t===ca&&r===ca||t===Ln&&r===Ln}read(e){const{inputStream:t}=e,i=t.get(),r=t.peek();return i===ca&&r===ca?this.finishRead(e,{type:new Ca(dl.keyword,{binop:qa.binop}),length:2}):i===Ln&&r===Ln?this.finishRead(e,{type:new Ca(dl.keyword,{binop:za.binop}),length:2}):void 0}}Ol.INSTANCE=new Ol;class Nl extends hl{isSupported(e,t){const{type:i,text:r}=t;return i.keyword===dl.keyword&&["||","&&"].includes(r)}parse(e,t){const{node:i}=e;if(!i)throw new Error("Invalid logical operator.");const r=this.parseAnyExpression(e,t);if(r)return gn("LogicalExpression",{operator:t.text,left:i,right:r})}}Nl.INSTANCE=new Nl;class $l extends pl{isSupported(e,t){return[Wn,Bn,On,pa].includes(t)}read(e){const{text:t}=this.readText(e);return this.finishRead(e,{type:cl,length:1,text:t})}}$l.INSTANCE=new $l;class Ml extends hl{isSupported(e,t){const{type:i,text:r}=t;return i===cl&&["-","+","!","~"].includes(r)}parse(e,t){const i=this.parseAnyExpression(e,t);if(i)return gn("UnaryExpression",{operator:t.text,prefix:!0,argument:i})}}Ml.INSTANCE=new Ml;class Il extends pl{isSupported(e,t){return t===Pn}read(e){return this.finishRead(e,{type:Aa})}}Il.INSTANCE=new Il;class Ll extends hl{isSupported(e,t){return t.type===Aa}parse(e,t){const i=this.parseSubscript(e,t);if(i)return this.eat(e,ka),vn("ExpressionStatement",{expression:i})}}Ll.INSTANCE=new Ll;class _l extends pl{isSupported(e,t){return t===ta}read(e){return this.finishRead(e,{type:Sa})}}_l.INSTANCE=new _l;class Pl extends hl{isSupported(e,t){return t.type===Sa}parse(e,t){const{node:i}=e,r=this.parseArrayElements(e);return pn(i)&&1===r.length?gn("MemberExpression",{object:i,property:r[0]}):mn("ArrayPattern",{elements:r})}}Pl.INSTANCE=new Pl;const jl=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},si.Od),si.t8),si.FM),si.oQ),si.Hq),si.Ib),si.Ty),si.r$);class Vl extends pl{isSupported(e,t){const{node:i}=e;return!(!i||!Tn(i))&&t===Pn}read(e){return this.finishRead(e,{type:ul})}}Vl.INSTANCE=new Vl;class Bl extends hl{isSupported(e,t){return t.type===ul}parse(e,t){const{node:i}=e;if(i&&Tn(i)){let t;if(pn(i)){const e=jl[i.value];e&&(t=e)}return gn("CallExpression",{method:i,arguments:this.parseArrayElements(e),invoke:t})}}isParseArrayElementEnd(e,t){return t.type===ka}}Bl.INSTANCE=new Bl;class Hl extends pl{isSupported(e,t){const{inputStream:i}=e;switch(t){case Rn:case ha:case kn:return!0;case Fn:if(i.peek(1)===Dn)return!0;case Dn:case va:case ma:return!0}return Ul(t)}read(e){const{inputStream:t}=e;let i,r=0;do{i=t.peek(r++)}while(this.isSupported(e,i));return this.finishRead(e,{type:$a,length:r})}}Hl.INSTANCE=new Hl;class Wl{isSupported(e,t){return t.type===$a}parse(e,t){return e.node}}function Ul(e){switch(e){case 9:case 11:case 12:case Rn:case ha:case ga:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}Wl.INSTANCE=new Wl;const ql=new Al({readers:[Hl.INSTANCE,Sl.INSTANCE,gl.INSTANCE,El.INSTANCE,xl.INSTANCE,vl.INSTANCE,fl.INSTANCE,bl.INSTANCE,_l.INSTANCE,Vl.INSTANCE,kl.INSTANCE,Ol.INSTANCE,Fl.INSTANCE,$l.INSTANCE,Il.INSTANCE],parsers:[Wl.INSTANCE,Tl.INSTANCE,wl.INSTANCE,ml.INSTANCE,yl.INSTANCE,Cl.INSTANCE,Pl.INSTANCE,Bl.INSTANCE,Dl.INSTANCE,Ml.INSTANCE,Nl.INSTANCE,Rl.INSTANCE,Ll.INSTANCE]});function zl(e){return"UndefinedLiteral"===(null===e||void 0===e?void 0:e.type)}function Gl(e){return"NullLiteral"===(null===e||void 0===e?void 0:e.type)}function Kl(e){return"StringLiteral"===(null===e||void 0===e?void 0:e.type)}function Xl(e){return"TemplateLiteral"===(null===e||void 0===e?void 0:e.type)}function Ql(e){return"NumberLiteral"===(null===e||void 0===e?void 0:e.type)}function Yl(e){return"BooleanLiteral"===(null===e||void 0===e?void 0:e.type)}function Jl(e){return"RegExpLiteral"===(null===e||void 0===e?void 0:e.type)}function Zl(e){return zl(e)?{isStatic:!0,value:void 0}:Gl(e)?{isStatic:!0,value:null}:Kl(e)||Ql(e)||Yl(e)?{isStatic:!0,value:e.value}:Xl(e)?{isStatic:!1,value:e.expressions}:Jl(e)?{isStatic:!0,value:e.pattern}:void 0}class es extends vl{}es.INSTANCE=new es;class ts extends hl{isSupported(e,t){return t.type===Va}parse(e,t){return this.generatorNode(e,t.text)}generatorNode(e,t){const i=t.substring(1,t.length-1),r=i.charCodeAt(0)===Nn,o=this.generatorExpressions(e,i);if(1===o.length){const e=o[0];if(Kl(e))return e.quote=r,e}return hn("RSQLStringLiteral",{expressions:o,quote:r})}generatorExpressions(e,t){const i=[],r=new En(t),o=[];let n,a=-1,l=-1;while(!r.eof())if(n=r.next(),n===Mn){n=r.peek();const e=this.isExtensionMarker(n);null!=e&&(r.skip(1),n=r.peek()),n===da&&(o.push({pos:r.pos,marker:e}),r.skip(1),d())}else if(n===ua){const n=o.pop();if(null==n)s();else{const o=this.generatorExpression(e,t.substring(n.pos+1,r.pos-1));o&&(o.marker=n.marker,i.push(o))}}else o.length||s();return d(),i;function s(){-1===a?(a=r.pos,l=r.pos):l=r.pos}function d(){if(-1!==a&&-1!==l){let e=a-1;e<0&&(e=0),i.push(hn("StringLiteral",{value:t.substring(e,l)})),a=-1,l=-1}}}generatorExpression(e,t){const{parser:i}=e,r=An({parser:i,inputStream:new En(t)});return this.parseSubscript(r)}isExtensionMarker(e){for(const t of[On,$n,Jn])if(t===e)return t}}ts.INSTANCE=new ts;class is extends pl{isSupported(e,t){if(!e.node)return!1;if([Xn,Yn].includes(t))return!0;const{inputStream:i}=e;let o=i.peek();if(t===On&&o===Qn)return!0;if(t===Qn){if(o===Qn)return!0;let e=1;while(e<r.uK.MAX_OPERATOR_SIZE&&r.MZ.isLetter(o)){if(o=i.peek(e),o===Qn)return!0;e++}}return!1}read(e){const{inputStream:t}=e,i=t.get();let o=1;[Xn,Yn,On].includes(i)&&o++;let n=t.peek();n===Qn&&o++;let a=0;while(a<r.uK.MAX_OPERATOR_SIZE&&r.MZ.isLetter(n)&&n!==Qn)n=t.peek(a),a++;o+=a;const{text:l}=this.readText(e,o);return this.finishRead(e,{type:new Ca(dl.keyword),length:o,text:l})}}is.INSTANCE=new is;class rs extends Dl{isSupported(e,t){if(!e.node)return!1;const{type:i,text:o}=t;if(i.keyword!==dl.keyword)return!1;for(const n of r.uK.operators())if(n.symbols.some(e=>e===o))return!0;return!1}}rs.INSTANCE=new rs;class os extends pl{isSupported(e,t){const{inputStream:i}=e,o=i.peek();if(r.ZR.isOr(String.fromCharCode(t,o)))return!0;const n=i.peek(1);return!!r.ZR.isAnd(String.fromCharCode(t,o,n))}read(e){const{inputStream:t}=e,i=t.get(),o=t.peek();if(r.ZR.isOr(String.fromCharCode(i,o)))return this.finishRead(e,{type:new Ca(dl.keyword,{binop:qa.binop}),text:r.ub.OR,length:r.ub.OR.length});const n=t.peek(1);return r.ZR.isAnd(String.fromCharCode(i,o,n))?this.finishRead(e,{type:new Ca(dl.keyword,{binop:za.binop}),text:r.ub.AND,length:r.ub.AND.length}):void 0}}os.INSTANCE=new os;class ns extends hl{isSupported(e,t){const{type:i,text:o}=t;return i.keyword===dl.keyword&&[r.ub.OR,r.ub.AND].includes(o)}parse(e,t){const{node:i}=e;if(!i)throw new Error("Invalid logical operator.");const r=this.parseAnyExpression(e,t);if(r)return gn("RSQLLogicalExpression",{operator:t.text,left:i,right:r})}}ns.INSTANCE=new ns;class as extends Il{}as.INSTANCE=new as;class ls extends Ll{parse(e,t){const{node:i}=e,r=this.parseArrayElements(e);return pn(i)&&1===r.length?gn("MemberExpression",{object:i,property:r[0]}):mn("ArrayPattern",{elements:r,paren:!0})}isParseArrayElementEnd(e,t){return t.type===ka}}ls.INSTANCE=new ls;new Al({readers:[Hl.INSTANCE,Sl.INSTANCE,gl.INSTANCE,El.INSTANCE,xl.INSTANCE,es.INSTANCE,fl.INSTANCE,bl.INSTANCE,_l.INSTANCE,Vl.INSTANCE,is.INSTANCE,kl.INSTANCE,os.INSTANCE,Ol.INSTANCE,Fl.INSTANCE,$l.INSTANCE,as.INSTANCE],parsers:[Wl.INSTANCE,Tl.INSTANCE,wl.INSTANCE,ts.INSTANCE,yl.INSTANCE,Cl.INSTANCE,Pl.INSTANCE,Bl.INSTANCE,rs.INSTANCE,Dl.INSTANCE,Ml.INSTANCE,ns.INSTANCE,Nl.INSTANCE,Rl.INSTANCE,ls.INSTANCE]});const ss={language:ql,block:!0};function ds(e){const t=e||{};return Object.entries(ss).forEach(([e,i])=>{null==t[e]&&(t[e]=i)}),t}class cs{constructor(e,t){this.source=e,this.options=ds(t)}init(){const e=this.source.trim();return An({parser:this,inputStream:new En(e)})}parse(){const e=this.init(),t=this.nextToken(e);return e.node=this.nextNode(e,t),this.next(e)}next(e){const{inputStream:t,tokens:i}=e;while(!t.eof()){let t=i.pop();t||(t=this.nextToken(e));const r=this.nextNode(e,t);r&&(e.node=r)}const{node:r}=e;if(!r)throw new Error("Invalid node.");return r}nextToken(e){const{inputStream:t}=e,i=t.next(),r=this.readToken(e,i,t=>t.read(e));if(!r)throw new Error(`Invalid token. code=${i}`);return r}readToken(e,t,i){const{language:r}=this.options;let o=r.getReader(e,t);while(o){const{reader:n,index:a}=o,l=i(n);if(l)return l;o=r.getReader(e,t,a+1)}}nextNode(e,t){return this.parseToken(e,t,i=>i.parse(e,t))}parseToken(e,t,i){const{language:r}=this.options;let o=r.getParser(e,t);while(o){const{parser:n,index:a}=o,l=i(n);if(l)return l;o=r.getParser(e,t,a+1)}}}function us(e,t){return new cs(e,t).parse()}function ps(e,t){if(null==e)return e;let i;if("string"===typeof e)try{i=us(e,t)}catch(r){return void console.error("Invalid expression.",e,r)}else fn(e)&&(i=e);return i||console.error("Invalid expression.",e),i}let hs=0;var gs;function vs(e,t){const i=hs;hs=e;try{t()}finally{hs=i}}function ms(e,t){const i=hs;hs&=~e;try{t()}finally{hs=i}}function fs(e){return(hs&e)>0}let ys,bs;(function(e){e[e["IGNORED_THIS"]=1]="IGNORED_THIS",e[e["IGNORED_DEPS"]=2]="IGNORED_DEPS",e[e["FORCE_THIS"]=4]="FORCE_THIS",e[e["FORCE_DEPS"]=8]="FORCE_DEPS"})(gs||(gs={}));let Cs=0,xs=1;const ws=30,Ss=()=>{};class Ts{constructor(e){this.active=!0,this.deferStop=!1,this.deps=[],this.scheduler=e}run(...e){if(!this.active)return;let t=ys;while(t){if(t===this)return;t=t.parent}const i=bs;try{this.parent=ys,ys=this,bs=e,xs=1<<++Cs,Cs<=ws&&Es.scheduler(this,e)}finally{xs=1<<--Cs,ys=this.parent,bs=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ys===this?this.deferStop=!0:this.active&&(As.cleanupEffect(this),this.active=!1)}}class Es{constructor(){}static isTracking(){return null!=ys}static getActiveEffect(){return ys}static track(e,t){const i=ys;ys=(null===t||void 0===t?void 0:t.effect)||ys||Es.root;let o,n=Es.targetMap.get(e);if(n){if(Es.needRebuildEffect(ys.deps,e)){o=As.createDep(),ys.deps.push(o);const e=ys;ys=n.effect,Es.trackEffects(o),ys=e}(null===t||void 0===t?void 0:t.force)&&n()}else{n=Es.createEffect(e),o=As.createDep(),ys.deps.push(o);const i=ys;ys=n.effect,Es.trackEffects(o),ys=i,Es.targetMap.set(e,n),r.Xx.ofNullable(t).map(e=>e.duplex).orElse(!0)&&(o=As.createDep(),n.effect.deps.push(o),Es.trackEffects(o)),t&&t.lazy||n()}return ys=i,n}static createEffect(e){const t=new Ts(e),i=(t.scheduler||Ss).bind(t);return i.effect=t,i}static needRebuildEffect(e,t){return!e.some(e=>[...e].some(e=>e.scheduler===t))}static trackEffects(e){if(!ys)return;let t=!1;Cs<=ws?As.newTracked(e)||(e.n|=xs,t=!As.wasTracked(e)):t=!e.has(ys),t&&e.add(ys)}static trigger(e,...t){e.run(...t)}static triggerWithDirective(e,t,...i){vs(t,()=>{e.run(...i)})}static triggerDeps(e,...t){const i=[...e.deps];if(1===i.length)Es.triggerEffects(i[0],t);else{const e=[];i.forEach(t=>{e.push(...t)}),Es.triggerEffects(As.createDep(e),t)}}static triggerEffects(e,t){const i=Array.isArray(e)?e:[...e];i.filter(e=>!!e.scheduler).forEach(e=>{Es.triggerEffect(e,t)})}static triggerEffect(e,t){e!==ys&&e.run(...t)}static scheduler(e,t){const{scheduler:i}=e;i&&(!fs(gs.FORCE_THIS)&&fs(gs.IGNORED_THIS)||i(...t),!fs(gs.FORCE_DEPS)&&fs(gs.IGNORED_DEPS)||ms(gs.IGNORED_THIS|gs.IGNORED_DEPS,()=>{Es.triggerDeps(e,...t)}))}static triggerActiveEffectDeps(){ys&&bs&&Es.triggerDeps(ys,...bs)}}Es.root=new Ts,Es.targetMap=new WeakMap;class As{constructor(){}static createDep(e){const t=new Set(e);return t.w=0,t.n=0,t}static wasTracked(e){return(e.w&xs)>0}static newTracked(e){return(e.n&xs)>0}static initDepMarkers({deps:e}){if(e.length)for(let t=0;t<e.length;t++)e[t].w|=xs}static finalizeDepMarkers(e){const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const o=t[r];As.wasTracked(o)&&!As.newTracked(o)?o.delete(e):t[i++]=o,o.w&=~xs,o.n&=~xs}t.length=i}}static cleanupEffect(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}}class ks{isSupported(e){return ln(e)}visit(e,t){const{visitor:i}=e,{operator:r,left:o,right:n}=t,a=i.next(e,o),l=i.next(e,n);if("+"===r)return this.isAddable(a)&&this.isAddable(l)?this.operatorAdd(e,a,l):void 0;if(this.isComparable(a)||this.isComparable(l))switch(r){case"==":case"===":return this.operatorEqual(e,a,l);case"!=":case"!==":return this.operatorNotEqual(e,a,l);case"<":return this.operatorLessThan(e,a,l);case"<=":return this.operatorLessEqual(e,a,l);case">":return this.operatorGreaterThan(e,a,l);case">=":return this.operatorGreaterEqual(e,a,l)}if(this.isComputable(a)&&this.isComputable(l))switch(r){case"-":return this.operatorSubtract(e,a,l);case"*":return this.operatorMultiply(e,a,l);case"/":return this.operatorDivide(e,a,l);case"%":return a%l;case"**":return Math.pow(a,l);case"&":return a&l;case"|":return a|l;case"^":return a^l;case"<<":return a<<l;case">>":return a>>l;case">>>":return a>>>l}}operatorEqual(e,t,i){return void 0===t&&(t=null),void 0===i&&(i=null),t===i}operatorNotEqual(e,t,i){return void 0===t&&(t=null),void 0===i&&(i=null),t!==i}operatorLessThan(e,t,i){return r.A5.lt(t,i)}operatorLessEqual(e,t,i){return r.A5.le(t,i)}operatorGreaterThan(e,t,i){return r.A5.gt(t,i)}operatorGreaterEqual(e,t,i){return r.A5.ge(t,i)}operatorAdd(e,t,i){return null==t?i:null==i?t:"number"===typeof t&&"number"===typeof i?r.A5.add(t,i):t+i}operatorSubtract(e,t,i){return null==t?-i:null==i?t:r.A5.subtract(t,i)}operatorMultiply(e,t,i){return r.A5.multiply(t,i)}operatorDivide(e,t,i){return r.A5.divide(t,i)}isAddable(e){return(0,r.eD)(e,!0)}isComparable(e){return!0}isComputable(e){return(0,r.lZ)(e,!0)}}ks.INSTANCE=new ks;class Ds{isSupported(e){return un(e)}visit(e,t){const{visitor:i}=e,{method:r,arguments:o,invoke:n}=t;let a;if(a=n||i.next(e,r),"function"===typeof a){const t=[];for(const r of o)t.push(i.next(e,r));return a(...t)}throw console.error("Invalid function.",t),new Error("Invalid function.")}}Ds.INSTANCE=new Ds;class Fs{isSupported(e){return dn(e)}visit(e,t){const{visitor:i}=e,{test:r,consequent:o,alternate:n}=t,a=i.next(e,r);return a?i.next(e,o):i.next(e,n)}}Fs.INSTANCE=new Fs;class Rs{isSupported(e){return sn(e)}visit(e,t){const{visitor:i}=e,{operator:r,left:o,right:n}=t;switch(r){case"||":{const t=i.next(e,o);return t||i.next(e,n)}case"&&":return!!i.next(e,o)&&i.next(e,n)}}}Rs.INSTANCE=new Rs;class Os{isSupported(e){return cn(e)}visit(e,t){var i;const{visitor:r,globalContext:o}=e,{object:n,property:a}=t,l=r.next(e,n);if(pn(a)){const e={visitor:r,context:l,globalContext:o};return r.next(e,a)}const s=r.next(e,a);return null===(i=l)||void 0===i?void 0:i[s]}}Os.INSTANCE=new Os;class Ns{isSupported(e){return an(e)}visit(e,t){const{visitor:i}=e,{operator:r,argument:o}=t,n=i.next(e,o);if(this.isComputable(n))switch(r){case"-":return-n;case"+":return+n;case"!":return!n;case"~":return~n}}isComputable(e){return(0,r.eD)(e,!0)}}Ns.INSTANCE=new Ns;class $s{isSupported(e){return yn(e)}visit(e,t){const{type:i}=t;switch(i){case"UndefinedLiteral":return;case"NullLiteral":return null;case"StringLiteral":return t.value;case"TemplateLiteral":return this.visitTemplate(e,t);case"NumberLiteral":return t.value;case"BooleanLiteral":return t.value;case"RegExpLiteral":return this.visitRegExp(t)}}visitTemplate(e,t){const{visitor:i}=e;return t.expressions.map(t=>i.next(e,t)).reduce((e,t)=>`${r.Xx.ofNullable(e).orElse("")}${r.Xx.ofNullable(t).orElse("")}`)}visitRegExp(e){return e.pattern}}$s.INSTANCE=new $s;class Ms{isSupported(e){return"ArrayPattern"===e.type}visit(e,t){const{visitor:i}=e,{elements:r}=t,o=[];for(const n of r)o.push(i.next(e,n));return o}}Ms.INSTANCE=new Ms;const Is=["activeRecords","rootRecord","openerRecord","scene","activeRecord"];let Ls;class _s{constructor(){}static default(){return Is}static get(){return Ls||_s.default()}static using(e,t){const i=Ls;Ls=e;try{t()}finally{Ls=i}}}class Ps{isSupported(e){return pn(e)}visit(e,t){const{context:i,globalContext:r}=e;if(null==i)return i;const o=_s.get();r.isTriggerDeps||!o.length||o.includes(t.value)||(Es.triggerActiveEffectDeps(),r.isTriggerDeps=!0);const n=i[t.value];return"function"===typeof n?n.bind(i):n}}Ps.INSTANCE=new Ps;class js{isSupported(e){return Cn(e)}visit(e,t){const{visitor:i}=e,{type:r}=t;switch(r){case"ExpressionStatement":return i.next(e,t.expression)}}}js.INSTANCE=new js;class Vs{constructor(e){this.executors=(null===e||void 0===e?void 0:e.executors)||Vs.defaultExecutors,this.context=(null===e||void 0===e?void 0:e.context)||{},this.globalContext=(null===e||void 0===e?void 0:e.globalContext)||{}}init(){return{visitor:this,context:this.context,globalContext:this.globalContext}}visit(e){const t=this.init();return this.next(t,e)}next(e,t){let i=this.getExecutor(t);while(i){const{executor:r,index:o}=i,n=r.visit(e,t);if(void 0!==n)return n;i=this.getExecutor(t,o+1)}}getExecutor(e,t){for(let i=t||0;i<this.executors.length;i++){const t=this.executors[i];if(t.isSupported(e))return{executor:t,index:i}}}static run(e,t){const i=ps(e);return i?new Vs(t).visit(i):null}}Vs.defaultExecutors=[$s.INSTANCE,js.INSTANCE,Ps.INSTANCE,Ms.INSTANCE,Ds.INSTANCE,ks.INSTANCE,Ns.INSTANCE,Fs.INSTANCE,Rs.INSTANCE,Os.INSTANCE];class Bs{visitAdapter(e,t){return r.Xx.ofNullable(e.context.visitor).map(e=>t(e)).orElse(!0)}next(e,t){const{visitor:i,context:r}=e,{parent:o}=r;r.parent=t;const n=i.next(e,t);return r.parent=o,!!n}}class Hs extends Bs{isSupported(e){return ln(e)}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitBinaryExpression)||void 0===r?void 0:r.call(i,e,t)});if(i){const{left:i,right:r}=t;this.next(e,i),this.next(e,r)}return i}}Hs.INSTANCE=new Hs;class Ws extends Bs{isSupported(e){return un(e)}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitCallExpression)||void 0===r?void 0:r.call(i,e,t)});if(i){const{method:i,arguments:r}=t;this.next(e,i),r.forEach(t=>{this.next(e,t)})}return i}}Ws.INSTANCE=new Ws;class Us extends Bs{isSupported(e){return dn(e)}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitConditionalExpression)||void 0===r?void 0:r.call(i,e,t)});if(i){const{test:i,consequent:r,alternate:o}=t;this.next(e,i),this.next(e,r),this.next(e,o)}return i}}Us.INSTANCE=new Us;class qs extends Bs{isSupported(e){return sn(e)}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitLogicalExpression)||void 0===r?void 0:r.call(i,e,t)});if(i){const{left:i,right:r}=t;this.next(e,i),this.next(e,r)}return i}}qs.INSTANCE=new qs;class zs extends Bs{isSupported(e){return cn(e)}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitMemberExpression)||void 0===r?void 0:r.call(i,e,t)});if(i){const{object:i,property:r}=t;this.next(e,i),this.next(e,r)}return i}}zs.INSTANCE=new zs;class Gs extends Bs{isSupported(e){return an(e)}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitUnaryExpression)||void 0===r?void 0:r.call(i,e,t)});if(i){const{argument:i}=t;this.next(e,i)}return i}}Gs.INSTANCE=new Gs;class Ks extends Bs{isSupported(e){return yn(e)}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitLiteral)||void 0===r?void 0:r.call(i,e,t)});return i&&"TemplateLiteral"===t.type&&this.visitTemplate(e,t),i}visitTemplate(e,t){t.expressions.forEach(t=>{this.next(e,t)})}}Ks.INSTANCE=new Ks;class Xs extends Bs{isSupported(e){return"ArrayPattern"===e.type}visit(e,t){const i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitArrayPattern)||void 0===r?void 0:r.call(i,e,t)});if(i){const{elements:i}=t;i.forEach(t=>{this.next(e,t)})}return i}}Xs.INSTANCE=new Xs;class Qs extends Bs{isSupported(e){return pn(e)}visit(e,t){return this.visitAdapter(e,i=>{var r;return null===(r=i.visitIdentifier)||void 0===r?void 0:r.call(i,e,t)})}}function Ys(e){return"ExpressionStatement"===(null===e||void 0===e?void 0:e.type)}Qs.INSTANCE=new Qs;class Js extends Bs{isSupported(e){return Cn(e)}visit(e,t){let i=!0;if(Ys(t)&&(i=this.visitAdapter(e,i=>{var r;return null===(r=i.visitExpressionStatement)||void 0===r?void 0:r.call(i,e,t)}),i)){const{expression:i}=t;this.next(e,i)}return i}}Js.INSTANCE=new Js;class Zs{constructor(e){this.optimizes=(null===e||void 0===e?void 0:e.optimizes)||Zs.defaultOptimizes,this.context={visitor:null===e||void 0===e?void 0:e.visitor},this.globalContext=(null===e||void 0===e?void 0:e.globalContext)||{}}getContext(){return this.context}init(){return{visitor:this,context:this.context,globalContext:this.globalContext}}visit(e){const t=this.init();return this.next(t,e)}next(e,t){let i=this.getVisitor(t);while(i){const{executor:r,index:o}=i,n=r.visit(e,t);if(!n)return!0;i=this.getVisitor(t,o+1)}return!0}getVisitor(e,t){for(let i=t||0;i<this.optimizes.length;i++){const t=this.optimizes[i];if(t.isSupported(e))return{executor:t,index:i}}}static run(e,t){new Zs({visitor:t}).visit(e)}}Zs.defaultOptimizes=[Ks.INSTANCE,Js.INSTANCE,Qs.INSTANCE,Xs.INSTANCE,Ws.INSTANCE,Hs.INSTANCE,Gs.INSTANCE,Us.INSTANCE,qs.INSTANCE,zs.INSTANCE];class ed{visitLiteral(e,t){const{type:i}=t;let r;switch(i){case"UndefinedLiteral":r="undefined";break;case"NullLiteral":r="null";break;case"StringLiteral":{const e=t;let i="'";e.quote&&(i='"'),r=`${i}${t.value}${i}`;break}case"TemplateLiteral":r=`\`${this.visitTemplateLiteral(e,t)}\``;break;case"NumberLiteral":r=`${t.value}`;break;case"BooleanLiteral":r=`${t.value}`;break}return this.appendResult(e,r,!0),!1}visitIdentifier(e,t){return this.appendResult(e,t.value),!1}visitExpressionStatement(e,t){return this.appendResult(e,`(${this.convert(e,t.expression)})`),!1}visitArrayPattern(e,t){return this.appendResult(e,`[${t.elements.map(t=>this.convert(e,t)).join(", ")}]`),!1}visitCallExpression(e,t){return this.appendResult(e,`${this.convert(e,t.method)}(${t.arguments.map(t=>this.convert(e,t)).join(", ")})`),!1}visitBinaryExpression(e,t){return this.appendResult(e,`${this.convert(e,t.left)} ${t.operator} ${this.convert(e,t.right)}`),!1}visitUnaryExpression(e,t){return this.appendResult(e,`${t.operator}${this.convert(e,t.argument)}`,!0),!1}visitConditionalExpression(e,t){return this.appendResult(e,`${this.convert(e,t.test)} ? ${this.convert(e,t.consequent)} : ${this.convert(e,t.alternate)}`,!0),!1}visitLogicalExpression(e,t){return this.appendResult(e,`${this.convert(e,t.left)} ${t.operator} ${this.convert(e,t.right)}`),!1}visitMemberExpression(e,t){return this.appendResult(e,`${this.convert(e,t.object)}.${this.convert(e,t.property)}`),!1}visitTemplateLiteral(e,t){return`${t.expressions.map(t=>this.visitTemplateExpression(e,t)).join("")}`}visitTemplateExpression(e,t){let i=this.convert(e,t);return i="StringLiteral"===t.type?i.substring(1,i.length-1):`\${${i}}`,i}appendResult(e,t,i){if(!t)return;const r=e.context.result||"";let o;o=r?i?`${r} ${t}`:`${r}${t}`:t||"",e.context.result=o}convert(e,t){const{visitor:i,context:r}=e,{result:o}=r;r.result="",i.next(e,t);const n=r.result;return r.result=o,n}}const td=new ed;class id extends ed{visitLiteral(e,t){const{type:i}=t;let r;switch(i){case"UndefinedLiteral":r="undefined";break;case"NullLiteral":r="null";break;case"StringLiteral":{const e=t;let i="'";e.quote&&(i='"'),r=`${i}${e.value}${i}`;break}case"RSQLStringLiteral":{const i=t;let o="'";i.quote&&(o='"'),r=`${o}${this.visitTemplateLiteral(e,t)}${o}`;break}case"TemplateLiteral":r=`\`${this.visitTemplateLiteral(e,t)}\``;break;case"NumberLiteral":r=`${t.value}`;break;case"BooleanLiteral":r=`${t.value}`;break}return this.appendResult(e,r,!0),!1}visitTemplateExpression(e,t){let i=this.convert(e,t);if("StringLiteral"===t.type)i=i.substring(1,i.length-1);else{let e="";const r=t.marker;null!=r&&(e=String.fromCharCode(r)),i=`$${e}{${i}}`}return i}visitArrayPattern(e,t){let i="[",r="]";return t.paren&&(i="(",r=")"),this.appendResult(e,`${i}${t.elements.map(t=>this.convert(e,t)).join(", ")}${r}`),!1}}new id;class rd{static run(e,t){const i=new Zs({visitor:t||td});return i.visit(e),i.getContext().result||""}}class od{constructor(e){this.node=e}static from(e){return new od(e)}toLiteral(e,t){return this.clear("literal",e),this.shallowMerge(t)}toExpression(e,t){return this.clear("expression",e),this.shallowMerge(t)}toStatement(e,t){return this.clear("statement",e),this.shallowMerge(t)}toPattern(e,t){return this.clear("pattern",e),this.shallowMerge(t)}toDeclaration(e,t){return this.clear("declaration",e),this.shallowMerge(t)}to(e){return this.clear(Sn(e),e.type),this.shallowMerge(e)}shallowMerge(e){const{node:t}=this;return r.BF.shallowMerge(t,e),t}clear(e,t){const{node:i}=this;switch(Object.keys(i).forEach(e=>{delete i[e]}),i.type=t,i.__node=!0,e){case"literal":i.__literal=!0;break;case"expression":i.__expression=!0;break;case"statement":i.__statement=!0;break;case"pattern":i.__pattern=!0;break;case"declaration":i.__declare=!0;break}}}class nd{constructor(e){this.tokenProperties=(null===e||void 0===e?void 0:e.tokenProperties)||_s.get()}visitAnyExpression(e,t){let i;if(pn(t)?i=t:cn(t)&&(i=this.findIdentifierByMemberExpression(t)),i){const{value:e}=i;this.tokenProperties.length&&!this.tokenProperties.includes(e)&&this.toLiteralByValue(t,rd.run(t))}}findIdentifierByMemberExpression(e){const{object:t}=e;return pn(t)?t:cn(t)?this.findIdentifierByMemberExpression(t):void 0}toLiteralByValue(e,t){if(void 0===t)return od.from(e).toLiteral("UndefinedLiteral",{});if(null===t)return od.from(e).toLiteral("NullLiteral",{});const i=typeof t;switch(i){case"boolean":return od.from(e).toLiteral("BooleanLiteral",{value:t});case"number":case"bigint":return od.from(e).toLiteral("NumberLiteral",{value:t});case"string":return od.from(e).toLiteral("StringLiteral",{value:t})}}toNode(e,t){return od.from(e).to(t)}getLiteralValue(e){const t=Zl(e);return(null===t||void 0===t?void 0:t.isStatic)?{valid:!0,value:t.value}:{valid:!1}}}class ad extends nd{constructor(){super(...arguments),this.combiningStack=[]}visitBinaryExpression(e,t){return this.combiningStack=[],this.visitBinaryExpression0(e,t)}visitBinaryExpression0(e,t){const{visitor:i}=e,{left:r,right:o,operator:n}=t,a=ll(n);if(null==a)return!0;if(ln(r)){if(this.computeBinaryExpressionByBinop(e,t,r,o,{operator:n,binop:a,left:!1}),!ln(t))return!1}else i.next(e,r);if(ln(o)){if(this.computeBinaryExpressionByBinop(e,t,o,r,{operator:n,binop:a,left:!0}),!ln(t))return!1}else i.next(e,o);return this.simplifyBinaryExpression(t),!1}computeBinaryExpressionByBinop(e,t,i,r,o){const{left:n,right:a,operator:l}=i,s=ll(l);if(null==s)return void this.visitBinaryExpression0(e,i);const d=this.getLiteralValue(r);if(!d.valid)return void this.visitBinaryExpression0(e,i);const c=r;this.combiningSimilarItems(c,o);const u=yn(n),p=yn(a);if(u&&p)return void this.toLiteralByValue(i,Vs.run(i));let h=!1;const{operator:g,binop:v,left:m}=o;if(u){const e=this.computeOperator({operator:g,binop:v},{operator:l,binop:s});if(e){const{compute:i,change:r}=e;this.toLiteralByValue(c,Vs.run(gn("BinaryExpression",{operator:i,left:c,right:n}))),m?t.right=a:t.left=a,r&&(t.operator=r),h=!0}}else if(p){const e=this.computeOperator({operator:g,binop:v},{operator:l,binop:s});if(e){const{compute:i,change:r}=e;this.toLiteralByValue(c,Vs.run(gn("BinaryExpression",{operator:i,left:c,right:a}))),m?t.right=n:t.left=n,r&&(t.operator=r),h=!0}}h?this.visitBinaryExpression0(e,t):this.visitBinaryExpression0(e,i)}computeOperator(e,t){const{operator:i,binop:r}=e,{operator:o,binop:n}=t;switch(o){case"+":case"*":if(n>r)return;return{compute:i};case"-":if("+"===i)return{compute:"-"};if("-"===i)return{compute:"+"};break;case"/":if("/"===i)return{compute:"*"};if("*"===i)return{compute:"/"};if("<<"===i)return{compute:">>",change:o};if(">>"===i)return{compute:"<<",change:o};break}}simplifyBinaryExpression(e){const{left:t,right:i,operator:r}=e,o=yn(t),n=yn(i);if(o&&n)return this.toLiteralByValue(e,Vs.run(e)),!1;if(!o&&!n)return!1;let a,l=!1;if(o){const e=this.getLiteralValue(t);e.valid&&(a=e.value,l=!0)}else{const e=this.getLiteralValue(i);e.valid&&(a=e.value,l=!0)}if(!l)return!1;switch(r){case"+":return this.simplifyExpressionByAdd(e,t,i,o,n,a);case"-":return this.simplifyExpressionBySubtract(e,t,i,o,n,a);case"*":return this.simplifyExpressionByMultiply(e,t,i,o,n,a);case"/":return this.simplifyExpressionByDivide(e,t,i,o,n,a)}return!1}simplifyExpressionByAdd(e,t,i,r,o,n){return(null==n||0===n)&&(r?this.toNode(e,i):this.toNode(e,t),!0)}simplifyExpressionBySubtract(e,t,i,r,o,n){if(o){if(null==n||0===n)return this.toNode(e,t),!0;if("number"===typeof n&&n<0)return e.operator="+",this.toLiteralByValue(i,-n),!0}return!1}simplifyExpressionByMultiply(e,t,i,r,o,n){return null==n||0===n?(this.toLiteralByValue(e,0),!0):1===n?(r?this.toNode(e,i):this.toNode(e,t),!0):!!this.invertUnaryExpression(e,t,i,r,o,n)}simplifyExpressionByDivide(e,t,i,r,o,n){if(r){if(null==n||0===n)return this.toLiteralByValue(e,0),!0}else{if(null==n||0===n)return this.toLiteralByValue(e,1/0),!0;if(1===n)return this.toNode(e,t),!0;if(this.invertUnaryExpression(e,t,i,r,o,n))return!0}return!1}invertUnaryExpression(e,t,i,r,o,n){return-1===n?(r?this.convertInvertUnaryExpression(e,i):this.convertInvertUnaryExpression(e,t),!0):"number"===typeof n&&n<0&&(r?(this.convertInvertUnaryExpression(i),this.toLiteralByValue(t,-n)):(this.convertInvertUnaryExpression(t),this.toLiteralByValue(i,-n)),!0)}convertInvertUnaryExpression(e,t){return t||(t=e),an(t)&&"-"===t.operator?this.toNode(e,t.argument):this.toNode(e,gn("UnaryExpression",{operator:"-",prefix:!0,argument:e===t?Object.assign({},t):t}))}combiningSimilarItems(e,t){if(["+","-"].includes(t.operator)){const i=this.combiningStack.length-1;let r=this.combiningStack[i];if(r){if(r.node!==e)if(this.toLiteralByValue(e,Vs.run(gn("BinaryExpression",{operator:r.operator===t.operator?"+":"-",left:r.node,right:e}))),this.toNode(r.node,hn("NullLiteral",{})),Ql(e)){let o;o=e.value>=0?"+":"-",r={node:e,operator:o,binop:t.binop},this.combiningStack[i]=r}else this.combiningStack.pop()}else if(Ql(e)){let i;i=e.value>=0?"+":"-",r={node:e,operator:i,binop:t.binop},this.combiningStack.push(r)}}}}class ld extends nd{visitConditionalExpression(e,t){const{visitor:i}=e,{test:r,consequent:o,alternate:n}=t;if(i.next(e,r),i.next(e,o),i.next(e,n),yn(r)){const e=this.getLiteralValue(r);if(!e.valid)return!1;e.value?this.toNode(t,o):this.toNode(t,n)}return!1}}ld.INSTANCE=new ld;class sd extends nd{visitLogicalExpression(e,t){const{visitor:i}=e,{left:r,right:o,operator:n}=t;i.next(e,r),i.next(e,o);const a=yn(r),l=yn(o);if(a&&l)this.toLiteralByValue(t,Vs.run(t));else if(a){const e=this.getLiteralValue(r);if(!e.valid)return!1;switch(n){case"||":e.value?this.toNode(t,r):this.toNode(t,o);break;case"&&":e.value?this.toNode(t,o):this.toNode(t,r);break}}else if(l)switch(n){case"||":this.toNode(t,r);break;case"&&":{const e=this.getLiteralValue(o);if(!e.valid)return!1;e.value?this.toNode(t,r):this.toNode(t,o);break}}return!1}}sd.INSTANCE=new sd;class dd extends nd{visitUnaryExpression(e,t){const{visitor:i}=e,{argument:r}=t;return i.next(e,r),yn(r)&&this.toLiteralByValue(t,Vs.run(t)),!1}}dd.INSTANCE=new dd;class cd extends nd{visitExpressionStatement(e,t){const{visitor:i}=e,{expression:r}=t;return i.next(e,r),yn(r)&&this.toNode(t,r),!1}}cd.INSTANCE=new cd;class ud extends nd{constructor(e){super(e),this.context=null===e||void 0===e?void 0:e.context;let t=r.Xx.ofNullable(null===e||void 0===e?void 0:e.simplify).orElse(!0);!1!==t&&(!0===t&&(t={}),this.simplifyStatement=t.statement||cd.INSTANCE,this.simplifyBinaryExpression=t.binaryExpression||new ad(e),this.simplifyUnaryExpression=t.unaryExpression||dd.INSTANCE,this.simplifyConditionalExpression=t.conditionalExpression||ld.INSTANCE,this.simplifyLogicalExpression=t.logicalExpression||sd.INSTANCE)}visitIdentifier(e,t){return e.context.parent||this.visitAnyExpression(e,t),!1}visitMemberExpression(e,t){if(this.visitAnyExpression(e,t),cn(t)){const{context:e}=this;if(e)return this.toLiteralByValue(t,Vs.run(t,{context:e})),!1}return!1}visitExpressionStatement(e,t){return this.simplify(this.simplifyStatement,i=>{var r;return null===(r=i.visitExpressionStatement)||void 0===r?void 0:r.call(i,e,t)})}visitBinaryExpression(e,t){return this.simplify(this.simplifyBinaryExpression,i=>{var r;return null===(r=i.visitBinaryExpression)||void 0===r?void 0:r.call(i,e,t)})}visitUnaryExpression(e,t){return this.simplify(this.simplifyUnaryExpression,i=>{var r;return null===(r=i.visitUnaryExpression)||void 0===r?void 0:r.call(i,e,t)})}visitConditionalExpression(e,t){return this.simplify(this.simplifyConditionalExpression,i=>{var r;return null===(r=i.visitConditionalExpression)||void 0===r?void 0:r.call(i,e,t)})}visitLogicalExpression(e,t){return this.simplify(this.simplifyLogicalExpression,i=>{var r;return null===(r=i.visitLogicalExpression)||void 0===r?void 0:r.call(i,e,t)})}simplify(e,t){return r.Xx.ofNullable(e).map(e=>t(e)).orElse(!0)}}class pd{static run(e,t){Zs.run(e,t||new ud)}}const hd={token:{activeRecords:"当前视图数据集",activeRecord:"当前视图数据",rootRecord:"主视图数据"},operator:{"+":"加上","-":"减去","*":"乘以","/":"除以","%":"取余","<":"减去","<=":"减去",">":"减去",">=":"减去","==":"等于","===":"等于","!=":"减去","!==":"减去","&":"与","|":"或","!":"非","^":"异或","&&":"且","||":"或"},function:{ABS:"绝对值",FLOOR:"向下取整",CEIL:"向上取整",ROUND:"四舍五入",MOD:"取余",SQRT:"平方根",SIN:"正弦",COS:"余弦",PI:"圆周率",ADD:"相加",SUBTRACT:"相减",MULTIPLY:"乘积",DIVIDE:"相除",MAX:"取最大值",MIN:"取最小值",SUM:"求和",AVG:"取平均值",COUNT:"计数",UPPER_MONEY:"大写金额",TRIM:"过滤首尾空格",IS_BLANK:"是否为空字符串",STARTS_WITH:"是否以指定字符串开始",ENDS_WITH:"是否以指定字符串结束",CONTAINS:"包含",STR_LIST_CONTAINS:"",LOWER:"小写",UPPER:"大写",REPLACE:"替换字符串",LEN:"获取字符串长度",JOIN:"连接字符串",PARSE:"反序列化JSON字符串",JSON:"将记录序列化为JSON字符串",SUBSTRING:"截取",TO_NUMBER:"转换为数字",MATCHES:"正则匹配",CHECK_PHONE:"校验手机号",CHECK_EMAIL:"校验邮箱的格式",CHECK_USER_NAME:"校验用户名",CHECK_PWD:"强密码校验",CHECK_INTEGER:"校验整数格式",CHECK_ID_CARD:"校验中国身份证格式",CHECK_URL:"校验URL格式",CHECK_CHINESE:"校验是否是中文格式",CHECK_NUMBER:"校验数字格式",CHECK_TWO_DIG:"验证是否两位小数",CHECK_IP:"IP地址校验",CHECK_CONTAINS_CHINESE:"是否包含中文校验",CHECK_CODE:"校验编码",CHECK_ENG_NUM:"校验格式",CHECK_SIZE:"校验字符范围",CHECK_MIN_SIZE:"校验字符范围",CHECK_MAX_SIZE:"校验字符范围",CHECK_SIZE_RANGE:"校验字符范围",NOW:"返回当前时间",NOW_STR:"返回当前时间字符串",TODAY_STR:"返回今天的日期字符串",TO_DATE:"转换为时间",ADD_DAY:"加减指定天数",ADD_MONTH:"加减指定月数",ADD_YEAR:"加减指定年数",SUB_DATETIME_TO_SECOND:"时间相减(得到秒)",SUB_DATETIME_TO_DDHHMMSS:"时间相减(得到：DD天HH小时MM分SS秒)",GREATER_THAN:"大于",GREATER_EQUAL:"大于等于",ADD_WORK_DAY:"工作日加减天数(跳过周末)",COUNT_DAY:"日期相隔天数",LESS_THAN:"小于",LESS_EQUAL:"小于等于",DATE_EQUALS:"等于",LIST_GET:"获取集合(或数组)元素",LIST_IS_EMPTY:"判断集合(或数组)是否为空",LIST_CONTAINS:"判断集合(或数组)是否包含元素",LIST_ADD:"将元素添加到集合(或数组)",LIST_ADD_BY_INDEX:"将元素添加到集合(或数组)的指定位置",LIST_REMOVE:"移除集合(或数组)中的元素",LIST_COUNT:"获取集合(或数组)元素数量",LIST_IDS:"获取集合中的所有id",LIST_FIELD_VALUES:"将对象集合转化为属性集合",LIST_FIELD_EQUALS:"判断对象集合(或数组)中属性值匹配情况",LIST_FIELD_NOT_EQUALS:"判断对象集合(或数组)中属性值不匹配情况",LIST_FIELD_IN:"判断对象集合(或数组)中属性值是否在指定集合(或数组)中",LIST_FIELD_NOT_IN:"判断对象集合(或数组)中属性值是否不在指定集合(或数组)中",LIST_AND:"将一个布尔集合进行逻辑与运算",LIST_OR:"将一个布尔集合进行逻辑或运算",STRING_LIST_TO_NUMBER_LIST:"文本转数字",COMMA:"使用逗号拼接结果集",CONCAT:"指定分隔符拼接结果集",MAP_GET:"从键值对中获取指定键的值",MAP_IS_EMPTY:"判断键值对是否为空",MAP_CONTAINS_KEY:"判断键值对中是否包含键",MAP_PUT:"向键值对中添加键值",MAP_REMOVE:"移除键值对中的元素",MAP_COUNT:"获取键值数量",IS_NULL:"判断是否为空",EQUALS:"判断是否相等",GET:"获取对象属性值",FIELD_GET:"根据字段编码获取对象属性值",CURRENT_PARTNER_ID:"获取当前用户的合作伙伴id",CURRENT_DEPARTMENT:"获取当前用户的合作伙伴id",CURRENT_CORP_ID:"获取当前用户的部门",CURRENT_CORP:"获取当前用户的公司id",CURRENT_USER_NAME:"获取当前用户的公司",CURRENT_UID:"获取当前用户名",CURRENT_SHOP:"获取当前用户id",CURRENT_ROLE_IDS:"获取当前用户的店铺",CURRENT_DEPARTMENT_CODE:"获取当前用户的角色id列表",CURRENT_SHOP_ID:"获取当前用户部门编码",CURRENT_ROLES:"获取当前用户的店铺id",CURRENT_USER:"获取当前用户的角色列表",CURRENT_PARTNER:"获取当前用户",IF:"条件函数",AND:"逻辑与",OR:"逻辑或",NOT:"逻辑非"}},gd={zhCN:hd};Object.assign(Object.assign({},hd),{token:Object.assign(Object.assign({},hd.token),{currentUser:"当前登录用户"}),operator:Object.assign(Object.assign({},hd.operator),{"=gt=":"大于","=ge=":"大于等于","=lt=":"小于","=le=":"小于等于","=in=":"包含","=out=":"不包含","=isnull=":"为空","=notnull=":"非空","=cole=":"等于","=colnot=":"不等于","=like=":"包含","=starts=":"开始于","=ends=":"结束于","=notlike=":"不包含","=notstarts=":"`不以 ${args[0]} 开始`","=notends=":"`不以 ${args[0]} 结束`","=has=":"包含","=hasnt=":"不包含","=bit=":"等于","=notbit=":"不等于",and:"且",or:"或"})});class vd{constructor(){}static default(){return gd.zhCN}static get(){return vd.active||vd.default()}static using(e,t){const i=vd.active;vd.active=e;try{t()}finally{vd.active=i}}}class md extends ed{constructor(e){super(),this.originModel=null===e||void 0===e?void 0:e.model,this.tokenProperties=(null===e||void 0===e?void 0:e.tokenProperties)||_s.get(),this.locale=(null===e||void 0===e?void 0:e.locale)||vd.get()}visitLiteral(e,t){const{type:i}=t;let r;switch(i){case"UndefinedLiteral":r="undefined";break;case"NullLiteral":r="null";break;case"StringLiteral":r=`${t.value}`;break;case"TemplateLiteral":r=this.visitTemplateLiteral(e,t);break;case"NumberLiteral":r=`${t.value}`;break;case"BooleanLiteral":r=`${t.value}`;break}return this.appendResult(e,r,!0),!1}visitTemplateLiteral(e,t){return`${t.expressions.map(t=>this.visitTemplateExpression(e,t)).join(` ${this.locale.operator["+"]} `)}`}visitTemplateExpression(e,t){return this.convert(e,t)}visitIdentifier(e,t){return this.appendResult(e,this.translateIdentifier(t)),!1}translateIdentifier(e){var t;const{value:i}=e,r=this.locale.token[i];if(r)return r;const o=null===(t=this.currentModelField)||void 0===t?void 0:t.displayName;return o||i}visitArrayPattern(e,t){return this.appendResult(e,`[${t.elements.map(t=>this.convert(e,t)).join(", ")}]`),!1}visitCallExpression(e,t){const{method:i}=t;let r;pn(i)&&(r=this.locale.function[i.value]||i.value),r||(r=this.convert(e,t.method));let o=t.arguments.map(t=>this.convert(e,t));const n=this.processCallExpressionLocale(r,o);return n&&n!==r?(this.appendResult(e,n),!1):(Array.isArray(o)&&(o=o.join(", ")),this.appendResult(e,`${r}(${o})`),!1)}visitBinaryExpression(e,t){return this.appendResult(e,`${this.convert(e,t.left)} ${this.locale.operator[t.operator]||t.operator} ${this.convert(e,t.right)}`),!1}visitConditionalExpression(e,t){return this.appendResult(e,`${this.convert(e,t.test)} ? ${this.convert(e,t.consequent)} : ${this.convert(e,t.alternate)}`,!0),!1}visitLogicalExpression(e,t){return this.appendResult(e,`${this.convert(e,t.left)} ${this.locale.operator[t.operator]||t.operator} ${this.convert(e,t.right)}`),!1}visitMemberExpression(e,t){const{object:i,property:r}=t,o=this.convert(e,i);this.isTokenIdentifier(i)&&(this.currentModel=this.originModel,this.currentModelField=void 0),pn(r)&&(this.currentModelField?g(this.currentModelField)?(this.currentModel=this.currentModelField.referencesModel,this.currentModelField=this.findField(r.value)):(this.currentModel=void 0,this.currentModelField=void 0):this.currentModelField=this.findField(r.value));const n=this.convert(e,r);return this.appendResult(e,`${o}.${n}`),!1}isTokenIdentifier(e){return!!(pn(e)&&this.tokenProperties.length&&this.tokenProperties.includes(e.value))}findField(e){var t,i;return null===(i=null===(t=this.currentModel)||void 0===t?void 0:t.modelFields)||void 0===i?void 0:i.find(t=>t.data===e)}processCallExpressionLocale(e,t){try{const i=ps(e);if(!i)return e;const r={args:t};return _s.using(Array.from(Object.keys(r)),()=>{pd.run(i)}),Vs.run(i,{context:r})}catch(i){return console.error(i),e}}}class fd{static run(e,t){const i=ps(e,{language:null===t||void 0===t?void 0:t.language});if(i){const e=new Zs({visitor:(null===t||void 0===t?void 0:t.visitor)||new md({model:null===t||void 0===t?void 0:t.model})});return e.visit(i),e.getContext().result}}}class yd{constructor(){}static run(e,t,i){try{return Vs.run(t,{context:e})}catch(r){return console.error(r),i}}static optimizeAndRun(e,t,i){try{const r=ps(t);return r?(pd.run(r,new ud({context:e})),Vs.run(r,{context:e})):i}catch(r){return console.error(r),i}}static parser(e,t){return ps(e,t)}static toString(e,t){return rd.run(e,t)}static translate(e,t){let i=null===t||void 0===t?void 0:t.visitor;if(!i){const e=null===t||void 0===t?void 0:t.model;e&&(i=new md({model:e}))}return fd.run(e,{language:null===t||void 0===t?void 0:t.language,visitor:i})||""}static visit(e,t){const i=new Zs({visitor:t}),r=ps(e);return r&&i.visit(r),i.getContext()}}function bd(e,t){const i=e;return i.__creator=t,i}const Cd={compute:bd(Sd,!0),track:bd(Ed,!0)};class xd{constructor(){}static createDeps(){return new Map}static createDep(e,t,i,o,n){const a={computeContext:e,deps:xd.createDeps(),field:t,defaultValueNode:i,computeNode:o},l=[];return Object.entries(Cd).forEach(([e,t])=>{l.push(e);let i=t;t.__creator&&(i=t(a,n)),a[e]=i.bind(a)}),a.runner=wd(a,n),l.push("runner"),r.BF.readonly(a,l)}static generatorDepKeyByField(e){const{data:t,__index:i}=e;return`${t}#${i}`}}function wd(e,t){let i=!1,r=!1;function o(e,t){const{defaultValueNode:o,computeNode:n}=this;o&&!i&&(i=!0,pd.run(o,Td(this))),n&&!r&&(r=!0,pd.run(n,Td(this))),this.compute(t)}return Es.track(o.bind(e),{effect:t,lazy:!0,duplex:!1})}function Sd(){let e=!1;return function(t){const{field:i,defaultValueNode:r,computeNode:o}=this,{data:n}=i;if(!n)return;const a=null===t||void 0===t?void 0:t.activeRecord;if(!a)return;const l=a[n];if(r&&!e){e=!0;const i=yd.run(t,r,l);i!==l&&(a[n]=i)}if(o){const e=yd.run(t,o,l);e!==l&&(a[n]=e)}}}function Td(e){return new Ad({dep:e})}function Ed(){return function(e,t){vs(gs.FORCE_THIS|gs.IGNORED_DEPS,()=>{this.computeContext.compute(t,this.field)})}}class Ad extends ud{constructor(e){super(e),this.dep=e.dep}findIdentifierByMemberExpression(e){const{dep:t}=this;return t?this.findIdentifierByMemberExpressionAndTrack(t,e,!0).identifier:super.findIdentifierByMemberExpression(e)}findIdentifierByMemberExpressionAndTrack(e,t,i){const{object:r,property:o}=t;if(pn(r)){const{value:t}=r;let n;if((this.tokenProperties.length||this.tokenProperties.includes(t))&&pn(o)){const t=this.findTrackModelField(e,o.value);t&&(i?this.createTrackByField(e,t):(n=[],this.pushStack(n,e,t)))}return{identifier:r,stack:n}}if(cn(r)){const t=this.findIdentifierByMemberExpressionAndTrack(e,r,!1),{stack:n}=t;if(i&&pn(o)){let t=e,i=e;null===n||void 0===n||n.forEach(e=>{i=e,this.createTrack(t.runner.effect,i),t=e})}return t}return{identifier:void 0}}findTrackModelField(e,t){const i=e.computeContext.runtimeContext.getModelField(t);if(i){const{modelField:e,isOther:t}=i;if(!t)return e}}getTrackDep(e,t){var i;return null===(i=e.computeContext.deps)||void 0===i?void 0:i.get(xd.generatorDepKeyByField(t))}pushStack(e,t,i){let r=this.getTrackDep(t,i);r||(r=this.createDep(t,i)),e.splice(0,0,r)}createTrackByField(e,t){let i=this.getTrackDep(e,t);return i||(i=this.createDep(e,t)),{track:i,runner:this.createTrack(i.runner.effect,e)}}createDep(e,t){const{computeContext:i}=e;let{deps:r}=i;r||(r=xd.createDeps(),i.deps=r);const o=xd.generatorDepKeyByField(t),n=xd.createDep(i,t,void 0,void 0,e.computeContext.runner.effect);return r.set(o,n),n}createTrack(e,t){return Es.track(t.track,{effect:e,lazy:!0,duplex:!1})}}function kd(e,t){if(!this.deps)return void console.error("Invalid deps. please using resolve compute method generate deps.");if(!t)return void Array.from(this.deps.values()).forEach(t=>{Es.trigger(t.runner.effect,t,e)});let i;i=Array.isArray(t)?t:[t],i.map(e=>xd.generatorDepKeyByField(e)).map(e=>this.deps.get(e)).filter(r.BF.isNotNull).forEach(t=>{fs(gs.FORCE_THIS)?Es.trigger(t.runner.effect,t,e):Es.triggerWithDirective(t.runner.effect,gs.IGNORED_THIS,t,e)})}function Dd(){if(this.deps)return;this.deps=xd.createDeps();const e=this.runtimeContext.model.modelFields;let t;const{computeHook:i}=this;t=i?Es.createEffect((e,t)=>{i(e,t)}):Es.createEffect(void 0),this.runner=t;const r=Fd.bind(this);for(const o of e)r(o,t.effect)}function Fd(e,t){const{defaultValue:i,compute:r}=e;let o,n;if(i&&(0,ve.A)(i))try{o=yd.parser(i)}catch(a){console.error(a)}if(r&&(0,ve.A)(r))try{n=yd.parser(r)}catch(a){console.error(a)}if(o||n){this.deps||(this.deps=xd.createDeps());const i=xd.generatorDepKeyByField(e);this.deps.has(i)||this.deps.set(i,xd.createDep(this,e,o,n,t))}}const Rd={resolveCompute:Dd,compute:kd};class Od extends r.mS{constructor(){super()}generator(e){const t={runtimeContext:ei.get(e)},i=[];return Object.entries(Rd).forEach(([e,r])=>{i.push(e),t[e]=r.bind(t)}),r.BF.readonly(t,i)}}class Nd{static get(e){return Nd.manager.get(e)}static createOrReplace(e,t){return Nd.manager.createOrReplace(e,t)}static delete(e,t=!0){Nd.manager.delete(e,t)}}var $d;Nd.manager=new Od,function(e){e["BLANK"]="_blank",e["PARENT"]="_parent",e["SELF"]="_self",e["TOP"]="_top"}($d||($d={}));i(61594);const Md=(e,t)=>{let i=t||[];return e&&(i=e.split(",")),i},Id=(e,t,i)=>{let r=Md(e,t);return r=[...r,"id","code"],i.filter(e=>r.includes(e.data))||[]};class Ld{static getConfig(){return o.Bi.getConfig("experimental")||{}}static buildQueryConditionNext(){const e={NODE_ENV:"production",BASE_URL:"/"}.BUILD_QUERY_CONDITION||Ld.getConfig().buildQueryCondition;return"next"===e}static addressWidgetNext(){const e={NODE_ENV:"production",BASE_URL:"/"}.ADDRESS_WIDGET||Ld.getConfig().AddressWidget;return"next"===e}}const _d=[L.JhY.GREATER_THAN,">"],Pd=[L.JhY.GREATER_THAN_OR_EQUAL,">="],jd=[L.JhY.LESS_THAN,"<"],Vd=[L.JhY.LESS_THAN_OR_EQUAL,"<="];class Bd{static get(e,t){var i;let r;switch(e){case"string":r=[L.JhY.EQUAL,L.JhY.NOT_EQUAL,L.JhY.IN,L.JhY.NOT_IN,L.JhY.LIKE,L.JhY.STARTS,L.JhY.ENDS,L.JhY.NOT_LIKE,L.JhY.NOT_STARTS,L.JhY.NOT_ENDS];break;case"number":case"datetime":r=[L.JhY.EQUAL,L.JhY.NOT_EQUAL,..._d,...Pd,...jd,...Vd];break;case"boolean":r=[L.JhY.EQUAL,L.JhY.NOT_EQUAL];break;case"bit":r=[L.JhY.EQUAL,L.JhY.NOT_EQUAL,L.JhY.BIT,L.JhY.NOT_BIT,L.JhY.HAS,L.JhY.HAS_NOT,L.JhY.HAS_OR,L.JhY.HAS_NOT_OR];break}if(!r||r.includes(t))return null===(i=Bd.operators.find(e=>e.symbols.some(e=>e===t)))||void 0===i?void 0:i.consumer}}function Hd(e){return null!=e&&"string"===typeof e}function Wd(e){return null!=e&&["string","number"].includes(typeof e)}function Ud(e){return null!=e&&("boolean"===typeof e||"string"===typeof e&&["true","false"].includes(e))}Bd.operators=[{symbols:[L.JhY.EQUAL],consumer:(e,t,i=!0)=>new L.kWY(e).equal(t,i)},{symbols:[L.JhY.NOT_EQUAL],consumer:(e,t,i=!0)=>new L.kWY(e).notEqual(t,i)},{symbols:_d,consumer:(e,t,i=!0)=>new L.kWY(e).greaterThan(t,i)},{symbols:Pd,consumer:(e,t,i=!0)=>new L.kWY(e).greaterThanOrEuqalTo(t,i)},{symbols:jd,consumer:(e,t,i=!0)=>new L.kWY(e).lessThan(t,i)},{symbols:Vd,consumer:(e,t,i=!0)=>new L.kWY(e).lessThanOrEqualTo(t,i)},{symbols:[L.JhY.IN],consumer:(e,t)=>new L.kWY(e).in(t)},{symbols:[L.JhY.NOT_IN],consumer:(e,t)=>new L.kWY(e).notIn(t)},{symbols:[L.JhY.COL_EQUAL],consumer:(e,t)=>new L.kWY(e).colEqual(t)},{symbols:[L.JhY.COL_NOT_EQUAL],consumer:(e,t)=>new L.kWY(e).colNotEqual(t)},{symbols:[L.JhY.LIKE],consumer:(e,t,i=!0)=>new L.kWY(e).like(t,i)},{symbols:[L.JhY.STARTS],consumer:(e,t,i=!0)=>new L.kWY(e).starts(t,i)},{symbols:[L.JhY.ENDS],consumer:(e,t,i=!0)=>new L.kWY(e).ends(t,i)},{symbols:[L.JhY.NOT_LIKE],consumer:(e,t,i=!0)=>new L.kWY(e).notLike(t,i)},{symbols:[L.JhY.NOT_STARTS],consumer:(e,t,i=!0)=>new L.kWY(e).notStarts(t,i)},{symbols:[L.JhY.NOT_ENDS],consumer:(e,t,i=!0)=>new L.kWY(e).notEnds(t,i)},{symbols:[L.JhY.BIT],consumer:(e,t,i=!0)=>new L.kWY(e).bitEqual(t)},{symbols:[L.JhY.NOT_BIT],consumer:(e,t,i=!0)=>new L.kWY(e).bitNotEqual(t)},{symbols:[L.JhY.HAS],consumer:(e,t,i=!0)=>new L.kWY(e).has(t)},{symbols:[L.JhY.HAS_NOT],consumer:(e,t,i=!0)=>new L.kWY(e).hasNot(t)},{symbols:[L.JhY.HAS_OR],consumer:(e,t,i=!0)=>new L.kWY(e).hasOr(t)},{symbols:[L.JhY.HAS_NOT_OR],consumer:(e,t,i=!0)=>new L.kWY(e).hasNotOr(t)}];function qd(e,t){let{store:i}=e;if(t&&(i=!0),g(e)){const{relationFields:r,referenceFields:o}=e;return t?!(!r.length||!o.length):!(i||!r.length||!o.length)}return i||!!e.allowSearch}const zd=(e,t,i={},n,a)=>{const l=new L.kWY("1==1"),s=Object.assign(Object.assign({},t),i);return s&&Object.keys(s).length>0?l.setConditionBodyData(s):l.setConditionBodyData({}),Object.keys(s).forEach(t=>{const i=s[t];if(null==i||""===i)return;const{getModelField:n}=e,d=t=>{var i,r;return n?null===(i=n(t))||void 0===i?void 0:i.modelField:null===(r=e.modelFields)||void 0===r?void 0:r.find(e=>e.name===t)},c=d(t);if(!c)return;if(!qd(c,a))return;const{operator:u}=c,p=h(c);if(null!=i&&(!Array.isArray(i)||i.length))switch(p){case o.m1.Integer:case o.m1.Long:case o.m1.Float:case o.m1.Currency:Array.isArray(i)?Zd(c,l,t,u,i):Wd(i)&&Jd(l,t,u,i);break;case o.m1.String:case o.m1.Text:case o.m1.HTML:case o.m1.Phone:case o.m1.Email:if(Array.isArray(i))Kd(c,l,t,u,i,{quote:"'"});else{const e=`${i}`;Hd(e)&&Gd(l,t,u,e)}break;case o.m1.Boolean:if(Array.isArray(i))tc(l,t,u,i);else if(Ud(i)){const e=r.TM.toBoolean(i);null!=e&&ec(l,t,u,e)}break;case o.m1.DateTime:case o.m1.Date:case o.m1.Time:Array.isArray(i)?rc(l,t,u,[i[0],i[1]]):Hd(i)&&ic(l,t,u,i);break;case o.m1.Year:Array.isArray(i)?oc(l,t,u,[i[0],i[1]]):Hd(i)&&ic(l,t,u,i);break;case o.m1.Enum:case o.m1.MultiEnum:Array.isArray(i)?c.multi&&c.storeSerialize===o.G6.BIT?Yd(l,t,u,i):Qd(c,l,t,u,i):Hd(i)&&Xd(l,t,u,i);break;case o.m1.OneToMany:{const e=c;Array.isArray(i)&&lc(e,l,t,u,i,{getModelFieldFn:d});break}case o.m1.ManyToMany:{const e=c;Array.isArray(i)&&sc(e,l,t,u,i,{getModelFieldFn:d});break}case o.m1.ManyToOne:case o.m1.OneToOne:{const e=c;Array.isArray(i)?hc(e,l,t,u,i,{getModelFieldFn:d}):pc(e,l,t,u,i,{getModelFieldFn:d});break}}}),n&&n.forEach(e=>{const t=e.leftValue[e.leftValue.length-1];if("between"!==e.operator)l.and(new L.kWY(t).append(e.operator).append(new L.kWY(`'${e.right}'`).toString()));else{const i=new L.kWY(t).greaterThanOrEuqalTo(e.right[0]).and(new L.kWY(t).lessThanOrEqualTo(e.right[1]));l.and(i)}}),l};function Gd(e,t,i,o){o=r.sK.serializableSearchString(o),ac("string",e,t,i,o,()=>e.and(new L.kWY(t).like(o)))}function Kd(e,t,i,o,n,a){const l=(null===a||void 0===a?void 0:a.quote)||"";let s;s=(null===a||void 0===a?void 0:a.serializable)?l?r.sK.serializableSearchString:r.sK.serializableSimpleString:e=>e;let d=" and ";if(o||(o=(null===e||void 0===e?void 0:e.multi)?r.uK.LIKE.symbol:r.uK.IN.symbol),o===r.uK.IN.symbol){const e=new L.kWY(i).in(n.map(e=>`${l}${s(e)}${l}`)).toString();return void t.and(new L.kWY(e))}if(o===r.uK.NOT_IN.symbol){const e=new L.kWY(i).notIn(n.map(e=>`${l}${s(e)}${l}`)).toString();return void t.and(new L.kWY(e))}o&&o!==r.uK.LIKE.symbol&&o.toLowerCase()!==r.Py.LIKE_OR||(d=" or ");const c=[];for(const u of n)if(null!=u){const e=new L.kWY(i).like(r.sK.serializableSearchString(`${u}`)).toString();c.push(e)}if(c.length>0){const e=c.join(d);t.and(new L.kWY(e))}}function Xd(e,t,i,r){ac("string",e,t,i,r,()=>e.and(new L.kWY(t).equal(r)))}function Qd(e,t,i,r,o){Kd(e,t,i,r,o)}function Yd(e,t,i,r){ac("bit",e,t,i,r,()=>e.and(new L.kWY(t).has(r)))}function Jd(e,t,i,r){ac("number",e,t,i,`${r}`,()=>e.and(new L.kWY(t).equal(r)))}function Zd(e,t,i,o,n){if(null===e||void 0===e?void 0:e.multi)return void Kd(e,t,i,o,n);o||(o=r.uK.IN.symbol);const a=o.split(",");if(2===a.length&&2===n.length){const[e,r]=n;if(null==e||null==r)return;const[o,l]=a,s=nc("number",i,o,e),d=nc("number",i,l,r);if(!s||!d)return;return void t.and(s.and(d))}switch(o){case"=in=":t.and(new L.kWY(i).in(n));break;case"=out=":t.and(new L.kWY(i).notIn(n));break;default:throw new Error(`Invalid operator: ${o}`)}}function ec(e,t,i,r){ac("boolean",e,t,i,`${r}`,()=>e.and(new L.kWY(t).equal(r,!0)),!0)}function tc(e,t,i,r){return Kd(void 0,e,t,i,r)}function ic(e,t,i,r){ac("datetime",e,t,i,r,()=>e.and(new L.kWY(t).like(r)))}function rc(e,t,i,r){const o=(null===i||void 0===i?void 0:i.split(","))||[],[n,a]=r,l=new L.kWY(_.fh);ac("datetime",l,t,o[0],n,()=>l.and(new L.kWY(t).greaterThanOrEuqalTo(n))),ac("datetime",l,t,o[1],a,()=>l.and(new L.kWY(t).lessThan(a))),e.and(l)}function oc(e,t,i,r){const o=(null===i||void 0===i?void 0:i.split(","))||[],[n,a]=r,l=new L.kWY(_.fh);ac("datetime",l,t,o[0],n,()=>l.and(new L.kWY(t).greaterThanOrEuqalTo(n))),ac("datetime",l,t,o[1],a,()=>l.and(new L.kWY(t).lessThanOrEqualTo(a))),e.and(l)}function nc(e,t,i,r,o){const n=Bd.get(e,i);if(n)return n(t,r,o)}function ac(e,t,i,r,o,n,a){if(!r)return void n(t);const l=nc(e,i,r,o,a);l?t.and(l):n(t)}function lc(e,t,i,r,o,n){const{name:a,relationFields:l,referenceFields:s}=e;dc(a,l,s,t,o,n)}function sc(e,t,i,r,o,n){const{name:a,referenceFields:l,throughReferenceFields:s}=e;dc(a,s,l,t,o,n)}function dc(e,t,i,r,o,n){if(!(null===t||void 0===t?void 0:t.length)||!(null===i||void 0===i?void 0:i.length)||t.length!==i.length)return;let a;for(let l=0;l<i.length;l++){const r=i[l],n=t[l];let s,d;f(n)?(d=y(n),s=r):f(r)?(d=y(r),s=n):(d=vc(o,r),s=r);const c=cc(e,s,d);c&&(a?a.and(c):a=c)}a&&r.and(a)}function cc(e,t,i){if(Array.isArray(i)){const o=[];for(const r of i)o.push(`${e}.${t} == ${r}`);if(!o.length)return;return new L.kWY(o.join(` ${r.ub.OR} `))}return null===i?new L.kWY(`${e}.${t}`).isNull():new L.kWY(`${e}.${t}`).equal(i)}const uc=["countryCode","provinceCode","cityCode","districtCode","streetCode"];function pc(e,t,i,r,o,n){const{name:a,references:l,relationFields:s,referenceFields:d}=e;if(!(null===s||void 0===s?void 0:s.length)||!(null===d||void 0===d?void 0:d.length)||s.length!==d.length)return;if("resource.ResourceAddress"===l){let e;for(const t of uc){const i=o[t];i&&(e?e.and(new L.kWY(`${a}.${t}`).equal(i)):e=new L.kWY(`${a}.${t}`).equal(i))}return void(e&&t.and(e))}let c;for(let u=0;u<s.length;u++){const e=s[u],i=d[u];let r,a;if(!f(e)){if(f(i))a=y(i),r=e;else if(Ld.buildQueryConditionNext()){const l=null===n||void 0===n?void 0:n.getModelFieldFn(e);if(l){if(!l.store)return void(t.getConditionBodyData()[e]=o[i]);a=o[i],r=e}else a=o[i],r=e}else a=o[i],r=e;c?c.and(new L.kWY(`${r}`).equal(a)):c=new L.kWY(`${r}`).equal(a)}}c&&t.and(c)}function hc(e,t,i,r,o,n){const{relationFields:a,referenceFields:l}=e;if(!(null===a||void 0===a?void 0:a.length)||!(null===l||void 0===l?void 0:l.length)||a.length!==l.length)return;let s;for(let d=0;d<a.length;d++){const e=a[d],i=l[d];let r,c;if(f(e))c=y(e),r=i;else if(f(i))c=y(i),r=e;else if(Ld.buildQueryConditionNext()){const a=null===n||void 0===n?void 0:n.getModelFieldFn(e);if(a){if(!a.store)return void(t.getConditionBodyData()[e]=vc(o,i));c=vc(o,i),r=e}else c=vc(o,i),r=e}else c=vc(o,i),r=e;const u=gc(r,c);u&&(s?s.and(u):s=u)}s&&t.and(s)}function gc(e,t){if(Array.isArray(t)){const i=new L.kWY(`${e}`);return i.in(t),i}return null===t?new L.kWY(e).isNull():new L.kWY(e).equal(t)}function vc(e,t){return e.map(e=>{const i=e[t];return null==i?"":`${i}`}).filter(e=>!!e)}function mc(e,t){var i;const{ttype:r,referenceFields:n}=e;return[o.m1.ManyToOne,o.m1.OneToOne].includes(r)&&1===(null===n||void 0===n?void 0:n.length)?n[0]:(null===(i=null===t||void 0===t?void 0:t.pks)||void 0===i?void 0:i[0])||"id"}const fc=(e,t,i={maxDepth:1})=>(0,_.Tx)(e.model,e,t,void 0,{path:e.sessionPath},i),yc=e=>{const{url:t}=e;switch(e.target){case o.jq.Router:window.open(t,$d.SELF);break;case o.jq.Dialog:case o.jq.OpenWindow:case o.jq.Frame:window.open(t,$d.BLANK);break;default:throw new Error(`Invalid target type. value = ${e.target}`)}};function bc(e,t=(0,O.ZI)(),i=(0,O.yE)().matched,r={},n){let a=e.target;switch(a||(a=o.jq.Router),a){case o.jq.Router:case o.jq.OpenWindow:Cc(e,t,i,r,n);break;case o.jq.Dialog:Oi.createByViewAction(e,r);break;case o.jq.Drawer:Ni.createByViewAction(e,r);break;default:console.error("Invalid view action target",e)}}function Cc(e,t=(0,O.ZI)(),i=(0,O.yE)().matched,r={},o){if(!t||!i)return;const n=r.preserveParameter;let a;a=!1===n?{}:i.segmentParams.page||{};const l=Object.assign(Object.assign(Object.assign({},a),{module:`${e.resModuleName||a.module||e.moduleName}`,viewType:e.resViewType||e.viewType,model:e.model,action:e.name}),r);let s=r.sessionPath;delete l.preserveParameter,delete l.sessionPath,void 0===s?(s=e.sessionPath||(0,L.cA5)(),s?l.path=s:delete l.path):null===s?delete l.path:l.path=s,t.push({segments:[{path:i.path.substring(1)||"",parameters:Object.assign(Object.assign({},l),{scene:e&&e.name,target:e.target}),extra:{preserveParameter:!1}}]},o)}const xc="PAMIRS_BASIC_CONFIG",wc="OINONE_HOMEPAGE",Sc=(Symbol("language"),Symbol("1"),console);class Tc{constructor(e=!1){this.validateDev=!1,this.validateDev=!!e}log(e,...t){this.canLog()&&Sc.log(e,t)}debug(e,...t){this.canLog()&&Sc.debug(e,t)}info(e,...t){this.canLog()&&Sc.info(e,t)}warn(e,...t){this.canLog()&&Sc.warn(e,t)}error(e,...t){this.canLog()&&Sc.error(e,t)}dir(e,...t){this.canLog()&&Sc.dir(e,t)}assert(e,t,...i){this.canLog()&&Sc.assert(e,t,i)}time(e){this.canLog()&&Sc.time(e)}timeEnd(e){this.canLog()&&Sc.timeEnd(e)}trace(e,...t){this.canLog()&&Sc.trace(e,t)}canLog(){return!this.validateDev||(0,O.Cu)()}}new Tc,new Tc(!0);class Ec{constructor(){this.stack=[],this.currentIndex=-1}push(e,t=!1){const{stack:i,currentIndex:r}=this;if(-1===r)return i.push(e),void(this.currentIndex=0);r!==i.length-1&&i.splice(r,i.length-2),i.push(e),this.currentIndex=i.length-1,t&&window.history.pushState(null,"",e)}back(){const{stack:e,currentIndex:t}=this,i=t-1,r=e[i];r&&(this.currentIndex=i,window.history.replaceState(null,"",r))}forward(){const{stack:e,currentIndex:t}=this,i=t+1,r=e[i];r&&(this.currentIndex=i,window.history.replaceState(null,"",r))}}Ec.INSTANCE=new Ec;class Ac{static buildSimpleModelField(e,t,i){const{data:o,name:n,ttype:a,references:l,referencesModel:s,store:d,relationStore:u,displayName:p}=i;let h=!0,v=!1;c.includes(i.ttype)&&(h=!1,v=!0);const m={model:e,modelName:t,data:o,name:n||o,ttype:a,store:r.Xx.ofNullable(d).orElse(h),relationStore:r.Xx.ofNullable(u).orElse(v),displayName:p};return l&&g(m)&&(m.references=l,s&&(m.referencesModel=s)),m}}class kc{static convertRequestFields(e){return(e||[]).map(e=>{var t;const i={field:e};return g(e)&&(i.referencesFields=this.convertRequestFields((null===(t=e.referencesModel)||void 0===t?void 0:t.modelFields)||[])),i})}}var Dc,Fc;(function(e){e.QueryOrderModel="$$query_order_model",e.QueryOrderModelName="$$query_order_model",e.QueryOrder={model:e.QueryOrderModel,name:e.QueryOrderModelName,module:o.hQ.BASE,moduleName:o.vL.BASE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.QueryOrderModel,e.QueryOrderModelName,{data:"field",ttype:o.m1.String}),Ac.buildSimpleModelField(e.QueryOrderModel,e.QueryOrderModelName,{data:"direction",ttype:o.m1.Enum})]},e.QuerySortModel="$$query_sort_model",e.QuerySortModelName="$$query_sort_model",e.QuerySort={model:e.QuerySortModel,name:e.QuerySortModelName,module:o.hQ.BASE,moduleName:o.vL.BASE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.QuerySortModel,e.QuerySortModelName,{data:"orders",ttype:o.m1.OneToMany,references:e.QueryOrderModel,referencesModel:e.QueryOrder})]},e.PaginationModel="base.Pagination",e.PaginationModelName="pagination",e.QueryPagination={model:e.PaginationModel,name:e.PaginationModelName,module:o.hQ.BASE,moduleName:o.vL.BASE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.PaginationModel,e.PaginationModelName,{data:"currentPage",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.PaginationModel,e.PaginationModelName,{data:"size",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.PaginationModel,e.PaginationModelName,{data:"sort",ttype:o.m1.OneToOne,references:e.QuerySortModel,referencesModel:e.QuerySort}),Ac.buildSimpleModelField(e.PaginationModel,e.PaginationModelName,{data:"groupBy",ttype:o.m1.String})]},e.QueryWrapperModel="base.Condition",e.QueryWrapperModelName="condition",e.QueryWrapper={model:e.QueryWrapperModel,name:e.QueryWrapperModelName,module:o.hQ.BASE,moduleName:o.vL.BASE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.QueryWrapperModel,e.QueryWrapperModelName,{data:"rsql",ttype:o.m1.String}),Ac.buildSimpleModelField(e.QueryWrapperModel,e.QueryWrapperModelName,{data:"queryData",ttype:o.m1.Map})]},e.QueryPageResultModel=e.PaginationModel,e.QueryPageResultModelName=e.PaginationModelName,e.QueryPageResult={model:e.QueryPageResultModel,name:e.QueryPageResultModelName,module:o.hQ.BASE,moduleName:o.vL.BASE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.QueryPageResultModel,e.QueryPageResultModelName,{data:"content",ttype:T}),Ac.buildSimpleModelField(e.QueryPageResultModel,e.QueryPageResultModelName,{data:"totalPages",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.QueryPageResultModel,e.QueryPageResultModelName,{data:"totalElements",ttype:o.m1.Integer})]},e.IdModelModel="$$id_model_model",e.IdModelName="$$id_model_name",e.IdModel={model:e.IdModelModel,name:e.IdModelName,module:o.hQ.BASE,moduleName:o.vL.BASE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.IdModelModel,e.IdModelName,{data:"id",ttype:o.m1.Integer})]},e.ResourceCountryModel="resource.ResourceCountry",e.ResourceCountryModelName="resourceCountry",e.ResourceCountry={model:e.ResourceCountryModel,name:e.ResourceCountryModelName,module:o.hQ.RESOURCE,moduleName:o.vL.RESOURCE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.ResourceCountryModel,e.ResourceCountryModelName,{data:"id",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.ResourceCountryModel,e.ResourceCountryModelName,{data:"code",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceCountryModel,e.ResourceCountryModelName,{data:"name",ttype:o.m1.String})]},e.ResourceProvinceModel="resource.ResourceProvince",e.ResourceProvinceModelName="resourceProvince",e.ResourceProvince={model:e.ResourceProvinceModel,name:e.ResourceProvinceModelName,module:o.hQ.RESOURCE,moduleName:o.vL.RESOURCE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.ResourceProvinceModel,e.ResourceProvinceModelName,{data:"id",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.ResourceProvinceModel,e.ResourceProvinceModelName,{data:"code",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceProvinceModel,e.ResourceProvinceModelName,{data:"name",ttype:o.m1.String})]},e.ResourceCityModel="resource.ResourceCity",e.ResourceCityModelName="resourceCity",e.ResourceCity={model:e.ResourceCityModel,name:e.ResourceCityModelName,module:o.hQ.RESOURCE,moduleName:o.vL.RESOURCE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.ResourceCityModel,e.ResourceCityModelName,{data:"id",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.ResourceCityModel,e.ResourceCityModelName,{data:"code",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceCityModel,e.ResourceCityModelName,{data:"name",ttype:o.m1.String})]},e.ResourceDistrictModel="resource.ResourceDistrict",e.ResourceDistrictModelName="resourceDistrict",e.ResourceDistrict={model:e.ResourceDistrictModel,name:e.ResourceDistrictModelName,module:o.hQ.RESOURCE,moduleName:o.vL.RESOURCE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.ResourceDistrictModel,e.ResourceDistrictModelName,{data:"id",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.ResourceDistrictModel,e.ResourceDistrictModelName,{data:"code",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceDistrictModel,e.ResourceDistrictModelName,{data:"name",ttype:o.m1.String})]},e.ResourceStreetModel="resource.ResourceStreet",e.ResourceStreetModelName="resourceStreet",e.ResourceStreet={model:e.ResourceStreetModel,name:e.ResourceStreetModelName,module:o.hQ.RESOURCE,moduleName:o.vL.RESOURCE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.ResourceStreetModel,e.ResourceStreetModelName,{data:"id",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.ResourceStreetModel,e.ResourceStreetModelName,{data:"code",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceStreetModel,e.ResourceStreetModelName,{data:"name",ttype:o.m1.String})]},e.ResourceAddressModel="resource.ResourceAddress",e.ResourceAddressModelName="resourceAddress",e.ResourceAddress={model:e.ResourceAddressModel,name:e.ResourceAddressModelName,module:o.hQ.RESOURCE,moduleName:o.vL.RESOURCE,modelActions:[],modelFields:[Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"id",ttype:o.m1.Integer}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"street2",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"fullAddress",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"countryCode",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"countryName",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"originCountry",ttype:o.m1.ManyToOne,references:e.ResourceCountryModel,referencesModel:e.ResourceCountry}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"provinceCode",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"provinceName",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"originProvince",ttype:o.m1.ManyToOne,references:e.ResourceProvinceModel,referencesModel:e.ResourceProvince}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"cityCode",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"cityName",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"originCity",ttype:o.m1.ManyToOne,references:e.ResourceCityModel,referencesModel:e.ResourceCity}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"districtName",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"districtCode",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"originDistrict",ttype:o.m1.ManyToOne,references:e.ResourceDistrictModel,referencesModel:e.ResourceDistrict}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"streetCode",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"streetName",ttype:o.m1.String}),Ac.buildSimpleModelField(e.ResourceAddressModel,e.ResourceAddressModelName,{data:"originStreet",ttype:o.m1.ManyToOne,references:e.ResourceStreetModel,referencesModel:e.ResourceStreet})]}})(Dc||(Dc={})),function(e){e.QUERY_ONE_NAME="queryOne",e.queryOne={type:[E.QUERY],namespace:T,name:e.QUERY_ONE_NAME,fun:e.QUERY_ONE_NAME,argumentList:[{name:"query",ttype:T}],returnType:{ttype:T}},e.QUERY_ONE_BY_WRAPPER_NAME="queryOneByWrapper",e.queryOneByWrapper={type:[E.QUERY],namespace:T,name:e.QUERY_ONE_BY_WRAPPER_NAME,fun:e.QUERY_ONE_BY_WRAPPER_NAME,argumentList:[{name:"queryWrapper",ttype:o.m1.ManyToOne,model:Dc.QueryWrapperModel,modelDefinition:Dc.QueryWrapper}],returnType:{ttype:T}},e.QUERY_PAGE_NAME="queryPage",e.queryPage={type:[E.QUERY],namespace:T,name:e.QUERY_PAGE_NAME,fun:e.QUERY_PAGE_NAME,argumentList:[{name:"page",ttype:o.m1.ManyToOne,model:Dc.PaginationModel,modelDefinition:Dc.QueryPagination},{name:"queryWrapper",ttype:o.m1.ManyToOne,model:Dc.QueryWrapperModel,modelDefinition:Dc.QueryWrapper}],returnType:{ttype:o.m1.ManyToOne,model:Dc.QueryPageResultModel,modelDefinition:Dc.QueryPageResult}},e.RELATION_QUERY_PAGE_NAME="relationQueryPage",e.relationQueryPage={type:[E.QUERY],namespace:T,name:e.RELATION_QUERY_PAGE_NAME,fun:e.RELATION_QUERY_PAGE_NAME,argumentList:[{name:"page",ttype:o.m1.ManyToOne,model:Dc.PaginationModel,modelDefinition:Dc.QueryPagination},{name:"queryWrapper",ttype:o.m1.ManyToOne,model:Dc.QueryWrapperModel,modelDefinition:Dc.QueryWrapper},{name:"relationModel",ttype:o.m1.String},{name:"relationField",ttype:o.m1.String},{name:"relationData",ttype:T}],returnType:{ttype:o.m1.ManyToOne,model:Dc.QueryPageResultModel,modelDefinition:Dc.QueryPageResult}},e.CREATE_NAME="create",e.createFunction={type:[E.CREATE],namespace:T,name:e.CREATE_NAME,fun:e.CREATE_NAME,argumentList:[{name:"data",ttype:T}],returnType:{ttype:T}},e.UPDATE_NAME="update",e.updateFunction={type:[E.UPDATE],namespace:T,name:e.UPDATE_NAME,fun:e.UPDATE_NAME,argumentList:[{name:"data",ttype:T}],returnType:{ttype:T}},e.UPDATE_ONE_WITH_RELATIONS_NAME="updateOneWithRelations",e.updateOneWithRelationsFunction={type:[E.UPDATE],namespace:T,name:e.UPDATE_ONE_WITH_RELATIONS_NAME,fun:e.UPDATE_ONE_WITH_RELATIONS_NAME,argumentList:[],returnType:{ttype:T}},e.UPDATE_WITH_FIELD_BATCH_NAME="updateWithFieldBatch",e.updateWithFieldBatch={type:[E.UPDATE],namespace:T,name:e.UPDATE_WITH_FIELD_BATCH_NAME,fun:e.UPDATE_WITH_FIELD_BATCH_NAME,argumentList:[{name:"dataList",ttype:T}],returnType:{ttype:T}}}(Fc||(Fc={}));const Rc=[...n,...l];class Oc{static fetchFunctionDefinition(e,t,i){return(0,I.sH)(this,void 0,void 0,function*(){const{fun:o}=i;let n;n=void 0===r.TM.toBoolean(t)&&t||o;let a=i;if(t&&n!==o){const i=yield J.get(e.model,t);i&&(a=i)}return a})}execute(e,t,i,...r){return(0,I.sH)(this,void 0,void 0,function*(){const{moduleName:o,variables:n,context:a}=i;return this.buildGQLByFunction(t,i,...r).request(o||e.moduleName,n,a)})}simpleExecute(e,t,i,...r){return(0,I.sH)(this,void 0,void 0,function*(){const{requestModels:o,responseModels:n,requestFields:a,responseFields:l,variables:s,context:d,deep:c}=i,{model:u,name:p}=e,h={[u]:a};for(const e of o||[])h[e.model]=e.modelFields.map(e=>({field:e}));const g={[u]:l||a};for(const e of n||[])g[e.model]=e.modelFields.map(e=>({field:e}));const v={model:u,modelName:p,requestFields:h,responseFields:g,variables:s,context:d,deep:c};return this.execute(e,t,v,...r)})}buildGQLByFunction(e,t,...i){const{type:r,name:o,argumentList:n,returnType:a}=e,{modelName:l}=t;let s;return s=1===r.length&&r[0]===E.QUERY?L.t98.query(l,o):L.t98.mutation(l,o),s.buildRequest(e=>{for(let r=0;r<i.length;r++){const o=n[r],a=i[r];if(!o||void 0===a)continue;const{name:l}=o;null===a?e.nullParameter(l):this.buildRequestParameterByArgument(t,e,o,a)}}),a?(s.buildResponse(e=>{this.buildResponseParameterByReturnType(t,e,a)}),s):s}buildRequestParameterByArgument(e,t,i,r){const{name:n,ttype:l,multi:c,model:u,modelDefinition:p}=i;if(this.predictSelfFlag(e,l,u)){const i=e.requestFields[e.model];(0,ct.A)(r)?t.buildArrayParameter(n,r,(t,r)=>{this.buildRequestParameters(e,t,i,r)}):t.buildObjectParameter(n,t=>{this.buildRequestParameters(e,t,i,r)})}else if(Rc.includes(l))t.stringParameter(n,r,!0);else if(a.includes(l))this.buildNumberRequestParameter(t,l,c,n,r);else if(l===o.m1.Boolean)t.booleanParameter(n,r);else if(l===o.m1.Enum)t.enumerationParameter(n,r);else if(l===o.m1.Map)this.buildMapRequestParameter(t,c,n,r);else{let i=null===p||void 0===p?void 0:p.modelFields.map(e=>({field:e}));if(!(null===i||void 0===i?void 0:i.length)&&u&&(i=e.requestFields[u]),!(null===i||void 0===i?void 0:i.length))return;s.includes(l)?t.buildObjectParameter(n,t=>{this.buildRequestParameters(e,t,i,r)}):d.includes(l)&&t.buildArrayParameter(n,r,(t,r)=>{this.buildRequestParameters(e,t,i,r)})}}buildRequestParameters(e,t,i,r){const o=Object.keys(r);if(o.length>=.75*i.length)for(const n of i)this.buildRequestParameterByField(e,t,n,r);else for(const n of o){const o=i.find(e=>e.field.data===n);o&&this.buildRequestParameterByField(e,t,o,r)}}buildRequestParameterByField(e,t,i,r){var n,l;const{field:s,referencesFields:d}=i,{name:c,ttype:u,multi:p,isVirtual:g}=s;if(g&&this.pushVirtualMetadataByField(e,s),null===r)return void t.nullParameter(c);if(void 0===r)return;const f=h(s);if(Rc.includes(f))t.stringParameter(c,r[c],!0);else if(a.includes(f))this.buildNumberRequestParameter(t,f,p,c,r[c]);else if(f===o.m1.Boolean)t.booleanParameter(c,r[c]);else if(f===o.m1.Enum)t.enumerationParameter(c,r[c]);else if(f===o.m1.Map)this.buildMapRequestParameter(t,p,c,r[c]);else{const i=r[c];if(void 0===i)return;const{references:o}=s,a=this.predictSelfFlag(e,u,o);let p=d||e.requestFields[o];const h=this.getStaticRequestModelFields(o);if(h&&(p=h),!p&&a&&(p=e.requestFields[e.model]),null===p||void 0===p?void 0:p.length)(0,ct.A)(i)?i.length?t.buildArrayParameter(c,i,(t,i)=>{this.buildRequestParameters(e,t,p,i)}):t.nullArrayParameter(c):i?t.buildObjectParameter(c,t=>{this.buildRequestParameters(e,t,p,i)}):t.nullParameter(c);else if(v(s))if(i){const r=null===(n=s.referencesModel)||void 0===n?void 0:n.modelFields;(null===r||void 0===r?void 0:r.length)&&t.buildObjectParameter(c,t=>{r.forEach(r=>{this.buildRequestParameterByField(e,t,{field:r},i)})})}else t.nullParameter(c);else if(m(s))if(i.length){const r=null===(l=s.referencesModel)||void 0===l?void 0:l.modelFields;(null===r||void 0===r?void 0:r.length)&&t.buildArrayParameter(c,i,(t,i)=>{r.forEach(r=>{this.buildRequestParameterByField(e,t,{field:r},i)})})}else t.nullArrayParameter(c)}}buildNumberRequestParameter(e,t,i,n,a){if(i||[o.m1.Long,o.m1.Currency].includes(t))e.stringParameter(n,a);else if(null==a)e.stringParameter(n,a);else{const t=new r.gH((0,Yr.A)(a));t.isNaN()||e.numberParameter(n,t.toString())}}buildMapRequestParameter(e,t,i,o){let n;o?t?((0,ct.A)(o)||(o=[o]),n=r.sK.serializableObjectArray(o)):n=(0,ct.A)(o)?r.sK.serializableObjectArray(o):r.sK.serializableObject(o):n=o,e.stringParameter(i,n)}buildResponseParameterByReturnType(e,t,i){const{ttype:r,model:o,modelDefinition:n}=i;let a;if(n)a=n.modelFields.map(e=>({field:e}));else if(this.predictSelfFlag(e,r,o))a=e.responseFields[e.model];else if(o){const t=this.getStaticRequestModelFields(o);a=t||e.responseFields[o]}if(!a)return;let{deep:l}=e;l?(Dc.QueryPageResult.model===o&&l++,this.buildResponseParametersWithDeep(e,t,a,l)):this.buildResponseParameters(e,t,a)}buildResponseParameters(e,t,i,r){r||(r=[]);const o=[];for(const n of i)this.buildResponseParameterByField(e,t,n,r),p(n.field)&&o.push(n);for(const n of o)this.buildResponseParameterByRelatedField(e,t,n)}buildResponseParameterByField(e,t,i,r){const{field:o,referencesFields:n}=i,{name:a,ttype:l,isVirtual:s}=o;s&&this.pushVirtualMetadataByField(e,o);const{references:d}=o,c=this.predictSelfFlag(e,l);if(c||g(o)){let i=!1,o=n;const l=this.getStaticRequestModelFields(d);if(l){if(o=l,r.some(e=>e===d))return;r.push(d),i=!0}if(!o){let t;if(c?t=e.model:d&&(t=d),t){if(o=e.responseFields[t],r.some(e=>e===t))return;r.push(t),i=!0}}if(!o||!o.length)return void(i&&r.pop());t.buildParameters(a,t=>{this.buildResponseParameters(e,t,o,r),i&&r.pop()})}else t.parameter(a)}buildResponseParametersWithDeep(e,t,i,r){if(r<0)return;const o=[];for(const n of i)this.buildResponseParameterByFieldWithDeep(e,t,n,r),p(n.field)&&o.push(n);for(const n of o)this.buildResponseParameterByRelatedField(e,t,n)}buildResponseParameterByFieldWithDeep(e,t,i,r){const{field:o,referencesFields:n}=i,{name:a,ttype:l,isVirtual:s}=o;s&&this.pushVirtualMetadataByField(e,o);const{references:d}=o,c=this.predictSelfFlag(e,l);if(c||g(o)){let i=n;const o=this.getStaticRequestModelFields(d);if(o&&(i=o),!i){let t;c?t=e.model:d&&(t=d),t&&(i=e.responseFields[t])}if(!i||!i.length)return;t.buildParameters(a,t=>{this.buildResponseParametersWithDeep(e,t,i,r-1)})}else t.parameter(a)}buildResponseParameterByRelatedField(e,t,i){const r=i.field;if(r.isVirtual)return;let o=t.getParameters();const n=r.related;if(!n)return void console.error("Invalid related field",r);const a=n.length-1;for(let l=0;l<n.length;l++){const e=n[l];if(l===a){if((0,L.vGC)(o))o[e]||(o[e]=this.buildResponseParametersByRelatedField(i,e));else if(Array.isArray(o)){const t=o[1];(0,L.vGC)(t)?t[e]||(t[e]=this.buildResponseParametersByRelatedField(i,e)):Array.isArray(t)?t.includes(e)||t.push(e):console.error("Invalid related field",r)}}else if((0,L.vGC)(o)){let t=o[e];t||(t=[e,(0,L.MkP)()],o[e]=t),o=t}else if(Array.isArray(o)){const t=o[1];if((0,L.vGC)(t)){let i=t[e];i||(i=(0,L.MkP)(),t[e]=i),o[e]=i,o=i}}}}buildResponseParametersByRelatedField(e,t){const{field:i,referencesFields:r}=e;if(g(i)){const{references:e}=i,o=(0,L.MkP)();let n=r;const a=this.getStaticRequestModelFields(e);a&&(n=a);for(const t of n||[]){const{field:e}=t;if(!g(e)){const{name:t}=e;o[t]=t}}return[t,o]}return t}predictSelfFlag(e,t,i){return t===T||e.model===i}getStaticRequestModelFields(e){if(e)return Nc.INSTANCE.get(e)}pushVirtualMetadataByField(e,t){let{variables:i}=e;i||(i={},e.variables=i);let{metadata:r}=i;r||(r={},i.metadata=r);const{model:o}=t;let n=r[o];n||(n={model:o,fields:{}},r[o]=n);const{data:a}=t;if(!n.fields[a])if(p(t))n.fields[a]=t.related.join(".");else if(g(t)){const{ttype:e,references:i,relationFields:r,referenceFields:o}=t;n.fields[a]={ttype:e,references:i,relationFields:r,referenceFields:o}}else{const{ttype:e}=t;n.fields[a]={ttype:e}}}}Oc.INSTANCE=new Oc;class Nc extends H{fetchValue(e){const t=Nc.StaticModels.find(t=>t.model===e);if(t)return this.runtimeModelConvertRequestModelFields(t)}runtimeModelConvertRequestModelFields(e){const t=[];return e.modelFields.forEach(e=>{const i={field:e},r=e.modelDefinition;r&&(i.referencesFields=this.runtimeModelConvertRequestModelFields(r)),t.push(i)}),t}}Nc.INSTANCE=new Nc,Nc.StaticModels=[Dc.ResourceAddress];var $c=i(18593);class Mc{static constructOne(e,t,i){return(0,I.sH)(this,void 0,void 0,function*(){const{requestFields:r,responseFields:o,fun:n,isSameModel:a,usingModelCache:l,variables:c,context:u}=i,p=n||"construct",h=yield J.get(e.model,p);if(!h)return void console.error("Invalid construct function definition.");const{argumentList:g}=h,v=[],m=[];if(1===g.length){const[e]=g;Array.isArray(t)?d.includes(e.ttype)?v.push(t):s.includes(e.ttype)?v.push({}):v.push(null):s.includes(e.ttype)?v.push(t):v.push(null)}else for(const i of g){const{ttype:r,model:o}=i,n=r;a===(o===e.model)?(d.includes(n)&&((0,ct.A)(t)||(t=[t])),o&&m.push(o),v.push(t)):s.includes(n)?v.push({}):d.includes(n)?v.push([]):v.push(void 0)}const f=[];if(!a){const e=m[0];if(e)if(l){const t=yield ne.get(e);t&&f.push(t)}else f.push(Object.assign(Object.assign({},Dc.IdModel),{model:e}))}return Oc.INSTANCE.simpleExecute(e,h,{requestModels:f,requestFields:r,responseFields:o,variables:c,context:u},...v)})}static constructMirror(e,t,i){return(0,I.sH)(this,void 0,void 0,function*(){const{requestFields:r,responseFields:o,fun:n,variables:a,context:l}=i,s=n||"constructMirror",d=yield J.get(e.model,s);if(d)return Oc.INSTANCE.simpleExecute(e,d,{requestFields:r,responseFields:o,variables:a,context:l},t);console.error("Invalid construct function definition.")})}static queryOne(e,t,i){return(0,I.sH)(this,void 0,void 0,function*(){const{requestFields:r,responseFields:o,fun:n,variables:a,context:l}=i;return Oc.INSTANCE.simpleExecute(e,yield Oc.fetchFunctionDefinition(e,n,Fc.queryOne),{requestModels:Mc.generatorInternalRequestModels(),responseModels:Mc.generatorInternalResponseModels(),requestFields:r,responseFields:o,variables:a,context:l},t)})}static queryOneByWrapper(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const{queryWrapper:i}=Mc.buildQueryWrapperParameters(t),{requestFields:r,responseFields:o,fun:n,variables:a,context:l}=t;return Oc.INSTANCE.simpleExecute(e,yield Oc.fetchFunctionDefinition(e,n,Fc.queryOneByWrapper),{requestModels:Mc.generatorInternalRequestModels(),responseModels:Mc.generatorInternalResponseModels(),requestFields:r,responseFields:o,variables:a,context:l},i)})}static queryPage(e,t){return(0,I.sH)(this,void 0,void 0,function*(){const{queryWrapper:i,pagination:r}=Mc.buildQueryPageParameters(t),{requestFields:o,responseFields:n,fun:a,variables:l,context:s}=t,d=yield Oc.INSTANCE.simpleExecute(e,yield Oc.fetchFunctionDefinition(e,a,Fc.queryPage),{requestModels:Mc.generatorInternalRequestModels(),responseModels:Mc.generatorInternalResponseModels(),requestFields:o,responseFields:n,variables:l,context:s},r,i),{content:c,totalElements:u,totalPages:p}=d;return{content:c,totalElements:(0,$c.A)(u),totalPages:(0,$c.A)(p)}})}static relationQueryPage(e,t,i,r){return(0,I.sH)(this,void 0,void 0,function*(){const{queryWrapper:o,pagination:n}=Mc.buildQueryPageParameters(r),{requestFields:a,responseFields:l,fun:s,variables:d,context:c}=r,u=yield Oc.INSTANCE.simpleExecute(i,yield Oc.fetchFunctionDefinition(i,s,Fc.relationQueryPage),{requestModels:Mc.generatorInternalRequestModels(),responseModels:Mc.generatorInternalResponseModels(),requestFields:a,responseFields:l,variables:d,context:c},n,o,e.model,e.data,t),{content:p,totalElements:h,totalPages:g}=u;return{content:p,totalElements:(0,$c.A)(h),totalPages:(0,$c.A)(g)}})}static generatorInternalRequestModels(){return[Dc.QueryPagination,Dc.QueryWrapper,Dc.ResourceAddress]}static generatorInternalResponseModels(){return[Dc.QueryPageResult,Dc.ResourceAddress]}static buildQueryWrapperParameters(e){let t,{condition:i}=e;i instanceof L.kWY&&(t=i.getConditionBodyData(),i=i.toString());const r={rsql:i,queryData:t};return{queryWrapper:r}}static buildQueryPageParameters(e){const{queryWrapper:t}=Mc.buildQueryWrapperParameters(e),{currentPage:i,pageSize:r,sort:o,groupBy:n}=e,a={currentPage:i||1,size:r||-1};let l,s;return o&&(s=[],l=Array.isArray(o)?o:[o],l.forEach(e=>{s.push({field:e.sortField,direction:e.direction})}),s.length&&(a.sort={orders:s})),n&&(a.groupBy=n),{queryWrapper:t,pagination:a}}}Mc.INTERNAL_REQUEST_MODELS=Mc.generatorInternalRequestModels().map(e=>e.model),Mc.INTERNAL_RESPONSE_MODELS=Mc.generatorInternalResponseModels().map(e=>e.model);class Ic{execute(e,t,...i){return(0,I.sH)(this,void 0,void 0,function*(){let r=t.model;if(!r){const i=t.modelModel||e.namespace;r=yield ne.get(i)}if(!r)return void console.error("Invalid model definition.");let{requestFields:o}=t;const{autoFill:n,deep:a}=t;let l,s;if(o){n&&(o=yield this.autoFillModelFields(o,a||0));const t=yield this.collectionFunctionParameterModels(r,e,!0,a||0);l=t.requestModels,s=t.responseModels}else{o=[];const t=yield this.collectionFunctionParameterModels(r,e,!1,a||0);l=t.requestModels,s=t.responseModels}return Oc.INSTANCE.simpleExecute(r,e,Object.assign(Object.assign({},t),{requestModels:[...Mc.generatorInternalRequestModels(),...l||[],...t.requestModels||[]],responseModels:[...Mc.generatorInternalResponseModels(),...s||[],...t.responseModels||t.requestModels||[]],requestFields:o,responseFields:t.responseFields||o}),...i)})}executeByFun(e,t,i,...r){return(0,I.sH)(this,void 0,void 0,function*(){const o=yield J.get(e,t);if(o)return this.execute(o,i,...r);console.error(`Invalid function definition. namespace=${e}, fun=${t}`)})}executeByName(e,t,i,...r){return(0,I.sH)(this,void 0,void 0,function*(){const o=yield J.getByName(e,t);if(o)return this.execute(o,i,...r);console.error(`Invalid function definition. namespace=${e}, name=${t}`)})}simpleExecute(e,...t){return(0,I.sH)(this,void 0,void 0,function*(){return this.execute(e,{},...t)})}simpleExecuteByFun(e,t,...i){return(0,I.sH)(this,void 0,void 0,function*(){const r=yield J.get(e,t);if(r)return this.simpleExecute(r,...i);console.error(`Invalid function definition. namespace=${e}, fun=${t}`)})}simpleExecuteByName(e,t,...i){return(0,I.sH)(this,void 0,void 0,function*(){const r=yield J.getByName(e,t);if(r)return this.simpleExecute(r,...i);console.error(`Invalid function definition. namespace=${e}, name=${t}`)})}collectionFunctionParameterModels(e,t,i,r){return(0,I.sH)(this,void 0,void 0,function*(){const{argumentList:n,returnType:a}=t,l=[],s={[e.model]:Promise.resolve(e)};if(a){const{ttype:t,model:r}=a;if((0,o.pE)(t)&&r)if(Mc.INTERNAL_RESPONSE_MODELS.includes(r))Dc.QueryPageResult.model===r&&l.push(Promise.resolve(e));else if(!i||e.model!==r){const e=ne.get(r);s[r]=e,l.push(e)}}const d=[];for(const t of n){const{ttype:r,model:n}=t;if((0,o.pE)(r)&&n)if(Mc.INTERNAL_REQUEST_MODELS.includes(n))Dc.QueryPagination.model===n&&d.push(Promise.resolve(e));else if(!i||e.model!==n){let e=s[n];e?d.push(e):(e=ne.get(n),s[n]=e),d.push(e)}}return{requestModels:yield this.collectionParameterModels(yield Promise.all(d),r,e=>!Mc.INTERNAL_REQUEST_MODELS.includes(e)),responseModels:yield this.collectionParameterModels(yield Promise.all(l),r,e=>!Mc.INTERNAL_RESPONSE_MODELS.includes(e))}})}collectionParameterModels(e,t,i){return(0,I.sH)(this,void 0,void 0,function*(){const r=[],o=[];for(const n of e)if(n&&(r.push(n),!(t<=0)))for(const e of n.modelFields)if(g(e)){const{references:t}=e;i(t)&&o.push(ne.get(t))}return o.length>0&&r.push(...yield this.collectionParameterModels(yield Promise.all(o),t-1,e=>!r.find(t=>t.model===e)&&i(e))),r})}collectionModelFields(e,t){return(0,I.sH)(this,void 0,void 0,function*(){return Promise.all(e.modelFields.map(e=>(0,I.sH)(this,void 0,void 0,function*(){const i={field:e};if(t>0&&g(e)){const r=yield ne.get(e.references);r&&(i.referencesFields=yield this.collectionModelFields(r,t-1))}return i})))})}autoFillModelFields(e,t){return(0,I.sH)(this,void 0,void 0,function*(){return Promise.all(e.map(e=>(0,I.sH)(this,void 0,void 0,function*(){const{field:i,referencesFields:r}=e;if(t>0&&g(i)&&!r){const r=yield ne.get(i.references);r&&(e.referencesFields=yield this.collectionModelFields(r,t-1))}return e})))})}}Ic.INSTANCE=new Ic;class Lc{static execute(e,t,i){return(0,I.sH)(this,void 0,void 0,function*(){const{model:r,name:o,moduleName:n}=e,{requestFields:a,responseFields:l,variables:s,context:d}=i,c={[r]:a};Lc.fillRequestFieldsMap(c,a);const u={model:r,modelName:o,requestFields:c,responseFields:{[r]:l||a}},p=Oc.INSTANCE.buildGQLByFunction(Fc.updateOneWithRelationsFunction,u),h={data:t.records};return h.relations=Lc.generatorRelations(t.relationRecords),Lc.buildRequestParameters(u,p,h),p.request(n,s,d)})}static fillRequestFieldsMap(e,t,i){t.forEach(t=>{const{field:r,referencesFields:o}=t;if(m(r)&&(null===o||void 0===o?void 0:o.length)){let t;t=i?[i,r.data].join("#"):r.data;const n=[t,r.references].join("#");e[n]=o,Lc.fillRequestFieldsMap(e,o,t)}})}static generatorRelations(e){const t={};return e.forEach(e=>{t[e.getField().data]={field:e.getField(),create:e.getCreateRecords().map(e=>({data:e})),update:e.getUpdateRecords().map(e=>({data:e})),delete:e.getDeleteRecords().map(e=>({data:e}))}}),t}static buildRequestParameters(e,t,i){t.buildRequest(t=>{t.buildObjectParameter(Lc.DATA_PARAMETER_NAME,t=>{const{data:r,relations:o}=i,n=e.requestFields[e.model];Lc.buildDataRequestParameters(e,t,n,r),o&&Lc.buildRelationsRequestParameters(e,t,o)})})}static buildDataRequestParameters(e,t,i,r){t.buildObjectParameter(Lc.DATA_PARAMETER_NAME,t=>{Oc.INSTANCE.buildRequestParameters(e,t,i,r)})}static buildRelationsRequestParameters(e,t,i){t.buildObjectParameter(Lc.RELATIONS_PARAMETER_NAME,t=>{Object.entries(i).forEach(([i,r])=>{const{field:o}=r;t.buildObjectParameter(i,t=>{Lc.buildRelationValueRequestParameters(e,t,Lc.CREATE_PARAMETER_NAME,o,r.create),Lc.buildRelationValueRequestParameters(e,t,Lc.UPDATE_PARAMETER_NAME,o,r.update),Lc.buildRelationValueRequestParameters(e,t,Lc.DELETE_PARAMETER_NAME,o,r.delete)})})})}static buildRelationValueRequestParameters(e,t,i,r,o){var n,a;const l=[r.data,r.references].join("#");let s=e.requestFields[l];s||(s=null===(a=null===(n=r.referencesModel)||void 0===n?void 0:n.modelFields)||void 0===a?void 0:a.map(e=>({field:e}))),(null===s||void 0===s?void 0:s.length)&&t.buildArrayParameter(i,o,(t,i)=>{const{data:r,relations:o}=i;Lc.buildDataRequestParameters(e,t,s,r),o&&Lc.buildRelationsRequestParameters(e,t,o)})}}Lc.DATA_PARAMETER_NAME="data",Lc.RELATIONS_PARAMETER_NAME="relations",Lc.CREATE_PARAMETER_NAME="create",Lc.UPDATE_PARAMETER_NAME="update",Lc.DELETE_PARAMETER_NAME="delete";new P.kK({});const _c=new Map,Pc=new Map;q.register(()=>{_c.clear(),Pc.clear()});new P.kK({tabs:[]});const jc=Symbol("Action");let Vc;function Bc(){return Vc||(Vc=Hc(),Vc)}function Hc(){return(0,I.sH)(this,void 0,void 0,function*(){const e=yield ne.get("resource.ResourceLang"),t=null===e||void 0===e?void 0:e.modelFields.some(e=>"resourceDateFormat"===e.name);if(!t)return{resourceDateFormat:{},resourceTimeFormat:{}};const i=yield cr.getCode(),r=`{\n  resourceLangQuery {\n    queryOne(query: {code: "${i}"}) {\n      code\n      resourceDateFormat {\n        hyphen\n        slash\n        chinese\n        hyphenYearMonth\n        slashYearMonth\n        chineseYearMonth\n        hyphenMap\n        slashMap\n        chineseMap\n        hyphenYearMonthMap\n        slashYearMonthMap\n        chineseYearMonthMap\n      }\n      resourceTimeFormat {\n        apColonNormal\n        colonNormal\n        apColonShort\n        colonShort\n        apColonNormalMap\n        colonNormalMap\n        apColonShortMap\n        colonShortMap\n      }\n    }\n  }\n}\n`;return(yield _.LV.query("resource",r)).data.resourceLangQuery.queryOne||{}})}ei.onDelete(e=>{Nd.delete(e.target.handle,!1)})},78603:(e,t,i)=>{i.d(t,{Uo:()=>l,oy:()=>a});var r=i(20641);const o={isSelectItem:(0,r.EW)(()=>!1)},n=Symbol("ActionContextKey");function a(e){(0,r.Gt)(n,Object.assign(Object.assign({},o),e))}function l(){return(0,r.WQ)(n,o)}},79258:(e,t,i)=>{i.d(t,{A:()=>C});var r=i(20641),o=i(53751);const n={class:"form-media-widget-internal"},a=["onClick"],l={class:"upload-list-item-actions"},s={key:1,class:"media-video"},d=["src"],c=(0,r.Lk)("div",{class:"media-video-play"},[(0,r.Lk)("i",{class:"iconfont oinone-zantingbofang"})],-1),u=["src"];function p(e,t,i,p,h,g){const v=(0,r.g2)("eye-outlined"),m=(0,r.g2)("delete-outlined"),f=(0,r.g2)("preview-media");return(0,r.uX)(),(0,r.CE)("div",n,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.currentValue,(i,n)=>((0,r.uX)(),(0,r.CE)("div",{class:"form-media-widget-item",key:n,onClick:t=>e.onPreview(i)},[e.usePreview?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"form-media-widget-item-use-preview",onClick:t[1]||(t[1]=(0,o.D$)(()=>{},["stop"]))},[(0,r.Lk)("div",l,[(0,r.bF)(v,{onClick:t=>e.onPreview(i)},null,8,["onClick"]),(0,r.bF)(m,{onClick:t[0]||(t[0]=(0,o.D$)(t=>e.$emit("delete"),["stop"]))})])])):(0,r.Q3)("",!0),i.video?((0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("video",{src:i.src,alt:"",style:{width:"100%",height:"100%"}},null,8,d),c])):((0,r.uX)(),(0,r.CE)("img",{key:2,src:i.src,alt:"",style:{width:"100%",height:"100%"}},null,8,u))],8,a))),128)),(0,r.bF)(f,{modelValue:e.showReview,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showReview=t),type:e.review.video?"video":"image",source:e.review.src},null,8,["modelValue","type","source"])])}var h=i(50953),g=i(99475),v=i(99729),m=i(25873);const f=(0,r.pM)({props:["value","usePreview"],components:{PreviewMedia:m.FQ,EyeOutlined:g.A,DeleteOutlined:v.A},setup(e){const t=[".wmv",".asf",".asx",".rm",".rmvb",".avi",".dat",".mkv",".flv",".vob",".mp4",".m4v",".mpg",".mpe",".mpeg",".wmv",".mov",".ram",".swf",".flv",".3gp"],i=(0,h.KR)({}),o=(0,h.KR)(!1),n=(0,r.EW)(()=>(e.value||[]).map(e=>{const i=t.find(t=>e.endsWith(t));return{video:!!i,src:e}})),a=e=>{i.value=e,o.value=!0};return{currentValue:n,review:i,showReview:o,onPreview:a}}});var y=i(66262);const b=(0,y.A)(f,[["render",p]]),C=b},79685:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(15215),o=i(78422),n=i(54908),a=i(16022),l=i(2086),s=i(47444),d=i(97859),c=i(20903),u=i(98475);class p extends u.a_{constructor(){super(...arguments),this.defaultAllInvisible=!0}get cols(){let e=a.A5.toNumber(this.getDsl().cols);return(0,d.A)(e)&&(e=4),e}get formData(){var e;return(null===(e=this.activeRecords)||void 0===e?void 0:e[0])||{}}onSearch(){var e,t;null===(e=this.flushSearchParameters)||void 0===e||e.call(this,this.formData,this.searchConditions),null===(t=this.refreshCallChaining)||void 0===t||t.syncCall(!1)}onReset(){var e,t;return(0,r.sH)(this,void 0,void 0,function*(){const i=(0,c.A)(this.defaultSearchBody);let r=(0,c.A)(this.defaultSearchCondition);r||(r=[],this.defaultSearchCondition=[]),this.inline||(0,n.ZI)().push({segments:[{path:"page",parameters:{searchBody:void 0,currentPage:void 0},extra:{preserveParameter:!0}}]}),this.reloadActiveRecords(i),null===(e=this.flushSearchParameters)||void 0===e||e.call(this,i,r);const a={scope:o.jZd.searchReset,refreshParent:!1,currentPage:1};null===(t=this.refreshCallChaining)||void 0===t||t.syncCall(a)})}$$mounted(){var e,t,i;let o,n;super.$$mounted();let s=!1;if(!this.inline){const e=this.urlParameters;if(e){const{searchBody:t,searchConditions:i}=e;t&&(o=JSON.parse(decodeURIComponent(t))),i&&(n=JSON.parse(decodeURIComponent(i)))}}const{metadataRuntimeContext:d,rootRuntimeContext:u}=this,{model:p}=u,h=(null===(e=d.viewAction)||void 0===e?void 0:e.domain)||d.view.domain||(null===(t=d.viewTemplate)||void 0===t?void 0:t.domain);if(p&&h&&!o&&!n){const{searchBody:e,searchConditions:t}=(0,l.QM)(a.Gf.cast(p),h);o=e,n=t,s=!0}null===(i=this.mountedCallChaining)||void 0===i||i.hook(this.path,()=>(0,r.sH)(this,void 0,void 0,function*(){var e;let t=o;const i=this.initialContext||{},r=yield u.getInitialValue();!s&&t||(t=Object.assign(Object.assign({},r),t||{})),t=Object.assign(Object.assign({},i),t||{}),this.reloadActiveRecords(t),null===(e=this.flushSearchParameters)||void 0===e||e.call(this,t,n),this.defaultSearchBody=(0,c.A)(Object.assign(Object.assign({},i),r)),this.defaultSearchCondition=(0,c.A)(this.searchConditions)}),a.Wl.MAX_PRIORITY)}$$unmounted(){var e;super.$$unmounted(),null===(e=this.mountedCallChaining)||void 0===e||e.unhook(this.path)}}(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("cols")],p.prototype,"parentCols",void 0),(0,r.Cg)([s.x0.Provide(),s.x0.Reactive()],p.prototype,"cols",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],p.prototype,"searchBody",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],p.prototype,"searchConditions",void 0),(0,r.Cg)([s.x0.Method(),s.x0.Inject()],p.prototype,"flushSearchParameters",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],p.prototype,"mountedCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],p.prototype,"refreshCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],p.prototype,"formData",null),(0,r.Cg)([s.x0.Method()],p.prototype,"onSearch",null),(0,r.Cg)([s.x0.Method()],p.prototype,"onReset",null)},82499:(e,t,i)=>{i.d(t,{Nf:()=>c,Gk:()=>d,B2:()=>u,y3:()=>p,O4:()=>n,gd:()=>ye});const r=new Map,o=(e,t)=>{r.set(e,t)},n=e=>r.get(e),a={"font-size":"14px","font-size-lg":"16px","font-size-sm":"12px",padding:"24px",margin:"24px","row-gap":"24px","line-height":"18px","line-height-lg":"20px","line-height-sm":"16px","line-height-xs":"14px","line-height-xxs":"12px","border-radius":"4px","border-radius-lg":"8px","border-radius-sm":"2px","padding-lg":"24px","padding-md":"16px","padding-sm":"12px","padding-xs":"8px","padding-xxs":"4px","margin-lg":"24px","margin-md":"16px","margin-sm":"12px","margin-xs":"8px","margin-xxs":"4px",height:"40px","height-lg":"54px","height-sm":"32px","min-height":"32px","label-height":"30px","horizontal-label-height":"32px"},l={"font-size":"14px","font-size-lg":"16px","font-size-sm":"12px",padding:"16px",margin:"16px","row-gap":"16px","line-height":"18px","line-height-lg":"20px","line-height-sm":"16px","line-height-xs":"14px","line-height-xxs":"12px","border-radius":"4px","border-radius-lg":"8px","border-radius-sm":"2px","padding-lg":"16px","padding-md":"12px","padding-sm":"8px","padding-xs":"4px","padding-xxs":"2px","margin-lg":"16px","margin-md":"12px","margin-sm":"8px","margin-xs":"4px","margin-xxs":"2px",height:"32px","height-lg":"48px","height-sm":"32px","min-height":"32px","label-height":"28px","horizontal-label-height":"32px"},s={"font-size":"14px","font-size-lg":"16px","font-size-sm":"12px",padding:"12px",margin:"12px","row-gap":"12px","line-height":"18px","line-height-lg":"20px","line-height-sm":"12px","line-height-xs":"14px","line-height-xxs":"12px","border-radius":"4px","border-radius-lg":"8px","border-radius-sm":"2px","padding-lg":"12px","padding-md":"10px","padding-sm":"8px","padding-xs":"4px","padding-xxs":"2px","margin-lg":"12px","margin-md":"10px","margin-sm":"8px","margin-xs":"4px","margin-xxs":"2px",height:"24px","height-lg":"40px","height-sm":"24px","min-height":"24px","label-height":"24px","horizontal-label-height":"32px"};var d;(function(e){e["DEFAULT_LARGE"]="default-large",e["DEFAULT_MEDIUM"]="default-medium",e["DEFAULT_SMALL"]="default-small",e["DARK_LARGE"]="dark-large",e["DARK_MEDIUM"]="dark-medium",e["DARK_SMALL"]="dark-small"})(d||(d={}));const c="oio",u={};function p(e,t,i){const r=document.querySelector("head"),o=t?document.getElementsByClassName(t)[0]:document.documentElement;if(!o)throw new Error("挂载dom匹配失败");const a=Array.from(document.getElementsByTagName("style"))||[],l=[d.DEFAULT_MEDIUM,...e],s=l.map(e=>n(e)||{}).reduce((e,t)=>Object.assign(e,t),{});if(!Object.keys(s).length)return;const p="oio-theme",h=a.find(e=>e.getAttribute("theme-id")===p),g=Object.keys(s).map(e=>"[object Object]"===Object.prototype.toString.call(s[e])?(u[e]=s[e],""):`--${i||c}-${e}: ${s[e]};`).filter(e=>e),v=`:root{${g.join("")}}`;if(h)h.innerHTML=v;else{const e=document.createElement("style");[{key:"type",value:"text/css"},{key:"theme-id",value:p}].forEach(({key:t,value:i})=>e.setAttribute(t,i)),e.innerHTML=v,r.appendChild(e)}}const h={"border-width":`var(--${c}-border-width)`,"border-radius":`var(--${c}-border-radius)`,"line-height":"22px","counter-font-size":`var(--${c}-font-size-sm)`},g={"border-width":`var(--${c}-border-width)`,"border-radius":`var(--${c}-border-radius)`,"line-height":"22px","counter-font-size":`var(--${c}-font-size-sm)`},v={"thead-height":"54px","user-prefer-top":"12px","user-prefer-right":"22px"},m={"thead-height":"48px","user-prefer-top":"8px","user-prefer-right":"22px"},f={"thead-height":"40px","user-prefer-top":"4px","user-prefer-right":"22px"},y={padding:"0 16px","margin-top":"4px","item-height":"40px","item-margin-top":"4px","area-width":"263px","collapsed-popup-item-padding":"0 16px","collapsed-popup-margin-left":"-16px","collapsed-button-border-radius":"4px","collapsed-button-height":"40px","collapsed-button-line-height":"38px","designer-collapsed-button-height":"40px","designer-collapsed-button-line-height":"30px","designer-collapsed-button-border-radius":"4px","border-radius":"4px","selected-root-border-radius":"4px","selected-margin-top":"4px"},b={padding:"0 16px","margin-top":"8px","item-height":"32px","item-margin-top":"4px","area-width":"263px","collapsed-popup-item-padding":"0 16px","collapsed-popup-margin-left":"-16px","collapsed-button-border-radius":"4px","collapsed-button-height":"32px","collapsed-button-line-height":"30px","designer-collapsed-button-height":"32px","designer-collapsed-button-line-height":"30px","designer-collapsed-button-border-radius":"4px","border-radius":"4px","selected-root-border-radius":"4px","selected-margin-top":"4px"},C={padding:"0 16px","margin-top":"8px","item-height":"24px","item-margin-top":"4px","area-width":"263px","collapsed-popup-item-padding":"0 16px","collapsed-popup-margin-left":"-16px","collapsed-button-border-radius":"4px","collapsed-button-height":"24px","collapsed-button-line-height":"22px","designer-collapsed-button-height":"24px","designer-collapsed-button-line-height":"22px","designer-collapsed-button-border-radius":"4px","border-radius":"4px","selected-root-border-radius":"4px","selected-margin-top":"4px"},x={height:"32px","item-height":"30px","item-width":"32px"},w={height:"32px","item-height":"30px","item-width":"32px"},S={height:"24px","item-height":"22px","item-width":"24px"},T={"line-height":"22px"},E={"line-height":"22px"},A={"line-height":"16px"},k={"selection-height":"24px","selection-line-height":"22px"},D={"selection-height":"24px","selection-line-height":"22px"},F={"selection-height":"16px","selection-line-height":"16px"},R={"font-size":`var(--${c}-font-size-lg)`},O={"font-size":`var(--${c}-font-size)`},N={"font-size":`var(--${c}-font-size)`},$="app-switch",M={"background-color":`var(--${c}-primary-color)`,"border-color":"none","app-name-overflow":"unset","app-name-margin-right":"8px","app-name-caret-down-display":"unset","logo-color":`var(--${c}-primary-color)`,"designer-background-color":`var(--${c}-primary-color)`,"designer-logo-color":`var(--${c}-primary-color)`},I="button",L=`${c}-${I}`,_={"default-danger-background":`var(--${L}-background)`,"default-danger-border-width":`var(--${L}-border-width)`,"default-danger-border-style":`var(--${L}-border-style)`,"default-danger-border-color":`var(--${c}-error-color)`,"default-danger-border-radius":`var(--${L}-border-radius)`,"default-danger-outline":`var(--${c}-error-color-outline)`,"default-danger-shadow":"none","default-danger-text-color":`var(--${c}-error-color)`,"default-danger-background-active":`var(--${L}-default-danger-background)`,"default-danger-border-width-active":`var(--${L}-default-danger-border-width)`,"default-danger-border-style-active":`var(--${L}-default-danger-border-style)`,"default-danger-border-color-active":`var(--${c}-error-color-active)`,"default-danger-border-radius-active":`var(--${L}-default-danger-border-radius)`,"default-danger-outline-active":`var(--${L}-default-danger-outline)`,"default-danger-shadow-active":`var(--${L}-default-danger-shadow)`,"default-danger-text-color-active":`var(--${c}-error-color-active)`,"default-danger-background-focus":`var(--${L}-default-danger-background)`,"default-danger-border-width-focus":`var(--${L}-default-danger-border-width)`,"default-danger-border-style-focus":`var(--${L}-default-danger-border-style)`,"default-danger-border-color-focus":`var(--${c}-error-color-focus)`,"default-danger-border-radius-focus":`var(--${L}-default-danger-border-radius)`,"default-danger-outline-focus":`var(--${L}-default-danger-outline)`,"default-danger-shadow-focus":`var(--${L}-default-danger-shadow)`,"default-danger-text-color-focus":`var(--${c}-error-color-focus)`,"default-danger-background-hover":`var(--${L}-default-danger-background)`,"default-danger-border-width-hover":`var(--${L}-default-danger-border-width)`,"default-danger-border-style-hover":`var(--${L}-default-danger-border-style)`,"default-danger-border-color-hover":`var(--${c}-error-color-hover)`,"default-danger-border-radius-hover":`var(--${L}-default-danger-border-radius)`,"default-danger-outline-hover":`var(--${L}-default-danger-outline)`,"default-danger-shadow-hover":`var(--${L}-default-danger-shadow)`,"default-danger-text-color-hover":`var(--${c}-error-color-hover)`,"default-danger-background-visited":`var(--${L}-default-danger-background)`,"default-danger-border-width-visited":`var(--${L}-default-danger-border-width)`,"default-danger-border-style-visited":`var(--${L}-default-danger-border-style)`,"default-danger-border-color-visited":`var(--${L}-default-danger-border-color)`,"default-danger-border-radius-visited":`var(--${L}-default-danger-border-radius)`,"default-danger-outline-visited":`var(--${L}-default-danger-outline)`,"default-danger-shadow-visited":`var(--${L}-default-danger-shadow)`,"default-danger-text-color-visited":`var(--${L}-default-danger-text-color)`},P={"primary-danger-background":`var(--${c}-error-color)`,"primary-danger-border-width":`var(--${L}-primary-border-width)`,"primary-danger-border-style":`var(--${L}-primary-border-style)`,"primary-danger-border-color":`var(--${c}-error-color)`,"primary-danger-border-radius":`var(--${L}-primary-border-radius)`,"primary-danger-outline":`var(--${c}-error-color)`,"primary-danger-shadow":"none","primary-danger-text-color":"#ffffff","primary-danger-background-active":`var(--${c}-error-color-active)`,"primary-danger-border-width-active":`var(--${L}-primary-danger-border-width)`,"primary-danger-border-style-active":`var(--${L}-primary-danger-border-style)`,"primary-danger-border-color-active":`var(--${c}-error-color-active)`,"primary-danger-border-radius-active":`var(--${L}-primary-danger-border-radius)`,"primary-danger-outline-active":`var(--${L}-primary-danger-outline)`,"primary-danger-shadow-active":`var(--${L}-primary-danger-shadow)`,"primary-danger-text-color-active":`var(--${L}-primary-danger-text-color)`,"primary-danger-background-focus":`var(--${c}-error-color-focus)`,"primary-danger-border-width-focus":`var(--${L}-primary-danger-border-width)`,"primary-danger-border-style-focus":`var(--${L}-primary-danger-border-style)`,"primary-danger-border-color-focus":`var(--${c}-error-color-focus)`,"primary-danger-border-radius-focus":`var(--${L}-primary-danger-border-radius)`,"primary-danger-outline-focus":`var(--${L}-primary-danger-outline)`,"primary-danger-shadow-focus":`var(--${L}-primary-danger-shadow)`,"primary-danger-text-color-focus":`var(--${L}-primary-danger-text-color)`,"primary-danger-background-hover":`var(--${c}-error-color-hover)`,"primary-danger-border-width-hover":`var(--${L}-primary-danger-border-width)`,"primary-danger-border-style-hover":`var(--${L}-primary-danger-border-style)`,"primary-danger-border-color-hover":`var(--${c}-error-color-hover)`,"primary-danger-border-radius-hover":`var(--${L}-primary-danger-border-radius)`,"primary-danger-outline-hover":`var(--${L}-primary-danger-outline)`,"primary-danger-shadow-hover":`var(--${L}-primary-danger-shadow)`,"primary-danger-text-color-hover":`var(--${L}-primary-danger-text-color)`,"primary-danger-background-visited":`var(--${L}-primary-danger-background)`,"primary-danger-border-width-visited":`var(--${L}-primary-danger-border-width)`,"primary-danger-border-style-visited":`var(--${L}-primary-danger-border-style)`,"primary-danger-border-color-visited":`var(--${L}-primary-danger-border-color)`,"primary-danger-border-radius-visited":`var(--${L}-primary-danger-border-radius)`,"primary-danger-outline-visited":`var(--${L}-primary-danger-outline)`,"primary-danger-shadow-visited":`var(--${L}-primary-danger-shadow)`,"primary-danger-text-color-visited":`var(--${L}-primary-danger-text-color)`},j={"link-danger-background":`var(--${L}-link-background)`,"link-danger-border-width":`var(--${L}-link-border-width)`,"link-danger-border-style":`var(--${L}-link-border-style)`,"link-danger-border-color":`var(--${L}-link-border-color)`,"link-danger-border-radius":`var(--${L}-link-border-radius)`,"link-danger-outline":"none","link-danger-shadow":"none","link-danger-text-color":`var(--${c}-error-color)`,"link-danger-background-active":`var(--${L}-link-danger-color)`,"link-danger-border-width-active":`var(--${L}-link-danger-border-width)`,"link-danger-border-style-active":`var(--${L}-link-danger-border-style)`,"link-danger-border-color-active":`var(--${L}-link-danger-color)`,"link-danger-border-radius-active":`var(--${L}-link-danger-border-radius)`,"link-danger-outline-active":`var(--${L}-link-danger-outline)`,"link-danger-shadow-active":`var(--${L}-link-danger-shadow)`,"link-danger-text-color-active":`var(--${c}-error-color-active)`,"link-danger-background-focus":`var(--${L}-link-danger-color)`,"link-danger-border-width-focus":`var(--${L}-link-danger-border-width)`,"link-danger-border-style-focus":`var(--${L}-link-danger-border-style)`,"link-danger-border-color-focus":`var(--${L}-link-danger-color)`,"link-danger-border-radius-focus":`var(--${L}-link-danger-border-radius)`,"link-danger-outline-focus":`var(--${L}-link-danger-outline)`,"link-danger-shadow-focus":`var(--${L}-link-danger-shadow)`,"link-danger-text-color-focus":`var(--${c}-error-color-focus)`,"link-danger-background-hover":`var(--${L}-link-danger-color)`,"link-danger-border-width-hover":`var(--${L}-link-danger-border-width)`,"link-danger-border-style-hover":`var(--${L}-link-danger-border-style)`,"link-danger-border-color-hover":`var(--${L}-link-danger-color)`,"link-danger-border-radius-hover":`var(--${L}-link-danger-border-radius)`,"link-danger-outline-hover":`var(--${L}-link-danger-outline)`,"link-danger-shadow-hover":`var(--${L}-link-danger-shadow)`,"link-danger-text-color-hover":`var(--${c}-error-color-hover)`,"link-danger-background-visited":`var(--${L}-link-danger-background)`,"link-danger-border-width-visited":`var(--${L}-link-danger-border-width)`,"link-danger-border-style-visited":`var(--${L}-link-danger-border-style)`,"link-danger-border-color-visited":`var(--${L}-link-danger-border-color)`,"link-danger-border-radius-visited":`var(--${L}-link-danger-border-radius)`,"link-danger-outline-visited":`var(--${L}-link-danger-outline)`,"link-danger-shadow-visited":`var(--${L}-link-danger-shadow)`,"link-danger-text-color-visited":`var(--${L}-link-danger-text-color)`},V={"default-info-background":`var(--${L}-background)`,"default-info-border-width":`var(--${L}-border-width)`,"default-info-border-style":`var(--${L}-border-style)`,"default-info-border-color":`var(--${c}-info-color)`,"default-info-border-radius":`var(--${L}-border-radius)`,"default-info-outline":"none","default-info-shadow":"none","default-info-text-color":`var(--${c}-info-color)`,"default-info-background-active":`var(--${L}-default-info-background)`,"default-info-border-width-active":`var(--${L}-default-info-border-width)`,"default-info-border-style-active":`var(--${L}-default-info-border-style)`,"default-info-border-color-active":`var(--${c}-info-color-active)`,"default-info-border-radius-active":`var(--${L}-default-info-border-radius)`,"default-info-outline-active":`var(--${L}-default-info-outline)`,"default-info-shadow-active":`var(--${L}-default-info-shadow)`,"default-info-text-color-active":`var(--${c}-info-color-active)`,"default-info-background-focus":`var(--${L}-default-info-background)`,"default-info-border-width-focus":`var(--${L}-default-info-border-width)`,"default-info-border-style-focus":`var(--${L}-default-info-border-style)`,"default-info-border-color-focus":`var(--${c}-info-color-focus)`,"default-info-border-radius-focus":`var(--${L}-default-info-border-radius)`,"default-info-outline-focus":`var(--${L}-default-info-outline)`,"default-info-shadow-focus":`var(--${L}-default-info-shadow)`,"default-info-text-color-focus":`var(--${c}-info-color-focus)`,"default-info-background-hover":`var(--${L}-default-info-background)`,"default-info-border-width-hover":`var(--${L}-default-info-border-width)`,"default-info-border-style-hover":`var(--${L}-default-info-border-style)`,"default-info-border-color-hover":`var(--${c}-info-color-hover)`,"default-info-border-radius-hover":`var(--${L}-default-info-border-radius)`,"default-info-outline-hover":`var(--${L}-default-info-outline)`,"default-info-shadow-hover":`var(--${L}-default-info-shadow)`,"default-info-text-color-hover":`var(--${c}-info-color-hover)`,"default-info-background-visited":`var(--${L}-default-info-background)`,"default-info-border-width-visited":`var(--${L}-default-info-border-width)`,"default-info-border-style-visited":`var(--${L}-default-info-border-style)`,"default-info-border-color-visited":`var(--${L}-default-info-border-color)`,"default-info-border-radius-visited":`var(--${L}-default-info-border-radius)`,"default-info-outline-visited":`var(--${L}-default-info-outline)`,"default-info-shadow-visited":`var(--${L}-default-info-shadow)`,"default-info-text-color-visited":`var(--${L}-default-info-text-color)`},B={"primary-info-background":`var(--${c}-info-color)`,"primary-info-border-width":`var(--${L}-primary-border-width)`,"primary-info-border-style":`var(--${L}-primary-border-style)`,"primary-info-border-color":`var(--${c}-info-color)`,"primary-info-border-radius":`var(--${L}-primary-border-radius)`,"primary-info-outline":"none","primary-info-shadow":"none","primary-info-text-color":"#ffffff","primary-info-background-active":`var(--${c}-info-color-active)`,"primary-info-border-width-active":`var(--${L}-primary-info-border-width)`,"primary-info-border-style-active":`var(--${L}-primary-info-border-style)`,"primary-info-border-color-active":`var(--${c}-info-color-active)`,"primary-info-border-radius-active":`var(--${L}-primary-info-border-radius)`,"primary-info-outline-active":`var(--${L}-primary-info-outline)`,"primary-info-shadow-active":`var(--${L}-primary-info-shadow)`,"primary-info-text-color-active":`var(--${L}-primary-info-text-color)`,"primary-info-background-focus":`var(--${c}-info-color-focus)`,"primary-info-border-width-focus":`var(--${L}-primary-info-border-width)`,"primary-info-border-style-focus":`var(--${L}-primary-info-border-style)`,"primary-info-border-color-focus":`var(--${c}-info-color-focus)`,"primary-info-border-radius-focus":`var(--${L}-primary-info-border-radius)`,"primary-info-outline-focus":`var(--${L}-primary-info-outline)`,"primary-info-shadow-focus":`var(--${L}-primary-info-shadow)`,"primary-info-text-color-focus":`var(--${L}-primary-info-text-color)`,"primary-info-background-hover":`var(--${c}-info-color-hover)`,"primary-info-border-width-hover":`var(--${L}-primary-info-border-width)`,"primary-info-border-style-hover":`var(--${L}-primary-info-border-style)`,"primary-info-border-color-hover":`var(--${c}-info-color-hover)`,"primary-info-border-radius-hover":`var(--${L}-primary-info-border-radius)`,"primary-info-outline-hover":`var(--${L}-primary-info-outline)`,"primary-info-shadow-hover":`var(--${L}-primary-info-shadow)`,"primary-info-text-color-hover":`var(--${L}-primary-info-text-color)`,"primary-info-background-visited":`var(--${L}-primary-info-background)`,"primary-info-border-width-visited":`var(--${L}-primary-info-border-width)`,"primary-info-border-style-visited":`var(--${L}-primary-info-border-style)`,"primary-info-border-color-visited":`var(--${L}-primary-info-border-color)`,"primary-info-border-radius-visited":`var(--${L}-primary-info-border-radius)`,"primary-info-outline-visited":`var(--${L}-primary-info-outline)`,"primary-info-shadow-visited":`var(--${L}-primary-info-shadow)`,"primary-info-text-color-visited":`var(--${L}-primary-info-text-color)`},H={"link-info-background":`var(--${L}-link-background)`,"link-info-border-width":`var(--${L}-link-border-width)`,"link-info-border-style":`var(--${L}-link-border-style)`,"link-info-border-color":`var(--${L}-link-border-color)`,"link-info-border-radius":`var(--${L}-link-border-radius)`,"link-info-outline":"none","link-info-shadow":"none","link-info-text-color":`var(--${c}-info-color)`,"link-info-background-active":`var(--${L}-link-info-color)`,"link-info-border-width-active":`var(--${L}-link-info-border-width)`,"link-info-border-style-active":`var(--${L}-link-info-border-style)`,"link-info-border-color-active":`var(--${L}-link-info-color)`,"link-info-border-radius-active":`var(--${L}-link-info-border-radius)`,"link-info-outline-active":`var(--${L}-link-info-outline)`,"link-info-shadow-active":`var(--${L}-link-info-shadow)`,"link-info-text-color-active":`var(--${c}-info-color-active)`,"link-info-background-focus":`var(--${L}-link-info-color)`,"link-info-border-width-focus":`var(--${L}-link-info-border-width)`,"link-info-border-style-focus":`var(--${L}-link-info-border-style)`,"link-info-border-color-focus":`var(--${L}-link-info-color)`,"link-info-border-radius-focus":`var(--${L}-link-info-border-radius)`,"link-info-outline-focus":`var(--${L}-link-info-outline)`,"link-info-shadow-focus":`var(--${L}-link-info-shadow)`,"link-info-text-color-focus":`var(--${c}-info-color-focus)`,"link-info-background-hover":`var(--${L}-link-info-color)`,"link-info-border-width-hover":`var(--${L}-link-info-border-width)`,"link-info-border-style-hover":`var(--${L}-link-info-border-style)`,"link-info-border-color-hover":`var(--${L}-link-info-color)`,"link-info-border-radius-hover":`var(--${L}-link-info-border-radius)`,"link-info-outline-hover":`var(--${L}-link-info-outline)`,"link-info-shadow-hover":`var(--${L}-link-info-shadow)`,"link-info-text-color-hover":`var(--${c}-info-color-hover)`,"link-info-background-visited":`var(--${L}-link-info-background)`,"link-info-border-width-visited":`var(--${L}-link-info-border-width)`,"link-info-border-style-visited":`var(--${L}-link-info-border-style)`,"link-info-border-color-visited":`var(--${L}-link-info-border-color)`,"link-info-border-radius-visited":`var(--${L}-link-info-border-radius)`,"link-info-outline-visited":`var(--${L}-link-info-outline)`,"link-info-shadow-visited":`var(--${L}-link-info-shadow)`,"link-info-text-color-visited":`var(--${L}-link-info-text-color)`},W={background:"#ffffff","border-width":`var(--${c}-border-width)`,"border-style":`var(--${c}-border-style)`,"border-color":"#d9d9d9","border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"background-active":`var(--${L}-background)`,"border-width-active":`var(--${L}-border-width)`,"border-style-active":`var(--${L}-border-style)`,"border-color-active":`var(--${L}-border-color)`,"border-radius-active":`var(--${L}-border-radius)`,"outline-active":`var(--${L}-outline)`,"shadow-active":`var(--${L}-shadow)`,"text-color-active":`var(--${c}-primary-color-active)`,"background-focus":`var(--${L}-background)`,"border-width-focus":`var(--${L}-border-width)`,"border-style-focus":`var(--${L}-border-style)`,"border-color-focus":`var(--${L}-border-color)`,"border-radius-focus":`var(--${L}-border-radius)`,"outline-focus":`var(--${L}-outline)`,"shadow-focus":`var(--${L}-shadow)`,"text-color-focus":`var(--${c}-primary-color-focus)`,"background-hover":`var(--${L}-background)`,"border-width-hover":`var(--${L}-border-width)`,"border-style-hover":`var(--${L}-border-style)`,"border-color-hover":`var(--${L}-border-color)`,"border-radius-hover":`var(--${L}-border-radius)`,"outline-hover":`var(--${L}-outline)`,"shadow-hover":`var(--${L}-shadow)`,"text-color-hover":`var(--${c}-primary-color-hover)`,"background-visited":`var(--${L}-background)`,"border-width-visited":`var(--${L}-border-width)`,"border-style-visited":`var(--${L}-border-style)`,"border-color-visited":`var(--${L}-border-color)`,"border-radius-visited":`var(--${L}-border-radius)`,"outline-visited":`var(--${L}-outline)`,"shadow-visited":`var(--${L}-shadow)`,"text-color-visited":`var(--${L}-text-color)`},U={"primary-background":`var(--${c}-primary-color)`,"primary-border-width":`var(--${c}-border-width)`,"primary-border-style":`var(--${c}-border-style)`,"primary-border-color":`var(--${c}-primary-color)`,"primary-border-radius":`var(--${c}-border-radius)`,"primary-outline":`var(--${c}-primary-color-outline)`,"primary-shadow":"none","primary-text-color":"#ffffff","primary-background-active":`var(--${c}-primary-color-active)`,"primary-border-width-active":`var(--${L}-primary-border-width)`,"primary-border-style-active":`var(--${L}-primary-border-style)`,"primary-border-color-active":`var(--${c}-primary-color-active)`,"primary-border-radius-active":`var(--${L}-primary-border-radius)`,"primary-outline-active":`var(--${L}-primary-outline)`,"primary-shadow-active":`var(--${L}-primary-shadow)`,"primary-text-color-active":`var(--${L}-primary-text-color)`,"primary-background-focus":`var(--${c}-primary-color-focus)`,"primary-border-width-focus":`var(--${L}-primary-border-width)`,"primary-border-style-focus":`var(--${L}-primary-border-style)`,"primary-border-color-focus":`var(--${c}-primary-color-focus)`,"primary-border-radius-focus":`var(--${L}-primary-border-radius)`,"primary-outline-focus":`var(--${L}-primary-outline)`,"primary-shadow-focus":`var(--${L}-primary-shadow)`,"primary-text-color-focus":`var(--${L}-primary-text-color)`,"primary-background-hover":`var(--${c}-primary-color-hover)`,"primary-border-width-hover":`var(--${L}-primary-border-width)`,"primary-border-style-hover":`var(--${L}-primary-border-style)`,"primary-border-color-hover":`var(--${c}-primary-color-hover)`,"primary-border-radius-hover":`var(--${L}-primary-border-radius)`,"primary-outline-hover":`var(--${L}-primary-outline)`,"primary-shadow-hover":`var(--${L}-primary-shadow)`,"primary-text-color-hover":`var(--${L}-primary-text-color)`,"primary-background-visited":`var(--${L}-primary-background)`,"primary-border-width-visited":`var(--${L}-primary-border-width)`,"primary-border-style-visited":`var(--${L}-primary-border-style)`,"primary-border-color-visited":`var(--${L}-primary-border-color)`,"primary-border-radius-visited":`var(--${L}-primary-border-radius)`,"primary-outline-visited":`var(--${L}-primary-outline)`,"primary-shadow-visited":`var(--${L}-primary-shadow)`,"primary-text-color-visited":`var(--${L}-primary-text-color)`},q={"link-background":"transparent","link-border-width":"none","link-border-style":"none","link-border-color":"none","link-border-radius":"none","link-outline":"none","link-shadow":"none","link-text-color":`var(--${c}-primary-color)`,"link-background-active":`var(--${L}-link-background)`,"link-border-width-active":`var(--${L}-link-border-width)`,"link-border-style-active":`var(--${L}-link-border-style)`,"link-border-color-active":`var(--${L}-link-border-color)`,"link-border-radius-active":`var(--${L}-link-border-radius)`,"link-outline-active":`var(--${L}-link-outline)`,"link-shadow-active":`var(--${L}-link-shadow)`,"link-text-color-active":`var(--${L}-link-text-color)`,"link-background-focus":`var(--${L}-link-background)`,"link-border-width-focus":`var(--${L}-link-border-width)`,"link-border-style-focus":`var(--${L}-link-border-style)`,"link-border-color-focus":`var(--${L}-link-border-color)`,"link-border-radius-focus":`var(--${L}-link-border-radius)`,"link-outline-focus":`var(--${L}-link-outline)`,"link-shadow-focus":`var(--${L}-link-shadow)`,"link-text-color-focus":`var(--${L}-link-text-color)`,"link-background-hover":`var(--${L}-link-background)`,"link-border-width-hover":`var(--${L}-link-border-width)`,"link-border-style-hover":`var(--${L}-link-border-style)`,"link-border-color-hover":`var(--${L}-link-border-color)`,"link-border-radius-hover":`var(--${L}-link-border-radius)`,"link-outline-hover":`var(--${L}-link-outline)`,"link-shadow-hover":`var(--${L}-link-shadow)`,"link-text-color-hover":`var(--${L}-link-text-color)`,"link-background-visited":`var(--${L}-link-background)`,"link-border-width-visited":`var(--${L}-link-border-width)`,"link-border-style-visited":`var(--${L}-link-border-style)`,"link-border-color-visited":`var(--${L}-link-border-color)`,"link-border-radius-visited":`var(--${L}-link-border-radius)`,"link-outline-visited":`var(--${L}-link-outline)`,"link-shadow-visited":`var(--${L}-link-shadow)`,"link-text-color-visited":`var(--${L}-link-text-color)`},z={"default-success-background":`var(--${L}-background)`,"default-success-border-width":`var(--${L}-border-width)`,"default-success-border-style":`var(--${L}-border-style)`,"default-success-border-color":`var(--${c}-success-color)`,"default-success-border-radius":`var(--${L}-border-radius)`,"default-success-outline":"none","default-success-shadow":"none","default-success-text-color":`var(--${c}-success-color)`,"default-success-background-active":`var(--${L}-default-success-background)`,"default-success-border-width-active":`var(--${L}-default-success-border-width)`,"default-success-border-style-active":`var(--${L}-default-success-border-style)`,"default-success-border-color-active":`var(--${c}-success-color-active)`,"default-success-border-radius-active":`var(--${L}-default-success-border-radius)`,"default-success-outline-active":`var(--${L}-default-success-outline)`,"default-success-shadow-active":`var(--${L}-default-success-shadow)`,"default-success-text-color-active":`var(--${c}-success-color-active)`,"default-success-background-focus":`var(--${L}-default-success-background)`,"default-success-border-width-focus":`var(--${L}-default-success-border-width)`,"default-success-border-style-focus":`var(--${L}-default-success-border-style)`,"default-success-border-color-focus":`var(--${c}-success-color-focus)`,"default-success-border-radius-focus":`var(--${L}-default-success-border-radius)`,"default-success-outline-focus":`var(--${L}-default-success-outline)`,"default-success-shadow-focus":`var(--${L}-default-success-shadow)`,"default-success-text-color-focus":`var(--${c}-success-color-focus)`,"default-success-background-hover":`var(--${L}-default-success-background)`,"default-success-border-width-hover":`var(--${L}-default-success-border-width)`,"default-success-border-style-hover":`var(--${L}-default-success-border-style)`,"default-success-border-color-hover":`var(--${c}-success-color-hover)`,"default-success-border-radius-hover":`var(--${L}-default-success-border-radius)`,"default-success-outline-hover":`var(--${L}-default-success-outline)`,"default-success-shadow-hover":`var(--${L}-default-success-shadow)`,"default-success-text-color-hover":`var(--${c}-success-color-hover)`,"default-success-background-visited":`var(--${L}-default-success-background)`,"default-success-border-width-visited":`var(--${L}-default-success-border-width)`,"default-success-border-style-visited":`var(--${L}-default-success-border-style)`,"default-success-border-color-visited":`var(--${L}-default-success-border-color)`,"default-success-border-radius-visited":`var(--${L}-default-success-border-radius)`,"default-success-outline-visited":`var(--${L}-default-success-outline)`,"default-success-shadow-visited":`var(--${L}-default-success-shadow)`,"default-success-text-color-visited":`var(--${L}-default-success-text-color)`},G={"primary-success-background":`var(--${c}-success-color)`,"primary-success-border-width":`var(--${L}-primary-border-width)`,"primary-success-border-style":`var(--${L}-primary-border-style)`,"primary-success-border-color":`var(--${c}-success-color)`,"primary-success-border-radius":`var(--${L}-primary-border-radius)`,"primary-success-outline":"none","primary-success-shadow":"none","primary-success-text-color":"#ffffff","primary-success-background-active":`var(--${c}-success-color-active)`,"primary-success-border-width-active":`var(--${L}-primary-success-border-width)`,"primary-success-border-style-active":`var(--${L}-primary-success-border-style)`,"primary-success-border-color-active":`var(--${c}-success-color-active)`,"primary-success-border-radius-active":`var(--${L}-primary-success-border-radius)`,"primary-success-outline-active":`var(--${L}-primary-success-outline)`,"primary-success-shadow-active":`var(--${L}-primary-success-shadow)`,"primary-success-text-color-active":`var(--${L}-primary-success-text-color)`,"primary-success-background-focus":`var(--${c}-success-color-focus)`,"primary-success-border-width-focus":`var(--${L}-primary-success-border-width)`,"primary-success-border-style-focus":`var(--${L}-primary-success-border-style)`,"primary-success-border-color-focus":`var(--${c}-success-color-focus)`,"primary-success-border-radius-focus":`var(--${L}-primary-success-border-radius)`,"primary-success-outline-focus":`var(--${L}-primary-success-outline)`,"primary-success-shadow-focus":`var(--${L}-primary-success-shadow)`,"primary-success-text-color-focus":`var(--${L}-primary-success-text-color)`,"primary-success-background-hover":`var(--${c}-success-color-hover)`,"primary-success-border-width-hover":`var(--${L}-primary-success-border-width)`,"primary-success-border-style-hover":`var(--${L}-primary-success-border-style)`,"primary-success-border-color-hover":`var(--${c}-success-color-hover)`,"primary-success-border-radius-hover":`var(--${L}-primary-success-border-radius)`,"primary-success-outline-hover":`var(--${L}-primary-success-outline)`,"primary-success-shadow-hover":`var(--${L}-primary-success-shadow)`,"primary-success-text-color-hover":`var(--${L}-primary-success-text-color)`,"primary-success-background-visited":`var(--${L}-primary-success-background)`,"primary-success-border-width-visited":`var(--${L}-primary-success-border-width)`,"primary-success-border-style-visited":`var(--${L}-primary-success-border-style)`,"primary-success-border-color-visited":`var(--${L}-primary-success-border-color)`,"primary-success-border-radius-visited":`var(--${L}-primary-success-border-radius)`,"primary-success-outline-visited":`var(--${L}-primary-success-outline)`,"primary-success-shadow-visited":`var(--${L}-primary-success-shadow)`,"primary-success-text-color-visited":`var(--${L}-primary-success-text-color)`},K={"link-success-background":`var(--${L}-link-background)`,"link-success-border-width":`var(--${L}-link-border-width)`,"link-success-border-style":`var(--${L}-link-border-style)`,"link-success-border-color":`var(--${L}-link-border-color)`,"link-success-border-radius":`var(--${L}-link-border-radius)`,"link-success-outline":"none","link-success-shadow":"none","link-success-text-color":`var(--${c}-success-color)`,"link-success-background-active":`var(--${L}-link-success-color)`,"link-success-border-width-active":`var(--${L}-link-success-border-width)`,"link-success-border-style-active":`var(--${L}-link-success-border-style)`,"link-success-border-color-active":`var(--${L}-link-success-color)`,"link-success-border-radius-active":`var(--${L}-link-success-border-radius)`,"link-success-outline-active":`var(--${L}-link-success-outline)`,"link-success-shadow-active":`var(--${L}-link-success-shadow)`,"link-success-text-color-active":`var(--${c}-success-color-active)`,"link-success-background-focus":`var(--${L}-link-success-color)`,"link-success-border-width-focus":`var(--${L}-link-success-border-width)`,"link-success-border-style-focus":`var(--${L}-link-success-border-style)`,"link-success-border-color-focus":`var(--${L}-link-success-color)`,"link-success-border-radius-focus":`var(--${L}-link-success-border-radius)`,"link-success-outline-focus":`var(--${L}-link-success-outline)`,"link-success-shadow-focus":`var(--${L}-link-success-shadow)`,"link-success-text-color-focus":`var(--${c}-success-color-focus)`,"link-success-background-hover":`var(--${L}-link-success-color)`,"link-success-border-width-hover":`var(--${L}-link-success-border-width)`,"link-success-border-style-hover":`var(--${L}-link-success-border-style)`,"link-success-border-color-hover":`var(--${L}-link-success-color)`,"link-success-border-radius-hover":`var(--${L}-link-success-border-radius)`,"link-success-outline-hover":`var(--${L}-link-success-outline)`,"link-success-shadow-hover":`var(--${L}-link-success-shadow)`,"link-success-text-color-hover":`var(--${c}-success-color-hover)`,"link-success-background-visited":`var(--${L}-link-success-background)`,"link-success-border-width-visited":`var(--${L}-link-success-border-width)`,"link-success-border-style-visited":`var(--${L}-link-success-border-style)`,"link-success-border-color-visited":`var(--${L}-link-success-border-color)`,"link-success-border-radius-visited":`var(--${L}-link-success-border-radius)`,"link-success-outline-visited":`var(--${L}-link-success-outline)`,"link-success-shadow-visited":`var(--${L}-link-success-shadow)`,"link-success-text-color-visited":`var(--${L}-link-success-text-color)`},X={"default-warning-background":`var(--${L}-background)`,"default-warning-border-width":`var(--${L}-border-width)`,"default-warning-border-style":`var(--${L}-border-style)`,"default-warning-border-color":`var(--${c}-warning-color)`,"default-warning-border-radius":`var(--${L}-border-radius)`,"default-warning-outline":"none","default-warning-shadow":"none","default-warning-text-color":`var(--${c}-warning-color)`,"default-warning-background-active":`var(--${L}-default-warning-background)`,"default-warning-border-width-active":`var(--${L}-default-warning-border-width)`,"default-warning-border-style-active":`var(--${L}-default-warning-border-style)`,"default-warning-border-color-active":`var(--${c}-warning-color-active)`,"default-warning-border-radius-active":`var(--${L}-default-warning-border-radius)`,"default-warning-outline-active":`var(--${L}-default-warning-outline)`,"default-warning-shadow-active":`var(--${L}-default-warning-shadow)`,"default-warning-text-color-active":`var(--${c}-warning-color-active)`,"default-warning-background-focus":`var(--${L}-default-warning-background)`,"default-warning-border-width-focus":`var(--${L}-default-warning-border-width)`,"default-warning-border-style-focus":`var(--${L}-default-warning-border-style)`,"default-warning-border-color-focus":`var(--${c}-warning-color-focus)`,"default-warning-border-radius-focus":`var(--${L}-default-warning-border-radius)`,"default-warning-outline-focus":`var(--${L}-default-warning-outline)`,"default-warning-shadow-focus":`var(--${L}-default-warning-shadow)`,"default-warning-text-color-focus":`var(--${c}-warning-color-focus)`,"default-warning-background-hover":`var(--${L}-default-warning-background)`,"default-warning-border-width-hover":`var(--${L}-default-warning-border-width)`,"default-warning-border-style-hover":`var(--${L}-default-warning-border-style)`,"default-warning-border-color-hover":`var(--${c}-warning-color-hover)`,"default-warning-border-radius-hover":`var(--${L}-default-warning-border-radius)`,"default-warning-outline-hover":`var(--${L}-default-warning-outline)`,"default-warning-shadow-hover":`var(--${L}-default-warning-shadow)`,"default-warning-text-color-hover":`var(--${c}-warning-color-hover)`,"default-warning-background-visited":`var(--${L}-default-warning-background)`,"default-warning-border-width-visited":`var(--${L}-default-warning-border-width)`,"default-warning-border-style-visited":`var(--${L}-default-warning-border-style)`,"default-warning-border-color-visited":`var(--${L}-default-warning-border-color)`,"default-warning-border-radius-visited":`var(--${L}-default-warning-border-radius)`,"default-warning-outline-visited":`var(--${L}-default-warning-outline)`,"default-warning-shadow-visited":`var(--${L}-default-warning-shadow)`,"default-warning-text-color-visited":`var(--${L}-default-warning-text-color)`},Q={"primary-warning-background":`var(--${c}-warning-color)`,"primary-warning-border-width":`var(--${L}-primary-border-width)`,"primary-warning-border-style":`var(--${L}-primary-border-style)`,"primary-warning-border-color":`var(--${c}-warning-color)`,"primary-warning-border-radius":`var(--${L}-primary-border-radius)`,"primary-warning-outline":"none","primary-warning-shadow":"none","primary-warning-text-color":"#ffffff","primary-warning-background-active":`var(--${c}-warning-color-active)`,"primary-warning-border-width-active":`var(--${L}-primary-warning-border-width)`,"primary-warning-border-style-active":`var(--${L}-primary-warning-border-style)`,"primary-warning-border-color-active":`var(--${c}-warning-color-active)`,"primary-warning-border-radius-active":`var(--${L}-primary-warning-border-radius)`,"primary-warning-outline-active":`var(--${L}-primary-warning-outline)`,"primary-warning-shadow-active":`var(--${L}-primary-warning-shadow)`,"primary-warning-text-color-active":`var(--${L}-primary-warning-text-color)`,"primary-warning-background-focus":`var(--${c}-warning-color-focus)`,"primary-warning-border-width-focus":`var(--${L}-primary-warning-border-width)`,"primary-warning-border-style-focus":`var(--${L}-primary-warning-border-style)`,"primary-warning-border-color-focus":`var(--${c}-warning-color-focus)`,"primary-warning-border-radius-focus":`var(--${L}-primary-warning-border-radius)`,"primary-warning-outline-focus":`var(--${L}-primary-warning-outline)`,"primary-warning-shadow-focus":`var(--${L}-primary-warning-shadow)`,"primary-warning-text-color-focus":`var(--${L}-primary-warning-text-color)`,"primary-warning-background-hover":`var(--${c}-warning-color-hover)`,"primary-warning-border-width-hover":`var(--${L}-primary-warning-border-width)`,"primary-warning-border-style-hover":`var(--${L}-primary-warning-border-style)`,"primary-warning-border-color-hover":`var(--${c}-warning-color-hover)`,"primary-warning-border-radius-hover":`var(--${L}-primary-warning-border-radius)`,"primary-warning-outline-hover":`var(--${L}-primary-warning-outline)`,"primary-warning-shadow-hover":`var(--${L}-primary-warning-shadow)`,"primary-warning-text-color-hover":`var(--${L}-primary-warning-text-color)`,"primary-warning-background-visited":`var(--${L}-primary-warning-background)`,"primary-warning-border-width-visited":`var(--${L}-primary-warning-border-width)`,"primary-warning-border-style-visited":`var(--${L}-primary-warning-border-style)`,"primary-warning-border-color-visited":`var(--${L}-primary-warning-border-color)`,"primary-warning-border-radius-visited":`var(--${L}-primary-warning-border-radius)`,"primary-warning-outline-visited":`var(--${L}-primary-warning-outline)`,"primary-warning-shadow-visited":`var(--${L}-primary-warning-shadow)`,"primary-warning-text-color-visited":`var(--${L}-primary-warning-text-color)`},Y={"link-warning-background":`var(--${L}-link-background)`,"link-warning-border-width":`var(--${L}-link-border-width)`,"link-warning-border-style":`var(--${L}-link-border-style)`,"link-warning-border-color":`var(--${L}-link-border-color)`,"link-warning-border-radius":`var(--${L}-link-border-radius)`,"link-warning-outline":"none","link-warning-shadow":"none","link-warning-text-color":`var(--${c}-warning-color)`,"link-warning-background-active":`var(--${L}-link-warning-color)`,"link-warning-border-width-active":`var(--${L}-link-warning-border-width)`,"link-warning-border-style-active":`var(--${L}-link-warning-border-style)`,"link-warning-border-color-active":`var(--${L}-link-warning-color)`,"link-warning-border-radius-active":`var(--${L}-link-warning-border-radius)`,"link-warning-outline-active":`var(--${L}-link-warning-outline)`,"link-warning-shadow-active":`var(--${L}-link-warning-shadow)`,"link-warning-text-color-active":`var(--${c}-warning-color-active)`,"link-warning-background-focus":`var(--${L}-link-warning-color)`,"link-warning-border-width-focus":`var(--${L}-link-warning-border-width)`,"link-warning-border-style-focus":`var(--${L}-link-warning-border-style)`,"link-warning-border-color-focus":`var(--${L}-link-warning-color)`,"link-warning-border-radius-focus":`var(--${L}-link-warning-border-radius)`,"link-warning-outline-focus":`var(--${L}-link-warning-outline)`,"link-warning-shadow-focus":`var(--${L}-link-warning-shadow)`,"link-warning-text-color-focus":`var(--${c}-warning-color-focus)`,"link-warning-background-hover":`var(--${L}-link-warning-color)`,"link-warning-border-width-hover":`var(--${L}-link-warning-border-width)`,"link-warning-border-style-hover":`var(--${L}-link-warning-border-style)`,"link-warning-border-color-hover":`var(--${L}-link-warning-color)`,"link-warning-border-radius-hover":`var(--${L}-link-warning-border-radius)`,"link-warning-outline-hover":`var(--${L}-link-warning-outline)`,"link-warning-shadow-hover":`var(--${L}-link-warning-shadow)`,"link-warning-text-color-hover":`var(--${c}-warning-color-hover)`,"link-warning-background-visited":`var(--${L}-link-warning-background)`,"link-warning-border-width-visited":`var(--${L}-link-warning-border-width)`,"link-warning-border-style-visited":`var(--${L}-link-warning-border-style)`,"link-warning-border-color-visited":`var(--${L}-link-warning-border-color)`,"link-warning-border-radius-visited":`var(--${L}-link-warning-border-radius)`,"link-warning-outline-visited":`var(--${L}-link-warning-outline)`,"link-warning-shadow-visited":`var(--${L}-link-warning-shadow)`,"link-warning-text-color-visited":`var(--${L}-link-warning-text-color)`},J=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},W),_),V),z),X),U),P),B),G),Q),q),j),H),K),Y),Z="checkbox",ee={color:`var(--${c}-text-color)`,background:`var(--${c}-background)`,"border-color":`var(--${c}-border-color)`,"disabled-border-color":`var(--${c}-disabled-border-color)`},te="datetime",ie={padding:"4px 12px"},re="drawer",oe={"width-small":"20%","width-medium":"40%","width-large":"80%","height-small":"40vh","height-medium":"60vh","height-large":"90vh"},ne="dropdown",ae={"background-color":"var(--oio-background)","border-color":"var(--oio-border-color)","box-shadow":"-2px 2px 6px 0px rgba(136, 156, 176, 0.2)",color:"var(--oio-text-color)","color-hover":"var(--oio-hover-text-color)","color-disabled":"var(--oio-disabled-color)","color-disabled-hover":"var(--oio-disabled-color)","item-background-color-hover":"var(--oio-hover-background-color)","item-background-color-disabled-hover":"transparent"},le="form-item",se={config:{readonlyShowPlaceholder:!1,disabledShowPlaceholder:!1}},de="header",ce={"border-bottom":"1px solid rgba(0, 0, 0, 0.06)",color:"rgba(0,0,0,0.65)"},ue="input",pe=`${c}-${ue}`,he={background:"#ffffff","background-color":"#ffffff","border-style":`var(--${c}-border-style)`,"border-color":`var(--${c}-border-color)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"counter-background":"#ffffff","counter-color":"rgba(0, 0, 0, 0.25)","background-hover":`var(--${pe}-background)`,"border-width-hover":`var(--${pe}-border-width)`,"border-style-hover":`var(--${pe}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${pe}-border-radius)`,"outline-hover":`var(--${pe}-outline)`,"shadow-hover":`var(--${pe}-shadow)`,"text-color-hover":`var(--${pe}-text-color)`,"background-focus":`var(--${pe}-background)`,"border-width-focus":`var(--${pe}-border-width)`,"border-style-focus":`var(--${pe}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${pe}-border-radius)`,"outline-focus":`var(--${pe}-outline)`,"shadow-focus":`0px 0px 0px 2px rgba(var(--${c}-primary-color-rgb),0.1);`,"text-color-focus":`var(--${pe}-text-color)`,"readonly-border-color":`var(--${c}-readonly-border-color)`,"error-border-color":"#ff4d4f","disabled-border-color":`var(--${c}-disabled-border-color)`,"addon-background":"#F7F7F7","addon-color":" rgba(0,0,0,0.65)","tag-background":"rgba(3,93,255, 0.1)","clear-background":"#fff","clear-color":"rgba(0,0,0,.25)"},ge={"primary-color-rgb":"3, 93, 255","primary-color":"#035DFF","primary-color-hover":"#3F84FF","primary-color-focus":"#3F84FF","primary-color-active":"#024CDE","primary-color-outline":"#035DFF","success-color":"#6DD400","success-color-hover":"#90DE3D","success-color-focus":"#90DE3D","success-color-active":"#6BBB00","success-color-outline":"#6DD400","warning-color":"#F7B500","warning-color-hover":"#F9C73D","warning-color-focus":"#F9C73D","warning-color-active":"#D99200","warning-color-outline":"#F7B500","info-color":"#8c8c8c","info-color-hover":"#999999","info-color-focus":"#999999","info-color-active":"#666666","info-color-outline":"#8c8c8c","error-color":"#E02020","error-color-hover":"#E75555","error-color-focus":"#E75555","error-color-active":"#C51C26","error-color-outline":"#E02020","notification-info":"#035DFF","notification-error":"#FF4D4F","notification-success":"#52C41A","notification-warning":"#FAAD14",background:"#1F2935","body-background":"#15232E","search-background":"#1F2935","header-background":"#1F2935","main-background":"#1F2935","footer-background":"#1F2935","menu-background":"#1F2935","multi-tabs-background":"#F3F7FA","placeholder-color":"rgba(255,255,255,0.25)","hover-background-color":"rgba(255, 255, 255, 0.1)","hover-text-color":"var(--oio-text-color)","font-family":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol','Noto Color Emoji';","text-color":"rgba(255,255,255,0.65)","text-color-rgb":"38, 38, 38","text-color-secondary":"rgba(255,255,255,0.45)","text-color-three":"rgba(255,255,255,0.25)","font-weight-thick":`var(--${c}-font-weight-bold)`,"font-weight":"400","font-weight-lighter":"lighter","font-weight-bold":"bold","font-weight-bolder":"bolder","readonly-color":"rgba(255,255,255,0.65)","readonly-bg":"#1D2E3C","readonly-active-bg":"#1D2E3C","readonly-border-color":"#333e4c","disabled-color":"rgba(255,255,255,0.25)","disabled-bg":"#1D2E3C","disabled-active-bg":"#1D2E3C","disabled-border-color":"#333e4c","border-color":"#333e4c","border-color-danger":"#E02020","border-width":"1px","border-style":"solid","icon-color":"rgba(255,255,255,0.65)","default-icon-color":"rgba(255,255,255,0.65)","normal-icon-filter":`var(--${c}-icon-filter)`,"icon-filter":"invert(0.7) hue-rotate(180deg) brightness(0.5)","icon-filter-opacity":"0.4","close-icon-background":"#333E4C","group-border-width":"0px","box-shadow-size":"0px","box-shadow":"0px 0px 6px 0px rgba(0,0,0,0.2)","addon-color-pick-background":`var(--${c}-primary-color)`,"addon-color-pick-readonly-background":"rgba(92,104,127, 0.25)","addon-color-pick-border-color":"#ffffff","addon-color-pick-icon-color":"#ffffff","addon-color-pick-dropdown-background":`var(--${c}-background)`,"addon-color-pick-dropdown-border-color":`var(--${c}-border-color)`,"user-dropdown-icon-color":`var(--${c}-text-color)`,"tag-select-background":"rgba(255,255,255,0.1)","spin-background":"rgba(31,41,53,0.7)","gemini-mini-icon-color":"rgba(3,93,255, 0.2)"},ve={"primary-color-rgb":"3, 93, 255","primary-color":"#035DFF","primary-color-hover":"#3F84FF","primary-color-focus":"#3F84FF","primary-color-active":"#024CDE","primary-color-outline":"#035DFF","success-color":"#6DD400","success-color-hover":"#90DE3D","success-color-focus":"#90DE3D","success-color-active":"#6BBB00","success-color-outline":"#6DD400","warning-color":"#F7B500","warning-color-hover":"#F9C73D","warning-color-focus":"#F9C73D","warning-color-active":"#D99200","warning-color-outline":"#F7B500","info-color":"#8c8c8c","info-color-hover":"#999999","info-color-focus":"#999999","info-color-active":"#666666","info-color-outline":"#8c8c8c","error-color-rgb":"224, 32, 32","error-color":"#E02020","error-color-hover":"#E75555","error-color-focus":"#E75555","error-color-active":"#C51C26","error-color-outline":"#E02020","notification-info":"#035DFF","notification-error":"#FF4D4F","notification-success":"#52C41A","notification-warning":"#FAAD14",background:"#ffffff","body-background":"#F3F7FA","search-background":"#ffffff","header-background":"#ffffff","main-background":"#ffffff","footer-background":"#ffffff","menu-background":"#ffffff","placeholder-color":"rgba(0,0,0,0.25)","hover-background-color":"rgba(3, 93, 255, 0.1)","hover-text-color":"var(--oio-primary-color)","font-family":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol','Noto Color Emoji';","text-color":"rgba(0,0,0,0.85)","text-color-rgb":"38, 38, 38","text-color-secondary":"rgba(0,0,0,0.65)","text-color-three":"rgba(0,0,0,0.45)","font-weight-thick":`var(--${c}-font-weight-bold)`,"font-weight":"400","font-weight-lighter":"lighter","font-weight-bold":"bold","font-weight-bolder":"bolder","readonly-color":"rgba(0,0,0,0.85)","readonly-bg":"#F7F7F7","readonly-active-bg":"#F7F7F7","readonly-border-color":"rgba(217,217,217,1)","disabled-color":"rgba(0, 0, 0, 0.25)","disabled-bg":"#F7F7F7","disabled-active-bg":"#F7F7F7","disabled-border-color":"rgba(217,217,217,1)","border-color":"#e3e7ee","border-color-danger":"#E02020","border-width":"1px","border-style":"solid","icon-color":"rgba(0, 0, 0, 0.25)","default-icon-color":"rgba(0, 0, 0, 0.25)","normal-icon-filter":"","icon-filter":"invert(0.7) hue-rotate(180deg) brightness(0.5)","icon-filter-opacity":"0.2","close-icon-background":"#f1f1f1","group-border-width":"1px","box-shadow-size":"6px","box-shadow":"rgba(136, 156, 176, 0.1) 0px 2px 4px 0px","addon-color-pick-background":"#ffffff","addon-color-pick-readonly-background":`var(--${c}-disabled-bg)`,"addon-color-pick-border-color":`var(--${c}-border-color)`,"addon-color-pick-icon-color":"#909399","addon-color-pick-dropdown-background":"#ffffff","addon-color-pick-dropdown-border-color":"#e4e7ed","user-dropdown-icon-color":"rgba(0, 0, 0, 0.25)","tag-select-background":"#f1f1f1","spin-background":"","gemini-mini-icon-color":"#cfe1ff"};let me="default";function fe(e){me=e}function ye(e){var t;const i=(null===(t=e.sideBarTheme)||void 0===t?void 0:t.mode)||"default";fe(i.toLocaleLowerCase()),it(),mi()}const be={"main-background":ve["main-background"],"body-background":ve["main-background"],"border-color":ve["border-color"],"text-color":ve["text-color"],"icon-color":ve["icon-color"],"text-color-rgb":ve["text-color-rgb"],"primary-color":ve["primary-color"],"hover-background-color":ve["hover-background-color"],"text-color-secondary":ve["text-color-secondary"],"active-parent-title-color":"rgba(0, 0, 0, 0.85)","collapsed-button-background-color":"rgba(38, 38, 38, 0.05)","designer-font-color":"#333333","select-background":ve["main-background"],"placeholder-color":ve["placeholder-color"],"select-color":ve["text-color"],"select-dropdown-background":ve["main-background"],"select-dropdown-selected-color":ve["primary-color"],"select-dropdown-color":ve["text-color-secondary"],"select-dropdown-selected":ve["hover-background-color"],"select-dropdown-box-shadow":"0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08),0 9px 28px 8px rgba(0, 0, 0, 0.05)"},Ce={"main-background":ge["main-background"],"body-background":ge["body-background"],"border-color":ge["border-color"],"text-color":ge["text-color"],"icon-color":ge["icon-color"],"text-color-rgb":ge["text-color-rgb"],"primary-color":"#fff","hover-background-color":ge["hover-background-color"],"text-color-secondary":ge["text-color-secondary"],"active-parent-title-color":"#fff","collapsed-button-background-color":"rgba(38, 38, 38, 0.05)","designer-font-color":"#333333","select-background":ge["body-background"],"placeholder-color":ge["placeholder-color"],"select-color":ge["text-color"],"select-dropdown-background":ge["main-background"],"select-dropdown-selected-color":"#fff","select-dropdown-color":ge["text-color"],"select-dropdown-selected":ge["hover-background-color"],"select-dropdown-box-shadow":"0px 0px 6px 0px rgba(0,0,0,0.2)"},xe=()=>{const e="dark"===me?Ce:be;return{"background-color":e["main-background"],"border-color":e["border-color"],"font-color":e["text-color"],"expand-background-color":e["main-background"],"default-icon-color":e["icon-color"],"default-expand-icon-color":`rgba(${e["text-color-rgb"]}, 0.75)`,"search-background-color":e["body-background"],"select-dropdown-background":e["select-dropdown-background"],"select-dropdown-color":e["select-dropdown-color"],"select-dropdown-selected-color":e["select-dropdown-selected-color"],"select-dropdown-selected":e["select-dropdown-selected"],"select-dropdown-box-shadow":e["select-dropdown-box-shadow"],"select-color":e["select-color"],"select-background":e["select-background"],"select-placeholder-color":e["placeholder-color"],"selected-icon-color":e["primary-color"],"selected-background-color":e["hover-background-color"],"selected-title-color":e["primary-color"],"selected-title-hover-color":e["primary-color"],"selected-root-title-color":e["primary-color"],"selected-root-icon-color":e["primary-color"],"selected-root-background-color":e["hover-background-color"],"hover-background-color":e["hover-background-color"],"root-title-hover-color":e["primary-color"],"root-title-hover-icon-color":e["primary-color"],"active-parent-title-color":e["active-parent-title-color"],"search-display":"unset","search-background":e["body-background"],"collapsed-button-hover-background-color":e["hover-background-color"],"collapsed-button-background-color":e["collapsed-button-background-color"],"collapsed-button-title-color":e["text-color-secondary"],"designer-font-color":e["designer-font-color"],"designer-background-color":e["main-background"],"designer-collapsed-button-hover-background-color":e["hover-background-color"],"designer-collapsed-button-background-color":e["collapsed-button-background-color"]}},we="menu",Se=()=>xe(),Te="modal",Ee={color:"rgba(0, 0, 0, 0.85)","width-small":"560px","width-medium":"890px","width-large":"1200px","height-small":"40vh","height-medium":"60vh","height-large":"90vh"},Ae="multi-tabs",ke={background:"#e9e9e9",color:`var(--${c}-text-color-secondary)`,"active-color":`var(--${c}-primary-color)`,"active-font-weight":500,"active-background":"#ffffff","icon-color":"rgba(0, 0, 0, 0.2)","hover-background-color":"#f6f6f6","background-color-inline":"#ffffff","color-inline":`var(--${c}-text-color)`,"active-color-inline":`var(--${c}-primary-color)`,"active-background-color-inline":`var(--${c}-body-background)`,"hover-background-color-inline":`var(--${c}-body-background)`,"background-color-theme1":"#f6f6f6","background-color-active-theme1":"#ffffff","border-color-theme1":"#e2e6e9","background-color-theme1-inline":"#ffffff","background-color-active-theme1-inline":`rgba(var(--${c}-primary-color-rgb), 0.2)`,"active-color-active-theme1-inline":`var(--${c}-primary-color)`,"icon-color-active-theme1-inline":`var(--${c}-multi-tabs-icon-color)`,"background-color-theme2":"#ffffff","border-color-theme2":"#e2e6e9","background-color-theme3":"#f6f6f6","background-color-active-theme3":`rgba(var(--${c}-primary-color-rgb), 0.2)`,"active-color-active-theme3":`var(--${c}-primary-color)`,"icon-color-active-theme3":`var(--${c}-multi-tabs-icon-color)`,"background-color-theme3-inline":"#ffffff","background-color-theme4-inline":"#ffffff","background-color-active-theme4-inline":`rgba(var(--${c}-primary-color-rgb), 0.2)`,"active-color-active-theme4-inline":`var(--${c}-primary-color)`,"icon-color-active-theme4-inline":`var(--${c}-multi-tabs-icon-color)`},De="pagination",Fe={background:`var(--${c}-background)`,"border-color":`var(--${c}-border-color)`,"text-color":`var(--${c}-text-color-secondary)`},Re="popconfirm",Oe={background:"var(--oio-background)",color:"var(--oio-text-color)",borderColor:"var(--oio-border-color)",arrowBackground:"ar(--oio-background)"},Ne="rich-text",$e={"textarea-bg-color":`var(--${c}-background)`,"textarea-color":`var(--${c}-text-color)`,"textarea-border-color":`var(--${c}-border-color)`,"textarea-slight-border-color":`var(--${c}-border-color)`,"textarea-slight-color":`var(--${c}-text-color)`,"textarea-slight-bg-color":`var(--${c}-body-background)`,"textarea-selected-border-color":"#b4d5ff","textarea-handler-bg-color":"#4290f7","toolbar-color":`var(--${c}-select-dropdown-color)`,"toolbar-bg-color":`var(--${c}-select-dropdown-background)`,"toolbar-active-color":`var(--${c}-select-dropdown-selected-color)`,"toolbar-active-bg-color":`var(--${c}-select-dropdown-selected)`,"toolbar-color-active-bg-color":`var(--${c}-primary-color)`,"toolbar-disabled-color":`var(--${c}-disabled-color)`,"toolbar-border-color":`var(--${c}-border-color)`,"modal-button-bg-color":"#fafafa","modal-button-border-color":"#d9d9d9","button-tooltip-bg-color":"#333","button-tooltip-color":"#fff"},Me="scrollbar",Ie={"thumb-background-color":"#d9d9d9","thumb-background-color-hover":"#cccccc"},Le="select",_e=`${c}-${Le}`,Pe={background:"#ffffff","border-width":`var(--${c}-border-width)`,"border-style":`var(--${c}-border-style)`,"border-color":`var(--${c}-border-color)`,"border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"counter-background":"#ffffff","counter-color":"rgba(0, 0, 0, 0.25)","counter-font-size":`var(--${c}-font-size-sm)`,"background-hover":`var(--${_e}-background)`,"border-width-hover":`var(--${_e}-border-width)`,"border-style-hover":`var(--${_e}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${_e}-border-radius)`,"outline-hover":`var(--${_e}-outline)`,"shadow-hover":`var(--${_e}-shadow)`,"text-color-hover":`var(--${_e}-text-color)`,"background-focus":`var(--${_e}-background)`,"border-width-focus":`var(--${_e}-border-width)`,"border-style-focus":`var(--${_e}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${_e}-border-radius)`,"outline-focus":`var(--${_e}-outline)`,"shadow-focus":"0px 0px 0px 2px rgba(3,93,255,0.1);","text-color-focus":`var(--${_e}-text-color)`,"readonly-border-color":`var(--${c}-readonly-border-color)`,"item-readonly-bg":`var(--${c}-primary-color-rgb)`,"item-readonly-color":`var(--${c}-primary-color)`,"item-readonly-radius":`var(--${c}-border-radius)`,"dropdown-background":"#fff","dropdown-selected-color":"var(--oio-primary-color)","dropdown-color":"var(--oio-text-color-secondary)","dropdown-selected":"rgba(var(--oio-primary-color-rgb), 0.1)","dropdown-box-shadow":"0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08),0 9px 28px 8px rgba(0, 0, 0, 0.05)"},je="switch",Ve={background:"rgba(0, 0, 0, 0.25)"},Be="table",He={"thead-bg":"#f7f8fa","body-bg":"#ffffff","text-color":"rgba(0, 0, 0, 0.65)","title-color":"rgba(0, 0, 0, 0.85)","title-font-weight":500,"title-sort-icon-size":"11px","tr-height":`var(--${c}-height-lg)`,"tr-stripe-bg":"#fafafa","tr-checked-bg":`rgba(var(--${c}-primary-color-rgb), 0.1)`,"tr-hover-bg":`rgba(var(--${c}-primary-color-rgb), 0.1)`,"row-border":"rgba(243, 243, 243, 1)","row-body-border":"#e8eaec",config:{border:"full",stripe:!0,isCurrent:!0,isHover:!0}},We="tabs",Ue="textarea",qe=`${c}-${Ue}`,ze={background:"#ffffff","border-width":`var(--${c}-border-width)`,"border-style":`var(--${c}-border-style)`,"border-color":`var(--${c}-border-color)`,"border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"background-hover":`var(--${qe}-background)`,"border-width-hover":`var(--${qe}-border-width)`,"border-style-hover":`var(--${qe}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${qe}-border-radius)`,"outline-hover":`var(--${qe}-outline)`,"shadow-hover":`var(--${qe}-shadow)`,"text-color-hover":`var(--${qe}-text-color)`,"background-focus":`var(--${qe}-background)`,"border-width-focus":`var(--${qe}-border-width)`,"border-style-focus":`var(--${qe}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${qe}-border-radius)`,"outline-focus":`var(--${qe}-outline)`,"shadow-focus":`0px 0px 0px 2px rgba(var(--${c}-primary-color-rgb),0.1);`,"text-color-focus":`var(--${qe}-text-color)`},Ge="transfer",Ke={"background-color":"#f7f7f7","header-border-color":"#e3e7ee"},Xe="tree-select",Qe="upload",Ye=`${c}-${Qe}`,Je={background:"#ffffff","border-width":`var(--${c}-border-width)`,"border-style":"dashed","border-color":`var(--${c}-border-color)`,"border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"background-hover":`var(--${Ye}-background)`,"border-width-hover":`var(--${Ye}-border-width)`,"border-style-hover":`var(--${Ye}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${Ye}-border-radius)`,"outline-hover":`var(--${Ye}-outline)`,"shadow-hover":`var(--${Ye}-shadow)`,"text-color-hover":`var(--${Ye}-text-color)`,"background-focus":`var(--${Ye}-background)`,"border-width-focus":`var(--${Ye}-border-width)`,"border-style-focus":`var(--${Ye}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${Ye}-border-radius)`,"outline-focus":`var(--${Ye}-outline)`,"shadow-focus":`var(--${Ye}-shadow)`,"text-color-focus":`var(--${Ye}-text-color)`},Ze=()=>({[Ae]:{large:Object.assign({},ke),medium:Object.assign({},ke),small:Object.assign({},ke)},[I]:{large:J,medium:J,small:J},[ue]:{large:Object.assign(Object.assign({},he),h),medium:Object.assign(Object.assign({},he),g),small:Object.assign(Object.assign({},he),g)},[Z]:{large:Object.assign({},ee),medium:Object.assign({},ee),small:Object.assign({},ee)},[te]:{large:Object.assign({},ie),medium:Object.assign({},ie),small:Object.assign({},ie)},[je]:{large:Object.assign({},Ve),medium:Object.assign({},Ve),small:Object.assign({},Ve)},[De]:{large:Object.assign(Object.assign({},Fe),x),medium:Object.assign(Object.assign({},Fe),w),small:Object.assign(Object.assign({},Fe),S)},[Le]:{large:Object.assign(Object.assign({},Pe),T),medium:Object.assign(Object.assign({},Pe),E),small:Object.assign(Object.assign({},Pe),A)},[Ue]:{large:ze,medium:ze,small:ze},[Qe]:{large:Je,medium:Je,small:Je},[we]:{large:Object.assign(Object.assign({},Se()),y),medium:Object.assign(Object.assign({},Se()),b),small:Object.assign(Object.assign({},Se()),C)},[$]:{large:M,medium:M,small:M},[Be]:{large:Object.assign(Object.assign({},He),v),medium:Object.assign(Object.assign({},He),m),small:Object.assign(Object.assign({},He),f)},[de]:{large:ce,medium:ce,small:ce},[Te]:{large:Ee,medium:Ee,small:Ee},[Re]:{large:Oe,medium:Oe,small:Oe},[Xe]:{large:k,medium:D,small:F},[Ge]:{large:Ke,medium:Ke,small:Ke},[Me]:{large:Ie,medium:Ie,small:Ie},[re]:{large:oe,medium:oe,small:oe},[ne]:{large:ae,medium:ae,small:ae},[le]:{large:se,medium:se,small:se},[Ne]:{large:$e,medium:$e,small:$e},[We]:{large:R,medium:O,small:N}});function et(e){return function(t,i){Object.entries(i).forEach(([i,r])=>{e[`${t}-${i}`]=r})}}function tt(e){const t="large"===e?a:"medium"===e?l:s,i=Object.assign(Object.assign({},ve),t),r=et(i),n=Ze();Object.entries(n).forEach(([t,i])=>{i[e]&&r(t,i[e])}),o(`default-${e}`,i)}function it(){tt("large"),tt("medium"),tt("small")}const rt="app-switch",ot={"background-color":"#333E4C","border-color":"var(--oio-border-color)","app-name-overflow":"unset","app-name-margin-right":"8px","app-name-caret-down-display":"unset","logo-color":`var(--${c}-primary-color)`,"designer-background-color":`var(--${c}-primary-color)`,"designer-logo-color":`var(--${c}-primary-color)`},nt="button",at=`${c}-${nt}`,lt={"default-danger-background":`var(--${at}-background)`,"default-danger-border-width":`var(--${at}-border-width)`,"default-danger-border-style":`var(--${at}-border-style)`,"default-danger-border-color":`var(--${c}-error-color)`,"default-danger-border-radius":`var(--${at}-border-radius)`,"default-danger-outline":`var(--${c}-error-color-outline)`,"default-danger-shadow":"none","default-danger-text-color":`var(--${c}-error-color)`,"default-danger-background-active":`var(--${at}-default-danger-background)`,"default-danger-border-width-active":`var(--${at}-default-danger-border-width)`,"default-danger-border-style-active":`var(--${at}-default-danger-border-style)`,"default-danger-border-color-active":`var(--${c}-error-color-active)`,"default-danger-border-radius-active":`var(--${at}-default-danger-border-radius)`,"default-danger-outline-active":`var(--${at}-default-danger-outline)`,"default-danger-shadow-active":`var(--${at}-default-danger-shadow)`,"default-danger-text-color-active":`var(--${c}-error-color-active)`,"default-danger-background-focus":`var(--${at}-default-danger-background)`,"default-danger-border-width-focus":`var(--${at}-default-danger-border-width)`,"default-danger-border-style-focus":`var(--${at}-default-danger-border-style)`,"default-danger-border-color-focus":`var(--${c}-error-color-focus)`,"default-danger-border-radius-focus":`var(--${at}-default-danger-border-radius)`,"default-danger-outline-focus":`var(--${at}-default-danger-outline)`,"default-danger-shadow-focus":`var(--${at}-default-danger-shadow)`,"default-danger-text-color-focus":`var(--${c}-error-color-focus)`,"default-danger-background-hover":`var(--${at}-default-danger-background)`,"default-danger-border-width-hover":`var(--${at}-default-danger-border-width)`,"default-danger-border-style-hover":`var(--${at}-default-danger-border-style)`,"default-danger-border-color-hover":`var(--${c}-error-color-hover)`,"default-danger-border-radius-hover":`var(--${at}-default-danger-border-radius)`,"default-danger-outline-hover":`var(--${at}-default-danger-outline)`,"default-danger-shadow-hover":`var(--${at}-default-danger-shadow)`,"default-danger-text-color-hover":`var(--${c}-error-color-hover)`,"default-danger-background-visited":`var(--${at}-default-danger-background)`,"default-danger-border-width-visited":`var(--${at}-default-danger-border-width)`,"default-danger-border-style-visited":`var(--${at}-default-danger-border-style)`,"default-danger-border-color-visited":`var(--${at}-default-danger-border-color)`,"default-danger-border-radius-visited":`var(--${at}-default-danger-border-radius)`,"default-danger-outline-visited":`var(--${at}-default-danger-outline)`,"default-danger-shadow-visited":`var(--${at}-default-danger-shadow)`,"default-danger-text-color-visited":`var(--${at}-default-danger-text-color)`},st={"primary-danger-background":`var(--${c}-error-color)`,"primary-danger-border-width":`var(--${at}-primary-border-width)`,"primary-danger-border-style":`var(--${at}-primary-border-style)`,"primary-danger-border-color":`var(--${c}-error-color)`,"primary-danger-border-radius":`var(--${at}-primary-border-radius)`,"primary-danger-outline":`var(--${c}-error-color)`,"primary-danger-shadow":"none","primary-danger-text-color":"#ffffff","primary-danger-background-active":`var(--${c}-error-color-active)`,"primary-danger-border-width-active":`var(--${at}-primary-danger-border-width)`,"primary-danger-border-style-active":`var(--${at}-primary-danger-border-style)`,"primary-danger-border-color-active":`var(--${c}-error-color-active)`,"primary-danger-border-radius-active":`var(--${at}-primary-danger-border-radius)`,"primary-danger-outline-active":`var(--${at}-primary-danger-outline)`,"primary-danger-shadow-active":`var(--${at}-primary-danger-shadow)`,"primary-danger-text-color-active":`var(--${at}-primary-danger-text-color)`,"primary-danger-background-focus":`var(--${c}-error-color-focus)`,"primary-danger-border-width-focus":`var(--${at}-primary-danger-border-width)`,"primary-danger-border-style-focus":`var(--${at}-primary-danger-border-style)`,"primary-danger-border-color-focus":`var(--${c}-error-color-focus)`,"primary-danger-border-radius-focus":`var(--${at}-primary-danger-border-radius)`,"primary-danger-outline-focus":`var(--${at}-primary-danger-outline)`,"primary-danger-shadow-focus":`var(--${at}-primary-danger-shadow)`,"primary-danger-text-color-focus":`var(--${at}-primary-danger-text-color)`,"primary-danger-background-hover":`var(--${c}-error-color-hover)`,"primary-danger-border-width-hover":`var(--${at}-primary-danger-border-width)`,"primary-danger-border-style-hover":`var(--${at}-primary-danger-border-style)`,"primary-danger-border-color-hover":`var(--${c}-error-color-hover)`,"primary-danger-border-radius-hover":`var(--${at}-primary-danger-border-radius)`,"primary-danger-outline-hover":`var(--${at}-primary-danger-outline)`,"primary-danger-shadow-hover":`var(--${at}-primary-danger-shadow)`,"primary-danger-text-color-hover":`var(--${at}-primary-danger-text-color)`,"primary-danger-background-visited":`var(--${at}-primary-danger-background)`,"primary-danger-border-width-visited":`var(--${at}-primary-danger-border-width)`,"primary-danger-border-style-visited":`var(--${at}-primary-danger-border-style)`,"primary-danger-border-color-visited":`var(--${at}-primary-danger-border-color)`,"primary-danger-border-radius-visited":`var(--${at}-primary-danger-border-radius)`,"primary-danger-outline-visited":`var(--${at}-primary-danger-outline)`,"primary-danger-shadow-visited":`var(--${at}-primary-danger-shadow)`,"primary-danger-text-color-visited":`var(--${at}-primary-danger-text-color)`},dt={"link-danger-background":`var(--${at}-link-background)`,"link-danger-border-width":`var(--${at}-link-border-width)`,"link-danger-border-style":`var(--${at}-link-border-style)`,"link-danger-border-color":`var(--${at}-link-border-color)`,"link-danger-border-radius":`var(--${at}-link-border-radius)`,"link-danger-outline":"none","link-danger-shadow":"none","link-danger-text-color":`var(--${c}-error-color)`,"link-danger-background-active":`var(--${at}-link-danger-color)`,"link-danger-border-width-active":`var(--${at}-link-danger-border-width)`,"link-danger-border-style-active":`var(--${at}-link-danger-border-style)`,"link-danger-border-color-active":`var(--${at}-link-danger-color)`,"link-danger-border-radius-active":`var(--${at}-link-danger-border-radius)`,"link-danger-outline-active":`var(--${at}-link-danger-outline)`,"link-danger-shadow-active":`var(--${at}-link-danger-shadow)`,"link-danger-text-color-active":`var(--${c}-error-color-active)`,"link-danger-background-focus":`var(--${at}-link-danger-color)`,"link-danger-border-width-focus":`var(--${at}-link-danger-border-width)`,"link-danger-border-style-focus":`var(--${at}-link-danger-border-style)`,"link-danger-border-color-focus":`var(--${at}-link-danger-color)`,"link-danger-border-radius-focus":`var(--${at}-link-danger-border-radius)`,"link-danger-outline-focus":`var(--${at}-link-danger-outline)`,"link-danger-shadow-focus":`var(--${at}-link-danger-shadow)`,"link-danger-text-color-focus":`var(--${c}-error-color-focus)`,"link-danger-background-hover":`var(--${at}-link-danger-color)`,"link-danger-border-width-hover":`var(--${at}-link-danger-border-width)`,"link-danger-border-style-hover":`var(--${at}-link-danger-border-style)`,"link-danger-border-color-hover":`var(--${at}-link-danger-color)`,"link-danger-border-radius-hover":`var(--${at}-link-danger-border-radius)`,"link-danger-outline-hover":`var(--${at}-link-danger-outline)`,"link-danger-shadow-hover":`var(--${at}-link-danger-shadow)`,"link-danger-text-color-hover":`var(--${c}-error-color-hover)`,"link-danger-background-visited":`var(--${at}-link-danger-background)`,"link-danger-border-width-visited":`var(--${at}-link-danger-border-width)`,"link-danger-border-style-visited":`var(--${at}-link-danger-border-style)`,"link-danger-border-color-visited":`var(--${at}-link-danger-border-color)`,"link-danger-border-radius-visited":`var(--${at}-link-danger-border-radius)`,"link-danger-outline-visited":`var(--${at}-link-danger-outline)`,"link-danger-shadow-visited":`var(--${at}-link-danger-shadow)`,"link-danger-text-color-visited":`var(--${at}-link-danger-text-color)`},ct={"default-info-background":`var(--${at}-background)`,"default-info-border-width":`var(--${at}-border-width)`,"default-info-border-style":`var(--${at}-border-style)`,"default-info-border-color":`var(--${c}-info-color)`,"default-info-border-radius":`var(--${at}-border-radius)`,"default-info-outline":"none","default-info-shadow":"none","default-info-text-color":`var(--${c}-info-color)`,"default-info-background-active":`var(--${at}-default-info-background)`,"default-info-border-width-active":`var(--${at}-default-info-border-width)`,"default-info-border-style-active":`var(--${at}-default-info-border-style)`,"default-info-border-color-active":`var(--${c}-info-color-active)`,"default-info-border-radius-active":`var(--${at}-default-info-border-radius)`,"default-info-outline-active":`var(--${at}-default-info-outline)`,"default-info-shadow-active":`var(--${at}-default-info-shadow)`,"default-info-text-color-active":`var(--${c}-info-color-active)`,"default-info-background-focus":`var(--${at}-default-info-background)`,"default-info-border-width-focus":`var(--${at}-default-info-border-width)`,"default-info-border-style-focus":`var(--${at}-default-info-border-style)`,"default-info-border-color-focus":`var(--${c}-info-color-focus)`,"default-info-border-radius-focus":`var(--${at}-default-info-border-radius)`,"default-info-outline-focus":`var(--${at}-default-info-outline)`,"default-info-shadow-focus":`var(--${at}-default-info-shadow)`,"default-info-text-color-focus":`var(--${c}-info-color-focus)`,"default-info-background-hover":`var(--${at}-default-info-background)`,"default-info-border-width-hover":`var(--${at}-default-info-border-width)`,"default-info-border-style-hover":`var(--${at}-default-info-border-style)`,"default-info-border-color-hover":`var(--${c}-info-color-hover)`,"default-info-border-radius-hover":`var(--${at}-default-info-border-radius)`,"default-info-outline-hover":`var(--${at}-default-info-outline)`,"default-info-shadow-hover":`var(--${at}-default-info-shadow)`,"default-info-text-color-hover":`var(--${c}-info-color-hover)`,"default-info-background-visited":`var(--${at}-default-info-background)`,"default-info-border-width-visited":`var(--${at}-default-info-border-width)`,"default-info-border-style-visited":`var(--${at}-default-info-border-style)`,"default-info-border-color-visited":`var(--${at}-default-info-border-color)`,"default-info-border-radius-visited":`var(--${at}-default-info-border-radius)`,"default-info-outline-visited":`var(--${at}-default-info-outline)`,"default-info-shadow-visited":`var(--${at}-default-info-shadow)`,"default-info-text-color-visited":`var(--${at}-default-info-text-color)`},ut={"primary-info-background":`var(--${c}-info-color)`,"primary-info-border-width":`var(--${at}-primary-border-width)`,"primary-info-border-style":`var(--${at}-primary-border-style)`,"primary-info-border-color":`var(--${c}-info-color)`,"primary-info-border-radius":`var(--${at}-primary-border-radius)`,"primary-info-outline":"none","primary-info-shadow":"none","primary-info-text-color":"#ffffff","primary-info-background-active":`var(--${c}-info-color-active)`,"primary-info-border-width-active":`var(--${at}-primary-info-border-width)`,"primary-info-border-style-active":`var(--${at}-primary-info-border-style)`,"primary-info-border-color-active":`var(--${c}-info-color-active)`,"primary-info-border-radius-active":`var(--${at}-primary-info-border-radius)`,"primary-info-outline-active":`var(--${at}-primary-info-outline)`,"primary-info-shadow-active":`var(--${at}-primary-info-shadow)`,"primary-info-text-color-active":`var(--${at}-primary-info-text-color)`,"primary-info-background-focus":`var(--${c}-info-color-focus)`,"primary-info-border-width-focus":`var(--${at}-primary-info-border-width)`,"primary-info-border-style-focus":`var(--${at}-primary-info-border-style)`,"primary-info-border-color-focus":`var(--${c}-info-color-focus)`,"primary-info-border-radius-focus":`var(--${at}-primary-info-border-radius)`,"primary-info-outline-focus":`var(--${at}-primary-info-outline)`,"primary-info-shadow-focus":`var(--${at}-primary-info-shadow)`,"primary-info-text-color-focus":`var(--${at}-primary-info-text-color)`,"primary-info-background-hover":`var(--${c}-info-color-hover)`,"primary-info-border-width-hover":`var(--${at}-primary-info-border-width)`,"primary-info-border-style-hover":`var(--${at}-primary-info-border-style)`,"primary-info-border-color-hover":`var(--${c}-info-color-hover)`,"primary-info-border-radius-hover":`var(--${at}-primary-info-border-radius)`,"primary-info-outline-hover":`var(--${at}-primary-info-outline)`,"primary-info-shadow-hover":`var(--${at}-primary-info-shadow)`,"primary-info-text-color-hover":`var(--${at}-primary-info-text-color)`,"primary-info-background-visited":`var(--${at}-primary-info-background)`,"primary-info-border-width-visited":`var(--${at}-primary-info-border-width)`,"primary-info-border-style-visited":`var(--${at}-primary-info-border-style)`,"primary-info-border-color-visited":`var(--${at}-primary-info-border-color)`,"primary-info-border-radius-visited":`var(--${at}-primary-info-border-radius)`,"primary-info-outline-visited":`var(--${at}-primary-info-outline)`,"primary-info-shadow-visited":`var(--${at}-primary-info-shadow)`,"primary-info-text-color-visited":`var(--${at}-primary-info-text-color)`},pt={"link-info-background":`var(--${at}-link-background)`,"link-info-border-width":`var(--${at}-link-border-width)`,"link-info-border-style":`var(--${at}-link-border-style)`,"link-info-border-color":`var(--${at}-link-border-color)`,"link-info-border-radius":`var(--${at}-link-border-radius)`,"link-info-outline":"none","link-info-shadow":"none","link-info-text-color":`var(--${c}-info-color)`,"link-info-background-active":`var(--${at}-link-info-color)`,"link-info-border-width-active":`var(--${at}-link-info-border-width)`,"link-info-border-style-active":`var(--${at}-link-info-border-style)`,"link-info-border-color-active":`var(--${at}-link-info-color)`,"link-info-border-radius-active":`var(--${at}-link-info-border-radius)`,"link-info-outline-active":`var(--${at}-link-info-outline)`,"link-info-shadow-active":`var(--${at}-link-info-shadow)`,"link-info-text-color-active":`var(--${c}-info-color-active)`,"link-info-background-focus":`var(--${at}-link-info-color)`,"link-info-border-width-focus":`var(--${at}-link-info-border-width)`,"link-info-border-style-focus":`var(--${at}-link-info-border-style)`,"link-info-border-color-focus":`var(--${at}-link-info-color)`,"link-info-border-radius-focus":`var(--${at}-link-info-border-radius)`,"link-info-outline-focus":`var(--${at}-link-info-outline)`,"link-info-shadow-focus":`var(--${at}-link-info-shadow)`,"link-info-text-color-focus":`var(--${c}-info-color-focus)`,"link-info-background-hover":`var(--${at}-link-info-color)`,"link-info-border-width-hover":`var(--${at}-link-info-border-width)`,"link-info-border-style-hover":`var(--${at}-link-info-border-style)`,"link-info-border-color-hover":`var(--${at}-link-info-color)`,"link-info-border-radius-hover":`var(--${at}-link-info-border-radius)`,"link-info-outline-hover":`var(--${at}-link-info-outline)`,"link-info-shadow-hover":`var(--${at}-link-info-shadow)`,"link-info-text-color-hover":`var(--${c}-info-color-hover)`,"link-info-background-visited":`var(--${at}-link-info-background)`,"link-info-border-width-visited":`var(--${at}-link-info-border-width)`,"link-info-border-style-visited":`var(--${at}-link-info-border-style)`,"link-info-border-color-visited":`var(--${at}-link-info-border-color)`,"link-info-border-radius-visited":`var(--${at}-link-info-border-radius)`,"link-info-outline-visited":`var(--${at}-link-info-outline)`,"link-info-shadow-visited":`var(--${at}-link-info-shadow)`,"link-info-text-color-visited":`var(--${at}-link-info-text-color)`},ht={background:`var(--${c}-background)`,"border-width":`var(--${c}-border-width)`,"border-style":`var(--${c}-border-style)`,"border-color":`var(--${c}-border-color)`,"border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"background-active":`var(--${at}-background)`,"border-width-active":`var(--${at}-border-width)`,"border-style-active":`var(--${at}-border-style)`,"border-color-active":`var(--${at}-border-color)`,"border-radius-active":`var(--${at}-border-radius)`,"outline-active":`var(--${at}-outline)`,"shadow-active":`var(--${at}-shadow)`,"text-color-active":`var(--${c}-primary-color-active)`,"background-focus":`var(--${at}-background)`,"border-width-focus":`var(--${at}-border-width)`,"border-style-focus":`var(--${at}-border-style)`,"border-color-focus":`var(--${at}-border-color)`,"border-radius-focus":`var(--${at}-border-radius)`,"outline-focus":`var(--${at}-outline)`,"shadow-focus":`var(--${at}-shadow)`,"text-color-focus":`var(--${c}-primary-color-focus)`,"background-hover":`var(--${at}-background)`,"border-width-hover":`var(--${at}-border-width)`,"border-style-hover":`var(--${at}-border-style)`,"border-color-hover":`var(--${at}-border-color)`,"border-radius-hover":`var(--${at}-border-radius)`,"outline-hover":`var(--${at}-outline)`,"shadow-hover":`var(--${at}-shadow)`,"text-color-hover":`var(--${c}-primary-color-hover)`,"background-visited":`var(--${at}-background)`,"border-width-visited":`var(--${at}-border-width)`,"border-style-visited":`var(--${at}-border-style)`,"border-color-visited":`var(--${at}-border-color)`,"border-radius-visited":`var(--${at}-border-radius)`,"outline-visited":`var(--${at}-outline)`,"shadow-visited":`var(--${at}-shadow)`,"text-color-visited":`var(--${at}-text-color)`},gt={"primary-background":`var(--${c}-primary-color)`,"primary-border-width":`var(--${c}-border-width)`,"primary-border-style":`var(--${c}-border-style)`,"primary-border-color":`var(--${c}-primary-color)`,"primary-border-radius":`var(--${c}-border-radius)`,"primary-outline":`var(--${c}-primary-color-outline)`,"primary-shadow":"none","primary-text-color":"#ffffff","primary-background-active":`var(--${c}-primary-color-active)`,"primary-border-width-active":`var(--${at}-primary-border-width)`,"primary-border-style-active":`var(--${at}-primary-border-style)`,"primary-border-color-active":`var(--${c}-primary-color-active)`,"primary-border-radius-active":`var(--${at}-primary-border-radius)`,"primary-outline-active":`var(--${at}-primary-outline)`,"primary-shadow-active":`var(--${at}-primary-shadow)`,"primary-text-color-active":`var(--${at}-primary-text-color)`,"primary-background-focus":`var(--${c}-primary-color-focus)`,"primary-border-width-focus":`var(--${at}-primary-border-width)`,"primary-border-style-focus":`var(--${at}-primary-border-style)`,"primary-border-color-focus":`var(--${c}-primary-color-focus)`,"primary-border-radius-focus":`var(--${at}-primary-border-radius)`,"primary-outline-focus":`var(--${at}-primary-outline)`,"primary-shadow-focus":`var(--${at}-primary-shadow)`,"primary-text-color-focus":`var(--${at}-primary-text-color)`,"primary-background-hover":`var(--${c}-primary-color-hover)`,"primary-border-width-hover":`var(--${at}-primary-border-width)`,"primary-border-style-hover":`var(--${at}-primary-border-style)`,"primary-border-color-hover":`var(--${c}-primary-color-hover)`,"primary-border-radius-hover":`var(--${at}-primary-border-radius)`,"primary-outline-hover":`var(--${at}-primary-outline)`,"primary-shadow-hover":`var(--${at}-primary-shadow)`,"primary-text-color-hover":`var(--${at}-primary-text-color)`,"primary-background-visited":`var(--${at}-primary-background)`,"primary-border-width-visited":`var(--${at}-primary-border-width)`,"primary-border-style-visited":`var(--${at}-primary-border-style)`,"primary-border-color-visited":`var(--${at}-primary-border-color)`,"primary-border-radius-visited":`var(--${at}-primary-border-radius)`,"primary-outline-visited":`var(--${at}-primary-outline)`,"primary-shadow-visited":`var(--${at}-primary-shadow)`,"primary-text-color-visited":`var(--${at}-primary-text-color)`},vt={"link-background":"transparent","link-border-width":"none","link-border-style":"none","link-border-color":"none","link-border-radius":"none","link-outline":"none","link-shadow":"none","link-text-color":`var(--${c}-primary-color)`,"link-background-active":`var(--${at}-link-background)`,"link-border-width-active":`var(--${at}-link-border-width)`,"link-border-style-active":`var(--${at}-link-border-style)`,"link-border-color-active":`var(--${at}-link-border-color)`,"link-border-radius-active":`var(--${at}-link-border-radius)`,"link-outline-active":`var(--${at}-link-outline)`,"link-shadow-active":`var(--${at}-link-shadow)`,"link-text-color-active":`var(--${at}-link-text-color)`,"link-background-focus":`var(--${at}-link-background)`,"link-border-width-focus":`var(--${at}-link-border-width)`,"link-border-style-focus":`var(--${at}-link-border-style)`,"link-border-color-focus":`var(--${at}-link-border-color)`,"link-border-radius-focus":`var(--${at}-link-border-radius)`,"link-outline-focus":`var(--${at}-link-outline)`,"link-shadow-focus":`var(--${at}-link-shadow)`,"link-text-color-focus":`var(--${at}-link-text-color)`,"link-background-hover":`var(--${at}-link-background)`,"link-border-width-hover":`var(--${at}-link-border-width)`,"link-border-style-hover":`var(--${at}-link-border-style)`,"link-border-color-hover":`var(--${at}-link-border-color)`,"link-border-radius-hover":`var(--${at}-link-border-radius)`,"link-outline-hover":`var(--${at}-link-outline)`,"link-shadow-hover":`var(--${at}-link-shadow)`,"link-text-color-hover":`var(--${at}-link-text-color)`,"link-background-visited":`var(--${at}-link-background)`,"link-border-width-visited":`var(--${at}-link-border-width)`,"link-border-style-visited":`var(--${at}-link-border-style)`,"link-border-color-visited":`var(--${at}-link-border-color)`,"link-border-radius-visited":`var(--${at}-link-border-radius)`,"link-outline-visited":`var(--${at}-link-outline)`,"link-shadow-visited":`var(--${at}-link-shadow)`,"link-text-color-visited":`var(--${at}-link-text-color)`},mt={"default-success-background":`var(--${at}-background)`,"default-success-border-width":`var(--${at}-border-width)`,"default-success-border-style":`var(--${at}-border-style)`,"default-success-border-color":`var(--${c}-success-color)`,"default-success-border-radius":`var(--${at}-border-radius)`,"default-success-outline":"none","default-success-shadow":"none","default-success-text-color":`var(--${c}-success-color)`,"default-success-background-active":`var(--${at}-default-success-background)`,"default-success-border-width-active":`var(--${at}-default-success-border-width)`,"default-success-border-style-active":`var(--${at}-default-success-border-style)`,"default-success-border-color-active":`var(--${c}-success-color-active)`,"default-success-border-radius-active":`var(--${at}-default-success-border-radius)`,"default-success-outline-active":`var(--${at}-default-success-outline)`,"default-success-shadow-active":`var(--${at}-default-success-shadow)`,"default-success-text-color-active":`var(--${c}-success-color-active)`,"default-success-background-focus":`var(--${at}-default-success-background)`,"default-success-border-width-focus":`var(--${at}-default-success-border-width)`,"default-success-border-style-focus":`var(--${at}-default-success-border-style)`,"default-success-border-color-focus":`var(--${c}-success-color-focus)`,"default-success-border-radius-focus":`var(--${at}-default-success-border-radius)`,"default-success-outline-focus":`var(--${at}-default-success-outline)`,"default-success-shadow-focus":`var(--${at}-default-success-shadow)`,"default-success-text-color-focus":`var(--${c}-success-color-focus)`,"default-success-background-hover":`var(--${at}-default-success-background)`,"default-success-border-width-hover":`var(--${at}-default-success-border-width)`,"default-success-border-style-hover":`var(--${at}-default-success-border-style)`,"default-success-border-color-hover":`var(--${c}-success-color-hover)`,"default-success-border-radius-hover":`var(--${at}-default-success-border-radius)`,"default-success-outline-hover":`var(--${at}-default-success-outline)`,"default-success-shadow-hover":`var(--${at}-default-success-shadow)`,"default-success-text-color-hover":`var(--${c}-success-color-hover)`,"default-success-background-visited":`var(--${at}-default-success-background)`,"default-success-border-width-visited":`var(--${at}-default-success-border-width)`,"default-success-border-style-visited":`var(--${at}-default-success-border-style)`,"default-success-border-color-visited":`var(--${at}-default-success-border-color)`,"default-success-border-radius-visited":`var(--${at}-default-success-border-radius)`,"default-success-outline-visited":`var(--${at}-default-success-outline)`,"default-success-shadow-visited":`var(--${at}-default-success-shadow)`,"default-success-text-color-visited":`var(--${at}-default-success-text-color)`},ft={"primary-success-background":`var(--${c}-success-color)`,"primary-success-border-width":`var(--${at}-primary-border-width)`,"primary-success-border-style":`var(--${at}-primary-border-style)`,"primary-success-border-color":`var(--${c}-success-color)`,"primary-success-border-radius":`var(--${at}-primary-border-radius)`,"primary-success-outline":"none","primary-success-shadow":"none","primary-success-text-color":"#ffffff","primary-success-background-active":`var(--${c}-success-color-active)`,"primary-success-border-width-active":`var(--${at}-primary-success-border-width)`,"primary-success-border-style-active":`var(--${at}-primary-success-border-style)`,"primary-success-border-color-active":`var(--${c}-success-color-active)`,"primary-success-border-radius-active":`var(--${at}-primary-success-border-radius)`,"primary-success-outline-active":`var(--${at}-primary-success-outline)`,"primary-success-shadow-active":`var(--${at}-primary-success-shadow)`,"primary-success-text-color-active":`var(--${at}-primary-success-text-color)`,"primary-success-background-focus":`var(--${c}-success-color-focus)`,"primary-success-border-width-focus":`var(--${at}-primary-success-border-width)`,"primary-success-border-style-focus":`var(--${at}-primary-success-border-style)`,"primary-success-border-color-focus":`var(--${c}-success-color-focus)`,"primary-success-border-radius-focus":`var(--${at}-primary-success-border-radius)`,"primary-success-outline-focus":`var(--${at}-primary-success-outline)`,"primary-success-shadow-focus":`var(--${at}-primary-success-shadow)`,"primary-success-text-color-focus":`var(--${at}-primary-success-text-color)`,"primary-success-background-hover":`var(--${c}-success-color-hover)`,"primary-success-border-width-hover":`var(--${at}-primary-success-border-width)`,"primary-success-border-style-hover":`var(--${at}-primary-success-border-style)`,"primary-success-border-color-hover":`var(--${c}-success-color-hover)`,"primary-success-border-radius-hover":`var(--${at}-primary-success-border-radius)`,"primary-success-outline-hover":`var(--${at}-primary-success-outline)`,"primary-success-shadow-hover":`var(--${at}-primary-success-shadow)`,"primary-success-text-color-hover":`var(--${at}-primary-success-text-color)`,"primary-success-background-visited":`var(--${at}-primary-success-background)`,"primary-success-border-width-visited":`var(--${at}-primary-success-border-width)`,"primary-success-border-style-visited":`var(--${at}-primary-success-border-style)`,"primary-success-border-color-visited":`var(--${at}-primary-success-border-color)`,"primary-success-border-radius-visited":`var(--${at}-primary-success-border-radius)`,"primary-success-outline-visited":`var(--${at}-primary-success-outline)`,"primary-success-shadow-visited":`var(--${at}-primary-success-shadow)`,"primary-success-text-color-visited":`var(--${at}-primary-success-text-color)`},yt={"link-success-background":`var(--${at}-link-background)`,"link-success-border-width":`var(--${at}-link-border-width)`,"link-success-border-style":`var(--${at}-link-border-style)`,"link-success-border-color":`var(--${at}-link-border-color)`,"link-success-border-radius":`var(--${at}-link-border-radius)`,"link-success-outline":"none","link-success-shadow":"none","link-success-text-color":`var(--${c}-success-color)`,"link-success-background-active":`var(--${at}-link-success-color)`,"link-success-border-width-active":`var(--${at}-link-success-border-width)`,"link-success-border-style-active":`var(--${at}-link-success-border-style)`,"link-success-border-color-active":`var(--${at}-link-success-color)`,"link-success-border-radius-active":`var(--${at}-link-success-border-radius)`,"link-success-outline-active":`var(--${at}-link-success-outline)`,"link-success-shadow-active":`var(--${at}-link-success-shadow)`,"link-success-text-color-active":`var(--${c}-success-color-active)`,"link-success-background-focus":`var(--${at}-link-success-color)`,"link-success-border-width-focus":`var(--${at}-link-success-border-width)`,"link-success-border-style-focus":`var(--${at}-link-success-border-style)`,"link-success-border-color-focus":`var(--${at}-link-success-color)`,"link-success-border-radius-focus":`var(--${at}-link-success-border-radius)`,"link-success-outline-focus":`var(--${at}-link-success-outline)`,"link-success-shadow-focus":`var(--${at}-link-success-shadow)`,"link-success-text-color-focus":`var(--${c}-success-color-focus)`,"link-success-background-hover":`var(--${at}-link-success-color)`,"link-success-border-width-hover":`var(--${at}-link-success-border-width)`,"link-success-border-style-hover":`var(--${at}-link-success-border-style)`,"link-success-border-color-hover":`var(--${at}-link-success-color)`,"link-success-border-radius-hover":`var(--${at}-link-success-border-radius)`,"link-success-outline-hover":`var(--${at}-link-success-outline)`,"link-success-shadow-hover":`var(--${at}-link-success-shadow)`,"link-success-text-color-hover":`var(--${c}-success-color-hover)`,"link-success-background-visited":`var(--${at}-link-success-background)`,"link-success-border-width-visited":`var(--${at}-link-success-border-width)`,"link-success-border-style-visited":`var(--${at}-link-success-border-style)`,"link-success-border-color-visited":`var(--${at}-link-success-border-color)`,"link-success-border-radius-visited":`var(--${at}-link-success-border-radius)`,"link-success-outline-visited":`var(--${at}-link-success-outline)`,"link-success-shadow-visited":`var(--${at}-link-success-shadow)`,"link-success-text-color-visited":`var(--${at}-link-success-text-color)`},bt={"default-warning-background":`var(--${at}-background)`,"default-warning-border-width":`var(--${at}-border-width)`,"default-warning-border-style":`var(--${at}-border-style)`,"default-warning-border-color":`var(--${c}-warning-color)`,"default-warning-border-radius":`var(--${at}-border-radius)`,"default-warning-outline":"none","default-warning-shadow":"none","default-warning-text-color":`var(--${c}-warning-color)`,"default-warning-background-active":`var(--${at}-default-warning-background)`,"default-warning-border-width-active":`var(--${at}-default-warning-border-width)`,"default-warning-border-style-active":`var(--${at}-default-warning-border-style)`,"default-warning-border-color-active":`var(--${c}-warning-color-active)`,"default-warning-border-radius-active":`var(--${at}-default-warning-border-radius)`,"default-warning-outline-active":`var(--${at}-default-warning-outline)`,"default-warning-shadow-active":`var(--${at}-default-warning-shadow)`,"default-warning-text-color-active":`var(--${c}-warning-color-active)`,"default-warning-background-focus":`var(--${at}-default-warning-background)`,"default-warning-border-width-focus":`var(--${at}-default-warning-border-width)`,"default-warning-border-style-focus":`var(--${at}-default-warning-border-style)`,"default-warning-border-color-focus":`var(--${c}-warning-color-focus)`,"default-warning-border-radius-focus":`var(--${at}-default-warning-border-radius)`,"default-warning-outline-focus":`var(--${at}-default-warning-outline)`,"default-warning-shadow-focus":`var(--${at}-default-warning-shadow)`,"default-warning-text-color-focus":`var(--${c}-warning-color-focus)`,"default-warning-background-hover":`var(--${at}-default-warning-background)`,"default-warning-border-width-hover":`var(--${at}-default-warning-border-width)`,"default-warning-border-style-hover":`var(--${at}-default-warning-border-style)`,"default-warning-border-color-hover":`var(--${c}-warning-color-hover)`,"default-warning-border-radius-hover":`var(--${at}-default-warning-border-radius)`,"default-warning-outline-hover":`var(--${at}-default-warning-outline)`,"default-warning-shadow-hover":`var(--${at}-default-warning-shadow)`,"default-warning-text-color-hover":`var(--${c}-warning-color-hover)`,"default-warning-background-visited":`var(--${at}-default-warning-background)`,"default-warning-border-width-visited":`var(--${at}-default-warning-border-width)`,"default-warning-border-style-visited":`var(--${at}-default-warning-border-style)`,"default-warning-border-color-visited":`var(--${at}-default-warning-border-color)`,"default-warning-border-radius-visited":`var(--${at}-default-warning-border-radius)`,"default-warning-outline-visited":`var(--${at}-default-warning-outline)`,"default-warning-shadow-visited":`var(--${at}-default-warning-shadow)`,"default-warning-text-color-visited":`var(--${at}-default-warning-text-color)`},Ct={"primary-warning-background":`var(--${c}-warning-color)`,"primary-warning-border-width":`var(--${at}-primary-border-width)`,"primary-warning-border-style":`var(--${at}-primary-border-style)`,"primary-warning-border-color":`var(--${c}-warning-color)`,"primary-warning-border-radius":`var(--${at}-primary-border-radius)`,"primary-warning-outline":"none","primary-warning-shadow":"none","primary-warning-text-color":"#ffffff","primary-warning-background-active":`var(--${c}-warning-color-active)`,"primary-warning-border-width-active":`var(--${at}-primary-warning-border-width)`,"primary-warning-border-style-active":`var(--${at}-primary-warning-border-style)`,"primary-warning-border-color-active":`var(--${c}-warning-color-active)`,"primary-warning-border-radius-active":`var(--${at}-primary-warning-border-radius)`,"primary-warning-outline-active":`var(--${at}-primary-warning-outline)`,"primary-warning-shadow-active":`var(--${at}-primary-warning-shadow)`,"primary-warning-text-color-active":`var(--${at}-primary-warning-text-color)`,"primary-warning-background-focus":`var(--${c}-warning-color-focus)`,"primary-warning-border-width-focus":`var(--${at}-primary-warning-border-width)`,"primary-warning-border-style-focus":`var(--${at}-primary-warning-border-style)`,"primary-warning-border-color-focus":`var(--${c}-warning-color-focus)`,"primary-warning-border-radius-focus":`var(--${at}-primary-warning-border-radius)`,"primary-warning-outline-focus":`var(--${at}-primary-warning-outline)`,"primary-warning-shadow-focus":`var(--${at}-primary-warning-shadow)`,"primary-warning-text-color-focus":`var(--${at}-primary-warning-text-color)`,"primary-warning-background-hover":`var(--${c}-warning-color-hover)`,"primary-warning-border-width-hover":`var(--${at}-primary-warning-border-width)`,"primary-warning-border-style-hover":`var(--${at}-primary-warning-border-style)`,"primary-warning-border-color-hover":`var(--${c}-warning-color-hover)`,"primary-warning-border-radius-hover":`var(--${at}-primary-warning-border-radius)`,"primary-warning-outline-hover":`var(--${at}-primary-warning-outline)`,"primary-warning-shadow-hover":`var(--${at}-primary-warning-shadow)`,"primary-warning-text-color-hover":`var(--${at}-primary-warning-text-color)`,"primary-warning-background-visited":`var(--${at}-primary-warning-background)`,"primary-warning-border-width-visited":`var(--${at}-primary-warning-border-width)`,"primary-warning-border-style-visited":`var(--${at}-primary-warning-border-style)`,"primary-warning-border-color-visited":`var(--${at}-primary-warning-border-color)`,"primary-warning-border-radius-visited":`var(--${at}-primary-warning-border-radius)`,"primary-warning-outline-visited":`var(--${at}-primary-warning-outline)`,"primary-warning-shadow-visited":`var(--${at}-primary-warning-shadow)`,"primary-warning-text-color-visited":`var(--${at}-primary-warning-text-color)`},xt={"link-warning-background":`var(--${at}-link-background)`,"link-warning-border-width":`var(--${at}-link-border-width)`,"link-warning-border-style":`var(--${at}-link-border-style)`,"link-warning-border-color":`var(--${at}-link-border-color)`,"link-warning-border-radius":`var(--${at}-link-border-radius)`,"link-warning-outline":"none","link-warning-shadow":"none","link-warning-text-color":`var(--${c}-warning-color)`,"link-warning-background-active":`var(--${at}-link-warning-color)`,"link-warning-border-width-active":`var(--${at}-link-warning-border-width)`,"link-warning-border-style-active":`var(--${at}-link-warning-border-style)`,"link-warning-border-color-active":`var(--${at}-link-warning-color)`,"link-warning-border-radius-active":`var(--${at}-link-warning-border-radius)`,"link-warning-outline-active":`var(--${at}-link-warning-outline)`,"link-warning-shadow-active":`var(--${at}-link-warning-shadow)`,"link-warning-text-color-active":`var(--${c}-warning-color-active)`,"link-warning-background-focus":`var(--${at}-link-warning-color)`,"link-warning-border-width-focus":`var(--${at}-link-warning-border-width)`,"link-warning-border-style-focus":`var(--${at}-link-warning-border-style)`,"link-warning-border-color-focus":`var(--${at}-link-warning-color)`,"link-warning-border-radius-focus":`var(--${at}-link-warning-border-radius)`,"link-warning-outline-focus":`var(--${at}-link-warning-outline)`,"link-warning-shadow-focus":`var(--${at}-link-warning-shadow)`,"link-warning-text-color-focus":`var(--${c}-warning-color-focus)`,"link-warning-background-hover":`var(--${at}-link-warning-color)`,"link-warning-border-width-hover":`var(--${at}-link-warning-border-width)`,"link-warning-border-style-hover":`var(--${at}-link-warning-border-style)`,"link-warning-border-color-hover":`var(--${at}-link-warning-color)`,"link-warning-border-radius-hover":`var(--${at}-link-warning-border-radius)`,"link-warning-outline-hover":`var(--${at}-link-warning-outline)`,"link-warning-shadow-hover":`var(--${at}-link-warning-shadow)`,"link-warning-text-color-hover":`var(--${c}-warning-color-hover)`,"link-warning-background-visited":`var(--${at}-link-warning-background)`,"link-warning-border-width-visited":`var(--${at}-link-warning-border-width)`,"link-warning-border-style-visited":`var(--${at}-link-warning-border-style)`,"link-warning-border-color-visited":`var(--${at}-link-warning-border-color)`,"link-warning-border-radius-visited":`var(--${at}-link-warning-border-radius)`,"link-warning-outline-visited":`var(--${at}-link-warning-outline)`,"link-warning-shadow-visited":`var(--${at}-link-warning-shadow)`,"link-warning-text-color-visited":`var(--${at}-link-warning-text-color)`},wt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ht),lt),ct),mt),bt),gt),st),ut),ft),Ct),vt),dt),pt),yt),xt),St="checkbox",Tt={color:`var(--${c}-text-color)`,background:`var(--${c}-background)`,"border-color":`var(--${c}-border-color)`,"disabled-border-color":`var(--${c}-disabled-border-color)`},Et="drawer",At={"width-small":"560px","width-medium":"890px","width-large":"1200px","height-small":"40vh","height-medium":"60vh","height-large":"90vh"},kt="dropdown",Dt={"background-color":"var(--oio-background)","border-color":"var(--oio-border-color)","box-shadow":"0px 0px 6px 0px rgba(0, 0, 0, 0.2)",color:"var(--oio-text-color)","color-hover":"var(--oio-hover-text-color)","color-disabled":"var(--oio-disabled-color)","color-disabled-hover":"var(--oio-disabled-color)","item-background-color-hover":"var(--oio-hover-background-color)","item-background-color-disabled-hover":"transparent"},Ft="form-item",Rt={config:{readonlyShowPlaceholder:!1,disabledShowPlaceholder:!1}},Ot="header",Nt={"border-bottom":"var(--oio-border-color)",color:"rgba(255,255,255,0.65)"},$t="input",Mt=`${c}-${$t}`,It={background:"#15232E","background-color":"#15232E","border-style":`var(--${c}-border-style)`,"border-color":`var(--${c}-border-color)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"counter-background":"#ffffff","counter-color":"rgba(0, 0, 0, 0.25)","background-hover":`var(--${Mt}-background)`,"border-width-hover":`var(--${Mt}-border-width)`,"border-style-hover":`var(--${Mt}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${Mt}-border-radius)`,"outline-hover":`var(--${Mt}-outline)`,"shadow-hover":`var(--${Mt}-shadow)`,"text-color-hover":`var(--${Mt}-text-color)`,"background-focus":`var(--${Mt}-background)`,"border-width-focus":`var(--${Mt}-border-width)`,"border-style-focus":`var(--${Mt}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${Mt}-border-radius)`,"outline-focus":`var(--${Mt}-outline)`,"shadow-focus":`0px 0px 0px 2px rgba(var(--${c}-primary-color-rgb),0.1);`,"text-color-focus":`var(--${Mt}-text-color)`,"readonly-border-color":`var(--${c}-readonly-border-color)`,"error-border-color":"#ff4d4f","disabled-border-color":`var(--${c}-disabled-border-color)`,"addon-background":"#303B48","addon-color":"rgba(255,255,255,0.65)","tag-background":"rgba(3,93,255,0.2)","clear-background":"#000","clear-color":"var(--oio-text-color)"},Lt="menu",_t=()=>xe(),Pt="modal",jt={color:"rgba(255, 255, 255, 0.85)","width-small":"560px","width-medium":"890px","width-large":"1200px","height-small":"40vh","height-medium":"60vh","height-large":"90vh"},Vt="multi-tabs",Bt={background:`var(--${c}-body-background)`,color:`var(--${c}-text-color)`,"active-color":"#ffffff","active-font-weight":500,"active-background":`var(--${c}-background)`,"icon-color":"rgba(255, 255, 255, 0.3)","hover-background-color":"rgba(255, 255, 255, 0.10)","background-color-inline":`var(--${c}-background)`,"color-inline":`var(--${c}-text-color)`,"active-color-inline":`var(--${c}-primary-color)`,"active-background-color-inline":`var(--${c}-body-background)`,"hover-background-color-inline":`var(--${c}-body-background)`,"background-color-theme1":`var(--${c}-body-background)`,"background-color-active-theme1":`var(--${c}-background)`,"border-color-theme1":"var(--oio-border-color)","background-color-theme1-inline":`var(--${c}-background)`,"background-color-active-theme1-inline":"rgba(255, 255, 255, 0.2)","active-color-active-theme1-inline":"#ffffff","icon-color-active-theme1-inline":`var(--${c}-multi-tabs-icon-color)`,"background-color-theme2":`var(--${c}-background)`,"border-color-theme2":"var(--oio-border-color)","background-color-theme3":`var(--${c}-body-background)`,"background-color-active-theme3":"rgba(255, 255, 255, 0.2)","active-color-active-theme3":"#ffffff","icon-color-active-theme3":`var(--${c}-multi-tabs-icon-color)`,"background-color-theme3-inline":`var(--${c}-background)`,"background-color-theme4-inline":`var(--${c}-background)`,"background-color-active-theme4-inline":"rgba(255, 255, 255, 0.2)","active-color-active-theme4-inline":"#ffffff","icon-color-active-theme4-inline":`var(--${c}-multi-tabs-icon-color)`},Ht="pagination",Wt={background:`var(--${c}-background)`,"border-color":`var(--${c}-border-color)`,"text-color":`var(--${c}-text-color)`},Ut="popconfirm",qt={background:"var(--oio-background)",color:"var(--oio-text-color)",borderColor:"var(--oio-border-color)",arrowBackground:"ar(--oio-background)"},zt="rich-text",Gt={"textarea-bg-color":`var(--${c}-background)`,"textarea-color":`var(--${c}-text-color)`,"textarea-border-color":`var(--${c}-border-color)`,"textarea-slight-border-color":`var(--${c}-border-color)`,"textarea-slight-color":`var(--${c}-text-color)`,"textarea-slight-bg-color":`var(--${c}-body-background)`,"textarea-selected-border-color":"#333e4c","textarea-handler-bg-color":"#4290f7","toolbar-color":`var(--${c}-select-dropdown-color)`,"toolbar-bg-color":`var(--${c}-select-dropdown-background)`,"toolbar-active-color":`var(--${c}-select-dropdown-selected-color)`,"toolbar-active-bg-color":`var(--${c}-select-dropdown-selected)`,"toolbar-color-active-bg-color":`var(--${c}-select-dropdown-selected)`,"toolbar-disabled-color":`var(--${c}-disabled-color)`,"toolbar-border-color":`var(--${c}-border-color)`,"modal-button-bg-color":"#fafafa","modal-button-border-color":"#d9d9d9","button-tooltip-bg-color":"#333","button-tooltip-color":"#fff"},Kt="scrollbar",Xt={"thumb-background-color":"#7e7e7e","thumb-background-color-hover":"#999999"},Qt="select",Yt=`${c}-${Qt}`,Jt={background:"#15232E","border-width":`var(--${c}-border-width)`,"border-style":`var(--${c}-border-style)`,"border-color":`var(--${c}-border-color)`,"border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"counter-background":"#15232E","counter-color":"rgba(255,255,255,0.65)","counter-font-size":`var(--${c}-font-size-sm)`,"background-hover":`var(--${Yt}-background)`,"border-width-hover":`var(--${Yt}-border-width)`,"border-style-hover":`var(--${Yt}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${Yt}-border-radius)`,"outline-hover":`var(--${Yt}-outline)`,"shadow-hover":`var(--${Yt}-shadow)`,"text-color-hover":`var(--${Yt}-text-color)`,"background-focus":`var(--${Yt}-background)`,"border-width-focus":`var(--${Yt}-border-width)`,"border-style-focus":`var(--${Yt}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${Yt}-border-radius)`,"outline-focus":`var(--${Yt}-outline)`,"shadow-focus":"0px 0px 0px 2px rgba(3,93,255,0.1);","text-color-focus":`var(--${Yt}-text-color)`,"readonly-border-color":`var(--${c}-readonly-border-color)`,"item-readonly-bg":`var(--${c}-primary-color-rgb)`,"item-readonly-color":`var(--${c}-primary-color)`,"item-readonly-radius":`var(--${c}-border-radius)`,"dropdown-background":"#1F2935","dropdown-selected-color":"#fff","dropdown-color":"rgba(255,255,255,0.65)","dropdown-selected":"rgba(255,255,255,0.1)","dropdown-box-shadow":"0px 0px 6px 0px rgba(0,0,0,0.2)"},Zt="switch",ei={background:"rgba(255,255,255,0.25)"},ti="table",ii={"thead-bg":"var(--oio-background)","body-bg":"var(--oio-background)","text-color":`var(--${c}-text-color)`,"title-color":"rgba(255,255,255,0.85)","title-font-weight":500,"title-sort-icon-size":"11px","tr-height":`var(--${c}-height-lg)`,"tr-stripe-bg":"rgba(255,255,255,0.1)","tr-checked-bg":"rgba(255,255,255,0.1)","tr-hover-bg":"rgba(255,255,255,0.1)","row-border":"rgba(51,62,76,1)","row-body-border":"rgba(51,62,76,1)",config:{border:"full",stripe:!1,isCurrent:!0,isHover:!0}},ri="tabs",oi="textarea",ni=`${c}-${oi}`,ai={background:"#15232E","border-width":`var(--${c}-border-width)`,"border-style":`var(--${c}-border-style)`,"border-color":`var(--${c}-border-color)`,"border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"background-hover":`var(--${ni}-background)`,"border-width-hover":`var(--${ni}-border-width)`,"border-style-hover":`var(--${ni}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${ni}-border-radius)`,"outline-hover":`var(--${ni}-outline)`,"shadow-hover":`var(--${ni}-shadow)`,"text-color-hover":`var(--${ni}-text-color)`,"background-focus":`var(--${ni}-background)`,"border-width-focus":`var(--${ni}-border-width)`,"border-style-focus":`var(--${ni}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${ni}-border-radius)`,"outline-focus":`var(--${ni}-outline)`,"shadow-focus":`0px 0px 0px 2px rgba(var(--${c}-primary-color-rgb),0.1);`,"text-color-focus":`var(--${ni}-text-color)`},li="transfer",si={"background-color":"var(--oio-background)","header-border-color":"var(--oio-border-color)"},di="tree-select",ci="upload",ui=`${c}-${ci}`,pi={background:`var(--${c}-background)`,"border-width":`var(--${c}-border-width)`,"border-style":"dashed","border-color":`var(--${c}-border-color)`,"border-radius":`var(--${c}-border-radius)`,outline:"none",shadow:"none","text-color":`var(--${c}-text-color)`,"background-hover":`var(--${ui}-background)`,"border-width-hover":`var(--${ui}-border-width)`,"border-style-hover":`var(--${ui}-border-style)`,"border-color-hover":`var(--${c}-primary-color-hover)`,"border-radius-hover":`var(--${ui}-border-radius)`,"outline-hover":`var(--${ui}-outline)`,"shadow-hover":`var(--${ui}-shadow)`,"text-color-hover":`var(--${ui}-text-color)`,"background-focus":`var(--${ui}-background)`,"border-width-focus":`var(--${ui}-border-width)`,"border-style-focus":`var(--${ui}-border-style)`,"border-color-focus":`var(--${c}-primary-color-hover)`,"border-radius-focus":`var(--${ui}-border-radius)`,"outline-focus":`var(--${ui}-outline)`,"shadow-focus":`var(--${ui}-shadow)`,"text-color-focus":`var(--${ui}-text-color)`},hi=()=>({[Vt]:{large:Object.assign({},Bt),medium:Object.assign({},Bt),small:Object.assign({},Bt)},[nt]:{large:wt,medium:wt,small:wt},[$t]:{large:Object.assign(Object.assign({},It),h),medium:Object.assign(Object.assign({},It),g),small:Object.assign(Object.assign({},It),g)},[St]:{large:Object.assign({},Tt),medium:Object.assign({},Tt),small:Object.assign({},Tt)},[Zt]:{large:Object.assign({},ei),medium:Object.assign({},ei),small:Object.assign({},ei)},[Ht]:{large:Object.assign(Object.assign({},Wt),x),medium:Object.assign(Object.assign({},Wt),w),small:Object.assign(Object.assign({},Wt),S)},[Qt]:{large:Object.assign(Object.assign({},Jt),T),medium:Object.assign(Object.assign({},Jt),E),small:Object.assign(Object.assign({},Jt),A)},[oi]:{large:ai,medium:ai,small:ai},[ci]:{large:pi,medium:pi,small:pi},[Lt]:{large:Object.assign(Object.assign({},_t()),y),medium:Object.assign(Object.assign({},_t()),b),small:Object.assign(Object.assign({},_t()),C)},[rt]:{large:ot,medium:ot,small:ot},[ti]:{large:Object.assign(Object.assign({},ii),v),medium:Object.assign(Object.assign({},ii),m),small:Object.assign(Object.assign({},ii),f)},[Ot]:{large:Nt,medium:Nt,small:Nt},[Pt]:{large:jt,medium:jt,small:jt},[Ut]:{large:qt,medium:qt,small:qt},[di]:{large:k,medium:D,small:F},[li]:{large:si,medium:si,small:si},[Kt]:{large:Xt,medium:Xt,small:Xt},[Et]:{large:At,medium:At,small:At},[kt]:{large:Dt,medium:Dt,small:Dt},[Ft]:{large:Rt,medium:Rt,small:Rt},[zt]:{large:Gt,medium:Gt,small:Gt},[ri]:{large:R,medium:O,small:N}});function gi(e){return function(t,i){Object.entries(i).forEach(([i,r])=>{e[`${t}-${i}`]=r})}}function vi(e){const t="large"===e?a:"medium"===e?l:s,i=Object.assign(Object.assign({},ge),t),r=gi(i),n=hi();Object.entries(n).forEach(([t,i])=>{i[e]&&r(t,i[e])}),o(`dark-${e}`,i)}function mi(){vi("large"),vi("medium"),vi("small")}},83247:(e,t,i)=>{i.d(t,{nK:()=>B,DF:()=>ye,ds:()=>E,dq:()=>a,pG:()=>T,uZ:()=>A,Bp:()=>fe});var r=i(90467),o=i(104),n=i(16022);const a="__match__any_value__",l="priority";function s(e){return Array.isArray(e)}function d(e){return e===a}function c(e){return e.multi}const u=[!0,1],p=[!1,-1];function h(e,t,i){return e.matchKey.key!==t.key?p:d(i)?u:c(e)?v(e,i):g(e,i)}function g(e,t){const{matchValue:i}=e;if(s(t)){if("boolean"===typeof i)return p;if(t.includes(i))return u}else if(t===i)return u;return p}function v(e,t){const{matchValues:i}=e;if(s(t)){let e=0;for(let r=0;r<i.length;r++){const o=i[r];t.includes(o)&&(e+=1)}return e?[!0,e]:p}return"boolean"===typeof t?p:i.includes(t)?u:p}function m(e,t){let i=f(e.weight,t.weight);if(0!==i)return i;const r=e.node,o=t.node;return i=f(r.level,o.level),0!==i?i:(i=f(r.matchKey.weighting,o.matchKey.weighting),0!==i?i:(i=f(e.matchCount,t.matchCount),0!==i?i:(i=f(r.priority,o.priority),0!==i?i:f(r.index,o.index))))}function f(e,t){return e===t?0:null==e?1:null==t?-1:e<t?1:-1}function y(e){const t={};return b(t,e),t}function b(e,t){var i;t&&(e[t.matchKey.key]=t.matchValue||(null===(i=t.matchValues)||void 0===i?void 0:i.join(",")),b(e,t.parent))}class C{constructor(e){this.counter=0,this.roots=[],this.matchKeys=e.map((e,t)=>"string"===typeof e?{key:w(e),weight:1,weighting:t+1}:{key:w(e.key),weight:S(e.weight),weighting:t+1}),this.keyLength=e.length}get(e){const t=this.findMatchNode(this.roots,e);let i,r={};return t&&(i=t.node.value,n.$1.run(()=>{r=y(t.node)})),i||null==this.defaultValue||(i=this.defaultValue),n.$1.run(()=>{const t=Object.keys(e).filter(e=>"priority"!==e);console.table({匹配入参:e,匹配结果:r},t)}),i}getAll(e){var t;const i=[],r=null===(t=this.findMatchNodes(this.roots,e))||void 0===t?void 0:t.sort(m);if(r)for(const o of r){const e=o.node.value;null!=e&&i.push(e)}return null!=this.defaultValue&&i.push(this.defaultValue),i}push(e,t,i=!0){const r=this.findMatchValue(e,0);if(r){const{roots:o}=this,[n,a,l]=r,{key:s}=n;let d=o.find(e=>x(e,s,a));d||(d=this.createNode(n,a,void 0),o.push(d));const c=l+1,u=this.findMatchValue(e,c);if(u)return this.pushIteration(u,d,e,t,i);if(null==d.value||i)return d.value=t,d.priority=e.priority,!0}else if(null==this.defaultValue||i)return this.defaultValue=t,!0;return!1}createNode(e,t,i,r,o){let n;n=i?i.level+1:1;const a=s(t);return a?{matchKey:e,multi:!0,matchValues:t.sort(),value:r,parent:i,children:[],level:n,index:this.counter++,priority:o}:{matchKey:e,multi:!1,matchValue:t,value:r,parent:i,children:[],level:n,index:this.counter++,priority:o}}findMatchValue(e,t,i=!1){const{matchKeys:r,keyLength:o}=this;for(;t<o;t++){const o=r[t],n=e[o.key];if(d(n))return i?[o,n,t]:void 0;if(null!=n){if("string"===typeof n){if(!n)continue;return[o,n,t]}if(Array.isArray(n)){const e=n.length;if(!e)continue;return 1===e?[o,n[0],t]:[o,n.sort(),t]}return[o,n,t]}}}pushIteration(e,t,i,r,o){const[n,a,l]=e,{key:s}=n,d=l+1,{children:c}=t;let u=c.find(e=>x(e,s,a));u||(u=this.createNode(n,a,t),c.push(u));const p=this.findMatchValue(i,d);return p?this.pushIteration(p,u,i,r,o):!(null!=u.value&&!o)&&(u.value=r,!0)}findMatchNode(e,t){return this.$findMatchNode(e,t,{fromIndex:0,currentWeight:0})}$findMatchNode(e,t,i){if(!e.length)return;const{fromIndex:r,currentWeight:o}=i,n=this.findMatchValue(t,r,!0);if(!n)return;const[a,l,s]=n,d=s+1;let c;for(const u of e){const[e,i]=h(u,a,l);if(!e)continue;const r=o+a.weight;let n;if(c){const e={node:u,weight:r,matchCount:i};switch(m(c,e)){case 0:case 1:n=c,c=e;break}}else c={node:u,weight:r,matchCount:i};const s=this.$findMatchNode(u.children,t,{fromIndex:d,currentWeight:r});if(s)switch(m(c,s)){case 0:case 1:n=c,c=s;break}else null==c.node.value&&(c=n)}if(d<this.keyLength){const i=this.$findMatchNode(e,t,{fromIndex:d,currentWeight:o});if(null==(null===c||void 0===c?void 0:c.node.value))return i;if(i)switch(m(c,i)){case 0:case 1:return i;case-1:return c}}return c}findMatchNodes(e,t){return this.$findMatchNodes(e,t,{fromIndex:0,currentWeight:0})}$findMatchNodes(e,t,i){if(!e.length)return;const{fromIndex:r,currentWeight:o}=i,n=this.findMatchValue(t,r,!0);if(!n)return;const[a,l,s]=n,d=s+1;let c=[];for(const u of e){const[e,i]=h(u,a,l);if(!e)continue;const r=o+a.weight,n=this.$findMatchNodes(u.children,t,{fromIndex:d,currentWeight:r});(null===n||void 0===n?void 0:n.length)&&(c=[...n,...c]),null!=u.value&&c.push({node:u,weight:r,matchCount:i})}if(d<this.keyLength){const i=this.$findMatchNodes(e,t,{fromIndex:d,currentWeight:o});(null===i||void 0===i?void 0:i.length)&&(c=[...i,...c])}return c}}function x(e,t,i){return e.matchKey.key===t&&(c(e)?JSON.stringify(e.matchValues)===JSON.stringify(i):JSON.stringify(e.matchValue)===JSON.stringify(i))}function w(e){if(e=e.trim(),!e.length)throw new Error(`Invalid key. The key must not be blank. ${e}`);return e}function S(e){if(!Number.isInteger(e)||e<1)throw new Error(`Invalid weight. Weight must be an integer and greater than or equal to 1.  ${e}`);return e}class T{static createStorage(e){const{key:t,force:i=!1}=e;if(!t)throw new Error("Invalid key.");let r=T.storageMap.get(e.key);return r&&!i||(r=T.createStorageByOptions(e),T.storageMap.set(t,r)),!0}static register(e,t,i,r=!0){return T.consumerStorage(e,e=>e.operator.push(t,i,r))||!1}static selector(e,t){n.$1.run(()=>{const i="string"===typeof e?e:e.description;let r=`${t.model||""}`;const o=i.toLowerCase();["layouttpl"].includes(o)&&(r=`${t.model}:${t.viewName}`),["field","action"].includes(o)||console.group(`SPI ${i}: ${r}`)});const i=T.consumerStorage(e,e=>e.operator.get(Object.assign(Object.assign({},t),{priority:n.Xx.ofNullable(t.priority).orElse(a)})));return n.$1.run(()=>{const e=i instanceof Function,t=i?e?null===i||void 0===i?void 0:i.name:" ":"无匹配项";n.KB.info(e?"Widget":"Result",t),!e&&i&&console.log(i),console.groupEnd()}),i}static selectors(e,t){return T.consumerStorage(e,e=>e.operator.getAll(Object.assign(Object.assign({},t),{priority:n.Xx.ofNullable(t.priority).orElse(a)})))}static createStorageByOptions(e){const{key:t,matchKeys:i}=e;return{key:t,operator:new C([...new Set([...i||[],l])])}}static consumerStorage(e,t){const i=T.storageMap.get(e);if(!i)throw new Error("Please create storage space before registration.");return t(i)}}T.storageMap=new Map;class E{static Storage(e,t){return i=>{const r=(null===t||void 0===t?void 0:t.key)||(0,n._N)();T.createStorage({key:r,matchKeys:e});const o=(null===t||void 0===t?void 0:t.tokenPropertyKey)||E.TOKEN_PROPERTY;Reflect.set(i,o,e=>((null===t||void 0===t?void 0:t.tokenGenerator)||A.GeneratorToken)(r,e));const a=(null===t||void 0===t?void 0:t.selectorPropertyKey)||E.SELECTOR_PROPERTY;return Reflect.set(i,a,((null===t||void 0===t?void 0:t.selector)||A.SingleSelector)(r)),i}}static Register(e,t){return i=>{if(!e)return;let r=t;null==r&&(r=e.replace),null==r&&(r=!0),T.register(e.key,e.options,i,r)}}}E.TOKEN_PROPERTY="Token",E.SELECTOR_PROPERTY="Selector";class A{static GeneratorToken(e,t){return{key:e,options:t}}static SingleSelector(e){return t=>T.selector(e,t)}static MultiSelector(e){return t=>T.selectors(e,t)}}const k="__proto__";class D{static define(e,t,i){e[k][t]=i}static get(e,t){return e[k][t]}static delete(e,t){delete e[k][t]}}const F="__priority__",R=(e,t)=>{D.define(e,F,t)},O=new r.m({defaultScope:"Singleton",skipBaseClassChecks:!0}),N="default";function $(e,t=N){return i=>{(0,o._)()(i);let r=t,n=0;return"string"!==typeof t&&(r=t.name||N,n=t.order||0),R(i,{order:n}),O.bind(e).to(i).whenTargetNamed(r),i}}let M=0;function I(e,t=N){return i=>{(0,o._)()(i);let r=t,n=0;"string"!==typeof t&&(r=t.name||N,n=t.order||0),R(i,{order:n});const a="__auto_container__"+ ++M;return O.bind(a).to(i),O.bind(e).toAutoFactory(a).whenTargetNamed(r),i}}function L(e,t=N){return i=>{(0,o._)()(i);let r=t,n=0;return"string"!==typeof t&&(r=t.name||N,n=t.order||0),R(i,{order:n}),O.bind(e).toConstructor(i).whenTargetNamed(r),i}}function _(e,t=!0){return i=>{E.Register(e,t)(i)}}function P(e,t,i=N){return r=>{(0,o._)()(r);let n=i,a=0;"string"!==typeof i&&(n=i.name||N,a=i.order||0);const l=(...e)=>t(r,e);R(l,{order:a}),O.bind(e).toFactory(l).whenTargetNamed(n)}}const j=(e,t=[],i)=>r=>("string"===typeof e&&(e=Symbol(e)),E.Storage(t,{key:e,tokenPropertyKey:null===i||void 0===i?void 0:i.tokenPropertyKey,selectorPropertyKey:null===i||void 0===i?void 0:i.selectorPropertyKey})(r)),V="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,B=e=>V?Symbol(e):e;var H=i(63489),W=i(64693),U=i(55261),q=i(71812);const z="autowired";function G(){return(0,H.V)(z,!0)}function K(e,t){return(i,r,o)=>{(0,W.W)(e)(i,r,o),G()(i,r,o),!1===n.Xx.ofNullable(t).map(e=>e.required).orElse(!0)&&(0,U.l)()(i,r,o);const a=null===t||void 0===t?void 0:t.name;a&&(0,q.K)(a)(i,r,o)}}const X=new r.m;function Q(e){return!!e.__proxy__}function Y(e){return e.__proxy__=!0,e}function J(e,t){var i;let r=null===(i=e.prototype)||void 0===i?void 0:i.constructor;const o=!!r;if(o||(r=e.constructor),"function"!==typeof r)return;const n=t(r);n&&(o?e.prototype.constructor=n:e.constructor=n)}var Z=i(97859);function ee(e,t){const i=e.priority,r=t.priority,o=(0,Z.A)(i),n=(0,Z.A)(r);return o&&n?e.bindingId-t.bindingId:o?-1:n?1:i-r}class te{static push(e,t){te.getServicePriorities(te.store,e).push(t);const i=te.getServicePriorities(te.storeByPriority,e);return i.push(t),i.sort(ee),i}static getOptimalServiceBindingIndex(e,t){const{store:i,storeByPriority:r}=te.getStores(e,t);if(!i||!i.length||!r||!r.length)return-1;const{bindingId:o}=r[r.length-1];return i.findIndex(e=>e.bindingId===o)}static getOptimalServiceBindingIndexes(e,t){const{store:i,storeByPriority:r}=te.getStores(e,t);if(!i||!i.length||!r||!r.length)return[];const o=[];for(const n of r){const{bindingId:e}=n;o.push(i.findIndex(t=>t.bindingId===e))}return o}static getStores(e,t){var i,r;let o,n;return t?(o=null===(i=te.store.get(e))||void 0===i?void 0:i.filter(e=>e.name===t),n=null===(r=te.storeByPriority.get(e))||void 0===r?void 0:r.filter(e=>e.name===t)):(o=te.store.get(e),n=te.storeByPriority.get(e)),{store:o,storeByPriority:n}}static getServicePriorities(e,t){let i=e.get(t);return i||(i=[],e.set(t,i)),i}}function ie(e,t){const i=oe(e,t);if(!i||!i.length)return;const r=te.getOptimalServiceBindingIndex(e,null===t||void 0===t?void 0:t.name);return r>=0?i[r]:i[i.length-1]}function re(e,t){const i=oe(e,t);if(!i||!i.length)return[];const r=te.getOptimalServiceBindingIndexes(e,null===t||void 0===t?void 0:t.name),o=[],n=[];for(const a of r){const e=i[a];e?o.push(e):(console.error("Invalid service priority."),n.push(e))}return o.push(...n),o}function oe(e,t){try{const i=null===t||void 0===t?void 0:t.name;return i?X.getAllNamed(e,i):X.getAll(e)}catch(i){return console.error(i),[]}}function ne(e,t){return(i,r,o)=>{"number"===typeof o?J(i,i=>ae(e,t,i,o)):r&&J(i,i=>le(e,t,i,r))}}function ae(e,t,i,r){let o;return o=Q(i)?Y(function(...o){return o[r]=ie(e,t),i(...o)}):Y(function(...o){return o[r]=ie(e,t),new i(...o)}),o}function le(e,t,i,r){let o;return o=Q(i)?Y(function(...o){const n=i(...o);return n[r]=ie(e,t),n}):Y(function(...o){const n=new i(...o);return n[r]=ie(e,t),n}),o}function se(e,t){return(i,r,o)=>{"number"===typeof o?J(i,i=>de(e,t,i,o)):r&&J(i,i=>ce(e,t,i,r))}}function de(e,t,i,r){let o;return o=Q(i)?Y(function(...o){return o[r]=re(e,t),i(...o)}):Y(function(...o){return o[r]=re(e,t),new i(...o)}),o}function ce(e,t,i,r){let o;return o=Q(i)?Y(function(...o){const n=i(...o);return n[r]=re(e,t),n}):Y(function(...o){const n=new i(...o);return n[r]=re(e,t),n}),o}te.store=new Map,te.storeByPriority=new Map;var ue=i(83391);function pe(){return(e,t,i)=>((0,ue.k)()(e,t),i)}function he(){return(e,t,i)=>{const r=i.value;"function"===typeof r&&J(e,e=>{let t;return t=Q(e)?Y(function(...t){const i=e(...t);return r.bind(i)(),i}):Y(function(...t){const i=new e(...t);return r.bind(i)(),i}),t})}}var ge=i(5242);const ve=(0,ge.w)(z);function me(e,t){return i=>{(0,o._)()(i);const r=X.bind(e),n=te.push(e,{bindingId:r._binding.id,name:null===t||void 0===t?void 0:t.name,priority:null===t||void 0===t?void 0:t.priority}),a=r.to(i).inSingletonScope();a.when(e=>{var i;const r=e.target.getNamedTag();if(r){const e=null===t||void 0===t?void 0:t.name;return!!e&&r.value===e}if(ve(!0)){const t=null===(i=n[n.length-1])||void 0===i?void 0:i.bindingId;return null!=t&&e.bindings[0].id===t}return!0})}}function fe(e){return Symbol(e)}class ye{static Token(e){return B(e)}static FactoryToken(e){return B(e)}static ConstructorToken(e){return B(e)}}ye.Base=j,ye.ClassFactory=_,ye.Service=me,ye.Autowired=K,ye.PostConstruct=pe,ye.Instantiate=ne,ye.Instantiates=se,ye.InstantiatePostConstruct=he,ye.RawInstantiate=ie,ye.RawInstantiates=re,ye.Provide=$,ye.AutoFactory=I,ye.Constructor=L,ye.Factory=P},83671:(e,t,i)=>{i.d(t,{A:()=>y});var r=i(15215),o=i(16022),n=i(30717),a=i(47444),l=i(94261),s=i(72640),d=i(92049),c=i(20641),u=i(50953),p=i(53751),h=i(3816),g=i(32093),v=i(78603);const m=(0,c.pM)({name:"DefaultDropdown",components:{APopover:l.A,OioButton:n._5z,OioDropdown:n.rQ1,AMenu:s.Ay},inheritAttrs:!1,props:Object.assign(Object.assign({},n.tbP),{template:{type:Object},type:{type:String,default:"primary"},label:{type:String},icon:{type:String},inline:{type:Boolean,default:!1},invisible:{type:Boolean,default:!1},allMounted:{type:Function}}),slots:["default","trigger"],setup(e,{slots:t}){const i=(0,u.KR)(!1);(0,a.Ll)({allMounted:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)},allMountedUpdate:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)}}),(0,c.sV)(()=>(0,r.sH)(this,void 0,void 0,function*(){yield(0,c.dY)();let e=setTimeout(()=>{i.value=!0,clearTimeout(e),e=null})})),(0,v.oy)({isSelectItem:(0,c.EW)(()=>!0)});const o=(0,c.EW)(()=>{if(!i.value)return null;const e=t,r=e.default(),o=[],n=e=>{var t,i,r;for(const a of e)if(g.X7.isFragment(a)){const e=a.children;if((0,d.A)(e)&&!n(a.children))return!1}else(null===(r=null===(i=null===(t=a.type)||void 0===t?void 0:t.name)||void 0===i?void 0:i.toLowerCase)||void 0===r?void 0:r.call(i))===h.YZ.Action&&o.push(a);return!0};return n(r),o});return{overlayChildren:o}},render(){const e=n.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0},{origin:"trigger",isNotNull:!0}]),t=()=>{var t;let i=e.trigger()[0];return i||(i=this.inline?(0,c.bF)(n._5z,{class:o.MZ.append([],o.Gf.cast((null===(t=this.template)||void 0===t?void 0:t.class)||this.$attrs.class)),type:this.type,icon:this.icon,iconPlacement:n.H_c.AFTER},{default:()=>this.label}):(0,c.bF)(n._5z,{class:"oio-action-item",type:this.type},{default:()=>this.label})),i},i=t();return(0,c.bF)(n.rQ1,{disabled:this.disabled,trigger:this.trigger,placement:this.placement,overlayClassName:o.MZ.append(["default-dropdown-overlay"],o.Gf.cast(this.overlayClassName)),overlayStyle:this.overlayStyle,forceRender:!0,destroyOnHide:!1,getTriggerContainer:this.getTriggerContainer},{default:()=>[(0,c.bo)(i,[[p.aG,!this.invisible]])],overlay:()=>[(0,c.bF)(s.Ay,{class:"default-dropdown-menu"},{default:()=>this.overlayChildren})]})}}),f=m,y=f},84774:(e,t,i)=>{i.d(t,{pYI:()=>ts,lAm:()=>ie.lA,nuD:()=>ie.nu,PV0:()=>ie.PV,AOR:()=>ie.AO,pxF:()=>ie.px,Dd$:()=>ie.Dd,bPR:()=>ie.bP,wul:()=>ie.wu,ity:()=>ie.it,DZ2:()=>r.DZ,oWo:()=>ie.oW,lOI:()=>An,uKN:()=>n.uK,scT:()=>r.sc});var r=i(68890),o=i(55900),n=i(68706),a=i(31270),l=i(15215),s=i(70164),d=i(16022),c=i(83247),u=i(47444),p=i(91702),h=i(27581),g=i(20641);function v(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field"),l=(0,g.g2)("default-form-item");return(0,g.uX)(),(0,g.Wv)(l,{name:e.itemName,invisible:e.invisible,colon:e.colon,layout:e.layout,label:e.label,help:e.help,hint:e.hint,required:e.required,"validate-trigger":e.validateTrigger,"validator-info":e.validatorInfo},{default:(0,g.k6)(()=>[(0,g.bF)(a,{value:e.realValue,"is-empty":e.isRealEmpty,"empty-style":e.emptyStyle},null,8,["value","is-empty","empty-style"])]),_:1},8,["name","invisible","colon","layout","label","help","hint","required","validate-trigger","validator-info"])}var m=i(25195),f=i(77283),y=i(9703),b=i(40307),C=i(48182),x=i(66401);function w(e){const t=(t,i)=>{let r;if((0,y.A)(t))r=d.rL.toDate(t,e.valueFormat);else{if(!(0,b.A)(t))return t?(console.warn(`无法识别的日期值, 显示的值可能出现异常. value=${t}`),(0,C.A)(t)):"";r=t}if(r)return d.rL.dateFormat(r,i)},i=(0,g.EW)(()=>{let[i,r]=e.value||[];if((0,x.A)(i)&&(0,x.A)(r))return"";const o=d.rL.fetchDatetimeFormat({hasDateFormat:e.hasDateFormat,hasTimeFormat:e.hasTimeFormat},e.format,e.dateFormat,e.timeFormat,e.convertFormat,e.convertDateFormat,e.convertTimeFormat);return o&&(i=t(i,o),r=t(r,o)),`${i} ${e.separator} ${r}`}),r=(0,g.EW)(()=>(0,x.A)(i.value));return{realValue:i,isRealEmpty:r}}const S=(0,g.pM)({name:"ReadonlyDateTimeRangePicker",components:{DetailCommonField:f.A,DefaultFormItem:p.Te},props:Object.assign(Object.assign(Object.assign({},m.SS5),p.Dn),{itemName:{type:String},value:{type:Object},separator:{type:String,default:"~"},emptyStyle:{type:String}}),setup(e){return Object.assign({},w(e))}});var T=i(66262);const E=(0,T.A)(S,[["render",v]]),A=E;let k=class extends h.v1{constructor(){super(...arguments),this.hasDateFormat=!0,this.hasTimeFormat=!0}get defaultFormat(){return d.DF}initialize(e){return super.initialize(e),this.setComponent(A),this}get format(){return this.getDsl().format}get valueFormat(){return d.DF}get dateFormat(){return this.executeExpression(this.getDsl().dateFormat)}get timeFormat(){return this.executeExpression(this.getDsl().timeFormat)}convertFormat(e){return d.DY.get(e)}convertDateFormat(e){return d.aW.get(e)}convertTimeFormat(e){return d.Rh.get(e)}get emptyStyle(){return this.getDsl().emptyStyle}};(0,l.Cg)([u.x0.Reactive()],k.prototype,"format",null),(0,l.Cg)([u.x0.Reactive()],k.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],k.prototype,"dateFormat",null),(0,l.Cg)([u.x0.Reactive()],k.prototype,"timeFormat",null),(0,l.Cg)([u.x0.Reactive()],k.prototype,"hasDateFormat",void 0),(0,l.Cg)([u.x0.Reactive()],k.prototype,"hasTimeFormat",void 0),(0,l.Cg)([u.x0.Reactive()],k.prototype,"convertFormat",null),(0,l.Cg)([u.x0.Reactive()],k.prototype,"convertDateFormat",null),(0,l.Cg)([u.x0.Reactive()],k.prototype,"convertTimeFormat",null),(0,l.Cg)([u.x0.Reactive()],k.prototype,"emptyStyle",null),k=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Detail,widget:"DateTimeRangePicker"}))],k);let D=class extends k{constructor(){super(...arguments),this.hasTimeFormat=!1}get defaultFormat(){return d.vz}get valueFormat(){return d.vz}convertFormat(e){return d.aW.get(e)}};(0,l.Cg)([u.x0.Reactive()],D.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],D.prototype,"hasTimeFormat",void 0),(0,l.Cg)([u.x0.Method()],D.prototype,"convertFormat",null),D=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Detail,widget:"DateRangePicker"}))],D);let F=class extends k{constructor(){super(...arguments),this.hasDateFormat=!1}get defaultFormat(){return d.CE}get valueFormat(){return d.CE}convertFormat(e){return d.Rh.get(e)}};(0,l.Cg)([u.x0.Reactive()],F.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],F.prototype,"hasDateFormat",void 0),(0,l.Cg)([u.x0.Method()],F.prototype,"convertFormat",null),F=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Detail,widget:"TimeRangePicker"}))],F);let R=class extends k{constructor(){super(...arguments),this.hasDateFormat=!1,this.hasTimeFormat=!1}get defaultFormat(){return d._i}get format(){return this.getDsl().format||this.defaultFormat}get valueFormat(){return d.zq}};(0,l.Cg)([u.x0.Reactive()],R.prototype,"format",null),(0,l.Cg)([u.x0.Reactive()],R.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],R.prototype,"hasDateFormat",void 0),(0,l.Cg)([u.x0.Reactive()],R.prototype,"hasTimeFormat",void 0),R=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Detail,widget:"YearRangePicker"}))],R);var O=i(78422);function N(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(a,{value:e.realValue,"is-empty":e.isRealEmpty,"empty-style":e.emptyStyle},null,8,["value","is-empty","empty-style"])}var $=i(41196);const M=(0,g.pM)({name:"ReadonlyDateTimePicker",components:{DetailCommonField:f.A},props:Object.assign(Object.assign({},m.SS5),{value:{type:[Date,String],default:""},emptyStyle:{type:String}}),setup(e){return Object.assign({},(0,$.r)(e))}}),I=(0,T.A)(M,[["render",N]]),L=I;let _=class extends p.d4{constructor(){super(...arguments),this.resourceDateTimeFormat={},this.hasDateFormat=!0,this.hasTimeFormat=!0}initialize(e){return super.initialize(e),this.setComponent(L),this}get format(){return this.getDsl().format}get valueFormat(){return this.getDsl().valueFormat}get dateFormat(){let e=this.executeExpression(this.getDsl().dateFormat);return e||(e=d.ai),d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceDateFormat)[e]||e}get timeFormat(){let e=this.executeExpression(this.getDsl().timeFormat);return e||(e=d.rc),d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceTimeFormat)[e]||e}convertFormat(e){return d.DY.get(e)}convertDateFormat(e){return d.aW.get(e)}convertTimeFormat(e){return d.Rh.get(e)}get justifyContent(){return this.getDsl().justifyContent}$$created(){const e=Object.create(null,{$$created:{get:()=>super.$$created}});return(0,l.sH)(this,void 0,void 0,function*(){e.$$created.call(this),this.resourceDateTimeFormat=yield(0,O.Nkk)()})}};(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object)],_.prototype,"resourceDateTimeFormat",void 0),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],_.prototype,"format",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],_.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],_.prototype,"dateFormat",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],_.prototype,"timeFormat",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object)],_.prototype,"hasDateFormat",void 0),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object)],_.prototype,"hasTimeFormat",void 0),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Function),(0,l.Sn)("design:paramtypes",[String]),(0,l.Sn)("design:returntype",Object)],_.prototype,"convertFormat",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Function),(0,l.Sn)("design:paramtypes",[String]),(0,l.Sn)("design:returntype",Object)],_.prototype,"convertDateFormat",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Function),(0,l.Sn)("design:paramtypes",[String]),(0,l.Sn)("design:returntype",Object)],_.prototype,"convertTimeFormat",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],_.prototype,"justifyContent",null),_=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:s.m1.DateTime}))],_);let P=class extends _{constructor(){super(...arguments),this.hasTimeFormat=!1}get defaultFormat(){return d.vz}get valueFormat(){return d.vz}convertFormat(e){return d.aW.get(e)}};(0,l.Cg)([u.x0.Reactive()],P.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],P.prototype,"hasTimeFormat",void 0),(0,l.Cg)([u.x0.Method()],P.prototype,"convertFormat",null),P=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:s.m1.Date}))],P);let j=class extends _{constructor(){super(...arguments),this.hasDateFormat=!1}get defaultFormat(){return d.CE}get valueFormat(){return d.CE}convertFormat(e){return d.Rh.get(e)}};(0,l.Cg)([u.x0.Reactive()],j.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],j.prototype,"hasDateFormat",void 0),(0,l.Cg)([u.x0.Method()],j.prototype,"convertFormat",null),j=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:s.m1.Time}))],j);let V=class extends _{constructor(){super(...arguments),this.hasDateFormat=!1,this.hasTimeFormat=!1}get defaultFormat(){return d._i}get format(){return this.getDsl().format||this.defaultFormat}get valueFormat(){return d.zq}};(0,l.Cg)([u.x0.Reactive()],V.prototype,"format",null),(0,l.Cg)([u.x0.Reactive()],V.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],V.prototype,"hasDateFormat",void 0),(0,l.Cg)([u.x0.Reactive()],V.prototype,"hasTimeFormat",void 0),V=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:s.m1.Year}))],V);var B=i(68786),H=i(2086);class W extends p.uk{get relationFieldKey(){return(0,O.q)(this.field,this.referencesModel)}handleTableLabel(e){var t;const i=this.optionLabel||(null===(t=this.referencesModel)||void 0===t?void 0:t.label);let r;return r=(0,s.Po)(i)?(0,H.$r)(this.relationFieldKey,e,this.labelFields,this.separator):(0,H.IR)(this.relationFieldKey,e,i,this.optionLabelContextArgs),r}get currentValue(){return this.handleTableLabel(this.value)}}(0,l.Cg)([u.x0.Reactive()],W.prototype,"relationFieldKey",null),(0,l.Cg)([u.x0.Reactive()],W.prototype,"currentValue",null);var U=i(90033);const q={key:0,class:"detail-multi-select"},z=["title"],G={key:1};function K(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field");return e.currentValue.length>0?((0,g.uX)(),(0,g.CE)("div",q,[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.currentValue,e=>((0,g.uX)(),(0,g.CE)("div",{class:"detail-multi-select-item",key:e.value},[(0,g.Lk)("div",{class:"detail-multi-select-item-font",title:e.label},(0,U.v_)(e.label),9,z)]))),128))])):((0,g.uX)(),(0,g.CE)("div",G,[(0,g.bF)(a,{"empty-style":e.emptyStyle},null,8,["empty-style"])]))}const X=(0,g.pM)({props:{currentValue:{type:Array,default:()=>[],required:!0},emptyStyle:{type:String}},components:{DetailCommonField:f.A}}),Q=(0,T.A)(X,[["render",K]]),Y=Q;let J=class extends W{loadMetadata(){}fetchData(){var e;return(0,l.sH)(this,void 0,void 0,function*(){(0,O.H$Y)(this.getDsl().optionLabel||(null===(e=this.referencesModel)||void 0===e?void 0:e.label),this.referencesModel.labelFields,this.referencesModel.modelFields);return this.formData[this.itemName]=[],this.formData[this.itemName]})}get currentValue(){const e=this.value||[],t=[];for(const i of e)t.push(this.handleTableLabel(i));return t}initialize(e){return super.initialize(e),this.setComponent(Y),this}};(0,l.Cg)([u.x0.Reactive()],J.prototype,"currentValue",null),J=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.OneToMany,widget:"Select"}))],J);let Z=class extends J{};Z=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.ManyToMany,widget:"Select"}))],Z);let ee=class extends p.I_{refreshValueProcess(){const e=Object.create(null,{refreshValueProcess:{get:()=>super.refreshValueProcess}});return(0,l.sH)(this,void 0,void 0,function*(){this.isDataSourceProvider&&(yield e.refreshValueProcess.call(this))})}initSubviewData(){const e=this.runtimeSubviewContext.view;if(!e)return void super.initSubviewData();const{formData:t,model:i,field:r}=this;let o;if(p.tz.isNeedQuery(r,s.nE.Lookup)){if(o=p.tz.generatorM2MQueryData(i,r,t),!o)return this.isDataSourceProvider=!1,void this.reloadDataSource([]);this.isDataSourceProvider||this.reloadDataSource(void 0),e.initialValue=[o],this.isDataSourceProvider=!1}else super.initSubviewData()}};ee=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Detail,ttype:s.m1.ManyToMany}))],ee);let te=class extends p.I_{refreshValueProcess(){const e=Object.create(null,{refreshValueProcess:{get:()=>super.refreshValueProcess}});return(0,l.sH)(this,void 0,void 0,function*(){this.isDataSourceProvider&&(yield e.refreshValueProcess.call(this))})}initSubviewData(){const e=this.runtimeSubviewContext.view;if(!e)return void super.initSubviewData();const{formData:t,field:i}=this;let r;if(p.tz.isNeedQuery(i,s.nE.Lookup)){if(r=p.tz.generatorO2MCondition(i,t),!r)return this.isDataSourceProvider=!1,void this.reloadDataSource([]);this.isDataSourceProvider||this.reloadDataSource(void 0),e.filter=r.toString(),this.isDataSourceProvider=!1}else super.initSubviewData()}};te=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Detail,ttype:s.m1.OneToMany}))],te);var ie=i(4093);let re=class extends ie.lm{};function oe(e,t,i,r,o,n){const a=(0,g.g2)("oio-color-picker"),l=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(l,{value:e.value,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bF)(a,{value:e.realValue,"default-value":e.defaultValue,"has-input":e.hasInput,"input-placeholder":e.placeholder,disabled:e.disabled,readonly:"",predefine:e.predefine,onChange:e.change,onActiveChange:e.change,onFocus:e.focus,onBlur:e.blur},null,8,["value","default-value","has-input","input-placeholder","disabled","predefine","onChange","onActiveChange","onFocus","onBlur"])]),_:1},8,["value","empty-style"])}re=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:s.m1.Map}))],re);var ne=i(81220);const ae=(0,g.pM)({name:"DefaultColorPicker",components:{DetailCommonField:f.A,OioColorPicker:ne.dzx},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},p.jW),p.R7),{value:{type:String},defaultValue:{type:String},colorFormat:{type:[String,Object],default:m.NVY.RGB},hasInput:{type:Boolean,default:!0},placeholder:{type:String,default:(0,O.cAb)("请选择颜色")},inputPlacement:{type:[String,Object],default:m.X45.BEFORE},predefine:{type:Array,default:m.rkC},emptyStyle:{type:String}}),setup(e){return Object.assign({},(0,p.P1)(e))}}),le=(0,T.A)(ae,[["render",oe]]),se=le;let de=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(se),this}get justifyContent(){return this.getDsl().justifyContent}};(0,l.Cg)([u.x0.Reactive()],de.prototype,"justifyContent",null),de=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:s.m1.String,widget:"ColorPicker"}))],de);const ce={key:0,class:"detail-multi-select"},ue=["title","innerHTML"],pe={key:1};function he(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field");return e.list.length>0?((0,g.uX)(),(0,g.CE)("div",ce,[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.list,e=>((0,g.uX)(),(0,g.CE)("div",{class:"detail-multi-select-item",key:e},[(0,g.Lk)("div",{class:"detail-multi-select-item-font",title:e,innerHTML:e},null,8,ue)]))),128))])):((0,g.uX)(),(0,g.CE)("div",pe,[(0,g.bF)(a,{"empty-style":e.emptyStyle},null,8,["empty-style"])]))}const ge=(0,g.pM)({components:{DetailCommonField:f.A},inheritAttrs:!1,props:{displayNameList:{type:Array,default:()=>[]},emptyStyle:{type:String},field:{type:Object}},setup(e){const t=(0,g.EW)(()=>e.displayNameList.map(e=>e?e.replace(/\r?\n/g,"<br/>"):""));return{list:t}}}),ve=(0,T.A)(ge,[["render",he]]),me=ve;let fe=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(me),this}get displayNameList(){return this.value||[]}get optionColor(){return this.optionColorStyle===o.Q.COLORFUL}get optionColorStyle(){return this.getDsl().optionColorStyle||o.Q.COLORFUL}};(0,l.Cg)([u.x0.Reactive()],fe.prototype,"displayNameList",null),(0,l.Cg)([u.x0.Reactive()],fe.prototype,"optionColor",null),(0,l.Cg)([u.x0.Reactive()],fe.prototype,"optionColorStyle",null),fe=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:[s.m1.String,s.m1.Integer,s.m1.Text],multi:!0}))],fe);var ye=i(25873);let be=class extends ie.wu{initialize(e){return super.initialize(e),this.setComponent(ye.lj),this}};be=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.String,widget:["MediaPlayer"]}))],be);let Ce=class extends ie.Gm{get showClearButton(){return!1}get showSaveButton(){return!1}};(0,l.Cg)([u.x0.Reactive()],Ce.prototype,"showClearButton",null),(0,l.Cg)([u.x0.Reactive()],Ce.prototype,"showSaveButton",null),Ce=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Detail,ttype:[s.m1.String,s.m1.Text],widget:"Signature"}))],Ce);var xe=i(4792);const we={class:"detail-iframe"},Se=["src"];function Te(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(a,{class:(0,U.C4)([e.value?"iframe-detail-common-field":"iframe-detail-common-field-empty"]),value:e.value,"empty-style":e.emptyStyle},{default:(0,g.k6)(({realValue:e})=>[(0,g.Lk)("div",we,[(0,g.Lk)("iframe",{src:e,frameborder:"0"},null,8,Se)])]),_:1},8,["class","value","empty-style"])}const Ee=(0,g.pM)({components:{DetailCommonField:f.A},props:{value:{type:String},emptyStyle:{type:String}}}),Ae=(0,T.A)(Ee,[["render",Te]]),ke=Ae;let De=class extends xe.w{initialize(e){return super.initialize(e),this.setComponent(ke),this}};De=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.String,widget:["Iframe"]}))],De);function Fe(e,t,i,r,o,n){const a=(0,g.g2)("UploadImg"),l=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(l,{value:e.value,"is-empty":e.isRealEmpty,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bF)(a,{value:e.value,readonly:""},null,8,["value"])]),_:1},8,["value","is-empty","empty-style"])}var Re=i(36310);const Oe=(0,g.pM)({name:"ReadonlyUploadImg",components:{UploadImg:Re.A,DetailCommonField:f.A},props:{value:{type:[String,Array]},emptyStyle:{type:String}},setup(e){const t=(0,g.EW)(()=>(0,x.A)(e.value));return{isRealEmpty:t}}}),Ne=(0,T.A)(Oe,[["render",Fe]]),$e=Ne;let Me=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent($e),this}};Me=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:[s.m1.String,s.m1.Text],widget:["UploadImg"]}))],Me);function Ie(e,t,i,r,o,n){const a=(0,g.g2)("Upload"),l=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(l,{value:e.value,"is-empty":e.isRealEmpty,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bF)(a,{value:e.value,readonly:"",cdnKey:e.cdnKey,privateLink:e.privateLink},null,8,["value","cdnKey","privateLink"])]),_:1},8,["value","is-empty","empty-style"])}var Le=i(18501);const _e=(0,g.pM)({name:"ReadonlyUpload",components:{Upload:Le.A,DetailCommonField:f.A},props:{value:{type:[String,Array]},emptyStyle:{type:String},cdnKey:{type:String},privateLink:{type:Boolean,default:void 0}},setup(e){const t=(0,g.EW)(()=>(0,x.A)(e.value));return{isRealEmpty:t}}}),Pe=(0,T.A)(_e,[["render",Ie]]),je=Pe;let Ve=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(je),this}get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return d.TM.toBoolean(this.getDsl().privateLink)}};(0,l.Cg)([u.x0.Reactive()],Ve.prototype,"cdnKey",null),(0,l.Cg)([u.x0.Reactive()],Ve.prototype,"privateLink",null),Ve=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:[s.m1.String,s.m1.Text],widget:["Upload"]}))],Ve);const Be=["title"];function He(e,t,i,r,o,n){const a=(0,g.g2)("InputPreSuffix"),l=(0,g.g2)("oio-empty"),s=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(s,{"is-empty":!1},{default:(0,g.k6)(()=>[e.prefix?((0,g.uX)(),(0,g.Wv)(a,{key:0,"content-type":e.prefixType,content:e.prefix,style:(0,U.Tr)(e.prefixStyle),color:e.valueColor,"font-size":e.valueFontSize},null,8,["content-type","content","style","color","font-size"])):(0,g.Q3)("",!0),e.currentValue?((0,g.uX)(),(0,g.CE)("span",{key:2,class:"detail-string-value",title:e.currentValue,style:(0,U.Tr)(e.contentStyle)},(0,U.v_)(e.currentValue||"-"),13,Be)):((0,g.uX)(),(0,g.Wv)(l,{key:1,class:"detail-string-value detail-string-value-empty",style:(0,U.Tr)(e.contentStyle),"empty-style":e.emptyStyle},null,8,["style","empty-style"])),e.suffix?((0,g.uX)(),(0,g.Wv)(a,{key:3,"content-type":e.suffixType,content:e.suffix,style:(0,U.Tr)(e.suffixStyle),color:e.valueColor,"font-size":e.valueFontSize},null,8,["content-type","content","style","color","font-size"])):(0,g.Q3)("",!0)]),_:1})}var We=i(45383);const Ue=(0,g.pM)({components:{DetailCommonField:f.A,InputPreSuffix:We.A,OioEmpty:m.fwf},inheritAttrs:!1,props:Object.assign(Object.assign({},r.V5),{currentValue:{type:String},justifyContent:{type:String},valueFontSize:{type:String},valueColor:{type:String},emptyStyle:{type:String}}),setup(e){const t=(0,g.EW)(()=>{const t={marginRight:"4px"};return t.fontSize=e.valueFontSize||"",t.color=e.valueColor||"",t}),i=(0,g.EW)(()=>{const t={marginLeft:"4px"};return t.fontSize=e.valueFontSize||"",t.color=e.valueColor||"",t}),r=(0,g.EW)(()=>{const t={};return t.fontSize=e.valueFontSize||"",t.color=e.valueColor||"",t});return{prefixStyle:t,suffixStyle:i,contentStyle:r}}}),qe=(0,T.A)(Ue,[["render",He]]),ze=qe;let Ge=class extends ie.tM{initialize(e){return super.initialize(e),this.setComponent(ze),this}get currentValue(){return this.value&&this.type===m.NZc.PASSWORD?(0,n.Cm)(this.value):this.value}get emptyStyle(){return this.getDsl().emptyStyle}};(0,l.Cg)([u.x0.Reactive()],Ge.prototype,"currentValue",null),(0,l.Cg)([u.x0.Reactive()],Ge.prototype,"emptyStyle",null),Ge=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:[s.m1.String,s.m1.Phone,s.m1.Email]}))],Ge);let Ke=class extends ie.ib{};Ke=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Detail,ttype:[s.m1.String,s.m1.Text],widget:"Download"}))],Ke);const Xe=(0,g.pM)({name:"DetailHyperlinks",inheritAttrs:!1,props:{text:{type:String},value:{type:String},target:{type:String},emptyStyle:{type:String}},render(){return(0,g.bF)("div",{class:"form-string-hyperlinks",title:this.value},[this.text||this.value?(0,g.bF)("a",{href:this.value,target:this.target},this.text||this.value):(0,g.bF)(m.fwf,{emptyStyle:this.emptyStyle})])}}),Qe=Xe,Ye=Qe;let Je=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(Ye),this}get text(){return this.getDsl().text}get target(){const{target:e}=this.getDsl();if(e)switch(e){case s.jq.Router:return O.nHy.SELF;case s.jq.OpenWindow:return O.nHy.BLANK;default:return O.nHy.BLANK}return O.nHy.BLANK}};(0,l.Cg)([u.x0.Reactive()],Je.prototype,"text",null),(0,l.Cg)([u.x0.Reactive()],Je.prototype,"target",null),Je=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.String,widget:"Hyperlinks"}))],Je);const Ze={style:{background:"rgba(247, 181, 0, 0.1)",padding:"9px 12px","border-radius":"4px",color:"var(--oio-text-color)"}};function et(e,t,i,r,o,n){const a=(0,g.g2)("OioIcon");return(0,g.uX)(),(0,g.CE)("div",Ze,[(0,g.eW)((0,U.v_)(e.value)+" ",1),(0,g.bF)(a,{icon:"oinone-copy",size:"12px",style:{cursor:"pointer","vertical-align":"baseline","margin-left":"8px",background:"rgba(247, 181, 0, 0.2)","border-radius":"50%",padding:"4px"},color:"#F7B500",onClick:e.onCopy},null,8,["onClick"])])}var tt=i(30717);const it=(0,g.pM)({props:{value:{type:String}},components:{OioIcon:tt.Lky},inheritAttrs:!1,setup(e){const t=()=>{let t=document.createElement("textarea");t.value=e.value,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),document.body.removeChild(t),tt.$xc.success("复制","复制成功"),t=null};return{onCopy:t}}}),rt=(0,T.A)(it,[["render",et]]),ot=rt;let nt=class extends p.Qn{initialize(e){return super.initialize(e),this.setComponent(ot),this}};nt=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:[s.qi.Detail],ttype:s.m1.String,widget:"StringWithCopy"}))],nt);let at=class extends B.d4{initialize(e){return super.initialize(e),this.setComponent(f.A),this}get type(){return this.getDsl().type}};(0,l.Cg)([u.x0.Reactive()],at.prototype,"type",null),at=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:s.qi.Detail,ttype:[s.m1.Text,s.m1.Related]}))],at);var lt=i(61174);const st={key:0,class:"detail-multi-select"},dt=["title"],ct={key:1};function ut(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field");return e.realOptions.length>0&&e.optionColor?((0,g.uX)(),(0,g.CE)("div",st,[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.realOptions,t=>((0,g.uX)(),(0,g.CE)("div",{class:"detail-multi-select-item",key:t.key,style:(0,U.Tr)(e.computeStyle(t))},[(0,g.Lk)("div",{class:"detail-multi-select-item-font",title:t.label},(0,U.v_)(t.label),9,dt)],4))),128))])):((0,g.uX)(),(0,g.CE)("div",ct,[(0,g.bF)(a,{"empty-style":e.emptyStyle,value:e.displayNameListStr},null,8,["empty-style","value"])]))}const pt=(0,g.pM)({components:{DetailCommonField:f.A},inheritAttrs:!1,props:{displayNameList:{type:Array,default:()=>[]},emptyStyle:{type:String},optionColor:{type:Boolean},displayNameListStr:{type:String}},setup(e){const t=(0,g.EW)(()=>(0,n.pL)(e.displayNameList)),i=e=>{const t=e.data,{color:i,backgroundColor:r,borderColor:o}=t,n={};return i&&(n.color=i),r&&(n.backgroundColor=r),o&&(n.borderWidth="1px",n.borderStyle="solid",n.borderColor=o),n};return{realOptions:t,computeStyle:i}}}),ht=(0,T.A)(pt,[["render",ut]]),gt=ht;let vt=class extends lt.g{initialize(e){return super.initialize(e),this.setComponent(gt),this}get displayNameList(){return(0,n.lC)(this.value,this.options)}get displayNameListStr(){if(this.displayNameList&&this.displayNameList.length)return this.displayNameList.map(e=>e&&e.label).join("，")}};(0,l.Cg)([u.x0.Reactive()],vt.prototype,"displayNameList",null),(0,l.Cg)([u.x0.Reactive()],vt.prototype,"displayNameListStr",null),vt=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.Enum}))],vt);let mt=class extends lt.g{initialize(e){return super.initialize(e),this.setComponent(gt),this}get displayNameList(){const e=this.options||[];return(0,n.MQ)(this.value,e)}get displayNameListStr(){if(this.displayNameList&&this.displayNameList.length)return this.displayNameList.map(e=>e&&e.label).join("，")}};(0,l.Cg)([u.x0.Reactive()],mt.prototype,"displayNameList",null),(0,l.Cg)([u.x0.Reactive()],mt.prototype,"displayNameListStr",null),mt=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.Enum,multi:!0}))],mt);function ft(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(a,{value:e.realLabel},null,8,["value"])}var yt=i(71928);const bt=(0,g.pM)({components:{DetailCommonField:f.A},props:{value:{type:Boolean,default:void 0,required:!1}},setup(e){const{realLabel:t}=(0,yt.C)(e);return{realLabel:t}}}),Ct=(0,T.A)(bt,[["render",ft]]),xt=Ct;let wt=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(xt),this}};wt=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.Boolean}))],wt);let St=class extends ie.Du{initialize(e){return super.initialize(e),this.setComponent(gt),this}get displayNameList(){return(0,n.lC)(this.value,this.options)}get optionColor(){return this.optionColorStyle===o.Q.COLORFUL}get optionColorStyle(){return this.getDsl().optionColorStyle||o.Q.COLORFUL}get displayNameListStr(){if(this.displayNameList&&this.displayNameList.length)return this.displayNameList.map(e=>e&&e.label).join("，")}};(0,l.Cg)([u.x0.Reactive()],St.prototype,"displayNameList",null),(0,l.Cg)([u.x0.Reactive()],St.prototype,"optionColor",null),(0,l.Cg)([u.x0.Reactive()],St.prototype,"optionColorStyle",null),(0,l.Cg)([u.x0.Reactive()],St.prototype,"displayNameListStr",null),St=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:[s.m1.Boolean],widget:["Select","Radio"]}))],St);function Tt(e,t,i,r,o,n){const a=(0,g.g2)("preview-html"),l=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(l,{class:"default-detail-html",value:e.realValue,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bF)(a,{html:e.realValue,style:(0,U.Tr)(e.realValue&&"min-height: 300px")},null,8,["html","style"])]),_:1},8,["value","empty-style"])}var Et=i(49464);const At=(0,g.pM)({components:{DetailCommonField:f.A,PreviewHtml:Et.YA},props:{value:{type:String},encode:{type:Boolean},emptyStyle:{type:String}},setup(e){const t=(0,g.EW)(()=>e.encode&&e.value?decodeURI(e.value):e.value);return{realValue:t}}}),kt=(0,T.A)(At,[["render",Tt]]),Dt=kt;let Ft=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(Dt),this}get encode(){const e=this.getDsl().encode;return!!e&&d.TM.toBoolean(e)}};function Rt(e,t,i,r,o,n){const a=(0,g.g2)("detail-common-field");return(0,g.uX)(),(0,g.Wv)(a,{value:e.currentValue?e.currentValue.label:void 0,"empty-style":e.emptyStyle},null,8,["value","empty-style"])}(0,l.Cg)([u.x0.Reactive()],Ft.prototype,"encode",null),Ft=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.HTML}))],Ft);const Ot=(0,g.pM)({props:{currentValue:{type:Object},emptyStyle:{type:String}},components:{DetailCommonField:f.A},inheritAttrs:!1}),Nt=(0,T.A)(Ot,[["render",Rt]]),$t=Nt;let Mt=class extends W{initialize(e){return super.initialize(e),this.setComponent($t),this}};Mt=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.ManyToOne}))],Mt);const It=["href"],Lt={key:1};function _t(e,t,i,r,o,n){const a=(0,g.g2)("download-outlined");return e.value?((0,g.uX)(),(0,g.CE)("a",{key:0,href:e.value.url,download:""},[(0,g.bF)(a),(0,g.eW)(" "+(0,U.v_)(e.value.name),1)],8,It)):((0,g.uX)(),(0,g.CE)("span",Lt,"-"))}var Pt=i(40912);const jt=(0,g.pM)({inheritAttrs:!1,components:{DownloadOutlined:Pt.A},props:{value:{type:Object}}}),Vt=(0,T.A)(jt,[["render",_t]]),Bt=Vt;let Ht=class extends W{initialize(e){return super.initialize(e),this.setComponent(Bt),this}get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return d.TM.toBoolean(this.getDsl().privateLink)}};(0,l.Cg)([u.x0.Reactive()],Ht.prototype,"cdnKey",null),(0,l.Cg)([u.x0.Reactive()],Ht.prototype,"privateLink",null),Ht=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.ManyToOne,widget:"Upload"}))],Ht);let Wt=class extends Mt{};Wt=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Detail],ttype:s.m1.OneToOne,widget:"Select"}))],Wt);var Ut=i(41361);let qt=class extends Ut.e{initialize(e){return super.initialize(e),this.setComponent(ze),this}get currentValue(){let e=(0,n.fe)((0,C.A)(this.value),this.precision);return this.showThousandth&&(e=(0,n.li)(e)),""===e?void 0:e}};(0,l.Cg)([u.x0.Reactive()],qt.prototype,"currentValue",null),qt=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Detail],ttype:[s.m1.Integer,s.m1.Long,s.m1.Float,s.m1.Currency]}))],qt);var zt=i(97859),Gt=i(98916),Kt=i(89610),Xt=i(92049);const Qt=(0,g.pM)({name:"GalleryCommonField",inheritAttrs:!1,props:{value:{type:[String,Number,Boolean,Object],default:void 0},isEmpty:{type:[Boolean,Function],default:void 0},justifyContent:{type:String},emptyStyle:{type:String}},slots:["default","empty"],setup(e){const t=(0,g.EW)(()=>{const t=e.value;return(0,zt.A)(t)?"":(0,C.A)(t)}),i=(0,g.EW)(()=>{const i=e.isEmpty;return(0,Gt.A)(i)?i:(0,Kt.A)(i)?i(t.value):""===e.value||(!!((0,Xt.A)(e.value)&&e.value.length<=0)||(0,zt.A)(e.value))}),r=(0,g.EW)(()=>d.Xx.ofNullable(e.justifyContent).map(e=>m.QW9[e]).orElse(m.QW9.START)),o=(0,g.EW)(()=>{const e={};return r.value&&(e.justifyContent=r.value),e});return{realValue:t,isRealEmpty:i,justifyContent:r,style:o}},render(){const{$attrs:e,$slots:t,isRealEmpty:i,style:r,emptyStyle:o}=this,{default:n,empty:a}=m.$pj.collectionSlots(t,[{origin:"default",default:({realValue:e})=>[(0,g.bF)("div",{class:"gallery-common-field-value",title:e},e)]},{origin:"empty",default:()=>[(0,g.bF)(m.fwf,{emptyStyle:o})]}]),l=i?a():n({realValue:this.realValue});return(0,g.bF)("div",m.$pj.collectionBasicProps(e,["gallery-common-field"],r),l)}}),Yt=Qt,Jt=Yt;let Zt=class extends at{initialize(e){return super.initialize(e),this.setComponent(Jt),this}get justifyContent(){return this.getDsl().justifyContent}};function ei(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field"),l=(0,g.g2)("default-gallery-item");return(0,g.uX)(),(0,g.Wv)(l,{label:e.label,invisible:e.invisible},{default:(0,g.k6)(()=>[(0,g.bF)(a,{value:e.realValue,"is-empty":e.isRealEmpty,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},null,8,["value","is-empty","justify-content","empty-style"])]),_:1},8,["label","invisible"])}(0,l.Cg)([u.x0.Reactive()],Zt.prototype,"justifyContent",null),Zt=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.String,s.m1.Text,s.m1.Phone,s.m1.Email,s.m1.Related]}))],Zt);const ti=(0,g.pM)({name:"ReadonlyDateTimeRangePicker",components:{GalleryCommonField:Jt,DefaultGalleryItem:p.BZ},props:Object.assign(Object.assign(Object.assign({},m.SS5),p.t4),{value:{type:Object},justifyContent:{type:String},separator:{type:String,default:"~"},emptyStyle:{type:String}}),setup(e){return Object.assign({},w(e))}}),ii=(0,T.A)(ti,[["render",ei]]),ri=ii;let oi=class extends D{initialize(e){return super.initialize(e),this.setComponent(ri),this}};oi=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Gallery,widget:"DateRangePicker"}))],oi);let ni=class extends k{initialize(e){return super.initialize(e),this.setComponent(ri),this}};ni=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Gallery,widget:"DateTimeRangePicker"}))],ni);let ai=class extends F{initialize(e){return super.initialize(e),this.setComponent(ri),this}};ai=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Gallery,widget:"TimeRangePicker"}))],ai);let li=class extends R{initialize(e){return super.initialize(e),this.setComponent(ri),this}};function si(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(a,{value:e.realValue,"is-empty":e.isRealEmpty,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},null,8,["value","is-empty","justify-content","empty-style"])}li=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Gallery,widget:"YearRangePicker"}))],li);const di=(0,g.pM)({name:"ReadonlyDateTimePicker",components:{GalleryCommonField:Jt},inheritAttrs:!1,props:Object.assign(Object.assign({},m.SS5),{value:{type:[Date,String],default:""},justifyContent:{type:String},emptyStyle:{type:String}}),setup(e){return Object.assign({},(0,$.r)(e))}}),ci=(0,T.A)(di,[["render",si]]),ui=ci;let pi=class extends P{initialize(e){return super.initialize(e),this.setComponent(ui),this}};pi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.Date}))],pi);let hi=class extends _{initialize(e){return super.initialize(e),this.setComponent(ui),this}};hi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.DateTime}))],hi);let gi=class extends j{initialize(e){return super.initialize(e),this.setComponent(ui),this}};gi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.Time}))],gi);let vi=class extends V{initialize(e){return super.initialize(e),this.setComponent(ui),this}};vi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.Year}))],vi);let mi=class extends pi{initialize(e){return super.initialize(e),this.setComponent(ye.Jw),this}};mi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.Date,widget:"DateCountdown"}))],mi);let fi=class extends hi{initialize(e){return super.initialize(e),this.setComponent(ye.Jw),this}};fi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.DateTime,widget:"DateTimeCountdown"}))],fi);const yi=["title"];function bi(e,t,i,r,o,n){const a=(0,g.g2)("InputPreSuffix"),l=(0,g.g2)("oio-empty"),s=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(s,{"is-empty":!1,"justify-content":e.justifyContent},{default:(0,g.k6)(()=>[e.prefix?((0,g.uX)(),(0,g.Wv)(a,{key:0,"content-type":e.prefixType,content:e.prefix,style:(0,U.Tr)(e.prefixStyle),color:e.valueColor,"font-size":e.valueFontSize},null,8,["content-type","content","style","color","font-size"])):(0,g.Q3)("",!0),e.currentValue?((0,g.uX)(),(0,g.CE)("span",{key:2,class:"gallery-string-value",title:e.currentValue,style:(0,U.Tr)(e.contentStyle)},(0,U.v_)(e.currentValue||"-"),13,yi)):((0,g.uX)(),(0,g.Wv)(l,{key:1,class:"gallery-string-value gallery-string-value-empty",style:(0,U.Tr)(e.contentStyle),"empty-style":e.emptyStyle},null,8,["style","empty-style"])),e.suffix?((0,g.uX)(),(0,g.Wv)(a,{key:3,"content-type":e.suffixType,content:e.suffix,style:(0,U.Tr)(e.suffixStyle),color:e.valueColor,"font-size":e.valueFontSize},null,8,["content-type","content","style","color","font-size"])):(0,g.Q3)("",!0)]),_:1},8,["justify-content"])}const Ci=(0,g.pM)({components:{GalleryCommonField:Jt,InputPreSuffix:We.A,OioEmpty:m.fwf},inheritAttrs:!1,props:Object.assign(Object.assign({},r.V5),{currentValue:{type:[String,Number],default:void 0},justifyContent:{type:String},valueFontSize:{type:String},valueColor:{type:String},emptyStyle:{type:String}}),setup(e){const t=(0,g.EW)(()=>{const t={marginRight:"4px"};return t.fontSize=e.valueFontSize||"",t.color=e.valueColor||"",t}),i=(0,g.EW)(()=>{const t={marginLeft:"4px"};return t.fontSize=e.valueFontSize||"",t.color=e.valueColor||"",t}),r=(0,g.EW)(()=>{const t={};return t.fontSize=e.valueFontSize||"",t.color=e.valueColor||"",t});return{prefixStyle:t,suffixStyle:i,contentStyle:r}}}),xi=(0,T.A)(Ci,[["render",bi]]),wi=xi;let Si=class extends qt{initialize(e){return super.initialize(e),this.setComponent(wi),this}};Si=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:[s.m1.Integer,s.m1.Long,s.m1.Float,s.m1.Currency]}))],Si);const Ti={key:0,class:"gallery-tag"},Ei=["title"],Ai=["title"],ki={key:1};function Di(e,t,i,r,o,n){const a=(0,g.g2)("oio-icon"),l=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(l,{value:e.optionColor?e.displayNameList.length?e.displayNameList:void 0:e.displayNameListStr,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[e.optionColor?((0,g.uX)(),(0,g.CE)("div",Ti,[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.showTags,(t,i)=>((0,g.uX)(),(0,g.CE)("div",{class:"tag",key:t,style:(0,U.Tr)({width:e.displayNameList.length>1?"25%":"unset",color:t.color,"background-color":t.backgroundColor})},[i<3?((0,g.uX)(),(0,g.CE)("div",{key:0,class:"content",title:t.label},(0,U.v_)(t.label),9,Ei)):(0,g.Q3)("",!0),3===i?((0,g.uX)(),(0,g.CE)("div",{key:1,class:"content hideTags",title:e.hideTags},[(0,g.bF)(a,{icon:"oinone-gengduo1",color:"var(--oio-primary-color)"})],8,Ai)):(0,g.Q3)("",!0)],4))),128))])):((0,g.uX)(),(0,g.CE)("span",ki,(0,U.v_)(e.displayNameListStr),1))]),_:1},8,["value","justify-content","empty-style"])}const Fi=(0,g.pM)({props:{displayNameList:{type:Array,default:()=>[]},justifyContent:{type:String},displayNameListStr:{type:String},emptyStyle:{type:String},optionColor:{type:Boolean}},components:{GalleryCommonField:Jt,OioIcon:m.Lky},inheritAttrs:!1,setup(e){const t=(0,g.EW)(()=>e.displayNameList.length),i=(0,g.EW)(()=>{const i=[];return t.value>3?(i.push(...e.displayNameList.slice(0,3)),i.push({label:"...",color:"unset","background-color":"unset"}),i):e.displayNameList}),r=(0,g.EW)(()=>t.value>3?e.displayNameList.slice(3,t.value).map(e=>e.label):[]);return{tagsLength:t,showTags:i,hideTags:r}}}),Ri=(0,T.A)(Fi,[["render",Di]]),Oi=Ri;let Ni=class extends vt{initialize(e){return super.initialize(e),this.setComponent(Oi),this}get justifyContent(){return this.getDsl().justifyContent}};(0,l.Cg)([u.x0.Reactive()],Ni.prototype,"justifyContent",null),Ni=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.Enum}))],Ni);function $i(e,t,i,r,o,n){const a=(0,g.g2)("oio-icon");return e.config.icon?e.config.showText?((0,g.uX)(),(0,g.CE)("div",{key:1,class:"enum-tag-with-color",style:(0,U.Tr)({color:e.config.textColor})},[(0,g.Lk)("div",{class:"tag-icon-wrapper",style:(0,U.Tr)(e.style)},[(0,g.bF)(a,{icon:e.config.icon,size:"12px",color:e.config.iconColor||e.config.textColor},null,8,["icon","color"])],4),(0,g.eW)(" "+(0,U.v_)(e.displayName),1)],4)):((0,g.uX)(),(0,g.CE)("div",{key:2,class:"enum-tag-with-color tag-icon-wrapper",style:(0,U.Tr)(e.style)},[(0,g.bF)(a,{icon:e.config.icon,size:"12px",color:e.config.iconColor||e.config.textColor},null,8,["icon","color"])],4)):((0,g.uX)(),(0,g.CE)("div",{key:0,class:"enum-tag-with-color",style:(0,U.Tr)(e.style)},(0,U.v_)(e.displayName),5))}var Mi=i(50953);const Ii=(0,g.pM)({props:{displayName:{type:String,default:""},justifyContent:{type:String},optConfig:{type:Object,default:void 0}},inheritAttrs:!1,components:{OioIcon:tt.Lky},setup(e){const t=(0,Mi.KR)({}),i=(0,g.EW)(()=>{const i=e.optConfig||{bgColor:"",textColor:"var(--oio-text-color)"},r=`background: ${i.bgColor};\n      color: ${i.textColor};\n      `;return t.value=i,r});return{style:i,config:t}}}),Li=(0,T.A)(Ii,[["render",$i],["__scopeId","data-v-70ba550d"]]),_i=Li;let Pi=class extends vt{initialize(e){return super.initialize(e),this.setComponent(_i),this}get optConfig(){const e=this.options.find(e=>e.value===this.value);return e||{}}get displayName(){const e=this.options.find(e=>e.value===this.value);return e?e.label:null}};(0,l.Cg)([u.x0.Reactive()],Pi.prototype,"optConfig",null),(0,l.Cg)([u.x0.Reactive()],Pi.prototype,"displayName",null),Pi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.Enum,widget:["Tag","TagEnum"]}))],Pi);let ji=class extends mt{initialize(e){return super.initialize(e),this.setComponent(Oi),this}get justifyContent(){return this.getDsl().justifyContent}};(0,l.Cg)([u.x0.Reactive()],ji.prototype,"justifyContent",null),ji=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.Enum,multi:!0}))],ji);const Vi={class:"detail-iframe"},Bi=["src"];function Hi(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(a,{class:(0,U.C4)([e.value||e.defaultValue?"iframe-detail-common-field":"iframe-detail-common-field-empty"]),value:e.value||e.defaultValue,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},{default:(0,g.k6)(({realValue:e})=>[(0,g.Lk)("div",Vi,[(0,g.Lk)("iframe",{src:e,frameborder:"0"},null,8,Bi)])]),_:1},8,["class","value","justify-content","empty-style"])}const Wi=(0,g.pM)({components:{GalleryCommonField:Jt},props:{value:{type:String},defaultValue:{type:String},justifyContent:{type:String},emptyStyle:{type:String}}}),Ui=(0,T.A)(Wi,[["render",Hi]]),qi=Ui;let zi=class extends De{initialize(e){return super.initialize(e),this.setComponent(qi),this}};zi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.String,widget:["Iframe"]}))],zi);var Gi=i(53751);const Ki=["href","target","title"];function Xi(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(a,{value:e.value,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.Lk)("div",{class:"gallery-string-hyperlinks-wrapper",onClick:t[0]||(t[0]=(0,Gi.D$)(()=>{},["stop"]))},[(0,g.Lk)("a",{href:e.value,class:"gallery-string-hyperlinks",target:e.target,title:e.value},(0,U.v_)(e.text||e.value),9,Ki)])]),_:1},8,["value","justify-content","empty-style"])}const Qi=(0,g.pM)({name:"GalleryHyperlinks",inheritAttrs:!1,components:{GalleryCommonField:Jt},props:{value:{type:String},text:{type:String},target:{type:String},justifyContent:{type:String},emptyStyle:{type:String}}}),Yi=(0,T.A)(Qi,[["render",Xi]]),Ji=Yi;let Zi=class extends ie.bk{initialize(e){return super.initialize(e),this.setComponent(Ji),this}get text(){return this.getDsl().text}get target(){const{target:e}=this.getDsl();if(e)switch(e){case s.jq.Router:return O.nHy.SELF;case s.jq.OpenWindow:return O.nHy.BLANK;default:return O.nHy.BLANK}return O.nHy.BLANK}};(0,l.Cg)([u.x0.Reactive()],Zi.prototype,"text",null),(0,l.Cg)([u.x0.Reactive()],Zi.prototype,"target",null),Zi=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.String,widget:"Hyperlinks"}))],Zi);let er=class extends fe{initialize(e){return super.initialize(e),this.setComponent(Oi),this}get displayNameList(){const e=[];if(this.value&&this.value.length)for(let t=0;t<this.value.length;t++)e.push({label:this.value[t]});return e}};(0,l.Cg)([u.x0.Reactive()],er.prototype,"displayNameList",null),er=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.String,s.m1.Integer],multi:!0}))],er);function tr(e,t,i,r,o,n){return e.config.icon?(0,g.Q3)("",!0):((0,g.uX)(),(0,g.CE)("div",{key:0,class:"string-tag-with-color",style:(0,U.Tr)(e.style)},(0,U.v_)(e.currentValue),5))}const ir=(0,g.pM)({props:{currentValue:{type:String,default:""},optConfig:{type:Object,default:void 0}},inheritAttrs:!1,components:{OioIcon:tt.Lky},setup(e){const t=(0,Mi.KR)({}),i=(0,g.EW)(()=>{const i=e.optConfig||{bgColor:"",textColor:"var(--oio-text-color)"},r=`background: ${i.bgColor};\n      color: ${i.textColor};\n      `;return t.value=i,r});return{style:i,config:t}}}),rr=(0,T.A)(ir,[["render",tr],["__scopeId","data-v-493b0610"]]),or=rr;let nr=class extends Ge{initialize(e){return super.initialize(e),this.setComponent(or),this}get optConfig(){const{bgColor:e="red",textColor:t="blue"}=this.getDsl();return{bgColor:e,textColor:t}}};(0,l.Cg)([u.x0.Reactive()],nr.prototype,"optConfig",null),nr=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.String,s.m1.Phone,s.m1.Email],widget:"TagString"}))],nr);function ar(e,t,i,r,o,n){const a=(0,g.g2)("oio-color-picker"),l=(0,g.g2)("gallery-common-field"),s=(0,g.g2)("a-tooltip");return(0,g.uX)(),(0,g.Wv)(s,{visible:e.visibility,"onUpdate:visible":t[0]||(t[0]=t=>e.visibility=t)},{title:(0,g.k6)(()=>[(0,g.Lk)("span",null,(0,U.v_)(e.value),1)]),default:(0,g.k6)(()=>[(0,g.bF)(l,{class:"default-gallery-color-picker",value:e.value,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bF)(a,{readonly:"",value:e.value},null,8,["value"])]),_:1},8,["value","justify-content","empty-style"])]),_:1},8,["visible"])}var lr=i(40983);const sr=(0,g.pM)({name:"DefaultColorPicker",inheritAttrs:!1,props:{value:{type:String},justifyContent:{type:String},emptyStyle:{type:String}},components:{GalleryCommonField:Jt,OioColorPicker:ne.dzx,ATooltip:lr.A},setup(e){const t=(0,Mi.KR)(!1),i=(0,g.EW)({get(){return!(0,x.A)(e.value)&&t.value},set(e){t.value=e}});return{visible:t,visibility:i}}}),dr=(0,T.A)(sr,[["render",ar]]),cr=dr;let ur=class extends de{initialize(e){return super.initialize(e),this.setComponent(cr),this}};ur=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.String,widget:"ColorPicker"}))],ur);function pr(e,t,i,r,o,n){const a=(0,g.g2)("UploadImg"),l=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(l,{value:e.value,"is-empty":e.isRealEmpty,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bF)(a,{value:e.value,readonly:""},null,8,["value"])]),_:1},8,["value","is-empty","empty-style"])}const hr=(0,g.pM)({name:"ReadonlyUploadImg",components:{UploadImg:Re.A,GalleryCommonField:Jt},props:{value:{type:[String,Array]},emptyStyle:{type:String}},setup(e){const t=(0,g.EW)(()=>(0,x.A)(e.value));return{isRealEmpty:t}}}),gr=(0,T.A)(hr,[["render",pr]]),vr=gr;let mr=class extends Me{initialize(e){return super.initialize(e),this.setComponent(vr),this}};mr=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:[s.m1.String,s.m1.Text],widget:"UploadImg"}))],mr);function fr(e,t,i,r,o,n){const a=(0,g.g2)("Upload"),l=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(l,{value:e.value,"is-empty":e.isRealEmpty,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bF)(a,{value:e.value,readonly:"",cdnKey:e.cdnKey,privateLink:e.privateLink},null,8,["value","cdnKey","privateLink"])]),_:1},8,["value","is-empty","empty-style"])}const yr=(0,g.pM)({name:"ReadonlyUpload",components:{Upload:Le.A,GalleryCommonField:Jt},props:{value:{type:[String,Array]},emptyStyle:{type:String},cdnKey:{type:String},privateLink:{type:Boolean,default:void 0}},setup(e){const t=(0,g.EW)(()=>(0,x.A)(e.value));return{isRealEmpty:t}}}),br=(0,T.A)(yr,[["render",fr]]),Cr=br;let xr=class extends Ve{initialize(e){return super.initialize(e),this.setComponent(Cr),this}get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return d.TM.toBoolean(this.getDsl().privateLink)}};(0,l.Cg)([u.x0.Reactive()],xr.prototype,"cdnKey",null),(0,l.Cg)([u.x0.Reactive()],xr.prototype,"privateLink",null),xr=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:[s.m1.String,s.m1.Text],widget:"Upload"}))],xr);let wr=class extends Ge{initialize(e){return super.initialize(e),this.setComponent(wi),this}get justifyContent(){return this.getDsl().justifyContent}};(0,l.Cg)([u.x0.Reactive()],wr.prototype,"justifyContent",null),wr=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.String,s.m1.Phone,s.m1.Email]}))],wr);const Sr={key:0,class:"gallery-media-video"},Tr=["src"],Er=(0,g.Lk)("div",{class:"gallery-media-video-play"},[(0,g.Lk)("i",{class:"iconfont oinone-zantingbofang"})],-1);function Ar(e,t,i,r,o,n){const a=(0,g.g2)("a-image"),l=(0,g.g2)("preview-media"),s=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(s,{value:e.value,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.Lk)("div",{class:"gallery-media-widget-internal",onClick:t[3]||(t[3]=(0,Gi.D$)(()=>{},["stop"]))},[e.currentValue.src?((0,g.uX)(),(0,g.CE)("div",{key:0,class:"gallery-media-widget-item",onClick:t[1]||(t[1]=(...t)=>e.onPreview&&e.onPreview(...t))},[e.currentValue.video?((0,g.uX)(),(0,g.CE)("div",Sr,[(0,g.Lk)("video",{src:e.currentValue.src,alt:"",style:{width:"100%",height:"100%"}},null,8,Tr),Er])):((0,g.uX)(),(0,g.Wv)(a,{key:1,src:e.currentValue.src,alt:"",onClick:t[0]||(t[0]=(0,Gi.D$)(()=>{},["stop"])),style:{width:"100%",height:"100%"}},null,8,["src"]))])):(0,g.Q3)("",!0),(0,g.bF)(l,{modelValue:e.showReview,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showReview=t),type:e.review.video?"video":"image",source:e.review.src},null,8,["modelValue","type","source"])])]),_:1},8,["value","justify-content","empty-style"])}var kr=i(93856);const Dr=(0,g.pM)({components:{PreviewMedia:ye.FQ,GalleryCommonField:Jt,AImage:kr.Ay},inheritAttrs:!1,props:{value:{type:String},justifyContent:{type:String},emptyStyle:{type:String}},setup(e){const t=(0,Mi.KR)({}),i=(0,Mi.KR)(!1),r=(0,g.EW)(()=>{const t=m.rlM.find(t=>(e.value||"").endsWith(t));return{video:!!t,src:e.value}}),o=()=>{t.value=r.value,i.value=!0};return{currentValue:r,review:t,showReview:i,onPreview:o}}}),Fr=(0,T.A)(Dr,[["render",Ar]]),Rr=Fr;let Or=class extends ie.tM{initialize(e){return super.initialize(e),this.setComponent(Rr),this}get justifyContent(){return this.getDsl().justifyContent}};(0,l.Cg)([u.x0.Reactive()],Or.prototype,"justifyContent",null),Or=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.String],widget:"MediaPlayer"}))],Or);let Nr=class extends wr{get valueColor(){return this.getDsl().valueColor}get valueFontSize(){const e=this.getDsl().valueFontSize;return e?`${e}px`:"var(--oio-font-size)"}};(0,l.Cg)([u.x0.Reactive()],Nr.prototype,"valueColor",null),(0,l.Cg)([u.x0.Reactive()],Nr.prototype,"valueFontSize",null),Nr=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.String],multi:!1,widget:"TextContent"}))],Nr);let $r=class extends Si{get valueColor(){return this.getDsl().valueColor}get valueFontSize(){const e=this.getDsl().valueFontSize;return e?`${e}px`:"var(--oio-font-size)"}};function Mr(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(a,{"justify-content":e.justifyContent,value:e.realLabel,"empty-style":e.emptyStyle},null,8,["justify-content","value","empty-style"])}(0,l.Cg)([u.x0.Reactive()],$r.prototype,"valueColor",null),(0,l.Cg)([u.x0.Reactive()],$r.prototype,"valueFontSize",null),$r=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.Integer,s.m1.ID,s.m1.Float],widget:"TextContent"}))],$r);const Ir=(0,g.pM)({components:{GalleryCommonField:Jt},props:{value:{type:Boolean,default:void 0,required:!1},justifyContent:{type:String},emptyStyle:{type:String}},setup(e){const{realLabel:t}=(0,yt.C)(e);return{realLabel:t}}}),Lr=(0,T.A)(Ir,[["render",Mr]]),_r=Lr;let Pr=class extends wt{initialize(e){return super.initialize(e),this.setComponent(_r),this}};Pr=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.Boolean}))],Pr);const jr={key:1};function Vr(e,t,i,r,o,n){const a=(0,g.g2)("Enum"),l=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(l,{"justify-content":e.justifyContent,value:e.displayNameListStr,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[e.optionColor&&e.displayNameList?((0,g.uX)(),(0,g.Wv)(a,{key:0,"display-name-list":e.displayNameList,"option-color":e.optionColor},null,8,["display-name-list","option-color"])):((0,g.uX)(),(0,g.CE)("span",jr,(0,U.v_)(e.displayNameListStr),1))]),_:1},8,["justify-content","value","empty-style"])}const Br=(0,g.pM)({props:{displayNameList:{type:Array,default:()=>[]},displayNameListStr:{type:String},justifyContent:{type:String},emptyStyle:{type:String},optionColor:{type:Boolean}},components:{Enum:gt,GalleryCommonField:Jt},inheritAttrs:!1}),Hr=(0,T.A)(Br,[["render",Vr]]),Wr=Hr;let Ur=class extends St{initialize(e){return super.initialize(e),this.setComponent(Wr),this}};Ur=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:[s.m1.Boolean],widget:["Select","Radio"]}))],Ur);const qr=["innerHTML"];function zr(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field"),l=(0,g.gN)("auto-hidden");return(0,g.uX)(),(0,g.Wv)(a,{value:e.value,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},{default:(0,g.k6)(()=>[(0,g.bo)((0,g.Lk)("div",{class:"gallery-html",innerHTML:e.value},null,8,qr),[[l,{height:e.showHeight,isFold:!0}]])]),_:1},8,["value","justify-content","empty-style"])}const Gr=(0,g.pM)({components:{GalleryCommonField:Jt},inheritAttrs:!1,props:{value:{type:String},label:{type:String},justifyContent:{type:String},showHeight:{type:[Number,String]},emptyStyle:{type:String}},setup(e){const t=(0,g.EW)(()=>m.WbJ.px(e.showHeight)||200);return{showHeight:t}}}),Kr=(0,T.A)(Gr,[["render",zr]]),Xr=Kr;let Qr=class extends Ft{initialize(e){return super.initialize(e),this.setComponent(Xr),this}get showHeight(){var e;return null===(e=this.getDsl())||void 0===e?void 0:e.showHeight}};(0,l.Cg)([u.x0.Reactive()],Qr.prototype,"showHeight",null),Qr=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.HTML}))],Qr);let Yr=class extends re{};function Jr(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(a,{"justify-content":e.justifyContent,value:e.currentValueStr,"empty-style":e.emptyStyle},null,8,["justify-content","value","empty-style"])}Yr=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Gallery,ttype:s.m1.Map}))],Yr);const Zr=(0,g.pM)({components:{GalleryCommonField:Jt},inheritAttrs:!1,props:{currentValueStr:{type:String},justifyContent:{type:String},emptyStyle:{type:String}}}),eo=(0,T.A)(Zr,[["render",Jr]]),to=eo;let io=class extends J{initialize(e){return super.initialize(e),this.setComponent(to),this}get currentValueStr(){var e;return null===(e=this.currentValue.map(e=>e.label))||void 0===e?void 0:e.join("，")}};function ro(e,t,i,r,o,n){const a=(0,g.g2)("gallery-common-field");return(0,g.uX)(),(0,g.Wv)(a,{value:e.currentValue?e.currentValue.label:void 0,"justify-content":e.justifyContent,"empty-style":e.emptyStyle},null,8,["value","justify-content","empty-style"])}(0,l.Cg)([u.x0.Reactive()],io.prototype,"currentValueStr",null),io=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.OneToMany}))],io);const oo=(0,g.pM)({props:{currentValue:{type:Object},justifyContent:{type:String},emptyStyle:{type:String}},components:{GalleryCommonField:Jt},inheritAttrs:!1}),no=(0,T.A)(oo,[["render",ro]]),ao=no;let lo=class extends Mt{initialize(e){return super.initialize(e),this.setComponent(ao),this}};lo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.ManyToOne}))],lo);let so=class extends lo{};so=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.OneToOne}))],so);let co=class extends io{loadMetadata(){}fetchData(){return(0,l.sH)(this,void 0,void 0,function*(){return this.formData[this.itemName]=[],this.formData[this.itemName]})}};function uo(e,t,i,r,o,n){const a=(0,g.g2)("a-select-option"),l=(0,g.g2)("a-select");return(0,g.uX)(),(0,g.Wv)(l,{class:"oio-select","dropdown-class-name":"oio-select-dropdown",placeholder:e.placeholder,"allow-clear":e.allowClear,value:e.value,onChange:e.change,onFocus:e.focus,onBlur:e.blur},{default:(0,g.k6)(()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.options,e=>((0,g.uX)(),(0,g.Wv)(a,{key:e.value,value:e.value},{default:(0,g.k6)(()=>[(0,g.eW)((0,U.v_)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["placeholder","allow-clear","value","onChange","onFocus","onBlur"])}co=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:[s.qi.Gallery],ttype:s.m1.ManyToMany}))],co);var po=i(38367);const ho=(0,g.pM)({components:{ASelect:po.Ay,ASelectOption:po.Ay.Option},props:Object.assign(Object.assign({},p.jW),{options:{type:Array,required:!0,default:()=>[]},placeholder:{type:String},allowClear:{type:Boolean},value:{type:Boolean}})}),go=(0,T.A)(ho,[["render",uo]]),vo=go;let mo=class extends p.d4{constructor(){super(...arguments),this.options=[{value:!0,label:this.translate("kunlun.fields.boolean.true")},{value:!1,label:this.translate("kunlun.fields.boolean.false")}]}initialize(e){return super.initialize(e),this.setComponent(vo),this}};(0,l.Cg)([u.x0.Reactive()],mo.prototype,"options",void 0),mo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Boolean}))],mo);const fo=(0,g.pM)({name:"DefaultIntegerInputRange",components:{NumberRange:h.T7},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},p.jW),p.R7),{value:{type:Array},precision:{type:Number},startDefaultValue:{type:[Number,String]},endDefaultValue:{type:[Number,String]},startPlaceholder:{type:String},endPlaceholder:{type:String}}),setup(e){const t=(0,g.EW)(()=>{var t;return null===(t=e.value)||void 0===t?void 0:t[0]}),i=(0,g.EW)(()=>{var t;return null===(t=e.value)||void 0===t?void 0:t[1]}),r=t=>{var r;null===(r=e.change)||void 0===r||r.call(e,[t,i.value])},o=i=>{var r;null===(r=e.change)||void 0===r||r.call(e,[t.value,i])};return{leftValue:t,leftChange:r,rightValue:i,rightChange:o}},render(){const{readonly:e,disabled:t,precision:i,focus:r,blur:o,leftValue:n,startDefaultValue:a,startPlaceholder:l,leftChange:s,rightValue:d,endDefaultValue:c,endPlaceholder:u,rightChange:p}=this;return(0,g.bF)(h.T7,{readonly:e,disabled:t,precision:i,leftValue:n,leftDefaultValue:a,leftPlaceholder:l,leftChange:s,leftFocus:r,leftBlur:o,rightValue:d,rightDefaultValue:c,rightPlaceholder:u,rightChange:p,rightFocus:r,rightBlur:o})}}),yo=fo,bo=yo;class Co extends h.mD{constructor(){super(...arguments),this.minSafeInteger=Number.MIN_SAFE_INTEGER,this.maxSafeInteger=Number.MAX_SAFE_INTEGER}getInitializeComponent(){return bo}initialize(e){return super.initialize(e),this.field.operator||(this.field.operator=d.Py.GE_LE),this}get precision(){const e=this.executeExpression(this.getDsl().decimal);return(0,zt.A)(e)?d.A5.toNumber(this.executeExpression((0,C.A)(this.field.decimal))):d.A5.toNumber(e)}get showThousandth(){return d.Xx.ofNullable(this.getDsl().showThousandth).map(e=>this.executeExpression((0,C.A)(e),(0,C.A)(!1))).map(e=>d.TM.toBoolean(e)).orElse(!1)}}(0,l.Cg)([u.x0.Reactive()],Co.prototype,"minSafeInteger",void 0),(0,l.Cg)([u.x0.Reactive()],Co.prototype,"maxSafeInteger",void 0),(0,l.Cg)([u.x0.Reactive()],Co.prototype,"precision",null),(0,l.Cg)([u.x0.Reactive()],Co.prototype,"showThousandth",null);let xo=class extends Co{};xo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Float,widget:"InputRange"}))],xo);let wo=class extends ie.Cg{};wo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Float,widget:"Tag"}))],wo);let So=class extends xo{};So=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Currency,widget:"InputRange"}))],So);let To=class extends ie.Cg{};To=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Currency,widget:"Tag"}))],To);var Eo=i(98504),Ao=i(95093),ko=i.n(Ao),Do=i(43349);let Fo=class extends h.v1{constructor(){super(...arguments),this.defaultValidateTrigger=[m.N0$.CHANGE],this.resourceDateTimeFormat={}}getInitializeComponent(){return Do.A}initialize(e){var t;super.initialize(e),this.setComponent(this.getInitializeComponent());const{operator:i}=this;if(i){const e=null===(t=i.split)||void 0===t?void 0:t.call(i,",");if(2===(null===e||void 0===e?void 0:e.length)){const[t,i]=e;this.startField.operator||(this.startField.operator=t),this.endField.operator||(this.endField.operator=i)}}return this}get format(){return this.getDsl().format}get dateFormat(){let e=this.executeExpression(this.getDsl().dateFormat);return e||(e=d.ai),d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceDateFormat)[e]||e}get timeFormat(){let e=this.executeExpression(this.getDsl().timeFormat);return e||(e=d.rc),d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceTimeFormat)[e]||e}get allowClear(){return d.Xx.ofNullable(this.getDsl().allowClear).map(e=>d.TM.toBoolean(e)).orElse(!0)}get startPlaceholder(){return this.getDsl().startPlaceholder}get endPlaceholder(){return this.getDsl().endPlaceholder}get showTimeDefaultValue(){return[ko()("00:00:00",this.timeFormat||"HH:mm:ss"),ko()("00:00:00",this.timeFormat||"HH:mm:ss")]}get operator(){return this.getDsl().operator||`${d.uK.GREATER_THAN_OR_EQUAL.symbol},${d.uK.LESS_THAN.symbol}`}$$created(){const e=Object.create(null,{$$created:{get:()=>super.$$created}});return(0,l.sH)(this,void 0,void 0,function*(){e.$$created.call(this),this.resourceDateTimeFormat=yield(0,O.Nkk)()})}};(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"resourceDateTimeFormat",void 0),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"format",null),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"dateFormat",null),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"timeFormat",null),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"allowClear",null),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"startPlaceholder",null),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"endPlaceholder",null),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"showTimeDefaultValue",null),(0,l.Cg)([u.x0.Reactive()],Fo.prototype,"operator",null),Fo=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Search,widget:"DateTimeRangePicker"}))],Fo);let Ro=class extends Fo{getInitializeComponent(){return Eo.A}};Ro=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Search,widget:"DateRangePicker"}))],Ro);var Oo=i(47600);let No=class extends Fo{getInitializeComponent(){return Oo.A}};No=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Search,widget:"TimeRangePicker"}))],No);var $o=i(47556);let Mo=class extends Fo{getInitializeComponent(){return $o.A}};function Io(e,t,i,r,o,n){const a=(0,g.g2)("oio-date-time-picker"),l=(0,g.g2)("oio-date-time-range-picker");return e.isSingle?((0,g.uX)(),(0,g.Wv)(a,{key:0,value:e.realValue,format:e.format,"date-format":e.dateFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","date-format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"])):((0,g.uX)(),(0,g.Wv)(l,{key:1,value:e.realValue,format:e.format,"date-format":e.dateFormat,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","date-format","time-format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"]))}Mo=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Search,widget:"YearRangePicker"}))],Mo);var Lo=i(41844);const _o=(0,g.pM)({name:"DefaultDateTimeRangePicker",components:{OioDateTimePicker:tt.N25,OioDateTimeRangePicker:tt.E0P},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},m.w7T),p.jW),p.R7),Lo.g),setup(e){return Object.assign({},(0,Lo.I)(e))}}),Po=(0,T.A)(_o,[["render",Io]]),jo=Po;let Vo=class extends h.mD{constructor(){super(...arguments),this.resourceDateTimeFormat={}}getInitializeComponent(){return jo}get format(){return this.getDsl().format}get valueFormat(){return this.getDsl().valueFormat}get dateFormat(){let e=this.executeExpression(this.getDsl().dateFormat);return e||(e=d.ai),d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceDateFormat)[e]||e}get timeFormat(){let e=this.executeExpression(this.getDsl().timeFormat);return e||(e=d.rc),d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceTimeFormat)[e]||e}get isSingle(){const{operator:e}=this;return!(0,zt.A)(e)&&d.uK.isSingle(e)}get value(){const e=super.value;return this.isSingle&&Array.isArray(e)?e[0]:e}get placeholder(){const e=super.placeholder;return this.isSingle&&Array.isArray(e)?e[0]:e}mountedProcess(){(0,zt.A)(this.formData[this.itemName])&&this.startDefaultValue&&this.endDefaultValue&&(this.formData[this.itemName]=[this.startDefaultValue,this.endDefaultValue])}$$mounted(){var e;super.$$mounted(),null===(e=this.mountedCallChaining)||void 0===e||e.hook(this.path,()=>{this.mountedProcess()})}$$unmounted(){var e;super.$$unmounted(),null===(e=this.mountedCallChaining)||void 0===e||e.unhook(this.path)}$$created(){const e=Object.create(null,{$$created:{get:()=>super.$$created}});return(0,l.sH)(this,void 0,void 0,function*(){e.$$created.call(this),this.resourceDateTimeFormat=yield(0,O.Nkk)()})}};function Bo(e,t,i,r,o,n){const a=(0,g.g2)("oio-date-picker"),l=(0,g.g2)("oio-date-range-picker");return e.isSingle?((0,g.uX)(),(0,g.Wv)(a,{key:0,value:e.realValue,format:e.format,"date-format":e.dateFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","date-format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"])):((0,g.uX)(),(0,g.Wv)(l,{key:1,value:e.realValue,format:e.format,"date-format":e.dateFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","date-format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"]))}(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],Vo.prototype,"mountedCallChaining",void 0),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"resourceDateTimeFormat",void 0),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"format",null),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"valueFormat",null),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"dateFormat",null),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"timeFormat",null),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"isSingle",null),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"value",null),(0,l.Cg)([u.x0.Reactive()],Vo.prototype,"placeholder",null),Vo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.DateTime}))],Vo);const Ho=(0,g.pM)({name:"DefaultDateRangePicker",components:{OioDatePicker:tt.MdV,OioDateRangePicker:tt.ThA},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},m.BO3),p.jW),p.R7),Lo.g),setup(e){return Object.assign({},(0,Lo.I)(e))}}),Wo=(0,T.A)(Ho,[["render",Bo]]),Uo=Wo;let qo=class extends Vo{getInitializeComponent(){return Uo}};qo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Date}))],qo);let zo=class extends qo{};function Go(e,t,i,r,o,n){const a=(0,g.g2)("oio-time-picker"),l=(0,g.g2)("oio-time-range-picker");return e.isSingle?((0,g.uX)(),(0,g.Wv)(a,{key:0,value:e.realValue,format:e.format,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","time-format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"])):((0,g.uX)(),(0,g.Wv)(l,{key:1,value:e.realValue,format:e.format,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","time-format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"]))}zo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.DateTime,widget:"DatePicker"}))],zo);const Ko=(0,g.pM)({name:"DefaultTimeRangePicker",components:{OioTimePicker:tt.v7I,OioTimeRangePicker:tt.SXB},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},m.iAC),p.jW),p.R7),Lo.g),setup(e){return Object.assign({},(0,Lo.I)(e))}}),Xo=(0,T.A)(Ko,[["render",Go]]),Qo=Xo;let Yo=class extends Vo{getInitializeComponent(){return Qo}};function Jo(e,t,i,r,o,n){const a=(0,g.g2)("oio-year-picker"),l=(0,g.g2)("oio-year-range-picker");return e.isSingle?((0,g.uX)(),(0,g.Wv)(a,{key:0,value:e.realValue,format:e.format,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"])):((0,g.uX)(),(0,g.Wv)(l,{key:1,value:e.realValue,format:e.format,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","format","value-format","placeholder","allow-clear","readonly","disabled","onUpdate:value","onBlur","onFocus"]))}Yo=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Time}))],Yo);const Zo=(0,g.pM)({name:"DefaultYearRangePicker",components:{OioYearPicker:tt.NAl,OioYearRangePicker:tt.Gfg},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},m.Oe9),p.jW),p.R7),Lo.g),setup(e){return Object.assign({},(0,Lo.I)(e))}}),en=(0,T.A)(Zo,[["render",Jo]]),tn=en;let rn=class extends Vo{getInitializeComponent(){return tn}};rn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Year}))],rn);let on=class extends ie.wE{};on=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Enum,widget:"Checkbox"}))],on);var nn=i(21228),an=i(10020);const ln=(0,g.pM)({name:"TabSelect",components:{OioSelect:tt.U2I},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},p.jW),p.R7),{value:{type:[String,Boolean,Object],default:void 0},defaultValue:{type:[String,Boolean,Object],default:void 0},options:{type:Array},allowClear:{type:Boolean},placeholder:{type:String}}),setup(e){const{realValue:t,readonly:i,disabled:r}=(0,p.P1)(e),o=(0,g.EW)(()=>{if(!e.options)return[];const t=(0,s.Go)(e.options);for(const e of t)"false"!==e.name&&"true"!==e.name||(e.name=JSON.parse(e.name),e.value=e.name);return t}),n=(0,p.sX)(),a=i=>{var r;t.value=null===i||void 0===i?void 0:i.value,e.change&&e.change(i?i.value:void 0),null===(r=e.blur)||void 0===r||r.call(e)},l=e=>{a(e)};return{realValue:t,readonly:i,disabled:r,finalOptions:o,selectChange:a,onClickOption:l,getTriggerContainer:n.getTriggerContainer}},render(){const{disabled:e,realValue:t,finalOptions:i,onClickOption:r}=this;return(0,g.bF)(nn.A,{class:"tab-select search-tab-select",value:t,disabled:e},{default:()=>i.map(e=>(0,g.bF)(an.A,{class:"tab-select-item search-tab-select-item",value:e.value,onClick:()=>r(e)},{default:()=>[(0,g.bF)("span",{},e.label)]}))})}}),sn=ln,dn=sn;let cn=class extends ie.mz{initialize(e){return super.initialize(e),this.setComponent(dn),this}change(e){var t;super.change(e),null===(t=this.onSearch)||void 0===t||t.call(this)}};(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],cn.prototype,"onSearch",void 0),(0,l.Cg)([u.x0.Method()],cn.prototype,"change",null),cn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Enum,widget:"TabSelect"}))],cn);const un=(0,g.pM)({name:"TagSelect",components:{OioSelect:tt.U2I},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},p.jW),p.R7),{value:{type:[String,Boolean,Object],default:void 0},defaultValue:{type:[String,Boolean,Object],default:void 0},options:{type:Array},allowClear:{type:Boolean},placeholder:{type:String}}),setup(e){const{realValue:t,readonly:i,disabled:r}=(0,p.P1)(e),o=(0,g.EW)(()=>{if(!e.options)return[];const t=(0,s.Go)(e.options);for(const e of t)"false"!==e.name&&"true"!==e.name||(e.name=JSON.parse(e.name),e.value=e.name);return t}),n=(0,p.sX)(),a=i=>{var r;t.value=null===i||void 0===i?void 0:i.value,e.change&&e.change(i?i.value:void 0),null===(r=e.blur)||void 0===r||r.call(e)},l=e=>{a(e)};return{realValue:t,readonly:i,disabled:r,finalOptions:o,selectChange:a,onClickOption:l,getTriggerContainer:n.getTriggerContainer}},render(){const{disabled:e,realValue:t,finalOptions:i,onClickOption:r}=this;return(0,g.bF)(nn.A,{class:"tag-select search-tag-select",buttonStyle:"solid",value:t,disabled:e},{default:()=>i.map(e=>(0,g.bF)(an.A,{class:"tag-select-item search-tag-select-item",value:e.value,onClick:()=>r(e)},{default:()=>[(0,g.bF)("span",{},e.label)]}))})}}),pn=un,hn=pn;let gn=class extends ie.mz{initialize(e){return super.initialize(e),this.setComponent(hn),this}change(e){var t;super.change(e),null===(t=this.onSearch)||void 0===t||t.call(this)}};(0,l.Cg)([u.x0.Reactive(),u.x0.Inject(),(0,l.Sn)("design:type",Object)],gn.prototype,"onSearch",void 0),(0,l.Cg)([u.x0.Method(),(0,l.Sn)("design:type",Function),(0,l.Sn)("design:paramtypes",[Object]),(0,l.Sn)("design:returntype",void 0)],gn.prototype,"change",null),gn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Enum,widget:"TagSelect"}))],gn);let vn=class extends ie.l0{};vn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Enum,widget:"MultiSelect"}))],vn);let mn=class extends ie.wu{};mn=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:s.qi.Search,ttype:s.m1.HTML}))],mn);let fn=class extends Co{get precision(){return 0}};(0,l.Cg)([u.x0.Reactive()],fn.prototype,"precision",null),fn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Integer,widget:"InputRange"}))],fn);let yn=class extends ie.Cg{};yn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Integer,widget:"Tag"}))],yn);let bn=class extends ie.vh{};bn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToMany,widget:"Cascader"}))],bn);let Cn=class extends ie.yf{};Cn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToMany,widget:"Checkbox"}))],Cn);let xn=class extends ie.bR{};xn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToMany,widget:"TreeSelect"}))],xn);let wn=class extends ie.$H{get changeOnSelect(){return d.Xx.ofNullable(d.TM.toBoolean(this.getDsl().changeOnSelect)).orElse(!0)}};(0,l.Cg)([u.x0.Reactive()],wn.prototype,"changeOnSelect",null),wn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToOne,widget:"Address"}))],wn);let Sn=class extends a.N{get operator(){return this.field.operator}get selectMode(){const{operator:e}=this;return e&&d.uK.isMulti(e)?m.SBT.multiple:m.SBT.single}get multipleCheckedStrategy(){return super.multipleCheckedStrategy||m.fe4.SHOW_ALL}submit(e){return(0,l.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;if(this.selectMode===m.SBT.multiple){let s=r;return s&&!Array.isArray(s)&&(s=[s]),O.hLl.O2M(t,i,e,s,o,n,a,l)}let s=r;return s&&Array.isArray(s)&&([s]=s),O.hLl.M2O(t,i,e,s,o,n,a,l)})}$$mounted(){var e;super.$$mounted(),null===(e=this.refreshCallChaining)||void 0===e||e.hook(this.path,e=>(0,l.sH)(this,void 0,void 0,function*(){const t=(0,O.KxQ)(e);t.scope===O.jZd.searchReset&&(yield this.refreshProcess())}))}};(0,l.Cg)([u.x0.Reactive()],Sn.prototype,"operator",null),(0,l.Cg)([u.x0.Reactive()],Sn.prototype,"selectMode",null),(0,l.Cg)([u.x0.Reactive()],Sn.prototype,"multipleCheckedStrategy",null),Sn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToOne,widget:"Cascader"}))],Sn);let Tn=class extends ie.yf{submit(e){return(0,l.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return O.pFK.O2M(t,i,e,r)})}};Tn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToOne,widget:"Checkbox"}))],Tn);let En=class extends ie.lA{submit(e){return(0,l.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return O.pFK.O2M(t,i,e,r)})}};En=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToOne,widget:"MultiSelect"}))],En);let An=class extends ie.px{constructor(){super(...arguments),this.defaultSearchTrigger=[m.Hc0.MANUAL]}get searchTrigger(){var e,t;const i=null===(t=null===(e=this.getDsl().searchTrigger)||void 0===e?void 0:e.split(","))||void 0===t?void 0:t.map(e=>{var t,i;return null===(i=(t=e.trim()).toLowerCase)||void 0===i?void 0:i.call(t)});return i||this.defaultSearchTrigger}change(e){var t;super.change(e),this.searchTrigger.includes(m.Hc0.CHANGE)&&(null===(t=this.onSearch)||void 0===t||t.call(this))}};(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],An.prototype,"onSearch",void 0),(0,l.Cg)([u.x0.Reactive()],An.prototype,"searchTrigger",null),(0,l.Cg)([u.x0.Method()],An.prototype,"change",null),An=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToOne}))],An);var kn=i(22237);let Dn=class extends kn.l{get operator(){return this.field.operator}get selectMode(){const{operator:e}=this;return e&&d.uK.isMulti(e)?m.SBT.multiple:m.SBT.single}get multipleCheckedStrategy(){return super.multipleCheckedStrategy||m.bgm.SHOW_ALL}get treeCheckStrictly(){return d.Xx.ofNullable(super.treeCheckStrictly).orElse(!1)}submit(e){return(0,l.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r,viewMode:o,submitCache:n,submitType:a,relationUpdateType:l}=this;if(this.selectMode===m.SBT.multiple){let s=r;return s&&!Array.isArray(s)&&(s=[s]),O.hLl.O2M(t,i,e,s,o,n,a,l)}let s=r;return s&&Array.isArray(s)&&([s]=s),O.hLl.M2O(t,i,e,s,o,n,a,l)})}$$mounted(){var e;super.$$mounted(),null===(e=this.refreshCallChaining)||void 0===e||e.hook(this.path,e=>(0,l.sH)(this,void 0,void 0,function*(){const t=(0,O.KxQ)(e);t.scope===O.jZd.searchReset&&(yield this.refreshProcess())}))}};(0,l.Cg)([u.x0.Reactive()],Dn.prototype,"operator",null),(0,l.Cg)([u.x0.Reactive()],Dn.prototype,"selectMode",null),(0,l.Cg)([u.x0.Reactive()],Dn.prototype,"multipleCheckedStrategy",null),(0,l.Cg)([u.x0.Reactive()],Dn.prototype,"treeCheckStrictly",null),Dn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.ManyToOne,widget:"TreeSelect"}))],Dn);let Fn=class extends ie.Zb{};Fn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.OneToMany,widget:"Cascader"}))],Fn);let Rn=class extends ie.Q3{};Rn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.OneToMany,widget:"Checkbox"}))],Rn);let On=class extends ie.vM{};On=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.OneToMany,widget:"TreeSelect"}))],On);let Nn=class extends ie.Hr{};Nn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.OneToOne,widget:"Cascader"}))],Nn);let $n=class extends ie.l{};$n=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.OneToOne,widget:"TreeSelect"}))],$n);let Mn=class extends ie.wu{};Mn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Email}))],Mn);let In=class extends Mn{};In=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.String,widget:"Email"}))],In);let Ln=class extends ie.wu{};Ln=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.Phone}))],Ln);let _n=class extends Ln{};_n=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.String,widget:"Phone"}))],_n);const Pn=["title"],jn={key:0,class:"suffix-show-count"},Vn={key:1,class:"suffix-eye"};function Bn(e,t,i,r,o,n){const a=(0,g.g2)("oio-select"),l=(0,g.g2)("input-pre-suffix"),s=(0,g.g2)("oio-icon"),d=(0,g.g2)("oio-input-search");return(0,g.uX)(),(0,g.CE)("div",{class:"form-string-input",title:e.realValue},[(0,g.bF)(d,{type:e.realType.toLowerCase(),disabled:e.disabled,readonly:e.readonly&&!e.disabled,allowClear:e.allowClear&&!e.readonly&&!e.disabled,minlength:e.realMinLength?e.realMinLength:0,placeholder:e.placeholder,value:e.realValue,"onUpdate:value":e.change,onSearch:e.onSearch,onBlur:e.blur,onFocus:e.focus},(0,g.eX)({prefix:(0,g.k6)(()=>[e.prefix?((0,g.uX)(),(0,g.Wv)(l,{key:0,"content-type":e.prefixType,content:e.prefix},null,8,["content-type","content"])):(0,g.Q3)("",!0)]),suffix:(0,g.k6)(()=>[e.showCount?((0,g.uX)(),(0,g.CE)("div",jn,(0,U.v_)((e.realValue?e.realValue.length:0)+"/"+e.realMaxLength),1)):(0,g.Q3)("",!0),e.type===e.pwdType?((0,g.uX)(),(0,g.CE)("div",Vn,[e.eyeStatus(e.pwdType)?((0,g.uX)(),(0,g.Wv)(s,{key:0,color:"var(--oio-icon-color)",size:"var(--oio-font-size)",icon:e.invisibleIcon,onClick:e.pwdShowClick,onselectstart:"return false"},null,8,["icon","onClick"])):(0,g.Q3)("",!0),e.eyeStatus(e.textType)?((0,g.uX)(),(0,g.Wv)(s,{key:1,color:"var(--oio-icon-color)",size:"var(--oio-font-size)",icon:e.visibleIcon,onClick:e.pwdHideClick,onselectstart:"return false"},null,8,["icon","onClick"])):(0,g.Q3)("",!0)])):(0,g.Q3)("",!0),e.suffix?((0,g.uX)(),(0,g.Wv)(l,{key:2,"content-type":e.suffixType,content:e.suffix},null,8,["content-type","content"])):(0,g.Q3)("",!0)]),_:2},[e.prefixes&&e.prefixes.length?{name:"prepend",fn:(0,g.k6)(()=>[(0,g.bF)(a,{style:{width:"90px"},onChange:e.prefixesChange,options:e.prefixes,value:e.prefixesRealValue,"allow-clear":!0},null,8,["onChange","options","value"])]),key:"0"}:void 0]),1032,["type","disabled","readonly","allowClear","minlength","placeholder","value","onUpdate:value","onSearch","onBlur","onFocus"])],8,Pn)}var Hn=i(1694);const Wn=(0,g.pM)({name:"DefaultSearchInput",inheritAttrs:!1,props:Object.assign(Object.assign({},r.tj),{onSearch:{type:Function}}),components:{OioInputSearch:tt.G9,InputPreSuffix:We.A,OioIcon:tt.Lky,OioSelect:tt.U2I},setup(e){const t=(0,Mi.KR)((0,zt.A)(e.value)?e.defaultValue:e.value),i=(0,g.EW)(()=>d.TM.toBoolean(e.readonly)||!1),r=(0,g.EW)(()=>d.TM.toBoolean(e.disabled)||!1),o=t=>{var i,r;let o=(0,Hn.A)(t);return e.showSuffix&&e.suffixStore&&(o-=(null===(i=e.suffix)||void 0===i?void 0:i.length)||0),e.showPrefix&&e.prefixStore&&(o-=(null===(r=e.prefix)||void 0===r?void 0:r.length)||0),o>0?o:0},n=(0,g.EW)(()=>o(e.maxLength)),a=(0,g.EW)(()=>o(e.minLength)),l=(0,Mi.KR)((0,zt.A)(e.prefixesValue)?e.prefixes&&e.prefixes.length?e.prefixes[0]:void 0:e.prefixesValue),s=t=>{e.changePrefixesValue&&e.changePrefixesValue(t?t.key:void 0)},c=(0,Mi.KR)(e.type),u=(0,Mi.KR)(m.NZc.PASSWORD),h=(0,Mi.KR)(m.NZc.TEXT),v=e=>{c.value=m.NZc.PASSWORD},f=e=>{c.value=m.NZc.TEXT},y=e=>c.value===e&&!i.value&&!r.value;(0,g.wB)(()=>e.type,e=>{c.value=e},{immediate:!0}),(0,g.wB)(()=>e.value,i=>{(0,zt.A)(i)?t.value=void 0:e.removePrefixSuffix?t.value=e.removePrefixSuffix(i):t.value=i}),(0,g.wB)(()=>e.defaultValue,e=>{(0,zt.A)(e)?t.value=void 0:t.value=e}),(0,g.wB)(()=>t.value,t=>{e.changeInputRealValue&&e.changeInputRealValue(t)},{immediate:!0}),(0,g.wB)(()=>e.prefixesValue,e=>{(0,zt.A)(e)?l.value=void 0:l.value=e}),(0,g.wB)(()=>e.prefixes,t=>{t&&t.length?(l.value=t[0],e.changePrefixesValue&&e.changePrefixesValue(l.value)):l.value=void 0},{immediate:!0});const{placeholder:b}=(0,p.n$)(e);return{placeholder:b,realValue:t,readonly:i,disabled:r,realType:c,realMinLength:a,realMaxLength:n,pwdType:u,textType:h,prefixesChange:s,prefixesRealValue:l,pwdHideClick:v,pwdShowClick:f,eyeStatus:y}}}),Un=(0,T.A)(Wn,[["render",Bn]]),qn=Un;let zn=class extends ie.it{initialize(e){return super.initialize(e),this.setComponent(qn),this}};(0,l.Cg)([u.x0.Method(),u.x0.Inject()],zn.prototype,"onSearch",void 0),zn=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Search,ttype:s.m1.String,widget:"SearchInput"}))],zn);let Gn=class extends ie.pl{};Gn=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Search,ttype:[s.m1.String,s.m1.Text,s.m1.HTML,s.m1.Phone,s.m1.Email],widget:"Tag"}))],Gn);let Kn=class extends ie.wu{};Kn=(0,l.Cg)([c.DF.ClassFactory(B.d4.Token({viewType:s.qi.Search,ttype:s.m1.Text}))],Kn);let Xn=class extends p.S8{renderDefaultSlot(e){const t=d.TM.toBoolean(this.compute(e)),i=this.getDsl().options||[];let r;return r=i&&i.length?(0,n.uK)(t,i.map(e=>Object.assign(Object.assign({},e),{value:e.name}))):!0===t?this.translate("kunlun.fields.boolean.true"):!1===t?this.translate("kunlun.fields.boolean.false"):t,r}};(0,l.Cg)([u.x0.Method()],Xn.prototype,"renderDefaultSlot",null),Xn=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Boolean}))],Xn);const Qn={key:0,class:"table-multi-select oio-scrollbar detail-multi-select"},Yn=["title"],Jn={key:1};function Zn(e,t,i,r,o,n){return e.realOptions.length>0&&e.optionColor?((0,g.uX)(),(0,g.CE)("div",Qn,[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.realOptions,t=>((0,g.uX)(),(0,g.CE)("div",{class:"detail-multi-select-item",key:t.key,style:(0,U.Tr)(e.computeStyle(t))},[(0,g.Lk)("div",{class:"detail-multi-select-item-font",title:t.label},(0,U.v_)(t.label),9,Yn)],4))),128))])):((0,g.uX)(),(0,g.CE)("span",Jn,(0,U.v_)(e.currentValue),1))}const ea=(0,g.pM)({inheritAttrs:!1,props:{options:{type:Array},optionColor:{type:Boolean},currentValue:{type:String},value:{type:[Boolean,String,Array],default:void 0}},setup(e){const t=(0,g.EW)(()=>(0,n.pL)((0,n.lC)(e.value,e.options))),i=e=>{const t=e.data,{color:i,backgroundColor:r,borderColor:o}=t,n={};return i&&(n.color=i),r&&(n.backgroundColor=r),o&&(n.borderWidth="1px",n.borderStyle="solid",n.borderColor=o),n};return{realOptions:t,computeStyle:i}}}),ta=(0,T.A)(ea,[["render",Zn]]),ia=ta;let ra=class extends p.S8{get optionColor(){return this.optionColorStyle===o.Q.COLORFUL}get optionColorStyle(){return this.getDsl().optionColorStyle||o.Q.COLORFUL}get options(){return this.field.options||[]}renderDefaultSlot(e){const t=this.compute(e);return[(0,g.bF)(ia,{value:t,currentValue:this.handleValue(t),options:this.options,optionColor:this.optionColor,optionColorStyle:this.optionColorStyle})]}handleValue(e){const t=this.options;let i;return i=t&&t.length?(0,n.uK)(e,t.map(e=>Object.assign(Object.assign({},e),{value:e.name}))):!0===e?this.translate("kunlun.fields.boolean.true"):!1===e?this.translate("kunlun.fields.boolean.false"):e,i}};(0,l.Cg)([u.x0.Reactive()],ra.prototype,"optionColor",null),(0,l.Cg)([u.x0.Reactive()],ra.prototype,"optionColorStyle",null),(0,l.Cg)([u.x0.Reactive()],ra.prototype,"options",null),(0,l.Cg)([u.x0.Method()],ra.prototype,"renderDefaultSlot",null),ra=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Boolean,widget:["Select","radio"]}))],ra);let oa=class extends p.S8{constructor(){super(...arguments),this.visiblePopconfirm=!1}get truthyAction(){return this.getDsl().truthyAction}get falsyAction(){return this.getDsl().falsyAction}renderDefaultSlot(e){const t=!0===this.compute(e),i=this.getDsl().tips,r=this.getDsl().disabled;let o=!1;r&&(o=this.executeExpression(e.data,r,!1)),o||this.truthyAction||this.falsyAction||(o=!0);const n=t=>{this.load(()=>{const{modelActions:i}=this.model,r=t?this.truthyAction:this.falsyAction,o=i.find(e=>e.name===r);o&&(O.cHX.INSTANCE.simpleExecute(this.model,o.functionDefinition,{requestFields:this.rootRuntimeContext.getRequestModelFields()},Object.assign(Object.assign({},e.data),{[this.itemName]:!!t})),this.dataSource[e.index][this.itemName]=!!t)})};return[(0,g.bF)("div",{style:{height:"100%",display:"flex",alignItems:"center"}},[(0,g.bF)(tt.VjG,{placement:tt.Jd8.TR,condition:()=>t,confirmCallback:()=>{n(!t)}},{title:i,default:()=>(0,g.bF)(tt.GR6,{checked:t,disabled:o})})])]}};(0,l.Cg)([u.x0.Reactive()],oa.prototype,"truthyAction",null),(0,l.Cg)([u.x0.Reactive()],oa.prototype,"falsyAction",null),(0,l.Cg)([u.x0.Reactive()],oa.prototype,"visiblePopconfirm",void 0),(0,l.Cg)([u.x0.Method()],oa.prototype,"renderDefaultSlot",null),oa=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Boolean,widget:["Switch","TableSwitch"]}))],oa);let na=class extends p.S8{getShowThousandth(e){return d.Xx.ofNullable(this.getDsl().showThousandth).map(t=>this.executeExpression(e.data,t)).map(e=>d.TM.toBoolean((0,C.A)(e))).orElse(!1)}getPrecision(e){const t=this.executeExpression(e.data,this.getDsl().decimal);return(0,zt.A)(t)?d.A5.toNumber(this.executeExpression(e.data,(0,C.A)(this.field.decimal))):t}renderDefaultSlot(e){const t=(0,n.fe)((0,C.A)(super.compute(e)),this.getPrecision(e));return this.getShowThousandth(e)?(0,n.li)(t):t}};(0,l.Cg)([u.x0.Method()],na.prototype,"renderDefaultSlot",null),na=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:[s.qi.Table],ttype:[s.m1.Integer,s.m1.Long,s.m1.Float]}))],na);let aa=class extends na{};aa=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:[s.qi.Table],ttype:[s.m1.Currency]}))],aa);var la=i(54908),sa=i(87271);let da=class extends p.wY{constructor(){super(...arguments),this.hasDateFormat=!0,this.hasTimeFormat=!0}get itemData(){return super.itemData||`${this.startField.data}#${this.endField.data}`}get itemName(){return super.itemName||`${this.startField.name}#${this.endField.name}`}get invisible(){return super.invisible||this.userPreferInvisible}get userPreferInvisible(){var e;if(!this.userPrefer)return!1;const t=null===(e=this.userPrefer)||void 0===e?void 0:e.fieldPrefer;return!(!t||!t.length)&&t.includes(this.itemData)}initialize(e){super.initialize(e);const{startField:t,endField:i}=(0,n.U6)(this.rootRuntimeContext,this.getDsl().widgets||[]);if(!t||!i)throw new Error("range widget StartField and EndField is required.");return this.startField=t,this.endField=i,this.subPath=this.itemName,this}get minWidth(){return super.minWidth||"120"}get format(){return this.getDsl().format}get valueFormat(){return d.DF}get dateFormat(){return this.getDsl().dateFormat}get timeFormat(){return this.getDsl().timeFormat}get defaultFormat(){return d.DF}convertDateFormat(e){return d.aW.get(e)}convertTimeFormat(e){return d.Rh.get(e)}convertFormat(e){return d.DY.get(e)}formatValue(e,t){let i;if((0,y.A)(e))i=d.rL.toDate(e,this.valueFormat);else{if(!(0,b.A)(e))return e?((0,la.Cu)()&&console.warn("无法识别的日期值, 显示的值可能出现异常. value: ",e),(0,C.A)(e)):"";i=e}if(i)return d.rL.dateFormat(i,t)}get separator(){return d.Xx.ofNullable(this.getDsl().separator).map(C.A).orElse(" ~ ")}renderDefaultSlot(e){var t,i;const r=null===(t=this.startField)||void 0===t?void 0:t.data,o=null===(i=this.endField)||void 0===i?void 0:i.data;if(r&&o){let t=e.data[r],i=e.data[o];if((0,zt.A)(t)&&(0,zt.A)(i))return"";let n=d.rL.fetchDatetimeFormat({hasDateFormat:this.hasDateFormat,hasTimeFormat:this.hasTimeFormat},this.format,this.dateFormat,this.timeFormat,this.convertFormat,this.convertDateFormat,this.convertTimeFormat);return n||(n=this.defaultFormat),t=this.formatValue(t,n),i=this.formatValue(i,n),`${t}${this.separator}${i}`}return""}renderEditSlot(e){if(this.invisible||!this.template)return[];const t=[e.data],i=(0,g.bF)(sa.c,Object.assign(Object.assign({},this.template),{dslDefinition:this.template,parentHandle:this.getHandle(),viewType:s.qi.Form,dataSource:t,activeRecords:t,rowIndex:e.index,inline:!0}));return i?[i]:[]}$$mounted(){var e;super.$$mounted(),null===(e=this.fieldWidgetMounted)||void 0===e||e.call(this,this)}$$unmounted(){var e;super.$$unmounted(),null===(e=this.fieldWidgetUnmounted)||void 0===e||e.call(this,this)}};(0,l.Cg)([u.x0.Reactive()],da.prototype,"startField",void 0),(0,l.Cg)([u.x0.Reactive()],da.prototype,"endField",void 0),(0,l.Cg)([u.x0.Reactive()],da.prototype,"itemData",null),(0,l.Cg)([u.x0.Reactive()],da.prototype,"itemName",null),(0,l.Cg)([u.x0.Reactive()],da.prototype,"invisible",null),(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],da.prototype,"userPrefer",void 0),(0,l.Cg)([u.x0.Reactive()],da.prototype,"userPreferInvisible",null),(0,l.Cg)([u.x0.Reactive()],da.prototype,"minWidth",null),(0,l.Cg)([u.x0.Reactive()],da.prototype,"separator",null),(0,l.Cg)([u.x0.Method()],da.prototype,"renderDefaultSlot",null),(0,l.Cg)([u.x0.Method()],da.prototype,"renderEditSlot",null),(0,l.Cg)([u.x0.Method(),u.x0.Inject()],da.prototype,"fieldWidgetMounted",void 0),(0,l.Cg)([u.x0.Method(),u.x0.Inject()],da.prototype,"fieldWidgetUnmounted",void 0),da=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Table,widget:"DateTimeRangePicker"}))],da);let ca=class extends da{constructor(){super(...arguments),this.hasTimeFormat=!1}get defaultFormat(){return d.vz}get valueFormat(){return d.vz}convertFormat(e){return d.aW.get(e)}};ca=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Table,widget:"DateRangePicker"}))],ca);let ua=class extends da{constructor(){super(...arguments),this.hasDateFormat=!1}get defaultFormat(){return d.CE}get valueFormat(){return d.CE}convertTimeFormat(e){return d.Rh.get(e)}};ua=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Table,widget:"TimeRangePicker"}))],ua);var pa=i(21879);let ha=class extends da{constructor(){super(...arguments),this.hasDateFormat=!1,this.hasTimeFormat=!1}get defaultFormat(){return d._i}get valueFormat(){return d.zq}formatValue(e,t){return(0,pa.A)(e)&&(e=(0,C.A)(e)),super.formatValue(e,t)}};function ga(e,t,i,r,o,n){const a=(0,g.g2)("oio-date-range-picker");return(0,g.uX)(),(0,g.Wv)(a,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"date-format":e.dateFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","date-format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","onUpdate:value","onBlur","onFocus"])}ha=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({viewType:s.qi.Table,widget:"YearRangePicker"}))],ha);const va=(0,g.pM)({name:"DefaultEditorDateRangePicker",components:{OioDateRangePicker:tt.ThA,DefaultFormItem:p.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m.BO3),p.jW),p.R7),p.Dn),Lo.g),setup(e){const t=(0,p.sX)();return Object.assign(Object.assign({},(0,Lo.I)(e)),{getTriggerContainer:t.getTriggerContainer})}}),ma=(0,T.A)(va,[["render",ga]]),fa=ma;let ya=class extends ie.Ij{getInitializeComponent(){return fa}};function ba(e,t,i,r,o,n){const a=(0,g.g2)("oio-date-time-range-picker");return(0,g.uX)(),(0,g.Wv)(a,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"date-format":e.dateFormat,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","date-format","time-format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","onUpdate:value","onBlur","onFocus"])}ya=(0,l.Cg)([c.DF.ClassFactory(p.Q9.Token({viewType:s.qi.Table,widget:"DateRangePicker"}))],ya);const Ca=(0,g.pM)({name:"DefaultEditorDateTimeRangePicker",components:{OioDateTimeRangePicker:tt.E0P,DefaultFormItem:p.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m.w7T),p.jW),p.R7),p.Dn),Lo.g),setup(e){const t=(0,p.sX)();return Object.assign(Object.assign({},(0,Lo.I)(e)),{getTriggerContainer:t.getTriggerContainer})}}),xa=(0,T.A)(Ca,[["render",ba]]),wa=xa;let Sa=class extends ie.lS{getInitializeComponent(){return wa}};function Ta(e,t,i,r,o,n){const a=(0,g.g2)("oio-time-range-picker");return(0,g.uX)(),(0,g.Wv)(a,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"time-format":e.timeFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","time-format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","onUpdate:value","onBlur","onFocus"])}Sa=(0,l.Cg)([c.DF.ClassFactory(p.Q9.Token({viewType:s.qi.Table,widget:"DateTimeRangePicker"}))],Sa);const Ea=(0,g.pM)({name:"DefaultEditorTimeRangePicker",components:{OioTimeRangePicker:tt.SXB,DefaultFormItem:p.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m.iAC),p.jW),p.R7),p.Dn),Lo.g),setup(e){const t=(0,p.sX)();return Object.assign(Object.assign({},(0,Lo.I)(e)),{getTriggerContainer:t.getTriggerContainer})}}),Aa=(0,T.A)(Ea,[["render",Ta]]),ka=Aa;let Da=class extends ie.NG{getInitializeComponent(){return ka}};function Fa(e,t,i,r,o,n){const a=(0,g.g2)("oio-year-range-picker");return(0,g.uX)(),(0,g.Wv)(a,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","onUpdate:value","onBlur","onFocus"])}Da=(0,l.Cg)([c.DF.ClassFactory(p.Q9.Token({viewType:s.qi.Table,widget:"TimeRangePicker"}))],Da);const Ra=(0,g.pM)({name:"DefaultEditorYearRangePicker",components:{OioYearRangePicker:tt.Gfg,DefaultFormItem:p.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m.Oe9),p.jW),p.R7),p.Dn),Lo.g),setup(e){const t=(0,p.sX)();return Object.assign(Object.assign({},(0,Lo.I)(e)),{getTriggerContainer:t.getTriggerContainer})}}),Oa=(0,T.A)(Ra,[["render",Fa]]),Na=Oa;let $a=class extends ie.h2{getInitializeComponent(){return Na}};$a=(0,l.Cg)([c.DF.ClassFactory(p.Q9.Token({viewType:s.qi.Table,widget:"YearRangePicker"}))],$a);let Ma=class extends p.S8{constructor(){super(...arguments),this.resourceDateTimeFormat={},this.hasDateFormat=!0,this.hasTimeFormat=!0}renderDefaultSlot(e){const t=this.compute(e);let i;if((0,zt.A)(t))i="";else{const r=this.getDateFormat(e)||this.getDefaultDateFormat(),o=this.getTimeFormat(e)||this.getDefaultTimeFormat(),n=d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceDateFormat),a=d.BF.toUpperSnakeCase(this.resourceDateTimeFormat.resourceTimeFormat),l=this.format||[n[r],a[o]].filter(Boolean).join(" ");let s=d.rL.fetchDatetimeFormat({hasDateFormat:this.hasDateFormat,hasTimeFormat:this.hasTimeFormat},l,r,o,this.convertFormat,this.convertDateFormat,this.convertTimeFormat);s||(s=this.defaultFormat);const c=d.rL.dateFormat(d.rL.toDate(t,this.valueFormat),s);c&&(i=c)}return i}get format(){return this.getDsl().format}getDefaultDateFormat(){return d.ai}getDefaultTimeFormat(){return d.rc}getDateFormat(e){return this.executeExpression(e.data,this.getDsl().dateFormat)}getTimeFormat(e){return this.executeExpression(e.data,this.getDsl().timeFormat)}get defaultFormat(){return d.DF}get valueFormat(){return d.DF}convertFormat(e){return d.DY.get(e)}convertDateFormat(e){return d.aW.get(e)}convertTimeFormat(e){return d.Rh.get(e)}$$created(){const e=Object.create(null,{$$created:{get:()=>super.$$created}});return(0,l.sH)(this,void 0,void 0,function*(){e.$$created.call(this),this.resourceDateTimeFormat=yield(0,O.Nkk)()})}};(0,l.Cg)([u.x0.Method()],Ma.prototype,"renderDefaultSlot",null),(0,l.Cg)([u.x0.Reactive()],Ma.prototype,"resourceDateTimeFormat",void 0),Ma=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.DateTime}))],Ma);let Ia=class extends Ma{constructor(){super(...arguments),this.hasTimeFormat=!1}get defaultFormat(){return d.vz}get valueFormat(){return d.vz}convertFormat(e){return d.aW.get(e)}getTimeFormat(e){}getDefaultTimeFormat(){}};Ia=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Date}))],Ia);let La=class extends Ma{constructor(){super(...arguments),this.hasDateFormat=!1}get defaultFormat(){return d.CE}get valueFormat(){return d.CE}convertTimeFormat(e){return d.Rh.get(e)}getDateFormat(e){}getDefaultDateFormat(){}};La=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.Time]}))],La);let _a=class extends Ma{constructor(){super(...arguments),this.hasDateFormat=!1,this.hasTimeFormat=!1}get defaultFormat(){return d._i}get valueFormat(){return d.zq}};_a=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.Year]}))],_a);let Pa=class extends p.S8{get optionColor(){return this.optionColorStyle===o.Q.COLORFUL}get optionColorStyle(){return this.getDsl().optionColorStyle||o.Q.COLORFUL}get options(){return this.field.options||[]}getRenderOptions(e){const t=this.options.some(e=>this.isExpressionString(e.displayName)||this.isExpressionString(e.label));return t?this.options.map(t=>{const i=this.executeExpression(e.data,t.displayName,t.displayName),r=this.executeExpression(e.data,t.label,t.label);return Object.assign(Object.assign({},t),{displayName:i,label:r})}):this.options}renderDefaultSlot(e){const t=[(0,g.bF)(ia,{value:this.compute(e),currentValue:this.handleValue(this.compute(e)),options:this.getRenderOptions(e),optionColor:this.optionColor,optionColorStyle:this.optionColorStyle})];return t}handleValue(e){if(!e||!e.length)return"";if(Array.isArray(e)){const t=e.map(e=>this.options.find(t=>t.name===e));return t.filter(e=>!!e).map(e=>e.label||"").join("，")}if(this.options){const t=(this.options||[]).find(t=>t.name===e);return t&&t.label||""}return""}};(0,l.Cg)([u.x0.Reactive()],Pa.prototype,"optionColor",null),(0,l.Cg)([u.x0.Reactive()],Pa.prototype,"optionColorStyle",null),(0,l.Cg)([u.x0.Reactive()],Pa.prototype,"options",null),(0,l.Cg)([u.x0.Method()],Pa.prototype,"getRenderOptions",null),(0,l.Cg)([u.x0.Method()],Pa.prototype,"renderDefaultSlot",null),Pa=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Enum}))],Pa);var ja,Va=i(75896);let Ba=class extends p.S8{constructor(){super(...arguments),this.visiblePopconfirm=!1}get truthyValue(){return this.getDsl().truthyValue}get truthyAction(){return this.getDsl().truthyAction}get falsyValue(){return this.getDsl().falsyValue}get falsyAction(){return this.getDsl().falsyAction}renderDefaultSlot(e){const t=this.compute(e)===this.truthyValue,i=this.getDsl().tips,r=this.getDsl().disabled;let o=!1;r&&(o=this.executeExpression(e.data,r,!1));const n=t=>{this.load(()=>{const{modelActions:i}=this.model,r=t?this.truthyAction:this.falsyAction,o=i.find(e=>e.name===r);if(o){const i=t?this.truthyValue:this.falsyValue;O.cHX.INSTANCE.simpleExecute(this.model,o.functionDefinition,{requestFields:this.rootRuntimeContext.getRequestModelFields()},Object.assign(Object.assign({},e.data),{[this.itemName]:i})),this.dataSource[e.index][this.itemName]=i}})};return[(0,g.bF)("div",{style:{height:"100%",display:"flex",alignItems:"center"}},[(0,g.bF)(tt.VjG,{placement:tt.Jd8.TR,condition:()=>t,confirmCallback:()=>{n(!t)}},{title:i,default:()=>(0,g.bF)(tt.GR6,{checked:t,disabled:o})})])]}};(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],Ba.prototype,"truthyValue",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],Ba.prototype,"truthyAction",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],Ba.prototype,"falsyValue",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],Ba.prototype,"falsyAction",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object)],Ba.prototype,"visiblePopconfirm",void 0),(0,l.Cg)([u.x0.Method(),(0,l.Sn)("design:type",Function),(0,l.Sn)("design:paramtypes",["function"===typeof(ja="undefined"!==typeof Va.RowContext&&Va.RowContext)?ja:Object]),(0,l.Sn)("design:returntype",Array)],Ba.prototype,"renderDefaultSlot",null),Ba=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Enum,widget:["TableSwitch","EipTableSwitchEnum"]}))],Ba);const Ha={class:"table-html-rich-text"},Wa={key:0,class:"empty-value"};function Ua(e,t,i,r,o,n){const a=(0,g.g2)("preview-html"),l=(0,g.g2)("oio-modal");return(0,g.uX)(),(0,g.CE)(g.FK,null,[(0,g.Lk)("div",Ha,[e.value?((0,g.uX)(),(0,g.CE)("a",{key:1,onClick:t[0]||(t[0]=(0,Gi.D$)((...t)=>e.showDialog&&e.showDialog(...t),["stop"]))},(0,U.v_)(e.translateValueByKey("查看")),1)):((0,g.uX)(),(0,g.CE)("div",Wa,"-"))]),(0,g.bF)(l,{visible:e.visible,"onUpdate:visible":t[1]||(t[1]=t=>e.visible=t),title:e.title,width:"80%","has-footer":!1},{default:(0,g.k6)(()=>[e.visible?((0,g.uX)(),(0,g.Wv)(a,{key:0,class:"table-html-rich-text-iframe",html:e.value},null,8,["html"])):(0,g.Q3)("",!0)]),_:1},8,["visible","title"])],64)}const qa=(0,g.pM)({components:{OioModal:tt.NHb,PreviewHtml:Et.YA},inheritAttrs:!1,props:{value:{type:String},title:{type:String}},setup(){const e=(0,Mi.KR)(!1),t=()=>{e.value=!0};return{visible:e,showDialog:t,translateValueByKey:O.cAb}}}),za=(0,T.A)(qa,[["render",Ua]]),Ga=za;let Ka=class extends p.S8{get title(){return this.getDsl().title||this.field.label}renderDefaultSlot(e){return[(0,g.bF)(Ga,{value:this.compute(e),title:this.title})]}};(0,l.Cg)([u.x0.Reactive()],Ka.prototype,"title",null),(0,l.Cg)([u.x0.Method()],Ka.prototype,"renderDefaultSlot",null),Ka=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.HTML}))],Ka);const Xa={class:"search-image"};function Qa(e,t,i,r,o,n){const a=(0,g.g2)("a-image"),l=(0,g.g2)("a-image-preview-group");return(0,g.uX)(),(0,g.CE)("div",Xa,[e.value&&e.value.length?((0,g.uX)(),(0,g.Wv)(l,{key:0},{default:(0,g.k6)(()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.value||[],(e,t)=>((0,g.uX)(),(0,g.Wv)(a,{key:t,width:30,src:e&&e.url},null,8,["src"]))),128))]),_:1})):(0,g.Q3)("",!0)])}var Ya=i(16487);const Ja=(0,g.pM)({components:{AImagePreviewGroup:Ya.A,AImage:kr.Ay},props:["value"]}),Za=(0,T.A)(Ja,[["render",Qa]]),el=Za;let tl=class extends p.S8{renderDefaultSlot(e){const t=this.compute(e);return t?[(0,g.bF)(el,{value:t})]:[]}};(0,l.Cg)([u.x0.Method()],tl.prototype,"renderDefaultSlot",null),tl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.ManyToMany,widget:"UploadImg"}))],tl);let il=class extends ie.$H{$$mounted(){var e;super.$$mounted(),null===(e=this.mountedCallChaining)||void 0===e||e.unhook(this.path),this.mountedProcess()}};il=(0,l.Cg)([c.DF.ClassFactory(p.Q9.Token({viewType:s.qi.Table,ttype:s.m1.ManyToOne,widget:"Address"}))],il);let rl=class extends p.u{};rl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.OneToOne}))],rl);let ol=class extends p.u{};ol=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.ManyToOne}))],ol);let nl=class extends p.Zq{};nl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.OneToMany}))],nl);let al=class extends p.Zq{};al=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.ManyToMany}))],al);let ll=class extends ol{renderDefaultSlot(e){const t=this.compute(e);return t?[t.countryName,t.provinceName,t.cityName,t.districtName,t.streetName,t.street2].filter(e=>!!e).join(" / "):""}};(0,l.Cg)([u.x0.Method()],ll.prototype,"renderDefaultSlot",null),ll=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.ManyToOne,widget:"Address"}))],ll);const sl=["href"];function dl(e,t,i,r,o,n){const a=(0,g.g2)("download-outlined");return(0,g.uX)(),(0,g.CE)("div",null,[(0,g.Lk)("a",{href:e.href,target:"_blank",download:""},[(0,g.bF)(a),(0,g.eW)(" "+(0,U.v_)(e.filename),1)],8,sl)])}const cl=(0,g.pM)({inheritAttrs:!1,components:{DownloadOutlined:Pt.A},props:["href","filename"]}),ul=(0,T.A)(cl,[["render",dl]]),pl=ul;let hl=class extends ol{renderDefaultSlot(e){const t=this.compute(e);if(t){const e=Array.isArray(t)?t:[t];return e.map(e=>(0,g.bF)(pl,{href:e.url,filename:e.name}))}return[]}};(0,l.Cg)([u.x0.Method()],hl.prototype,"renderDefaultSlot",null),hl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.ManyToOne,s.m1.OneToMany,s.m1.ManyToMany],widget:"Upload"}))],hl);const gl={class:"wrap"};function vl(e,t,i,r,o,n){const a=(0,g.g2)("a-image");return(0,g.uX)(),(0,g.CE)("div",gl,[(0,g.bF)(a,{width:30,src:e.value&&e.value.url},null,8,["src"])])}const ml=(0,g.pM)({components:{AImage:kr.Ay},props:["value"]}),fl=(0,T.A)(ml,[["render",vl]]),yl=fl;let bl=class extends p.S8{renderDefaultSlot(e){const t=this.compute(e);return t?[(0,g.bF)(yl,{value:t})]:[]}};(0,l.Cg)([u.x0.Method()],bl.prototype,"renderDefaultSlot",null),bl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.ManyToOne,widget:"UploadImg"}))],bl);let Cl=class extends p.S8{handleValue(e){const t=[],i=e;return i&&Object.keys(i).length&&Object.keys(i).forEach(e=>{t.push({name:e,value:i[e]})}),t}renderDefaultSlot(e){const t=this.handleValue(this.compute(e)),i=[];if(!t||!t.length)return"";for(const r of t)i.push((0,g.bF)("span",{class:"table-map-item"},`${r.name}:${r.value}`));return[(0,g.bF)("div",{class:"table-map"},i)]}};(0,l.Cg)([u.x0.Method()],Cl.prototype,"renderDefaultSlot",null),Cl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Map}))],Cl);let xl=class extends p.S8{get type(){return this.getDsl().type}compute(e){const t=super.compute(e);return t&&this.type===m.NZc.PASSWORD?(0,n.Cm)(t):t}};(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],xl.prototype,"type",null),xl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.String,s.m1.Phone,s.m1.Email]}))],xl);const wl={class:"default-table-color-picker"};function Sl(e,t,i,r,o,n){const a=(0,g.g2)("oio-color-picker"),l=(0,g.g2)("a-tooltip");return e.value?((0,g.uX)(),(0,g.Wv)(l,{key:0},{title:(0,g.k6)(()=>[(0,g.Lk)("span",null,(0,U.v_)(e.value),1)]),default:(0,g.k6)(()=>[(0,g.Lk)("div",wl,[(0,g.bF)(a,{readonly:"",value:e.value},null,8,["value"])])]),_:1})):(0,g.Q3)("",!0)}const Tl=(0,g.pM)({name:"DefaultColorPicker",inheritAttrs:!1,props:{value:{type:String}},components:{OioColorPicker:ne.dzx,ATooltip:lr.A},setup(e){return{}}}),El=(0,T.A)(Tl,[["render",Sl]]),Al=El;let kl=class extends p.S8{renderDefaultSlot(e){const t=this.compute(e);return t?[(0,g.bF)(Al,{value:t})]:[]}};(0,l.Cg)([u.x0.Method()],kl.prototype,"renderDefaultSlot",null),kl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.String,widget:"ColorPicker"}))],kl);let Dl=class extends p.S8{get text(){return this.getDsl().text}get target(){const{target:e}=this.getDsl();if(e)switch(e){case s.jq.Router:return O.nHy.SELF;case s.jq.OpenWindow:return O.nHy.BLANK;default:return O.nHy.BLANK}return O.nHy.BLANK}get defaultValue(){return this.getDsl().defaultValue}renderDefaultSlot(e){const t=this.compute(e);return[(0,g.bF)("div",{class:"default-table-hyperlinks",onClick:(0,Gi.D$)(()=>{},["stop"])},[(0,g.bF)("a",{href:t,target:this.target,title:t},this.text||t||this.defaultValue)])]}};(0,l.Cg)([u.x0.Reactive()],Dl.prototype,"text",null),(0,l.Cg)([u.x0.Reactive()],Dl.prototype,"target",null),(0,l.Cg)([u.x0.Reactive()],Dl.prototype,"defaultValue",null),(0,l.Cg)([u.x0.Method()],Dl.prototype,"renderDefaultSlot",null),Dl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.String,widget:"Hyperlinks"}))],Dl);let Fl=class extends xl{initialize(e){return super.initialize(e),this.setComponent(ye.lj),this}};Fl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.String,widget:"MediaPlayer"}))],Fl);let Rl=class extends p.S8{renderDefaultSlot(e){const t=this.compute(e),i=[];if(!t||!t.length)return"";for(const r of t)i.push((0,g.bF)("span",{class:"table-string-tag-option"},[(0,g.bF)("span",{class:"table-string-tag-option-font"},r)]));return[(0,g.bF)("div",{class:"table-string-tag"},i)]}};(0,l.Cg)([u.x0.Method()],Rl.prototype,"renderDefaultSlot",null),Rl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.String,s.m1.Text],multi:!0}))],Rl);const Ol=(0,g.pM)({name:"DefaultTableUpload",inheritAttrs:!1,props:{currentValue:{type:[String,Array]},cdnKey:{type:String},privateLink:{type:Boolean,default:void 0}},render(){const{currentValue:e,cdnKey:t,privateLink:i}=this;return(0,g.bF)(Le.A,{class:"default-table-upload",value:e,readonly:!0,cdnKey:t,privateLink:i})}}),Nl=Ol,$l=Nl;let Ml=class extends xl{get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return d.TM.toBoolean(this.getDsl().privateLink)}renderDefaultSlot(e){const{cdnKey:t,privateLink:i}=this,r=this.compute(e);return r?[(0,g.bF)($l,{currentValue:r,cdnKey:t,privateLink:i})]:[]}};(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],Ml.prototype,"cdnKey",null),(0,l.Cg)([u.x0.Reactive(),(0,l.Sn)("design:type",Object),(0,l.Sn)("design:paramtypes",[])],Ml.prototype,"privateLink",null),(0,l.Cg)([u.x0.Method(),(0,l.Sn)("design:type",Function),(0,l.Sn)("design:paramtypes",[Object]),(0,l.Sn)("design:returntype",void 0)],Ml.prototype,"renderDefaultSlot",null),Ml=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.String,s.m1.Text],multi:!1,widget:"Upload"}))],Ml);let Il=class extends Rl{get cdnKey(){var e,t;return null===(t=null===(e=this.getDsl().cdnKey)||void 0===e?void 0:e.trim)||void 0===t?void 0:t.call(e)}get privateLink(){return d.TM.toBoolean(this.getDsl().privateLink)}renderDefaultSlot(e){const t=this.compute(e),{cdnKey:i,privateLink:r}=this;return t?[(0,g.bF)($l,{currentValue:t,cdnKey:i,privateLink:r})]:[]}};(0,l.Cg)([u.x0.Reactive()],Il.prototype,"cdnKey",null),(0,l.Cg)([u.x0.Reactive()],Il.prototype,"privateLink",null),(0,l.Cg)([u.x0.Method()],Il.prototype,"renderDefaultSlot",null),Il=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.String,s.m1.Text],multi:!0,widget:"Upload"}))],Il);const Ll=(0,g.pM)({name:"DefaultTableImage",inheritAttrs:!1,props:{currentValue:{type:String}},render(){const{currentValue:e}=this;return e?(0,g.bF)("span",{class:"default-table-image",title:e,onClick:(0,Gi.D$)(()=>{},["stop"])},[(0,g.bF)(kr.Ay,{src:e},{default:()=>e})]):[]}}),_l=Ll,Pl=_l;let jl=class extends p.S8{renderDefaultSlot(e){const t=this.compute(e);return t?[(0,g.bF)(Pl,{currentValue:t})]:[]}};(0,l.Cg)([u.x0.Method()],jl.prototype,"renderDefaultSlot",null),jl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,widget:"UploadImg",ttype:[s.m1.String,s.m1.Text]}))],jl);const Vl=(0,g.pM)({props:{value:{type:Array,default:()=>[]}},components:{AImage:kr.Ay},render(){const{value:e}=this.$props;return e&&e.length?(0,g.bF)("div",{style:{height:"100%"},onClick:(0,Gi.D$)(()=>{},["stop"])},e.map(e=>(0,g.bF)(kr.Ay,{src:e,style:{width:"32px",height:"32px",marginRight:"10px"}}))):[]}});let Bl=class extends p.S8{renderDefaultSlot(e){const t=this.compute(e);return t?[(0,g.bF)(Vl,{value:t})]:[]}};(0,l.Cg)([u.x0.Method()],Bl.prototype,"renderDefaultSlot",null),Bl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.String,s.m1.Text],multi:!0,widget:"UploadImg"}))],Bl);let Hl=class extends Rl{};Hl=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:[s.m1.Integer,s.m1.Float,s.m1.Currency],multi:!0}))],Hl);var Wl=i(429);let Ul=class extends ie.I9{get rows(){const e=Number(this.getDsl().rows);return(0,Wl.A)(e)?1:e}};(0,l.Cg)([u.x0.Reactive()],Ul.prototype,"rows",null),Ul=(0,l.Cg)([c.DF.ClassFactory(p.Q9.Token({viewType:s.qi.Table,ttype:s.m1.Text}))],Ul);let ql=class extends xl{renderDefaultSlot(e){const t=this.compute(e);return[(0,g.bF)("span",{class:"table-text-field-value"},t)]}};(0,l.Cg)([u.x0.Method()],ql.prototype,"renderDefaultSlot",null),ql=(0,l.Cg)([c.DF.ClassFactory(p.Qn.Token({viewType:s.qi.Table,ttype:s.m1.Text}))],ql);let zl=class extends p.mx{get columnType(){return"checkbox"}get width(){return super.width||52}get minWidth(){return super.minWidth||52}className(e){return"table-column-checkbox"}headerClassName(e){return"table-header-column-checkbox"}get align(){return super.align||"center"}get fixed(){return d.Xx.ofNullable(super.fixed).orElse("left")}};(0,l.Cg)([u.x0.Reactive()],zl.prototype,"columnType",null),(0,l.Cg)([u.x0.Reactive()],zl.prototype,"width",null),(0,l.Cg)([u.x0.Reactive()],zl.prototype,"minWidth",null),(0,l.Cg)([u.x0.Method()],zl.prototype,"className",null),(0,l.Cg)([u.x0.Method()],zl.prototype,"headerClassName",null),(0,l.Cg)([u.x0.Reactive()],zl.prototype,"align",null),(0,l.Cg)([u.x0.Reactive()],zl.prototype,"fixed",null),zl=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({widget:["checkbox-column","CheckboxColumn","checkboxColumn"]}))],zl);const Gl=(0,g.pM)({name:"DefaultColgroupColumn",components:{OioColgroup:Va.Xs},inheritAttrs:!1,props:Object.assign(Object.assign({},Va.v2),{handle:{type:String},template:{type:Object},columnType:{type:String},existExpandRow:{type:Boolean}}),setup(e){const t=(0,g.EW)(()=>{if(!e.existExpandRow)return e.fixed});return{fixed:t}},render(){const{$slots:e,handle:t,template:i,columnType:r,label:o,align:n,headerAlign:a,footerAlign:l,width:s,minWidth:d,fixed:c,invisible:u,className:p,headerClassName:h}=this;return(0,g.bF)(Va.Xs,{type:r,label:o,align:n,headerAlign:a,footerAlign:l,width:s,minWidth:d,fixed:c,invisible:u,className:p,headerClassName:h,componentData:{params:{handle:t,template:i}}},m.$pj.collectionSlots(e,["default"]))}}),Kl=Gl,Xl=Kl;let Ql=class extends p.a_{initialize(e){return super.initialize(e),this.setComponent(Xl),this}get columnType(){return this.getDsl().columnType}get width(){return this.getDsl().width}get minWidth(){return this.getDsl().minWidth}get label(){return this.getDsl().label}get align(){var e,t;return null===(t=null===(e=this.getDsl().align)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)}get required(){return this.getDsl().required}get headerAlign(){var e,t;return null===(t=null===(e=this.getDsl().headerAlign)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)}get footerAlign(){var e,t;return null===(t=null===(e=this.getDsl().footerAlign)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)}get fixed(){return this.getDsl().fixed}className(e){return this.getDsl().className}headerClassName(e){return this.getDsl().headerClassName}footerClassName(e){return this.getDsl().footerClassName}get invisible(){return this.clientInvisible||d.TM.toBoolean(this.getDsl().invisible)||!1}get clientInvisible(){return!this.isSupportCurrentClient}};(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"columnType",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"width",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"minWidth",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"label",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"align",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"required",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"headerAlign",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"footerAlign",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"fixed",null),(0,l.Cg)([u.x0.Method()],Ql.prototype,"className",null),(0,l.Cg)([u.x0.Method()],Ql.prototype,"headerClassName",null),(0,l.Cg)([u.x0.Method()],Ql.prototype,"footerClassName",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"invisible",null),(0,l.Cg)([u.x0.Reactive()],Ql.prototype,"clientInvisible",null),(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],Ql.prototype,"existExpandRow",void 0),Ql=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({widget:["colgroup"]}))],Ql);var Yl=i(89284),Jl=i(13193),Zl=i(82499),es=i(20903);const ts=["expand-column","ExpandColumn","expandColumn"];let is=class extends p.mx{constructor(){super(...arguments),this.defaultAllInvisible=!0,this.mountedCallChainingMap=new Map,this.refreshCallChainingMap=new Map}get dataSource(){}initialize(e){var t,i,r,o,n;super.initialize(e);let a=null===(i=null===(t=this.template)||void 0===t?void 0:t.widgets)||void 0===i?void 0:i.find(e=>Yl.vV.isView(e));if(!a){const e=null===(r=this.rootRuntimeContext.model)||void 0===r?void 0:r.modelFields;if(e)for(const t of e)if(a=null===(n=null===(o=t.template)||void 0===o?void 0:o.widgets)||void 0===n?void 0:n.find(e=>Yl.vV.isView(e)),a&&(0,O.HOt)(t)){this.setExpandField(t);break}}return a&&this.generatorExpandDslDefinition(a),this}getExpandDslDefinition(e){return this.expandDslDefinition}setExpandDslDefinition(e){this.expandDslDefinition=e}getExpandModel(){return this.expandModel||this.model}setExpandModel(e){this.expandModel=e}getExpandField(){return this.expandField}setExpandField(e){this.expandField=e}get columnType(){return"expand"}get width(){return this.expandOperationField?0:super.width||52}get minWidth(){return super.minWidth||52}get align(){return super.align||"center"}get fixed(){return d.Xx.ofNullable(super.fixed).orElse("left")}className(e){const t=[`${Zl.Nf}-column-expanded`];return this.expandOperationField&&t.push(`${Zl.Nf}-column-expanded-invisible`),d.MZ.append(t,super.className(e)).join(" ")}get invisible(){const e=super.invisible;return!!e||!this.getExpandDslDefinition()}get resizable(){return!this.expandOperationField&&super.resizable}generatorExpandDslDefinition(e){let{type:t}=e;t||(t=s.qi.Form,e.type=t),t===s.qi.Form&&(e.mode=s.nE.Editor);const i=this.generatorLayout(t);i?this.setExpandDslDefinition(Yl.Bo.mergeTemplateToLayout(i,e)):this.setExpandDslDefinition(e)}generatorLayout(e){return(0,O.krP)(e,!1)}$$mounted(){var e,t;super.$$mounted();const i=null===(e=this.getExpandField())||void 0===e?void 0:e.referencesModel;if(i)this.setExpandModel(i);else{const e=null===(t=this.getExpandField())||void 0===t?void 0:t.references;e?O.Qvr.get(e).then(e=>{this.setExpandModel(e)}):this.setExpandModel(this.model)}}getFilter(e){var t;let i;const r=this.getExpandModel(),o=this.getExpandField(),{data:n}=e;if(o){const{data:e,relationFields:t,referenceFields:r}=o,a=(0,O.vtW)(o);if(a&&(null===t||void 0===t?void 0:t.length)&&(null===r||void 0===r?void 0:r.length)&&t.length===r.length)switch(a){case s.m1.OneToOne:case s.m1.ManyToOne:{const t=n[e];i=t?r.map(e=>`${e} == ${t[e]}`).join(" and "):"";break}case s.m1.OneToMany:{let e=[];for(let i=0;i<t.length;i++){const o=t[i],a=r[i],l=n[o];if(null==l){e=[];break}e.push(`${a} == ${n[o]}`)}i=e.join(" and ");break}case s.m1.ManyToMany:i="";break}}else r&&(i=null===(t=r.pks)||void 0===t?void 0:t.map(e=>`${e} == ${n[e]}`).join(" and "));const{filter:a}=this.getExpandDslDefinition(e);return a?`${i} and (${a})`:i}getContext(e){const{expandContext:t}=this;if(!t)return;const{data:i}=e,r={};return Object.entries(t).forEach(([e,t])=>{(0,y.A)(t)?r[e]=this.executeExpressionByParameters({activeRecord:i},t,t):r[e]=t}),r}executeExpressionByParameters(e,t,i){var r,o;const n=this.activeRecords||[],{scene:a}=this;return Jl.r4.run({activeRecords:e.activeRecords||n,rootRecord:e.rootRecord||(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:e.openerRecord||(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:e.scene||a,activeRecord:e.activeRecord||n[0]||{}},t,i)}loadData(e){var t;let i=e.data;const r=null===(t=this.expandField)||void 0===t?void 0:t.data;if(r){let e=i[r];null==e&&(e=[]),i=e}return Array.isArray(i)||(i=[i]),{dataSource:null,activeRecords:(0,es.A)(i)}}renderContentSlot(e){const t=this.getExpandDslDefinition(e);if(this.invisible||!t)return[];const i=u.MX.render(Object.assign(Object.assign(Object.assign({},t),this.loadData(e)),{metadataHandle:this.metadataHandle,rootHandle:this.rootHandle,parentHandle:this.currentHandle,class:d.MZ.append(["table-expand-panel"],t.class),model:this.getExpandModel().model,modelName:this.getExpandModel().name,module:this.getExpandModel().module,moduleName:this.getExpandModel().moduleName,filter:this.getFilter(e),context:this.getContext(e),inline:!0,mountedCallChaining:this.createOrGetterCallChaining(this.mountedCallChainingMap,e.key),refreshCallChaining:this.createOrGetterCallChaining(this.refreshCallChainingMap,e.key)}));return i?[i]:[]}createOrGetterCallChaining(e,t){let i=e.get(t);return i||(i=new d.Wl,e.set(t,i)),i}};(0,l.Cg)([u.x0.Reactive(),u.x0.Provide()],is.prototype,"mountedCallChaining",void 0),(0,l.Cg)([u.x0.Reactive(),u.x0.Provide()],is.prototype,"refreshCallChaining",void 0),(0,l.Cg)([u.x0.Reactive(),u.x0.Provide()],is.prototype,"dataSource",null),(0,l.Cg)([u.x0.Reactive(),u.x0.Inject("refreshCallChaining")],is.prototype,"parentRefreshCallChaining",void 0),(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],is.prototype,"expandContext",void 0),(0,l.Cg)([u.x0.Reactive()],is.prototype,"expandDslDefinition",void 0),(0,l.Cg)([u.x0.Reactive()],is.prototype,"expandModel",void 0),(0,l.Cg)([u.x0.Reactive()],is.prototype,"expandField",void 0),(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],is.prototype,"expandOperationField",void 0),(0,l.Cg)([u.x0.Reactive()],is.prototype,"columnType",null),(0,l.Cg)([u.x0.Reactive()],is.prototype,"width",null),(0,l.Cg)([u.x0.Reactive()],is.prototype,"minWidth",null),(0,l.Cg)([u.x0.Reactive()],is.prototype,"align",null),(0,l.Cg)([u.x0.Reactive()],is.prototype,"fixed",null),(0,l.Cg)([u.x0.Method()],is.prototype,"className",null),(0,l.Cg)([u.x0.Reactive()],is.prototype,"invisible",null),(0,l.Cg)([u.x0.Reactive()],is.prototype,"resizable",null),(0,l.Cg)([u.x0.Method()],is.prototype,"renderContentSlot",null),is=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({widget:["expand-column","ExpandColumn","expandColumn"]}))],is);var rs=i(98165),os=i(32093),ns=i(63366),as=i(96622),ls=i(3816),ss=i(49878),ds=i(77679);const cs=(0,g.pM)({name:"TableOperationColumn",components:{ActionBar:ss.A,Column:as.VP},props:{currentHandle:{type:String},title:{type:String,default:"操作"},width:{type:[String,Number]},minWidth:{type:[String,Number]},fixed:{type:[String,Boolean],default:"right"},direction:{type:String},invisible:{type:Boolean,default:!1},existExpandRow:{type:Boolean},itemData:{type:String},headerClassName:{type:Function}},setup(e){const t=(0,Va.$d)(),i=(0,g.EW)(()=>m.WbJ.px(e.width)),r=(0,g.EW)(()=>m.WbJ.px(e.minWidth)),o=(0,g.EW)(()=>{if(!e.existExpandRow&&!(0,Gt.A)(e.fixed))return e.fixed}),n=(0,g.EW)(()=>{var t,i;return(null===(i=null===(t=e.direction)||void 0===t?void 0:t.toLowerCase)||void 0===i?void 0:i.call(t))||ds.ZU.horizontal}),a=(0,g.EW)(()=>{const i=null===t||void 0===t?void 0:t.getOrigin(),r=null===i||void 0===i?void 0:i.getColumns().filter(e=>e.visible);return r&&r[r.length-1].field===e.itemData});return{realWidth:i,realMinWidth:r,fixed:o,direction:n,translate:O.TlY,table:t,isLastColumn:a}},render(){var e,t;const{itemData:i,fixed:r,title:o,realWidth:n,realMinWidth:a,headerClassName:l,direction:s,invisible:d,currentHandle:c,table:u,isLastColumn:p}=this,h=p?[(0,g.bF)(ls.Hg,{widget:"user-prefer",subPath:"user-prefer",dslDefinition:{simple:null===(t=null===(e=null===u||void 0===u?void 0:u.getOrigin().props)||void 0===e?void 0:e.customConfig)||void 0===t?void 0:t.usingSimpleUserPrefer}})]:[],v=(0,g.bF)(as.VP,{className:`operation-column operation-column-${s}`,field:i,fixed:r,title:(0,O.cAb)(o),width:n,minWidth:a,sortable:!1,headerClassName:l,visible:!d},{default:e=>(0,g.bF)(ss.A,{widget:"rowAction",parentHandle:c,inline:!0,activeRecords:e.row,rowIndex:e.rowIndex,key:e.rowIndex,refreshWidgetRecord:(0,ns.A)(t=>{t&&t.setCurrentActiveRecords(e.row)})},Object.assign({default:()=>{var e,t;return(null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))||[]}},m.XqE)),header:()=>[(0,g.bF)("div",{class:"table-operation-wrapper"},[(0,g.bF)("span",{},(0,O.cAb)("操作"))]),...h]});return v}}),us=cs,ps=us;function hs(e){const t=(null===e||void 0===e?void 0:e.widgets)||[];for(const i of t){switch(i.dslNodeType){case Yl.zX.VIEW:case Yl.zX.TEMPLATE:continue;case Yl.zX.ACTION:return!0}if(hs(i))return!0}return!1}let gs=class extends rs.mx{initialize(e){return super.initialize(e),this.setComponent(ps),this}get width(){const{fieldWidth:e}=this.userPrefer||{};let t=(0,os.tA)(e,this.itemData,void 0);return null==t&&(t=d.Xx.ofNullable(super.width).orElseGet(()=>d.Xx.ofNullable(this.operatorColumnWidth).orElseGet(()=>{var e,t,i;return(null===(i=null===(t=null===(e=(0,p.uM)())||void 0===e?void 0:e.column)||void 0===t?void 0:t.operation)||void 0===i?void 0:i.width)||165}))),t}get minWidth(){return d.Xx.ofNullable(super.minWidth).orElseGet(()=>{var e,t,i;return(null===(i=null===(t=null===(e=(0,p.uM)())||void 0===e?void 0:e.column)||void 0===t?void 0:t.operation)||void 0===i?void 0:i.minWidth)||120})}get direction(){return d.Xx.ofNullable(this.getDsl().direction).orElse(this.operatorColumnDirection)}get invisible(){const e=d.TM.toBoolean(this.getDsl().invisible);return!!e||!hs(this.template)}get itemData(){return"$$internalOperator"}headerClassName(e){return d.MZ.append(["oio-column","table-header-column-operation"],super.headerClassName(e))}};(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],gs.prototype,"operatorColumnDirection",void 0),(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],gs.prototype,"operatorColumnWidth",void 0),(0,l.Cg)([u.x0.Reactive()],gs.prototype,"width",null),(0,l.Cg)([u.x0.Reactive()],gs.prototype,"minWidth",null),(0,l.Cg)([u.x0.Reactive()],gs.prototype,"direction",null),(0,l.Cg)([u.x0.Reactive()],gs.prototype,"invisible",null),(0,l.Cg)([u.x0.Reactive()],gs.prototype,"itemData",null),(0,l.Cg)([u.x0.Reactive(),u.x0.Inject()],gs.prototype,"userPrefer",void 0),(0,l.Cg)([u.x0.Method()],gs.prototype,"headerClassName",null),gs=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({widget:["operation-column","OperationColumn","OperationColumn","TableOperationColumnWidget"]}))],gs);let vs=class extends p.mx{get columnType(){return"radio"}get width(){return super.width||52}get minWidth(){return super.minWidth||52}className(e){return"table-column-radio"}headerClassName(e){return"table-header-column-radio"}get align(){return super.align||"center"}get fixed(){return d.Xx.ofNullable(super.fixed).orElse("left")}};(0,l.Cg)([u.x0.Reactive()],vs.prototype,"columnType",null),(0,l.Cg)([u.x0.Reactive()],vs.prototype,"width",null),(0,l.Cg)([u.x0.Reactive()],vs.prototype,"minWidth",null),(0,l.Cg)([u.x0.Reactive()],vs.prototype,"className",null),(0,l.Cg)([u.x0.Reactive()],vs.prototype,"headerClassName",null),(0,l.Cg)([u.x0.Reactive()],vs.prototype,"align",null),(0,l.Cg)([u.x0.Reactive()],vs.prototype,"fixed",null),vs=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({widget:["radio-column","RadioColumn","radioColumn"]}))],vs);let ms=class extends p.mx{get columnType(){return"seq"}get width(){return super.width||52}get minWidth(){return super.minWidth||52}className(e){return"table-column-sequence"}headerClassName(e){return"table-header-column-sequence"}get label(){return super.label||(0,O.cAb)("序号")}get align(){return super.align||"center"}get fixed(){return d.Xx.ofNullable(super.fixed).orElse("left")}};(0,l.Cg)([u.x0.Reactive()],ms.prototype,"columnType",null),(0,l.Cg)([u.x0.Reactive()],ms.prototype,"width",null),(0,l.Cg)([u.x0.Reactive()],ms.prototype,"minWidth",null),(0,l.Cg)([u.x0.Reactive()],ms.prototype,"className",null),(0,l.Cg)([u.x0.Reactive()],ms.prototype,"headerClassName",null),(0,l.Cg)([u.x0.Reactive()],ms.prototype,"label",null),(0,l.Cg)([u.x0.Reactive()],ms.prototype,"align",null),(0,l.Cg)([u.x0.Reactive()],ms.prototype,"fixed",null),ms=(0,l.Cg)([c.DF.ClassFactory(p.a_.Token({widget:["sequence-column","SequenceColumn","sequenceColumn"]}))],ms);i(76533);const fs={class:"form-biz-audit-field"},ys={class:"tree-area"},bs={class:"form-biz-audit-field-label"},Cs={key:0},xs={style:{color:"#f50"}},ws={key:1};function Ss(e,t,i,r,o,n){const a=(0,g.g2)("oio-icon"),l=(0,g.g2)("oio-input"),s=(0,g.g2)("a-tree");return(0,g.uX)(),(0,g.CE)("div",fs,[(0,g.bF)(l,{value:e.searchFieldKeyword,"onUpdate:value":t[0]||(t[0]=t=>e.searchFieldKeyword=t),placeholder:e.translateValueByKey("请使用名称进行搜索")},{prefix:(0,g.k6)(()=>[(0,g.bF)(a,{icon:"oinone-sousuo",size:"14"})]),_:1},8,["value","placeholder"]),(0,g.Lk)("div",ys,[e.valListRef?((0,g.uX)(),(0,g.Wv)(s,{key:0,class:"oio-tree",fieldNames:e.fieldNames,defaultExpandAll:!1,selectable:!1,showIcon:!0,checkable:!0,"tree-data":e.valListRef,checkedKeys:e.innerCheckedKeys,"onUpdate:checkedKeys":t[1]||(t[1]=t=>e.innerCheckedKeys=t),onCheck:e.checkNode},{title:(0,g.k6)(t=>[(0,g.Lk)("div",bs,[(0,g.bF)(a,{icon:t.fieldList?"oinone-moxing":"oinone-caidan",size:"14",color:t.fieldList?"var(--oio-primary-color)":void 0},null,8,["icon","color"]),t.fieldName.indexOf(e.searchFieldKeyword)>-1?((0,g.uX)(),(0,g.CE)("span",Cs,[(0,g.eW)((0,U.v_)(t.fieldName.substr(0,t.fieldName.indexOf(e.searchFieldKeyword)))+" ",1),(0,g.Lk)("span",xs,(0,U.v_)(e.searchFieldKeyword),1),(0,g.eW)((0,U.v_)(t.fieldName.substr(t.fieldName.indexOf(e.searchFieldKeyword)+e.searchFieldKeyword.length))+" ",1),(0,g.Lk)("span",null," - "+(0,U.v_)(t.fieldCode),1)])):((0,g.uX)(),(0,g.CE)("span",ws,(0,U.v_)(t.fieldName)+" - "+(0,U.v_)(t.fieldCode),1))])]),_:1},8,["fieldNames","tree-data","checkedKeys","onCheck"])):(0,g.Q3)("",!0)])])}var Ts=i(26920),Es=i(39277);const As=(e,t)=>{t&&t.forEach(t=>{t.isSelected&&e.push(t.key),As(e,t.fieldList)})},ks=(0,g.pM)({inheritAttrs:!1,props:{value:{type:String},selectedFields:{type:Array,default:()=>[]},change:{type:Function,default:()=>{}}},components:{OioIcon:m.Lky,OioInput:tt.Gzk,ATree:Ts.Ay},setup(e){const t=(0,Mi.KR)(""),i={children:"fieldList",title:"fieldName",key:"key"},r=(0,Mi.KR)([]),o=(0,Mi.KR)([]);(0,g.wB)(()=>e.value,e=>{let t=[];e&&(t=JSON.parse(e)),r.value=[],As(r.value,t),o.value=t});const n=e=>e.fieldName.indexOf(t.value)>-1,a=(t,i)=>{i.node.dataRef.isSelected=i.checked,!i.node.parent&&i.node.fieldList&&i.node.fieldList.forEach(e=>e.isSelected=i.checked),e.change(JSON.stringify(o.value))};return{fieldNames:i,valListRef:o,innerCheckedKeys:r,searchFieldKeyword:t,checkNode:a,filterNodeFunction:n,translateValueByKey:O.cAb}}}),Ds=(0,T.A)(ks,[["render",Ss]]),Fs=Ds;let Rs=class extends p.Nn{initialize(e){return super.initialize(e),this.setComponent(Fs),this}mountedProcess(){}};Rs=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Form,ttype:s.m1.Text,widget:"FormBizAuditField"}))],Rs);const Os={class:"work-scope-field-widget"};function Ns(e,t,i,r,o,n){const a=(0,g.g2)("a-tree");return(0,g.uX)(),(0,g.CE)("div",Os,[(0,g.bF)(a,{class:"oio-tree","default-expand-all":"",checkable:"","tree-data":e.treeData,"checked-keys":e.currentValue,onCheck:e.onCheck},null,8,["tree-data","checked-keys","onCheck"])])}function $s(){return(0,l.sH)(this,void 0,void 0,function*(){const e="\n  {\n    eipConnGroupQuery {\n      queryListByWrapper(queryWrapper: {}) {\n        code\n        name\n      }\n    }\n  }\n  ",t=yield Es.LV.mutate("base",e);return t.data.eipConnGroupQuery.queryListByWrapper})}function Ms(){return(0,l.sH)(this,void 0,void 0,function*(){const e="{\n    eipOpenInterfaceQuery {\n      queryListByWrapper(queryWrapper: {}) {\n        interfaceName\n        name\n        connGroupCode\n      }\n    }\n  }",t=yield Es.LV.mutate("base",e);return t.data.eipOpenInterfaceQuery.queryListByWrapper})}const Is=(0,g.pM)({inheritAttrs:!1,props:{value:{type:Array,default:()=>[]},change:{type:Function,default:()=>{}}},components:{ATree:Ts.Ay},setup(e){const t="$$empty_group",i=(0,Mi.KR)([]),r=(0,g.EW)(()=>(e.value||[]).map(e=>e.interfaceName)),o=()=>(0,l.sH)(this,void 0,void 0,function*(){const e=yield $s();i.value=e.map(e=>Object.assign(Object.assign({},e),{key:e.code,title:e.name}));const r=yield Ms();r.forEach(e=>{const r=i.value.findIndex(t=>t.code===e.connGroupCode),o=Object.assign(Object.assign({},e),{key:e.interfaceName,title:e.name});if(r>=0)i.value[r].children||(i.value[r].children=[]),i.value[r].children.push(o);else{const e=i.value.some(e=>e.name===t);if(e){const e=i.value.findIndex(e=>e.name===t);e>=0&&i.value[e].children.push(o)}else i.value.push({children:[o],key:t,title:(0,O.cAb)("未设置业务域")})}}),i.value=i.value.filter(e=>e.children&&e.children.length)});o();const n=t=>{const r=t.filter(e=>!i.value.find(t=>t.code===e)).map(e=>({interfaceName:e}));e.change(r)};return{currentValue:r,treeData:i,onCheck:n}}}),Ls=(0,T.A)(Is,[["render",Ns]]),_s=Ls;let Ps=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(_s),this}mountedProcess(){}};Ps=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Form,ttype:s.m1.ManyToMany,widget:"WorkScopeWidget"}))],Ps);var js=i(48798),Vs=i(67774);const Bs={key:1,style:{background:"#fff",height:"344px"}},Hs={key:0,class:"transfer-sortable-wrapper"};function Ws(e,t,i,r,o,n){const a=(0,g.g2)("a-table"),l=(0,g.g2)("a-checkbox"),s=(0,g.g2)("oio-icon"),d=(0,g.g2)("draggable"),c=(0,g.g2)("a-checkbox-group"),u=(0,g.g2)("a-pagination"),p=(0,g.g2)("a-transfer");return(0,g.uX)(),(0,g.CE)("div",null,[(0,g.bF)(p,{"target-keys":e.targetKeys,"onUpdate:target-keys":t[2]||(t[2]=t=>e.targetKeys=t),rowKey:e=>e.id,"data-source":e.options,"show-search":!0,disabled:e.disabled||e.readonly,render:e=>e.title,titles:e.titles,class:"default-translate-wrapper","filter-option":e.filterOption,"list-style":{flex:1,background:"#fff",width:0},onChange:e.onChange,onSearch:e.onSearch},{children:(0,g.k6)(({direction:i,filteredItems:r,selectedKeys:o,disabled:n,onItemSelectAll:p,onItemSelect:h})=>[e.showTable[i]?((0,g.uX)(),(0,g.Wv)(a,{key:0,"row-selection":e.getRowSelection({disabled:n,selectedKeys:o,onItemSelectAll:p,onItemSelect:h}),pagination:!1,columns:e.getColumns(i),"data-source":e.getPageOptions(i,r),size:"small",style:(0,U.Tr)({pointerEvents:n?"none":null}),"custom-row":({key:e,disabled:t})=>({onClick:()=>{t||n||h(e,!o.includes(e))}})},null,8,["row-selection","columns","data-source","style","custom-row"])):((0,g.uX)(),(0,g.CE)("div",Bs,[e.sortable&&"right"===i?((0,g.uX)(),(0,g.CE)("div",Hs,[(0,g.bF)(d,{list:r,onEnd:t=>e.ondragend(r),"item-key":"id"},{item:(0,g.k6)(({element:t})=>[(0,g.Lk)("div",null,[(0,g.bF)(l,{value:t.id,checked:o.includes(t.id),disabled:n,onChange:t=>{e.onCheckboxChange(t,h)}},{default:(0,g.k6)(()=>[(0,g.eW)((0,U.v_)(t.title||t.displayName||t.label),1)]),_:2},1032,["value","checked","disabled","onChange"]),(0,g.bF)(s,{icon:"oinone-yidong"})])]),_:2},1032,["list","onEnd"])])):((0,g.uX)(),(0,g.Wv)(c,{key:1,value:o,options:e.getPageOptions(i,r).map(e=>({label:e.title,value:e.id,disabled:n})),onChange:t=>e.onCheckboxGroupChange(t,p)},null,8,["value","options","onChange"]))])),"left"===i&&r&&r.length?((0,g.uX)(),(0,g.Wv)(u,{key:2,current:e.leftCurrentPage,"onUpdate:current":t[0]||(t[0]=t=>e.leftCurrentPage=t),simple:"",total:r.length,style:{float:"right",margin:"5px"}},null,8,["current","total"])):"right"===i&&r&&r.length&&!e.sortable?((0,g.uX)(),(0,g.Wv)(u,{key:3,current:e.rightCurrentPage,"onUpdate:current":t[1]||(t[1]=t=>e.rightCurrentPage=t),simple:"",total:r.length,style:{float:"right",margin:"5px"}},null,8,["current","total"])):(0,g.Q3)("",!0)]),_:1},8,["target-keys","rowKey","data-source","disabled","render","titles","filter-option","onChange","onSearch"])])}var Us,qs=i(38808),zs=i(48619),Gs=i(3234),Ks=i(38076),Xs=i(432),Qs=i.n(Xs);(function(e){e["LIST"]="LIST",e["TABLE"]="TABLE"})(Us||(Us={}));const Ys={value:{type:Array},defaultValue:{type:Array},sortable:{type:Boolean,default:!1},enableSearch:{type:Boolean,default:!1},leftDisplayType:{type:String},rightDisplayType:{type:String},leftFieldDefinitions:{type:Array},rightFieldDefinitions:{type:Array},leftSearchFields:{type:Array},rightSearchFields:{type:Array},leftOptionLabel:{type:String},rightOptionLabel:{type:String},options:{type:Array},leftFields:{type:String},searchFields:{type:Array},rightFields:{type:String},change:{type:Function,required:!0},leftColumns:{type:Array},rightColumns:{type:Array}},Js=(0,g.pM)({name:"DefaultTransfer",components:{ATransfer:qs.A,ATable:zs.Ay,APagination:Gs.Ay,ACheckboxGroup:Ks.A,Draggable:Qs(),OioIcon:m.Lky},props:Object.assign(Object.assign(Object.assign({},p.jW),p.R7),Ys),setup(e){const{readonly:t,disabled:i}=(0,p.P1)(e,!0),r=["待选择","已选择"].map(e=>` ${(0,O.cAb)(e)}`),o=(0,Mi.KR)([]);(0,g.wB)(()=>e.defaultValue,()=>{var t;(null===(t=e.defaultValue)||void 0===t?void 0:t.length)&&(o.value=e.defaultValue.map(e=>e.id))}),(0,g.wB)(()=>e.value,()=>{var t,i;o.value=(null!==(i=null!==(t=e.value)&&void 0!==t?t:e.defaultValue)&&void 0!==i?i:[]).map(e=>e.id)});const n=(0,Mi.KR)(1),a=(0,Mi.KR)(1),l=(0,g.EW)(()=>{var t,i;return null!==(i=null===(t=e.value)||void 0===t?void 0:t.length)&&void 0!==i?i:1}),s=(0,g.EW)(()=>{var t,i,r,o;return(null!==(i=null===(t=e.options)||void 0===t?void 0:t.length)&&void 0!==i?i:1)-(null!==(o=null===(r=e.value)||void 0===r?void 0:r.length)&&void 0!==o?o:0)}),d=e=>("left"===e?c:u).value.map(e=>Object.assign(e,{ellipsis:!0})),c=(0,g.EW)(()=>{var t;return e.leftColumns?e.leftColumns:e.leftFields?e.leftFields.split(",").map(e=>({dataIndex:e,title:e})):(null===(t=e.leftFieldDefinitions)||void 0===t?void 0:t.length)?e.leftFieldDefinitions.map(e=>({dataIndex:e.name,title:e.label})):[]}),u=(0,g.EW)(()=>{var t;return e.rightColumns?e.rightColumns:e.rightFields?e.rightFields.split(",").map(e=>({dataIndex:e,title:e})):(null===(t=e.rightFieldDefinitions)||void 0===t?void 0:t.length)?e.rightFieldDefinitions.map(e=>({dataIndex:e.name,title:e.label})):[]}),h=(0,g.EW)(()=>({left:e.leftDisplayType===Us.TABLE,right:e.rightDisplayType===Us.TABLE})),v=(e,t)=>{const i="left"===e?a.value:n.value,r=10*(i-1);return t.slice(r,r+10)},m=({disabled:e,selectedKeys:t,onItemSelectAll:i,onItemSelect:r})=>({getCheckboxProps:t=>({disabled:e||t.disabled}),onSelectAll(e,t){const r=t.filter(e=>!e.disabled).map(({key:e})=>e);i(r,e)},onSelect({key:e},t){r(e,t)},selectedRowKeys:t,hideSelectAll:!0}),f=(e,t)=>{t(e.target.value,e.target.checked)},y=(e,t)=>{t(e)},b=(e,t,i,r)=>{if(!r.target.checked)return void i([]);const o=v(e,t);i(o.map(e=>e.id))},C=(t,i=null,r=[])=>{var l,s;"right"===i&&o.value.length?(o.value=[...t.slice(r.length,t.length),...r],null===(l=e.change)||void 0===l||l.call(e,o.value)):null===(s=e.change)||void 0===s||s.call(e,t),a.value=1,n.value=1},x=e=>{"left"===e&&(a.value=1),"right"===e&&(n.value=1)},w=(t,i)=>{var r,o;if(!t)return!0;if(!(null===(r=e.searchFields)||void 0===r?void 0:r.length))return!0;let n=!1;return null===(o=e.searchFields)||void 0===o||o.forEach(e=>{var r;(null===(r=i[e])||void 0===r?void 0:r.includes(t))&&(n=!0)}),n},S=e=>{C(e.map(e=>e.id))};return{readonly:t,titles:r,ondragend:S,leftCurrentPage:a,rightCurrentPage:n,disabled:i,targetKeys:o,getRowSelection:m,showTable:h,leftTableColumns:c,rightTableColumns:u,leftTotalPage:s,rightTotalPage:l,getPageOptions:v,onCheckboxGroupChange:y,onCheckboxAllChange:b,onChange:C,getColumns:d,filterOption:w,onSearch:x,onCheckboxChange:f}}}),Zs=(0,T.A)(Js,[["render",Ws]]),ed=Zs;let td=class extends ie.lA{constructor(){super(...arguments),this.originOptions=[]}get selectMode(){return m.SBT.multiple}initialize(e){return super.initialize(e),this.setComponent(ed),this}get needInitOptions(){return!0}get enableSearch(){return this.getDsl().enableSearch}get leftDisplayType(){return this.getDsl().leftDisplayType}get rightDisplayType(){return this.getDsl().rightDisplayType}get leftFields(){return this.getDsl().leftFields}get rightFields(){return this.getDsl().rightFields}get optionFields(){return this.getDsl().optionFields}get sortable(){return this.getDsl().sortable}get optionLabel(){var e,t;const{optionLabel:i}=this.getDsl(),r=null===(e=this.referencesModel)||void 0===e?void 0:e.label;if((0,s.Po)(i)&&(0,s.Po)(r)){let e=(null===(t=this.referencesModel)||void 0===t?void 0:t.labelFields)||[];return e.length||(e=["name"]),e.map(e=>`${Jl.A8.activeRecord}.${e}`).join(" || ")}return i||r}get maxNumber(){const e=this.getDsl().maxNumber;return e||1/0}get minNumber(){const e=this.getDsl().minNumber;return e||-1/0}change(e=[]){const t=this.originOptions,i=e.map(e=>null===t||void 0===t?void 0:t.find(t=>t.id===e)).filter(e=>!!e);this.notify(js.Mv.ON_FIELD_CHANGE),this.updateValue(i),this.validateTrigger.includes(m.N0$.CHANGE)?this.executeValidator().then(e=>{(0,ds.mO)(e)&&this.afterChange()}):this.afterChange()}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,l.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);if(!(0,ds.mO)(t))return t;const{selectedValues:i}=this;let r=null===i||void 0===i?void 0:i.length;return r||!this.required||this.invisible?(r||(r=0),!(0,zt.A)(this.maxNumber)&&r>this.maxNumber?this.validatorError(`${(0,O.cAb)("最多选择")}${this.maxNumber}${(0,O.cAb)("个")}`):!(0,zt.A)(this.minNumber)&&r<this.minNumber?this.validatorError(`${(0,O.cAb)("最少选择")}${this.minNumber}${(0,O.cAb)("个")}`):this.validatorSuccess()):this.validatorError(`${(0,O.cAb)("必填")}`)})}executeExpressionByItem(e,t,i){var r,o;return null===t||void 0===t?"boolean"===typeof i?i:i||t:"string"===typeof t&&/^[a-zA-Z]+$/.test(t)?t:Jl.r4.run({activeRecords:[e],rootRecord:(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:this.scene},t,i)}submit(e){return(0,l.sH)(this,void 0,void 0,function*(){const{field:t,itemName:i,value:r}=this;return(0,O.Pig)(t)?O.pFK.M2M(t,i,e,r):(0,O.zH5)(t)?O.pFK.O2M(t,i,e,r):void 0})}queryPage(e,t,i={}){var r;return(0,l.sH)(this,void 0,void 0,function*(){if(!(0,s.Po)(e.queryData)){const t=new Vs.kWY(null===(r=null===e||void 0===e?void 0:e.condition)||void 0===r?void 0:r.toString());t.setConditionBodyData(e.queryData),e.condition=t}return O.cqT.queryPage(this.referencesModel,{currentPage:e.currentPage,pageSize:e.pageSize,condition:e.condition,requestFields:O.g6N.convertRequestFields(this.referencesModel.modelFields),variables:t,context:i})})}generatorFullOptions(e){const t=e.map(e=>{const t=this.executeExpressionByItem(e,this.optionLabel);return Object.assign({title:t},e)});return t}insertOptions(e,t=!1){var i,r;if(!(null===e||void 0===e?void 0:e.length))return;const o=(null!==(i=this.options)&&void 0!==i?i:[]).map(e=>e.id),n=[...null!==(r=this.options)&&void 0!==r?r:[]];e.forEach(e=>{o.includes(e.id)||n.push(e)}),this.options=this.generatorFullOptions(n),t||(this.originOptions=e)}backfillSelectedValues(){this.insertOptions(this.value,!0)}get leftColumns(){var e,t;const i=null===(e=this.referencesModel)||void 0===e?void 0:e.modelFields;if(i&&(null===(t=this.leftFields)||void 0===t?void 0:t.length))return this.leftFields.split(",").map(e=>{var t;const r=null===i||void 0===i?void 0:i.find(t=>t.name===e);return{dataIndex:e,title:null!==(t=null===r||void 0===r?void 0:r.label)&&void 0!==t?t:e}})}get rightColumns(){var e,t;const i=null===(e=this.referencesModel)||void 0===e?void 0:e.modelFields;if(i&&(null===(t=this.rightFields)||void 0===t?void 0:t.length))return this.rightFields.split(",").map(e=>{var t;const r=null===i||void 0===i?void 0:i.find(t=>t.name===e);return{dataIndex:e,title:null!==(t=null===r||void 0===r?void 0:r.label)&&void 0!==t?t:e}})}mountedProcess(){return(0,l.sH)(this,void 0,void 0,function*(){const e=100,t=yield this.queryPage({currentPage:1,pageSize:e,condition:this.domain}),{totalPages:i,content:r}=t;if(i<=1)return this.insertOptions(r),void this.backfillSelectedValues();const o=[];for(let n=2;n<=i;n++)o.push(this.queryPage({currentPage:n,pageSize:e,condition:this.domain}).then(e=>e.content));yield Promise.all(o).then(e=>{e.forEach(e=>r.push(...e)),this.insertOptions(r),this.backfillSelectedValues()})})}fillOptions(e,t=!0){return(0,l.sH)(this,void 0,void 0,function*(){})}};(0,l.Cg)([u.x0.Reactive()],td.prototype,"selectMode",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"needInitOptions",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"enableSearch",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"leftDisplayType",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"rightDisplayType",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"leftFields",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"rightFields",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"optionFields",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"sortable",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"optionLabel",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"maxNumber",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"minNumber",null),(0,l.Cg)([u.x0.Method()],td.prototype,"change",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"leftColumns",null),(0,l.Cg)([u.x0.Reactive()],td.prototype,"rightColumns",null),td=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Form,ttype:[s.m1.ManyToMany,s.m1.OneToMany],widget:"Transfer"}))],td);let id=class extends td{initialize(e){return super.initialize(e),this}get defaultValue(){var e,t;if(!(null===(e=this.options)||void 0===e?void 0:e.length))return[];const i=null===(t=this.metadataRuntimeContext.parentContext)||void 0===t?void 0:t.model.modelFields.map(e=>{const t=this.options.find(t=>`${t.model}+${t.field}`===`${e.model}+${e.data}`);if(t)return Object.assign(Object.assign({},t),{displayName:e.label||t.displayName,invisible:e.invisible})}).filter(e=>!!e&&d.TM.isFalse(e.invisible));return i||[]}generatorFullOptions(e){var t;if(!e)return[];const i=null===(t=this.metadataRuntimeContext.parentContext)||void 0===t?void 0:t.model.modelFields;return super.generatorFullOptions(e.map(e=>{const t=null===i||void 0===i?void 0:i.find(t=>`${e.model}+${e.field}`===`${t.model}+${t.data}`);return t?Object.assign(Object.assign({},e),{displayName:t.label||e.displayName}):e}))}backfillSelectedValues(){this.setValue(this.generatorFullOptions(this.defaultValue)),super.backfillSelectedValues()}get sortable(){return!0}};(0,l.Cg)([u.x0.Reactive()],id.prototype,"defaultValue",null),(0,l.Cg)([u.x0.Reactive()],id.prototype,"sortable",null),id=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({widget:"ExportFieldTransfer"}))],id);const rd=()=>[{displayName:(0,O.cAb)("上午/下午"),width:"80px",code:"A",id:"A",concat:"",options:[{displayName:(0,O.cAb)("下午"),code:"A",id:"CA"}]},{displayName:(0,O.cAb)("小时"),code:"h",id:"H",concat:"",options:[{displayName:"1-12",showName:"1",code:"h",id:"Ch"},{displayName:"01-12",showName:"01",code:"hh",id:"Chh"},{displayName:"1-24",showName:"13",code:"H",id:"CH"},{displayName:"01-24",showName:"13",code:"HH",id:"CHH"}]},{displayName:(0,O.cAb)("分钟"),code:"m",id:"M",concat:"",options:[{displayName:"06",code:"mm",id:"Cmm"},{displayName:"6",code:"m",id:"Cm"}]},{displayName:(0,O.cAb)("秒钟"),code:"s",id:"S",concat:"",options:[{displayName:"06",code:"ss",id:"Css"},{displayName:"6",code:"s",id:"Cs"}]}],od=()=>[{displayName:(0,O.cAb)("年"),code:"YYYY",id:"Y",concat:"",options:[{displayName:"2024",code:"YYYY",id:"CYYYY"},{displayName:"24",code:"YY",id:"CYY"}]},{displayName:(0,O.cAb)("月"),code:"MMMM",id:"M",concat:"",options:[{displayName:(0,O.cAb)("六月"),code:"MMMM",id:"CMMMM"},{displayName:(0,O.cAb)("6月"),code:"M月",id:"CM月"},{displayName:"6",code:"M",id:"CM"},{displayName:"06",code:"MM",id:"CMM"}]},{displayName:(0,O.cAb)("日"),code:"DD",id:"D",concat:"",options:[{displayName:"01",code:"DD",id:"CDD"},{displayName:"1",code:"D",id:"CD"}]}],nd={class:"ant-input-affix-wrapper"},ad={key:0,class:"ant-input-group-addon"},ld={class:"form-resource-date-format-options"},sd=["onClick"];function dd(e,t,i,r,o,n){const a=(0,g.g2)("a-select-option"),l=(0,g.g2)("a-select"),s=(0,g.g2)("control-tag"),d=(0,g.g2)("format-concat"),c=(0,g.g2)("oio-icon"),u=(0,g.g2)("a-popover");return(0,g.uX)(),(0,g.Wv)(u,{"overlay-class-name":"expression-common-popover",placement:"bottomLeft",trigger:e.readonly?"null":"click",visible:e.visiblePopover,"onUpdate:visible":t[2]||(t[2]=t=>e.visiblePopover=t)},{default:(0,g.k6)(()=>[(0,g.Lk)("span",{class:(0,U.C4)(["ant-input-wrapper ant-input-group form-resource-date-format",[e.readonly&&"form-resource-date-format-readonly"]])},[(0,g.Lk)("div",nd,[(0,g.Lk)("div",{class:"ant-input-inner",onClick:t[1]||(t[1]=(0,Gi.D$)(t=>e.visiblePopover=!1,["stop"]))},[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.selectedValue,(i,r)=>((0,g.uX)(),(0,g.CE)(g.FK,null,[(0,g.bF)(s,{class:"variable-item variable-tag",closable:!e.readonly,onClose:t=>e.onRemoveOption(r)},{default:(0,g.k6)(()=>[(0,g.bF)(l,{class:"oio-select","dropdown-class-name":"form-resource-date-format-child-select",disabled:e.readonly,style:(0,U.Tr)({width:i.width}),placeholder:i.displayName,value:i.code,"onUpdate:value":e=>i.code=e,onChange:t[0]||(t[0]=t=>e.visiblePopover=!1)},{default:(0,g.k6)(()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(i.options,e=>((0,g.uX)(),(0,g.Wv)(a,{key:e.code,value:e.code},{default:(0,g.k6)(()=>[(0,g.eW)((0,U.v_)(e.displayName),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["disabled","style","placeholder","value","onUpdate:value"])]),_:2},1032,["closable","onClose"]),(0,g.bF)(d,{opt:i,readonly:e.readonly},null,8,["opt","readonly"])],64))),256))])]),e.readonly?(0,g.Q3)("",!0):((0,g.uX)(),(0,g.CE)("span",ad,[(0,g.bF)(c,{icon:"oinone-variable-x",color:"var(--oio-text-color)",size:"16"})]))],2)]),content:(0,g.k6)(()=>[(0,g.Lk)("div",ld,[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.options,t=>((0,g.uX)(),(0,g.CE)(g.FK,{key:t.code},[e.existingValue.includes(t.id)?(0,g.Q3)("",!0):((0,g.uX)(),(0,g.CE)("div",{key:0,class:"form-resource-date-format-item",onClick:i=>e.onChangeOption(t)},(0,U.v_)(t.displayName),9,sd))],64))),128))])]),_:1},8,["trigger","visible"])}var cd=i(59975),ud=i(94261);const pd={class:"control-tag-inner"},hd={class:"control-tag-content"},gd=["title"],vd=["title"];function md(e,t,i,r,o,n){const a=(0,g.g2)("a-divider"),l=(0,g.g2)("close-circle-outlined");return(0,g.uX)(),(0,g.CE)("div",{class:(0,U.C4)(["control-tag",`control-tag-${e.size}`])},[(0,g.Lk)("span",pd,[e.$slots.prefix?(0,g.RG)(e.$slots,"prefix",{key:0}):(0,g.Q3)("",!0),(0,g.Lk)("span",hd,[(0,g.RG)(e.$slots,"default",{},()=>[(0,g.Lk)("span",{class:"control-tag-content-title",title:e.title+""+(e.desc?" | "+e.desc:"")},(0,U.v_)(e.title),9,gd),e.desc?((0,g.uX)(),(0,g.CE)("span",{key:0,class:"control-tag-content-desc",title:e.desc},[(0,g.bF)(a,{type:"vertical"}),(0,g.eW)((0,U.v_)(e.desc),1)],8,vd)):(0,g.Q3)("",!0)])]),e.closable?((0,g.uX)(),(0,g.CE)("span",{key:1,class:"control-tag-close-btn",onClick:t[0]||(t[0]=(0,Gi.D$)((...t)=>e.onClose&&e.onClose(...t),["stop"]))},[(0,g.bF)(l,{class:"ant-input-clear-icon"})])):(0,g.Q3)("",!0),e.$slots.addOn?(0,g.RG)(e.$slots,"addOn",{key:2}):(0,g.Q3)("",!0)])],2)}var fd=i(18748);const yd=(0,g.pM)({components:{CloseCircleOutlined:fd.A},props:{title:{type:String},desc:{type:String},closable:{type:Boolean,default:!1},size:{type:String,default:"middle"}},emits:["close"],setup(e,{emit:t}){const i=()=>{t("close")};return{onClose:i}}}),bd=(0,T.A)(yd,[["render",md]]),Cd=bd,xd=["disabled"];function wd(e,t,i,r,o,n){return(0,g.bo)(((0,g.uX)(),(0,g.CE)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.opt.concat=t),disabled:e.readonly,style:(0,U.Tr)({width:e.width}),class:"form-resource-date-format-concat",type:"text"},null,12,xd)),[[Gi.Jo,e.opt.concat]])}const Sd=(0,g.pM)({props:["opt","readonly"],setup(e){const t=(0,g.EW)(()=>e.opt.concat?18*e.opt.concat.length+"px":"18px");return{width:t}}}),Td=(0,T.A)(Sd,[["render",wd]]),Ed=Td,Ad=(0,g.pM)({components:{CloseCircleFilled:cd.A,ASelect:po.Ay,ASelectOption:po.OQ,ATooltip:lr.A,APopover:ud.A,ControlTag:Cd,OioIcon:tt.Lky,FormatConcat:Ed},props:{options:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})},onChangeOption:{type:Function,required:!0},onRemoveOption:{type:Function,required:!0},readonly:{type:Boolean}},setup(e){const t=(0,Mi.KR)(!1),i=(0,g.EW)(()=>e.value&&e.value.value||[]),r=(0,g.EW)(()=>i.value.map(e=>e.id));return{selectedValue:i,visiblePopover:t,existingValue:r}}}),kd=(0,T.A)(Ad,[["render",dd]]),Dd=kd;let Fd=class extends p.d4{initialize(e){return super.initialize(e),this.setComponent(Dd),this}get currentRelationField(){return this.getDsl().relationField||""}get optionalFields(){const{optionalFields:e=""}=this.getDsl();return e.split(",")}get options(){const e=od();return e.filter(e=>this.optionalFields.includes(e.id))}watchSelectedValue(){var e;if(!this.currentRelationField)return;const t=null===(e=this.value)||void 0===e?void 0:e.value.map(e=>e.code+e.concat||"").join("");this.formData[this.currentRelationField]=t}onChangeOption(e){var t;this.value||this.change({value:[]}),(null===(t=this.value)||void 0===t?void 0:t.value)||(this.value.value=[]),this.value.value.push(Object.assign({},e)),this.change(this.value)}onRemoveOption(e){this.value.value.splice(e,1),this.change(this.value)}};(0,l.Cg)([u.x0.Reactive()],Fd.prototype,"currentRelationField",null),(0,l.Cg)([u.x0.Reactive()],Fd.prototype,"optionalFields",null),(0,l.Cg)([u.x0.Reactive()],Fd.prototype,"options",null),(0,l.Cg)([u.x0.Watch("value",{deep:!0})],Fd.prototype,"watchSelectedValue",null),(0,l.Cg)([u.x0.Method()],Fd.prototype,"onChangeOption",null),(0,l.Cg)([u.x0.Method()],Fd.prototype,"onRemoveOption",null),Fd=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Form,ttype:s.m1.Map,widget:["HyphenMapWidget","SlashMapWidget","ChineseMapWidget","HyphenYearMonthMapWidget","SlashYearMonthMapWidget","ChineseYearMonthMapWidget"]}))],Fd);let Rd=class extends Fd{get options(){const e=rd();return e.filter(e=>this.optionalFields.includes(e.id))}};(0,l.Cg)([u.x0.Reactive()],Rd.prototype,"options",null),Rd=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Form,ttype:s.m1.Map,widget:["ApColonNormalMapWidget","ColonNormalMapWidget","ApColonShortMapWidget","ColonShortMapWidget"]}))],Rd);var Od=i(35647);const Nd={class:"form-single-select"},$d={key:0,class:"readonly"},Md={key:1},Id={class:"lang-badge-selection-opt"};function Ld(e,t,i,r,o,n){const a=(0,g.g2)("a-select"),l=(0,g.g2)("oio-icon"),s=(0,g.g2)("a-select-option"),d=(0,g.g2)("check-outlined"),c=(0,g.g2)("oio-empty-data");return(0,g.uX)(),(0,g.CE)("div",Nd,[e.innerReadonly&&!e.innerDisabled?((0,g.uX)(),(0,g.CE)("div",$d,[(0,g.bF)(a,{class:"oio-select","dropdown-class-name":"oio-select-dropdown","label-in-value":"",placeholder:e.placeholder,getPopupContainer:e.getTriggerContainer,value:e.currentValue,options:e.optionList},null,8,["placeholder","getPopupContainer","value","options"])])):((0,g.uX)(),(0,g.CE)("div",Md,[(0,g.bF)(a,{class:"oio-select","show-search":e.showSearch,"allow-clear":e.allowClear,disabled:e.innerDisabled,value:e.currentValue,"filter-option":!1,"default-active-first-option":!1,placeholder:e.placeholder,getPopupContainer:e.getTriggerContainer,dropdownClassName:e.dropdownClassName,onChange:e.onChange,onSearch:e.search,onSelect:e.innerSelect,onBlur:e.blur,onDropdownVisibleChange:e.dropdownVisibleChange,onFocus:e.focus,onPopupScroll:e.slipSelect},{menuItemSelectedIcon:(0,g.k6)(()=>[(0,g.bF)(d)]),notFoundContent:(0,g.k6)(()=>[e.loadMoreLoading?(0,g.Q3)("",!0):((0,g.uX)(),(0,g.Wv)(c,{key:0}))]),default:(0,g.k6)(()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)(e.optionList,e=>((0,g.uX)(),(0,g.Wv)(s,{value:e.value},{default:(0,g.k6)(()=>[(0,g.Lk)("div",Id,[(0,g.bF)(l,{icon:e.icon,size:"16"},null,8,["icon"]),(0,g.eW)(" "+(0,U.v_)(e.label),1)])]),_:2},1032,["value"]))),256))]),_:1},8,["show-search","allow-clear","disabled","value","placeholder","getPopupContainer","dropdownClassName","onChange","onSearch","onSelect","onBlur","onDropdownVisibleChange","onFocus","onPopupScroll"])]))])}var _d=i(17345);const Pd=(0,g.pM)({inheritAttrs:!1,props:Object.assign(Object.assign({},r.DZ),{value:Object,currentValueLabel:String,handleSelectedValueLabel:Function,generatorSelectOption:Function}),components:{CheckOutlined:_d.A,OioEmptyData:tt.hNI,OioSpin:tt.MEy,ASelect:po.Ay,ASelectOption:po.OQ,OioIcon:tt.Lky},setup(e){const t=(0,Mi.KR)([]),i=e=>{t.value=[...e]},o=(0,g.EW)(()=>e.value&&e.value[e.relationFieldKey]?e.value[e.relationFieldKey]:null);(0,g.wB)(()=>e.options,()=>{e.options&&e.options.length?i(e.options):t.value=[]},{immediate:!0}),(0,g.wB)(()=>e.value,()=>{var t;!e.isInitOptions&&e.value&&i((null===(t=e.generatorSelectOption)||void 0===t?void 0:t.call(e,[e.value]))||[])},{immediate:!0});const n=t=>{e.change({value:t})},a=(0,p.sX)();return Object.assign(Object.assign({},(0,r.sc)(e)),{currentValue:o,optionList:t,onChange:n,getTriggerContainer:a.getTriggerContainer})}}),jd=(0,T.A)(Pd,[["render",Ld]]),Vd=jd;let Bd=class extends Od.px{initialize(e){return super.initialize(e),this.setComponent(Vd),this}handleSelectOption(e,t){const i=super.handleSelectOption(e,t);return i.map(e=>{var t;return Object.assign(Object.assign({},e),{icon:null===(t=this.dataList.find(t=>t.id===e.value))||void 0===t?void 0:t.fullFontClass})})}};Bd=(0,l.Cg)([c.DF.ClassFactory(p.d4.Token({viewType:s.qi.Form,ttype:s.m1.ManyToOne,widget:"LanguageBadge"}))],Bd)},87023:(e,t,i)=>{i.d(t,{jk:()=>r.j,SJ:()=>o.SJ,Uo:()=>n.Uo});var r=i(70409),o=i(92273),n=i(78603),a=i(15215),l=i(89284),s=i(83247),d=i(25195),c=i(47444),u=i(92049),p=i(9703),h=i(91702),g=i(83671);let v=class extends h.ZY{initialize(e){return e.slotNames||(e.slotNames=[l.zi,"trigger"]),super.initialize(e),this.setComponent(g.A),this}get label(){return this.getDsl().label}get icon(){return this.getDsl().icon}get type(){var e,t;const i=null===(t=null===(e=this.getDsl().type)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e);return i||(this.inline?d.VQ.link:d.VQ.primary)}get trigger(){const e=this.getDsl().trigger;return(0,u.A)(e)?e:(0,p.A)(e)?e.split(",").map(e=>e.trim()):e}};(0,a.Cg)([c.x0.Reactive()],v.prototype,"label",null),(0,a.Cg)([c.x0.Reactive()],v.prototype,"icon",null),(0,a.Cg)([c.x0.Reactive()],v.prototype,"type",null),(0,a.Cg)([c.x0.Reactive()],v.prototype,"trigger",null),v=(0,a.Cg)([s.DF.ClassFactory(h.a_.Token({widget:"dropdown"}))],v);var m,f=i(78422);(function(e){e["TEXT"]="TEXT",e["ICON"]="ICON"})(m||(m={}));let y=class extends v{get contentType(){return this.getDsl().contentType||m.TEXT}get label(){return this.contentType===m.TEXT?this.getDsl().label||(0,f.cAb)("设置"):""}get icon(){return this.contentType===m.ICON?this.getDsl().icon:""}};(0,a.Cg)([c.x0.Reactive()],y.prototype,"contentType",null),(0,a.Cg)([c.x0.Reactive()],y.prototype,"label",null),(0,a.Cg)([c.x0.Reactive()],y.prototype,"icon",null),y=(0,a.Cg)([s.DF.ClassFactory(h.a_.Token({widget:"ToolbarDropdown"}))],y)},87547:(e,t,i)=>{i.d(t,{j:()=>w});var r=i(15215),o=i(78422),n=i(48798),a=i(13193),l=i(70164),s=i(67774),d=i(39277),c=i(16022),u=i(25195),p=i(47444),h=i(97859),g=i(9703),v=i(35704),m=i(98916),f=i(50953),y=i(91702),b=i(77679),C=i(32093),x=i(9322);class w extends y.M_{constructor(){super(...arguments),this.defaultType=u.VQ.primary,this.visibleConfirm=!1}get allInvisible(){return!1}initialize(e){super.initialize(e),this.actionComponent?this.setComponent((0,f.ux)(this.actionComponent)):this.setComponent(x.A);const{keyboardConfig:t}=(0,o.RbF)(e,{key:"keyboardConfig",prefix:"keyboard"});return this.keyboardConfig=t,this}get disabled(){var e,t;const i=this.getDsl().disabled;let r;if(!(0,h.A)(i)&&!1!==i)return this.executeExpression(i,!1);{const o=null===(e=this.action)||void 0===e?void 0:e.contextType;if(o){const e=(null===(t=this.activeRecords)||void 0===t?void 0:t.length)||0;switch(o){case l.og.Single:r=1!==e;break;case l.og.Batch:r=e<2;break;case l.og.SingleAndBatch:r=e<1;break;default:r=!1;break}}else r=c.TM.toBoolean(i)}return r}get disabledTitle(){var e,t;let i=this.getDsl().disabledTitle;if((0,h.A)(i)){const r=null===(e=this.action)||void 0===e?void 0:e.contextType;if(r){const e=(null===(t=this.activeRecords)||void 0===t?void 0:t.length)||0;switch(r){case l.og.Single:i=1!==e?(0,o.cAb)("至多选择1个操作行"):"";break;case l.og.Batch:i=e<2?(0,o.cAb)("至少选择2个操作行"):"";break;case l.og.SingleAndBatch:i=e<1?(0,o.cAb)("至少选择1个操作行"):"";break;default:i="";break}}}return i}get help(){return this.getDsl().help}get validateForm(){let e=c.TM.toBoolean(this.getDsl().validateForm);return(0,h.A)(e)&&(e=!1),e}get goBack(){let e=c.TM.toBoolean(this.getDsl().goBack);return(0,h.A)(e)&&(e=!1),e}get closeDialog(){let e=c.TM.toBoolean(this.getDsl().closeDialog);return(0,h.A)(e)&&(e=this.isDialog),e}get closeAllDialog(){return!!c.TM.toBoolean(this.getDsl().closeAllDialog)}get closeDrawer(){let e=c.TM.toBoolean(this.getDsl().closeDrawer);return(0,h.A)(e)&&(e=this.isDrawer),e}get closeAllDrawer(){return!!c.TM.toBoolean(this.getDsl().closeAllDrawer)}get refreshRoot(){let e=c.TM.toBoolean(this.getDsl().refreshRoot);return(0,h.A)(e)&&(e=!1),e}get refreshData(){let e=c.TM.toBoolean(this.getDsl().refreshData);return(0,h.A)(e)&&(e=!0),e}get label(){var e,t;const i=this.getDsl().label||(null===(e=this.action)||void 0===e?void 0:e.displayName);return this.icon?i:i||(null===(t=this.action)||void 0===t?void 0:t.name)}get type(){var e,t,i,r,o,n;return this.inline?(null===(t=null===(e=this.buttonType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||u.VQ.link:(null===(r=null===(i=this.getDsl().type)||void 0===i?void 0:i.toLowerCase)||void 0===r?void 0:r.call(i))||(null===(n=null===(o=this.buttonType)||void 0===o?void 0:o.toLowerCase)||void 0===n?void 0:n.call(o))||this.defaultType}get bizStyle(){var e,t;return(null===(t=null===(e=this.getDsl().bizStyle)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||u.Bfq.default}get icon(){return this.getDsl().icon}seekSearchRuntimeContext(){var e;const t=null===(e=this.metadataRuntimeContext)||void 0===e?void 0:e.handle;if(!t)return;const i=o.HxA.getOthers(t).find(e=>{var t;return(null===(t=e.view)||void 0===t?void 0:t.type)===l.qi.Search});return i||void 0}seekParentMetadataRuntimeContext(){const e=this.metadataRuntimeContext.handle;if(!e)return;const t=p.x0.select(e);return t.metadataRuntimeContext}getSearchRsqlAndQueryParams(e={},t=!0){var i;const r=(null===(i=this.buildSearchConditions(e,t))||void 0===i?void 0:i.condition)||d.fh;let o={},n=r;if(r instanceof s.kWY){const e=r.getConditionBodyData();e&&Object.keys(e).length&&(o=e),n=r.toString()}const a=()=>{const{length:e}=Object.keys(o);return e?c.sK.serializableObject(o):"{}"};return{rsql:n,queryData:o,condition:r,queryDataToString:a}}buildSearchConditions(e={},t=!0){let i,r;const n=this.activeRecords;if(n&&n.length)i=new s.kWY(`id =in= (${n.map(e=>e.id).join(",")})`);else{const{searchBody:n,searchConditions:a}=this;if(r=this.seekSearchRuntimeContext(),r){const t=p.x0.select(r.handle),l=Object.assign(Object.assign({},n),e);Object.keys(l).forEach(e=>{const i=l[e];if((0,g.A)(i)){const r=i;l[e]=this.executeSearchExpression(t,r)}}),i=(0,o.if5)(r,{},l||{},a||[])}const l=this.viewFilter;l&&t&&(i?i.and(new s.kWY(l)):i=new s.kWY(l))}return{runtimeContext:r||this.rootRuntimeContext,condition:i}}executeSearchExpression(e,t){var i,r,n;return(0,o.AEW)(t,(null===(i=null===e||void 0===e?void 0:e.activeRecords)||void 0===i?void 0:i[0])||{},(null===(r=null===e||void 0===e?void 0:e.rootData)||void 0===r?void 0:r[0])||{},(null===(n=null===e||void 0===e?void 0:e.openerActiveRecords)||void 0===n?void 0:n[0])||{},(null===e||void 0===e?void 0:e.scene)||"")}isExistContext(){const e=this.action.context,t=this.rootRuntimeContext.view.context;return e&&Object.keys(e).length||t&&Object.keys(t).length}mergeContext(e){return this.isExistContext()?(Array.isArray(e)?e=e.map(e=>Object.assign(Object.assign({},e),this.buildContext(e)||{})):null!=e&&(e=Object.assign(Object.assign({},e),this.buildContext(e)||{})),e):e}buildContext(e){const t=this.action.context,i=this.rootRuntimeContext.view.context;if(c.$1.log("context parse before",{actionContext:t,viewContext:i}),!this.isExistContext())return;const r={};t&&Object.entries(t).forEach(([t,i])=>{(0,g.A)(i)?(this.testExpressionNotIn(t,i,{activeRecord:e}),(0,v.A)(r,t,this.executeExpressionByParameters({activeRecord:e},i,i))):(0,v.A)(r,t,i)});const o=Object.assign(Object.assign({},i),r);return c.$1.log("context parse after",o),o}testExpressionNotIn(e,t,i){c.$1.run(()=>{var r,o;const n=/\b(?:activeRecords|rootRecord|openerRecord|activeRecord)\.[a-zA-Z0-9_]+\b/g,a=t.match(n),l=this.activeRecords||[],s={activeRecords:i.activeRecords||l,rootRecord:i.rootRecord||(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:i.openerRecord||(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},activeRecord:i.activeRecord||l[0]||{}},d=[];null===a||void 0===a||a.forEach(e=>{const t=e.split("."),i=t[0],r=t[1],o=Object.keys(s[i]||{});(null===o||void 0===o?void 0:o.includes(r))||d.push(r)}),d.length&&c.$1.warn(["当前动作的上下文表达式中可能使用了未拖入的字段",`上下文所在目标页面模型的字段:${e}`,`表达式:${t}`,`未拖入的当前视图字段:${d.join(",")}`].join(";"))})}get enableConfirm(){var e,t,i,r;const o=this.getDsl().enableConfirm,n=c.TM.toBoolean(o);if((0,h.A)(n)){const n=this.scene;return a.r4.run({activeRecords:this.activeRecords,rootRecord:(null===(e=this.rootData)||void 0===e?void 0:e[0])||{},openerRecord:(null===(t=this.openerActiveRecords)||void 0===t?void 0:t[0])||{},scene:n,activeRecord:(null===(i=this.activeRecords)||void 0===i?void 0:i[0])||{},parentRecord:(null===(r=this.parentViewActiveRecords)||void 0===r?void 0:r[0])||{}},o,o)}return n}changeVisibleConfirm(e){this.visibleConfirm=e}get confirmType(){const{confirmType:e}=this.getDsl();if(e){const t=u.xvQ[e];return t||void 0}return u.xvQ.POPPER}get confirm(){if(this.enableConfirm&&this.confirmType===u.xvQ.POPPER)return this.confirmText}get confirmText(){const e=this.getDsl().confirmText||this.getDsl().confirm;if((0,g.A)(e))return this.executeExpression(e)}get confirmPosition(){return(0,b.fv)(this.getDsl().confirmPosition)||u.Jd8.BM}get confirmTitle(){const{confirmTitle:e}=this.getDsl();return e||(0,o.TlY)("kunlun.common.prompt")}get enterText(){const{enterText:e}=this.getDsl();if(e)return e}get cancelText(){const{cancelText:e}=this.getDsl();if(e)return e}get actionElement(){return{}}filterByContextType(e,t){switch(e.contextType){case l.og.ContextFree:return!0;case l.og.Batch:return t>1;case l.og.Single:return 1===t;case l.og.SingleAndBatch:return t>=1;default:return!0}}executeExpressionByParameters(e,t,i){var r,o,n;const l=this.activeRecords||[],s=this.scene;return a.r4.run({activeRecords:e.activeRecords||l,rootRecord:e.rootRecord||(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:e.openerRecord||(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:e.scene||s,activeRecord:e.activeRecord||l[0]||{},parentRecord:(null===(n=this.parentViewActiveRecords)||void 0===n?void 0:n[0])||[]},t,i)}executeExpression(e,t){var i,r,o;const n=this.activeRecords||[],l=this.scene;return a.r4.run({activeRecords:n,rootRecord:(null===(i=this.rootData)||void 0===i?void 0:i[0])||{},openerRecord:(null===(r=this.openerActiveRecords)||void 0===r?void 0:r[0])||{},scene:l,activeRecord:n[0]||{},parentRecord:(null===(o=this.parentViewActiveRecords)||void 0===o?void 0:o[0])||[]},e,t)}invisibleProcess(e){var t,i,r;if("boolean"===typeof e)return e;const o=this.activeRecords||[],n=this.scene;return o.length<=1?!!a.r4.run({activeRecords:o,rootRecord:(null===(t=this.rootData)||void 0===t?void 0:t[0])||{},openerRecord:(null===(i=this.openerActiveRecords)||void 0===i?void 0:i[0])||{},parentRecord:(null===(r=this.parentViewActiveRecords)||void 0===r?void 0:r[0])||[],scene:n},e,!1):!o.every(t=>{var i,r,l;return!a.r4.run({activeRecords:o,rootRecord:(null===(i=this.rootData)||void 0===i?void 0:i[0])||{},openerRecord:(null===(r=this.openerActiveRecords)||void 0===r?void 0:r[0])||{},parentRecord:(null===(l=this.parentViewActiveRecords)||void 0===l?void 0:l[0])||[],scene:n,activeRecord:t},e,!1)})}get variables(){return{}}resolveVariables(e){var t;const i={},r=this.activeRecords||[],o=(null===(t=this.rootData)||void 0===t?void 0:t[0])||{},n=this.scene;return Object.keys(e).forEach(t=>{var l;a.r4.getInstance().initExpressionContext(r,o,(null===(l=this.openerActiveRecords)||void 0===l?void 0:l[0])||{},n);try{const r=e[t];if("string"===typeof r)if(r.startsWith("${")&&r.endsWith("}")){const e=r.substring(2,r.length-1),o=a.r4.getInstance().exec(e);o&&(i[t]=o)}else i[t]=e[t];else i[t]=r}catch(s){}finally{a.r4.getInstance().cleanupExpressionContext()}}),i}click(...e){return(0,r.sH)(this,void 0,void 0,function*(){return this.validateAndClick(...e)})}validateAndClick(...e){return(0,r.sH)(this,void 0,void 0,function*(){return this.load(()=>(0,r.sH)(this,void 0,void 0,function*(){try{if(!(yield this.validatorForm()))return!1;const t=yield this.validateConfirm();if(t){const t=yield this.clickAction(...e);return(0,m.A)(t)&&!t?t:yield this.clickActionAfter(t)}}catch(t){console.error("click action error.",t)}return!1}))})}clickAction(...e){return!0}validateConfirm(){if(this.enableConfirm&&this.confirmType===u.xvQ.MODAL){const{confirmText:e}=this;if(e)return(0,C.u2)({confirm:e,enterText:this.enterText,cancelText:this.cancelText})}return Promise.resolve(!0)}validatorForm(){return this.validateForm?this.validator(!0):Promise.resolve(!0)}validator(e=!1){if(this.validatorCallChaining){const t={notify:!0,sendErrorMessage:e},i=this.validatorCallChaining.call(t);if(null!=i)return i.then(e=>null==e||e)}return Promise.resolve(!0)}clickActionAfter(e){return e}validatorByApi(){return(0,r.sH)(this,void 0,void 0,function*(){return null})}executeClientValidator(e,t){return(0,r.sH)(this,void 0,void 0,function*(){return!1})}executeServerValidator(e,t){return(0,r.sH)(this,void 0,void 0,function*(){let t=!1;return!!e||t})}validatorByExpression(e){var t,i;a.r4.getInstance().initExpressionContext(this.activeRecords,(null===(t=this.rootData)||void 0===t?void 0:t[0])||{},(null===(i=this.openerActiveRecords)||void 0===i?void 0:i[0])||{},this.scene);try{const t=a.r4.getInstance().exec(e);if(!t)return!1}catch(r){return!1}return!0}get actionDomain(){let{domain:e}=this.getDsl();if(e=e||"",e)return this.resolveDynamicDomain(e)}resolveDynamicDomain(e){var t,i,r;return(0,o.GsW)(e,this.activeRecords,null===(t=this.rootData)||void 0===t?void 0:t[0],(null===(i=this.openerActiveRecords)||void 0===i?void 0:i[0])||{},this.scene,(null===(r=this.parentViewActiveRecords)||void 0===r?void 0:r[0])||{})}onKeypress(e,t){this.disabled||(this.enableConfirm?this.changeVisibleConfirm(!0):this.click())}subscribeKeyboardEvent(){if(!this.keyboardConfig)return;const{key:e,scope:t,invisibleDeactivated:i,ctrl:r,alt:o,shift:a}=this.keyboardConfig;this.keyboardEventConsumer=n.l7.subscribeKeyboardEvent(e,this.onKeypress.bind(this),{config:{scope:t,invisibleDeactivated:i,ctrl:r,alt:o,shift:a}})}unsubscribeKeyboardEvent(){var e;null===(e=this.keyboardEventConsumer)||void 0===e||e.dispose()}startKeyboardEvent(){var e;null===(e=this.keyboardEventConsumer)||void 0===e||e.start()}stopKeyboardEvent(){var e;null===(e=this.keyboardEventConsumer)||void 0===e||e.stop()}$$mounted(){super.$$mounted(),this.subscribeKeyboardEvent()}$$unmounted(){super.$$unmounted(),this.unsubscribeKeyboardEvent()}$$activated(){super.$$activated(),this.startKeyboardEvent()}$$deactivated(){super.$$deactivated(),this.stopKeyboardEvent()}}(0,r.Cg)([p.x0.Reactive(),p.x0.Inject()],w.prototype,"searchBody",void 0),(0,r.Cg)([p.x0.Reactive(),p.x0.Inject()],w.prototype,"searchConditions",void 0),(0,r.Cg)([p.x0.Reactive(),p.x0.Inject("filter")],w.prototype,"viewFilter",void 0),(0,r.Cg)([p.x0.Provide("actionComponent")],w.prototype,"nextActionComponent",void 0),(0,r.Cg)([p.x0.Inject()],w.prototype,"actionComponent",void 0),(0,r.Cg)([p.x0.Reactive()],w.prototype,"allInvisible",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"disabled",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"disabledTitle",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"help",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"validateForm",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"goBack",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"closeDialog",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"closeAllDialog",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"closeDrawer",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"closeAllDrawer",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"refreshRoot",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"refreshData",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"label",null),(0,r.Cg)([p.x0.Reactive(),p.x0.Provide("buttonType")],w.prototype,"nextButtonType",void 0),(0,r.Cg)([p.x0.Reactive(),p.x0.Inject()],w.prototype,"buttonType",void 0),(0,r.Cg)([p.x0.Reactive(),p.x0.Provide("operatorColumnButtonType")],w.prototype,"nextOperatorColumnButtonType",void 0),(0,r.Cg)([p.x0.Reactive(),p.x0.Inject()],w.prototype,"operatorColumnButtonType",void 0),(0,r.Cg)([p.x0.Reactive()],w.prototype,"type",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"bizStyle",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"icon",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"enableConfirm",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"visibleConfirm",void 0),(0,r.Cg)([p.x0.Method()],w.prototype,"changeVisibleConfirm",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"confirmType",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"confirm",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"confirmText",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"confirmPosition",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"confirmTitle",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"enterText",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"cancelText",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"actionElement",null),(0,r.Cg)([p.x0.Provide(),p.x0.Reactive()],w.prototype,"variables",null),(0,r.Cg)([p.x0.Method()],w.prototype,"validateAndClick",null),(0,r.Cg)([p.x0.Method()],w.prototype,"validateConfirm",null),(0,r.Cg)([p.x0.Method()],w.prototype,"validatorByApi",null),(0,r.Cg)([p.x0.Reactive()],w.prototype,"actionDomain",null)},87756:(e,t,i)=>{i.d(t,{Dn:()=>h,T3:()=>$,Te:()=>m});var r=i(70164),o=i(55543),n=i(68434),a=i(78422),l=i(16022),s=i(30717),d=i(40983),c=i(20641),u=i(53751),p=i(77679);const h={name:{type:String},invisible:{type:Boolean},colon:{type:Boolean,default:!1},layout:{type:[String,Object]},label:{type:[String,Boolean],default:void 0},help:{type:String},hint:{type:String},required:{type:Boolean,default:void 0},validateTrigger:{type:[String,Array]},validatorInfo:{type:Object}},g=(0,c.pM)({name:"DefaultFormItem",components:{OioFormItem:s.FX9,ATooltip:d.A,QuestionCircleOutlined:n.A},inheritAttrs:!1,props:Object.assign(Object.assign({},h),{itemName:{type:String},labelInvisible:{type:Boolean,default:!1}}),setup(e){const t=(0,c.EW)(()=>l.TM.toBoolean(e.required)||!1);return{required:t}},render(){var e,t;const i=["form-field-widget","item"],r=s.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default(),o={default:()=>[(0,c.bF)("div",{class:"widget-container"},r)]};this.labelInvisible?i.push("hide-ant-form-item-label"):o.label=()=>{const e=(0,a.cAb)(this.label),t=[(0,c.bF)("span",{class:"form-field-widget-label-content",title:e},e)];return this.help&&t.push((0,c.bF)(d.A,{placement:"top",overlayStyle:{maxWidth:"260px"}},{title:()=>[(0,c.bF)("span",{},this.help)],default:()=>[(0,c.bF)(n.A,{class:"question-icon"})]})),t},this.hint&&(o.extra=()=>[(0,c.bF)("span",{title:this.hint},this.hint)]);const l=null===(e=this.validatorInfo)||void 0===e?void 0:e.message;l&&(o.help=()=>[(0,c.bF)("span",{class:"form-field-error-msg",title:l},l)]);let h=null===(t=this.validatorInfo)||void 0===t?void 0:t.status;return h===p.Tc.Skip&&(h=void 0),(0,c.bo)((0,c.bF)(s.FX9,Object.assign(Object.assign({},s.$pj.collectionBasicProps(this.$attrs,i)),{colon:this.colon,layout:this.layout,required:this.required,validateTrigger:this.validateTrigger,validateStatus:h,"data-name":this.itemName}),o),[[u.aG,!this.invisible]])}}),v=g,m=v,f=(0,c.pM)({name:"TableEditorItem",components:{OioFormItem:s.FX9,ATooltip:d.A,QuestionCircleOutlined:n.A},inheritAttrs:!1,props:Object.assign({},h),setup(e){const t=(0,c.EW)(()=>l.TM.toBoolean(e.required)||!1);return{required:t}},render(){var e,t;const i=["default-table-editor-item","form-field-widget","item","hide-ant-form-item-label"],r=s.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default(),o={default:()=>[(0,c.bF)("div",{class:"widget-container"},r)]},n=null===(e=this.validatorInfo)||void 0===e?void 0:e.message;return n&&(o.help=()=>[(0,c.bF)("span",{title:n},n)]),(0,c.bo)((0,c.bF)(s.FX9,Object.assign(Object.assign({},s.$pj.collectionBasicProps(this.$attrs,i)),{name:this.name,colon:this.colon,layout:this.layout,required:this.required,validateTrigger:this.validateTrigger,validateStatus:null===(t=this.validatorInfo)||void 0===t?void 0:t.status,"data-name":this.name}),o),[[u.aG,!this.invisible]])}}),y=f,b=y;var C=i(15215),x=i(13193),w=i(67774),S=i(25195),T=i(47444),E=i(9703),A=i(98916),k=i(97859),D=i(66401),F=i(68706),R=i(35902),O=i(49839);function N(e){return e instanceof a.E6O}class $ extends R.M{constructor(){super(...arguments),this.defaultValidateTrigger=[S.N0$.BLUR],this.englishOnlyRegex=/^[a-zA-Z]+$/,this.quotationOnlyRegex=/^['|"]/}get viewMode(){return this.viewType===r.qi.Table?r.nE.Editor:this.parentViewMode}get submitType(){var e,t;return this.currentSubmitType||(null===(t=null===(e=this.getDsl().submitType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||this.parentSubmitType||a.TNZ.default}get relationUpdateType(){var e,t;return this.currentRelationUpdateType||(null===(t=null===(e=this.getDsl().relationUpdateType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||this.parentRelationUpdateType||a.A14.default}initialize(e){return e.slotNames||(e.slotNames=[]),super.initialize(e),this}get formData(){var e;return(null===(e=this.activeRecords)||void 0===e?void 0:e[0])||{}}get value(){return this.compute()}getValue(){return this.formData[this.itemName]}setValue(e){this.formData[this.itemName]=e}compute(){return this.getValue()}get layout(){const{layout:e}=this.getDsl();if((0,E.A)(e))return e.toLowerCase()}get label(){const{label:e}=this.getDsl();if(null!=e)return(0,A.A)(e)?l.TM.toString(e):this.executeLabelExpression(e)}get labelInvisible(){return l.TM.isFalse(this.label)||!!l.TM.toBoolean(this.getDsl().labelInvisible)}get help(){return this.getDsl().help}get hint(){const{hint:e}=this.getDsl();if(e)return l.Xx.ofNullable(this.executeExpression(e,e)).orElse(e)}get required(){if(this.viewMode===r.nE.Lookup||this.viewType===r.qi.Search)return!1;let{required:e}=this.getDsl();return(0,k.A)(e)&&(e=!1),(0,A.A)(e)?e:!!(0,E.A)(e)&&(l.TM.isStringBoolean(e)?!!l.TM.toBoolean(e):!!this.executeExpression(e,!1))}get readonly(){if(this.viewMode===r.nE.Lookup)return!0;let{readonly:e}=this.getDsl();return(0,k.A)(e)&&(e=!1),(0,A.A)(e)?e:!!(0,E.A)(e)&&(l.TM.isStringBoolean(e)?!!l.TM.toBoolean(e):!!this.executeExpression(e,!1))}get disabled(){if(this.viewMode===r.nE.Lookup)return!1;let{disabled:e}=this.getDsl();return(0,k.A)(e)&&(e=!1),(0,A.A)(e)?e:!!(0,E.A)(e)&&(l.TM.isStringBoolean(e)?!!l.TM.toBoolean(e):!!this.executeExpression(e,!1))}get requiredTips(){return this.getDsl().requiredTips}get validateTrigger(){const{validateTrigger:e}=this.getDsl();return!(0,D.A)(e)&&(0,E.A)(e)?e.split(",").map(e=>e.trim().toLowerCase()):this.defaultValidateTrigger}get validatorInfo(){return this.validation}setBlurValue(e){this.blurValue=this.computeBlurValue(e)}computeBlurValue(e){return null==e||(0,E.A)(e)?e:JSON.stringify(e)}get clearFields(){return this.getDsl().clearFields&&this.getDsl().clearFields.split(",")}change(e){var t;this.updateValue(e),null===(t=this.executeCompute)||void 0===t||t.call(this,S._Vw.CHANGE),this.validateTrigger.includes(S.N0$.CHANGE)?this.executeValidator().then(e=>{(0,p.mO)(e)&&this.afterChange()}):this.afterChange()}updateValue(e){this.setValue(e)}afterChange(){this.afterTriggerExecute(S.HCy.CHANGE)}focus(){this.setBlurValue(this.value)}blur(){const{blur:e}=this.getDsl();(0,D.A)(e)||this.updateValue(l.Gf.cast(this.executeExpression(e,null))),this.validateTrigger.includes(S.N0$.BLUR)?this.executeValidator().then(e=>{(0,p.mO)(e)&&this.afterBlur()}):this.afterBlur()}afterBlur(){var e;this.blurValueChange()&&(this.setBlurValue(this.value),null===(e=this.executeCompute)||void 0===e||e.call(this,S._Vw.BLUR),this.afterTriggerExecute(S.HCy.BLUR))}defaultConstructDataTrigger(){return[S.HCy.BLUR]}defaultClearFieldsTrigger(){return[S.HCy.BLUR]}get constructDataTrigger(){const{constructDataTrigger:e}=this.getDsl();return!(0,D.A)(e)&&(0,E.A)(e)?e.split(",").map(e=>e.trim().toLowerCase()):this.defaultConstructDataTrigger()}get clearFieldsTrigger(){const{clearFieldsTrigger:e}=this.getDsl();return!(0,D.A)(e)&&(0,E.A)(e)?e.split(",").map(e=>e.trim().toLowerCase()):this.defaultClearFieldsTrigger()}afterTriggerExecute(e){return(0,C.sH)(this,void 0,void 0,function*(){let t=!1;if(this.constructDataTrigger.includes(e)&&(t=yield this.constructDataBack()),this.clearFieldsTrigger.includes(e)){const e=this.clearFieldsCallback();e&&(t=e)}t&&this.reloadFormData$.subject.next(!0)})}blurValueChange(){return JSON.stringify(this.value)!==JSON.stringify(this.blurValue)}constructDataBack(){var e,t,i;return(0,C.sH)(this,void 0,void 0,function*(){const{constructFun:r,constructSubmitType:o,submitFields:n}=this.getDsl(),{formData:s,model:d}=this;if(!r)return!1;const{runtimeContext:c,fields:u}=this.rootViewRuntimeContext,p=T.x0.select(c.handle);let h;if(p instanceof T.TS&&(h=null===(t=null===(e=p.getOperator())||void 0===e?void 0:e.activeRecords)||void 0===t?void 0:t[0]),h||(h=null===(i=this.rootData)||void 0===i?void 0:i[0]),!h)return console.error("Invalid target active record.",c.handle,p),!1;const g=(0,F.kf)(d,h,s,this.generatorConstructMirrorSubmitData(),{submitType:o,customSubmitFields:n});let v=g;if(g!==h)for(let e=0;e<u.length;e++){const t=u[e];v={[t.name]:v}}const m=c.getRequestModelFields(),f=yield a.cqT.constructMirror(c.model,v,{fun:r,requestFields:m});return!!f&&l.BF.shallowMerge(h,f)})}generatorConstructMirrorSubmitData(){const{formData:e,itemName:t}=this;return{[t]:e[t]}}clearFieldsCallback(){return(0,F.G6)(this.clearFields,this.formData)}executeLabelExpression(e){return x.r4.isExpressionStr(e)?this.executeExpression(x.r4.getExpressionStr(e)):x.r4.hasKeywords(e)?this.executeExpression(e):e}executeExpression(e,t){var i,r,o;if(null===e||void 0===e)return"boolean"===typeof t?t:t||e;if("string"===typeof e&&!this.quotationOnlyRegex.test(e)&&this.englishOnlyRegex.test(e))return e;const n={activeRecords:[this.formData||{}],rootRecord:(null===(i=this.rootData)||void 0===i?void 0:i[0])||{},openerRecord:(null===(r=this.openerActiveRecords)||void 0===r?void 0:r[0])||{},parentRecord:(null===(o=this.parentViewActiveRecords)||void 0===o?void 0:o[0])||{},scene:this.scene};return x.r4.run(n,e,t)}submit(e){}get isSkipValidator(){return this.invisible||this.parentInvisible||!1}validator(){return(0,C.sH)(this,void 0,void 0,function*(){if(this.isSkipValidator)return this.validatorSkip();const{validation:e,tips:t}=this.getDsl();if(e){const i=this.validatorByExpression(e,t);if(i)return i}const{validator:i,validatorMessage:r}=this.getDsl();if(i){const e=this.validatorByExpression(i,r);if(e)return e}return this.validatorSuccess()})}validatorByExpression(e,t){try{const i=this.executeExpression(e);if(!i)return this.validatorError(t||(0,a.cAb)("校验失败"))}catch(i){return this.validatorError((0,a.cAb)("表达式校验失败"))}}validatorSuccess(e){return{status:p.Tc.Success,message:(0,a.cAb)(e),path:this.dataPath}}validatorSkip(e){return{status:p.Tc.Skip,message:(0,a.cAb)(e),path:this.dataPath}}validatorError(e){return console.error(`validator error. path=${this.dataPath}`,this),{status:p.Tc.Error,message:(0,a.cAb)(e||this.requiredTips||this.translate("kunlun.field.required")),path:this.dataPath}}validatorWarning(e){return{status:p.Tc.Warning,message:(0,a.cAb)(e),path:this.dataPath}}validatorValidating(e){return{status:p.Tc.Validating,message:(0,a.cAb)(e),path:this.dataPath}}executeValidator(){var e,t;return(0,C.sH)(this,void 0,void 0,function*(){const i=yield this.validator();return(null===i||void 0===i?void 0:i.status)===(null===(e=this.validation)||void 0===e?void 0:e.status)&&(null===i||void 0===i?void 0:i.message)===(null===(t=this.validation)||void 0===t?void 0:t.message)||(this.validation=i),i})}invisibleProcess(e){return"boolean"===typeof e?e:!!this.executeExpression(e,!1)}childrenInvisibleProcess(){return!!this.getChildren().length&&super.childrenInvisibleProcess()}$$mounted(){var e,t,i;super.$$mounted(),null===(e=this.submitCallChaining)||void 0===e||e.hook(this.path,(e,t)=>(0,C.sH)(this,void 0,void 0,function*(){if(!t)return;const e=t.records;if(!e)return;const i=yield this.submit(t);if(null==i)return;const r=N(i);let o;r?t.relationRecords.push(i):o=i,o&&Object.keys(o).forEach(t=>{e[t]=o[t]})})),null===(t=this.validatorCallChaining)||void 0===t||t.hook(this.path,()=>(0,C.sH)(this,void 0,void 0,function*(){return(0,p.NK)(yield this.executeValidator())})),null===(i=this.formValidateCallChaining)||void 0===i||i.hook(this.path,e=>{const t=null===e||void 0===e?void 0:e[0];if(!t)return;const i=t.find(e=>e.path===this.dataPath);if(i){let e=p.Tc.Success;switch(i.level){case w.I6D.DEBUG:return;case w.I6D.WARN:e=p.Tc.Warning;break;case w.I6D.ERROR:e=p.Tc.Error;break}this.validation={message:i.message,status:e,path:i.path}}})}$$unmounted(){var e,t;super.$$unmounted(),null===(e=this.submitCallChaining)||void 0===e||e.unhook(this.path),null===(t=this.validatorCallChaining)||void 0===t||t.unhook(this.path)}}(0,C.Cg)([T.x0.Reactive(),T.x0.Inject()],$.prototype,"viewType",void 0),(0,C.Cg)([T.x0.Reactive(),T.x0.Inject("viewMode")],$.prototype,"parentViewMode",void 0),(0,C.Cg)([T.x0.Reactive(),T.x0.Provide()],$.prototype,"viewMode",null),(0,C.Cg)([T.x0.Reactive(),T.x0.Inject("submitType")],$.prototype,"parentSubmitType",void 0),(0,C.Cg)([T.x0.Reactive()],$.prototype,"currentSubmitType",void 0),(0,C.Cg)([T.x0.Reactive(),T.x0.Provide()],$.prototype,"submitType",null),(0,C.Cg)([T.x0.Reactive(),T.x0.Inject("relationUpdateType")],$.prototype,"parentRelationUpdateType",void 0),(0,C.Cg)([T.x0.Reactive()],$.prototype,"currentRelationUpdateType",void 0),(0,C.Cg)([T.x0.Reactive(),T.x0.Provide()],$.prototype,"relationUpdateType",null),(0,C.Cg)([T.x0.SubContext(O.U)],$.prototype,"reloadFormData$",void 0),(0,C.Cg)([T.x0.Reactive()],$.prototype,"formData",null),(0,C.Cg)([T.x0.Reactive(),T.x0.Inject()],$.prototype,"submitCallChaining",void 0),(0,C.Cg)([T.x0.Reactive(),T.x0.Inject()],$.prototype,"validatorCallChaining",void 0),(0,C.Cg)([T.x0.Reactive()],$.prototype,"value",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"layout",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"label",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"labelInvisible",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"help",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"hint",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"required",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"readonly",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"disabled",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"requiredTips",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"validateTrigger",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"validation",void 0),(0,C.Cg)([T.x0.Reactive()],$.prototype,"validatorInfo",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"blurValue",void 0),(0,C.Cg)([T.x0.Reactive()],$.prototype,"clearFields",null),(0,C.Cg)([T.x0.Method()],$.prototype,"change",null),(0,C.Cg)([T.x0.Method()],$.prototype,"focus",null),(0,C.Cg)([T.x0.Method()],$.prototype,"blur",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"constructDataTrigger",null),(0,C.Cg)([T.x0.Reactive()],$.prototype,"clearFieldsTrigger",null),(0,C.Cg)([T.x0.Reactive(),T.x0.Inject()],$.prototype,"formValidateCallChaining",void 0),(0,o.O)({viewType:[r.qi.Form,r.qi.Detail,r.qi.Search]},m),(0,o.HQ)({viewType:r.qi.Table},b)},89284:(e,t,i)=>{i.d(t,{gx:()=>k,zi:()=>s,vV:()=>u,zX:()=>d,Bo:()=>R,r$:()=>F,Be:()=>c,Vc:()=>h,Nz:()=>l,Pu:()=>C});var r,o=i(70164);(function(e){e["Empty"]="empty",e["Input"]="Input",e["TextArea"]="TextArea",e["RichText"]="RichText",e["Checkbox"]="Checkbox",e["Select"]="Select",e["MultiSelect"]="MultiSelect",e["Count"]="Count",e["Integer"]="Integer",e["Float"]="Float",e["DatePicker"]="DatePicker",e["DateTimePicker"]="DateTimePicker",e["TimePicker"]="TimePicker",e["YearPicker"]="YearPicker",e["Radio"]="Radio",e["RadioGroup"]="RadioGroup",e["Switch"]="Switch",e["Upload"]="Upload",e["UploadImg"]="UploadImg",e["Email"]="Email",e["TreeSelect"]="TreeSelect",e["Phone"]="Phone",e["Currency"]="Currency",e["FilterList"]="FilterList",e["Table"]="Table",e["Form"]="Form"})(r||(r={}));const n=(e,t)=>{const{ttype:i,multi:n}=e;switch(i){case o.m1.Boolean:return r.Switch;case o.m1.Integer:case o.m1.Long:return r.Integer;case o.m1.Float:return r.Float;case o.m1.Currency:return r.Currency;case o.m1.String:return r.Input;case o.m1.Phone:return r.Phone;case o.m1.Email:return r.Email;case o.m1.Date:return r.DatePicker;case o.m1.Time:return r.TimePicker;case o.m1.Year:return r.YearPicker;case o.m1.DateTime:return r.DateTimePicker;case o.m1.Text:return r.TextArea;case o.m1.HTML:return r.RichText;case o.m1.Enum:return n?r.MultiSelect:r.Select;case o.m1.Related:return r.Input;case o.m1.OneToMany:case o.m1.ManyToMany:return r.Table;case o.m1.OneToOne:return r.Form;case o.m1.ManyToOne:return r.Select;default:return r.Input}},a=Object.values(o.m1);class l{parser(e){if(e)try{const t=l.parser.parseFromString(e,"text/xml"),i={root:this.xml2dsl(t.children[0])};return i}catch(t){console.error(t)}return{}}findDslByTagName(e,t){let i=[];return e.tagName===t&&i.push(e),e.children&&e.children.length&&e.children.forEach(e=>{const r=this.findDslByTagName(e,t);i=i.concat(r)}),i}hasKeyValueOrNot(e,t,i){const r=this.parser(i);return this.findKey(r,e,t)}findKey(e,t,i){for(const r in e)if("children"===r||e[r]instanceof Array){for(let o=0;o<e[r].length;o++)if(this.findKey(e[r][o],t,i))return!0}else if(r===t){if(e[r]===i)return!0}else if("object"===typeof e[r]&&this.findKey(e[r],t,i))return!0;return!1}xml2dsl(e){const t={};if("parsererror"===e.tagName)return console.log("part of xml was parser error",e),t;t.children=[],t.tagName=e.tagName.toUpperCase(),0===e.children.length&&(t.textContent=e.textContent||"");for(let i=0;i<e.attributes.length;i++){const r=e.attributes.item(i),o=r.name;let n=r.value;"true"===n?n=!0:"false"===n&&(n=!1),t[o]=n}"FIELD"!==t.tagName&&"WIDGET"!==t.tagName||(t.data=t.data?t.data:t.name);for(let i=0;i<e.children.length;i++)t.children.push(this.xml2dsl(e.children.item(i)));return t}static createDslField(e,t){t.node=e;const i=e.data||t.name,r=e.ttype||t.ttype,o=e.widget||t.widget||n(t);a.includes(r)||console.warn(`ttype error: ${r}`,e);const l=e.name||t.name,s=e.invisible||t.invisible,d=e.required||t.required,c=e.readonly||t.readonly,u=e.compute||t.compute,p=!1!==e.sortable,h=e.hint;return Object.assign(Object.assign({},t),{name:i,widget:o,ttype:r,viewIndex:l,invisible:s,required:d,readonly:c,compute:u,sortable:p,hint:h,displayName:e.title||t.label||t.displayName||t.name})}static filterFieldsByDslNode(e=null,t){const i=l.getViewFieldsByDslNode(e,t),r=[];return i.forEach(e=>{r.find(t=>e.name===t.name)||r.push(e)}),r}static getViewFieldsByDslNodeLegacy(e=null,t){if(!e)return t.modelFields;if("FIELD"===e.tagName){const i=t.modelFields.find(t=>t.name===e.data);return i?[this.createDslField(e,i)]:(console.warn(`field not fund ${e.data}`,e),[])}const i=[];return e.children.forEach(e=>{if("FIELD"===e.tagName){const r=t.modelFields.find(t=>t.name===e.data);r&&(r.node=e,i.find(t=>t.name===e.name)||i.push(this.createDslField(e,r)))}else if("GROUP"===e.tagName||"GRID"===e.tagName){const r=e.children;r.forEach(e=>{const r=this.getViewFieldsByDslNode(e,t);r.forEach(e=>e&&i.push(e))})}}),i}static getViewFieldsByDslNode(e=null,t){if(!e)return[];if("field"===e.dslNodeType)return[this.createDslField(e,e)];const i=[];return e.forEach&&e.forEach(e=>{if("field"===e.dslNodeType)i.find(t=>t.name===e.name)||i.push(this.createDslField(e,e));else if("GROUP"===e.tagName||"GRID"===e.tagName){const r=e.children;r.forEach(e=>{const r=this.getViewFieldsByDslNode(e,t);r.forEach(e=>e&&i.push(e))})}}),i}static parserContext(e){return l.parserNode(e,o.RJ.CONTEXT,o.RJ.PROP)}static parserRequest(e){return l.parserNode(e,o.RJ.REQUEST,o.RJ.FIELD)}static parserResponse(e){return l.parserNode(e,o.RJ.RESPONSE,o.RJ.FIELD)}static parserClear(e){return l.parserNode(e,o.RJ.CLEAR,o.RJ.FIELD)}static parserNode(e,t,i,r){if(!e||!t)return{};if("object"===typeof e&&!Object.keys(e).length)return{};const o=e.children.filter(e=>e.tagName===t.toUpperCase());if(o&&o.length){const e={};return r&&o.forEach(t=>{Object.assign(e,t)}),o[0].children.forEach(t=>{t.tagName===i&&(e[l.kebabCase2PascalCase(t.name)]=t.textContent)}),e}return{}}static kebabCase2PascalCase(e){return e.replace(/-(\w)/g,(e,t)=>t.toUpperCase())}static pascalCase2kebabCase(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}static parserAction(e){const t=[],i=e&&e.children&&e.children.filter(e=>"ACTION"===e.tagName)||[];return i.forEach((e,i)=>{const r={};r.rule=e.rule||"",r.invisible=e.invisible||"",r.displayName=e.displayName,r.model=e.model,r.label=e.label,r.name=e.refs||e.name||"",r.priority=e.priority,r.tag=e.tag,e&&e.actionType&&e.actionType.toUpperCase()===o.X2.Composition&&(r.actionType=o.X2.Composition,r.name=`composition${e.children.map(e=>e.refs||e.name||"").join("#")}`),t.push(Object.assign(Object.assign({},e),r))}),t}static parserToGQL(e){if("VIEW"===e.tagName)return`{\n${e.children.filter(e=>"FIELD"===e.tagName||"GROUP"===e.tagName).map(e=>l.parserToGQL(e)).join("\n")}\n}`;if("FIELD"===e.tagName){if(0===e.children.length)return e.name;const t=e.children.filter(e=>"PLACEHOLDER"===e.tagName).filter(e=>e.children.length&&(e.children[0].widget&&!e.children[0].widget.startsWith("DIALOG")||!e.children[0].widget));if(!t.length)return e.name;const i=t[0].children[0];return`${e.name}${l.parserToGQL(i)}`}return"GROUP"===e.tagName?e.children.map(e=>l.parserToGQL(e)).join("\n"):(console.warn(`unsupported node: ${e.tagName}`,e),"{}")}static resolveVariables(e){const{variables:t}=e;if(!t)return{};const i=(t||"").split(";"),r={};return i.forEach(e=>{const t=e.split(":"),i=t[0],o=t[1];r[i]=o}),r}}l.parser=new DOMParser;const s="default";var d;(function(e){e["UNKNOWN"]="unknown",e["VIEW"]="view",e["PACK"]="pack",e["ELEMENT"]="element",e["FIELD"]="field",e["ACTION"]="action",e["SLOT"]="slot",e["TEMPLATE"]="template"})(d||(d={}));const c={dslNodeType:d.UNKNOWN,widgets:[]};class u{static isTemplate(e){return(null===e||void 0===e?void 0:e.dslNodeType)===d.TEMPLATE}static isSlot(e){return(null===e||void 0===e?void 0:e.dslNodeType)===d.SLOT}static isView(e){return(null===e||void 0===e?void 0:e.dslNodeType)===d.VIEW}static isAction(e){return(null===e||void 0===e?void 0:e.dslNodeType)===d.ACTION}static isField(e){return(null===e||void 0===e?void 0:e.dslNodeType)===d.FIELD}}class p{constructor(e,t,i){this.dslNodeTypeMapping=e,this.attributeNameMapping=t,this.attributeValueMapping=i}}p.DEFAULT=new p([[["xslot"],"slot"]],[],[[(e,t)=>e.nodeName===d.VIEW&&"type"===t.name,(e,t)=>t.value.toUpperCase()],[(e,t)=>{const{value:i}=t;return["true","false"].includes(i)},(e,t)=>{const{value:i}=t;return"true"===i||"false"!==i&&i}]]);class h{constructor(e){this.language=e||p.DEFAULT}parse(e){const t=h.DOM_PARSER.parseFromString(e,"text/xml");return this.parseElement(t.documentElement)}parseElement(e){const t=[];let i;const r=e.children.length;if(r)for(let l=0;l<r;l++){const i=e.children.item(l);i&&t.push(this.parseElement(i))}else e.textContent&&(i=e.textContent);const o=this.dslNodeTypeConverter(e,e.nodeName),n={dslNodeType:o,widgets:t};i&&(n.__content=i);const a=e.attributes.length;for(let l=0;l<a;l++){const t=e.attributes.item(l);t&&(n[this.attributeNameConverter(e,t,t.name)]=this.attributeValueConverter(e,t,t.value))}return n}dslNodeTypeConverter(e,t){return h.mapping(e,void 0,t,this.language.dslNodeTypeMapping)}attributeNameConverter(e,t,i){return h.mapping(e,t,i,this.language.attributeNameMapping)}attributeValueConverter(e,t,i){return h.mapping(e,t,i,this.language.attributeValueMapping)}static mapping(e,t,i,r){for(const[o,n]of r){let r;if(r="function"===typeof o?o(e,t):o.includes(i),r)return"function"===typeof n?n(e,t):n}return i}}h.INSTANCE=new h,h.DOM_PARSER=new DOMParser;const g=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map(e=>e.toLowerCase()).join("-");function v(e,t,i){const r=[],o=[];return Object.keys(t||{}).forEach(e=>{null!=t[e]&&o.push(e)}),{props:r,attrs:o}}function m(e,t){return e.map(e=>`${g(e)}="${t[e]}"`).join(" ")}function f(e,t){const{props:i,attrs:r}=v(e,t.props,t.name);return[m([...i,...r],t.props),m(Object.keys(t.attrs||{}).filter(e=>null!=e),t.attrs)].filter(e=>""!==e).join(" ")}function y(e,t){const i=(e.__meta||{}).namespace||"",r=g(e.tag),o=f(i,e),n=[].concat(e.children||[]).map(e=>y(e,t)).join("");return n?`<${r} ${o}>${n}</${r}>`:`<${r} ${o} />`}const b=(e,t,i=-1,r=!0)=>{const o=n(e,t),a={name:e.name,label:e.label||e.displayName};return o&&(a.widget=o),-1!==i&&(a.span=i),!1===r&&(a.label=!1),("id"===e.name||e.invisible)&&(a.invisible=!0),{tag:"field",props:a}},C=(e,t,i=!0,r=!1)=>{let n=t;t.indexOf(o.qi.Table)>=0?n=o.qi.Table:t.indexOf(o.qi.Form)>=0?n=o.qi.Form:t.indexOf(o.qi.Detail)>=0?n=o.qi.Detail:t.indexOf(o.qi.Custom)>=0&&(n=o.qi.Custom);const a=[],l=e.attributes?e.attributes.layoutGrid:12,s=[],d=[],c=[];if(e.modelFields.forEach(e=>{const{layoutGroup:t,layoutTab:i}=e.attributes||{};if(i){const t=c.findIndex(e=>e.title===i);t<0?(c.push({title:i,fields:[]}),c[c.length-1].fields.push(e)):c[t].fields.push(e)}else if(t){const i=s.findIndex(e=>e.title===t);i<0?(s.push({title:t,fields:[]}),s[s.length-1].fields.push(e)):s[i].fields.push(e)}else d.push(e)}),s.length){const e=s.map(e=>({tag:"group",props:{title:e.title,cols:l},children:e.fields.map(e=>b(e,t,e.attributes?e.attributes.layoutGrid:l))}));a.push(...e)}if(c.length){const e={tag:"group",props:{widget:"tabs"},children:c.map(e=>({tag:"group",props:{title:e.title,cols:l},children:e.fields.map(e=>b(e,t,e.attributes?e.attributes.layoutGrid:l))}))};a.push(e)}if(d.length){const e=d.map(e=>b(e,t,e.attributes?e.attributes.layoutGrid:2));a.push(...e)}return y({tag:"view",props:{widget:n},children:a})};new Map;var x=i(32629),w=i.n(x),S=i(88055),T=i.n(S),E=i(69843),A=i.n(E);const k="widgets",D="name",F=["dslNodeType","slot"];class R{static mergeTemplateToLayout(e,t){return R.mergeSlotsToLayout(e,t,R.fetchAllSlots(t))}static mergeSlotsToLayout(e,t,i){e.dslNodeType||(e.dslNodeType=d.VIEW);const r={};Object.keys(i).forEach(e=>{r[e]=!1});const o=T()(e),n=R.mergeTemplateProperties(o,i);if(n){const e=r[n];A()(e)||(r[n]=!0)}else R.mergeProperties(o,t,[k]);return R.traversalWidgets(e,o,i,r),o}static mergeChildSlotsToLayout(e,t,i,r){var o;const n=R.mergeTemplateProperties(t,i);if(n){const a=r[n];if(A()(a))return void console.warn("Invalid slot name.",i,n);if(a)throw new Error("模板中不允许递归使用插槽进行二次处理");r[n]=!0,(null===(o=i[n])||void 0===o?void 0:o.widgets)?R.reverseMergeChildSlotsToTemplate(e,t,R.fetchAllSlots(t)):R.traversalWidgets(e,t,i,r)}else R.traversalWidgets(e,t,i,r)}static reverseMergeChildSlotsToTemplate(e,t,i){var r;null===(r=e.widgets)||void 0===r||r.forEach(e=>{var r;const o=R.fetchSlotName(e);if(o){const n=i[o];if(n){const i=null===(r=t.widgets)||void 0===r?void 0:r.findIndex(e=>R.fetchSlotName(e)===o);if(null!=i&&-1!==i){const r=T()(e);R.mergeProperties(r,n,F),t.widgets.splice(i,1,r)}}}})}static traversalWidgets(e,t,i,r){var o;null===(o=e.widgets)||void 0===o||o.forEach((e,o)=>{var n,a;if(null===(n=t.widgets)||void 0===n?void 0:n.length){const n=null===(a=t.widgets)||void 0===a?void 0:a[o];n&&R.mergeChildSlotsToLayout(e,n,i,r)}})}static fetchSlotsBySlotNames(e,t){var i;const r={},o=[];return null===(i=null===e||void 0===e?void 0:e.widgets)||void 0===i||i.forEach(e=>{var i;if(u.isTemplate(e)){const i=e.slot;if(!i)return void console.error("Invalid template definition. slot is required.");t.includes(i)?r[i]=e:o.push(e)}else u.isSlot(e)?null===(i=e.widgets)||void 0===i||i.forEach(e=>o.push(e)):o.push(e)}),R.defaultSlotAfterProperties(r,o),r}static fetchSlotName(e,t){let i;return u.isSlot(e)?(i=e.name,null===t||void 0===t||t.push(D)):i=e.slot,i}static mergeTemplateProperties(e,t,i){const r=[...F,...i||[]],o=R.fetchSlotName(e,r);if(o){const i=t[o];if(i)return R.mergeProperties(e,i,r),o}}static mergeProperties(e,t,i){Object.entries(t).forEach(([t,r])=>{(i||[]).includes(t)||(e[t]=r)})}static mergeWidgets(e,t){var i;let r=e.widgets;r||(r=[],e.widgets=r),Array.isArray(t)?t.forEach(e=>r.push(e)):null===(i=t.widgets)||void 0===i||i.forEach(e=>r.push(e))}static fetchAllSlots(e){var t;const i={},r=[];return null===(t=e.widgets)||void 0===t||t.forEach(e=>{if(u.isTemplate(e)){const t=e.slot;if(!t)return void console.error("Invalid template definition. slot must be not blank.");let r=i[t];if(r){const t=w()(F);t.push(k),R.mergeProperties(r,e,t),R.mergeWidgets(r,e)}else r=e,i[t]=r}else r.push(e)}),R.defaultSlotAfterProperties(i,r),i}static createDefaultSlot(e){return{dslNodeType:d.TEMPLATE,slot:s,widgets:e}}static defaultSlotAfterProperties(e,t){if(t.length){const{default:i}=e;if(i){const r=Object.assign(Object.assign({},i),{widgets:w()(i.widgets)});R.mergeWidgets(r,t),e.default=r}else e.default=R.createDefaultSlot(t)}}}},89349:(e,t,i)=>{i.d(t,{Fw:()=>l,Gm:()=>a,$h:()=>o,uM:()=>s});var r=i(82499);function o(){return Object.assign({readonlyShowPlaceholder:!1,disabledShowPlaceholder:!1},r.B2["form-item-config"])}const n=new RegExp(/[\u4E00-\u9FA5]/g),a={min:120,max:432,chineseWidth:14,otherWidth:9,sortableFixWidth:40,nonSortableFixWidth:22,sortable:!1};function l(e,t){var i;const{min:r,max:o,chineseWidth:a,otherWidth:l,sortableFixWidth:s,nonSortableFixWidth:d,sortable:c}=t,u=(null===(i=e.match(n))||void 0===i?void 0:i.length)||0,p=e.length-u;let h=u*a+p*l;return h+=c?s:d,h<r?r:h>o?o:h}function s(){return r.B2["table-config"]}},89721:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(78422),o=i(16022),n=i(30717),a=i(25195),l=i(66401),s=i(20641),d=i(50953),c=i(91702);const u=(0,s.pM)({name:"File",components:{OioUpload:n.X08},props:Object.assign(Object.assign({},a.RGW),{managed:{type:Boolean,default:!0},readonly:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},limit:{type:[Number,String],default:-1},limitSize:{type:[Number,String],default:-1},accept:{type:[String,Array]},value:{type:Object},allLimitSize:{type:String,default:""},cdnKey:{type:String},contentType:{type:String,default:""},partSize:{type:Number},chunkUploadThreshold:{type:Number},parallel:{type:Number}}),emits:["change","remove"],slots:["default","empty"],setup(e,t){const i=(0,d.KR)([]),{readonly:o,disabled:l}=(0,c.P1)(e,!0);(0,s.wB)(()=>e.value,t=>{if(!t)return void(i.value=[]);let r;r=Array.isArray(t)?t:t&&Object.keys(t).length>0?[t]:[],i.value=a.FPt.normalizeFileList(r);const{limit:o}=e;o&&o>=1&&(i.value=i.value.slice(-Number(o)))},{immediate:!0});const u=e=>{i.value.push(e),t.emit("change",i.value)};const p=(t,o)=>{if(e.beforeUpload)return e.beforeUpload(t,o);{if(e.accept){const i=t.name.split("."),o=`.${i.slice(-1)}`;let a;if("string"===typeof e.accept&&(a=e.accept.split(",")),Array.isArray(e.accept)&&(a=e.accept),a=a.map(e=>e.toLocaleLowerCase()),a&&!a.includes(o.toLocaleLowerCase()))return n.Xbm.error(`${(0,r.cAb)("该组件配置了可上传类型为")}${e.accept}`),!1}const a=e.limit,l=i.value&&i.value.length||0;if(a>=0){const e=a-l,i=o.findIndex(e=>e.uid===t.uid);if(i===o.length-1&&o.length>e&&n.Xbm.error(`${(0,r.cAb)("该组件配置了最大上传数量为")}${a}`),i>e-1)return!1}}return!0},h=e=>{const{id:r}=e,o=i.value.findIndex(e=>e.id===r);return i.value.splice(o,1),t.emit("remove",e),!0};return{fileList:i,readonly:o,disabled:l,removeCallback:h,onSuccess:u,beforeUpload:p}},render(){if(this.readonly&&(0,l.A)(this.fileList)){const{empty:e}=this.$slots;return e?e():(0,s.bF)(n.fwf)}return(0,s.bF)(n.X08,Object.assign(Object.assign({customRequest:this.customRequest,uploadList:this.fileList,managed:this.managed,multiple:this.multiple,limit:o.A5.toNumber(this.limit),limitSize:o.A5.toNumber(this.limitSize),accept:this.accept,onReject:this.onReject,listType:this.listType,progress:this.progress,disabled:this.disabled,readonly:this.readonly,cdnKey:this.cdnKey,contentType:this.contentType,removeCallback:this.removeCallback,partSize:this.partSize,parallel:this.parallel,chunkUploadThreshold:this.chunkUploadThreshold},a.$pj.collectionBasicProps(this.$attrs)),{onSuccess:this.onSuccess,beforeUpload:this.beforeUpload,onDrop:this.onDrop}),a.$pj.collectionSlots(this.$slots,["default","itemRender","previewIcon","removeIcon"]))}}),p=u,h=p},91702:(e,t,i)=>{i.d(t,{A5:()=>U.A5,ZY:()=>Re,M_:()=>o.M_,d:()=>M,a_:()=>o.a_,Qn:()=>o.Qn,Dn:()=>ae.Dn,T3:()=>ae.T3,Io:()=>ne,t4:()=>he,LL:()=>Oe.L,Ns:()=>Fe.Ns,eN:()=>Fe.eN,jp:()=>o.jp,AT:()=>Ne.A,uk:()=>U.uk,mx:()=>ke.mx,S8:()=>ke.S8,wY:()=>ke.wY,_A:()=>Ae,PJ:()=>o.PJ,WH:()=>V,gt:()=>re,Te:()=>ae.Te,BZ:()=>fe,Q9:()=>H,Nn:()=>U.Nn,d4:()=>U.d4,v$:()=>U.v$,HG:()=>U.HG,dP:()=>U.dP,jQ:()=>U.jQ,I_:()=>U.I_,td:()=>U.td,tr:()=>W.t,dM:()=>Fe.dM,f5:()=>Fe.f5,jW:()=>r.jW,R7:()=>r.R7,tz:()=>U.tz,Zq:()=>U.Zq,u:()=>U.u,g$:()=>r.g$,$h:()=>De.$h,uM:()=>De.uM,sX:()=>ee,P1:()=>r.P1,n$:()=>r.n$,Cu:()=>Z});var r=i(65363),o=i(98475),n=i(15215),a=i(78422),l=i(70164),s=i(67774),d=i(39277),c=i(16022),u=i(30717),p=i(47444),h=i(31592),g=i(66401),v=i(48182),m=i(9703),f=i(18593),y=i(97859),b=i(77500),C=i(77679),x=i(32093),w=i(48798),S=i(39423),T=i(74905);class E extends o.a_{constructor(){super(...arguments),this.internalDataSourceProvider=!1}get isDataSourceProvider(){var e;const t=null===(e=this.dataSourceConfig)||void 0===e?void 0:e.provider;return null==t?this.internalDataSourceProvider:t}set isDataSourceProvider(e){var t;const i=null===(t=this.dataSourceConfig)||void 0===t?void 0:t.provider;null==i&&(this.internalDataSourceProvider=e)}get viewMode(){return this.currentViewMode||this.parentViewMode||l.nE.Create}getViewMode(){return this.viewMode}setViewMode(e){this.currentViewMode=e}get submitType(){var e,t;return this.currentSubmitType||(null===(t=null===(e=this.getDsl().submitType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||this.parentSubmitType||a.TNZ.default}get relationUpdateType(){var e,t;return this.currentRelationUpdateType||(null===(t=null===(e=this.getDsl().relationUpdateType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||this.parentRelationUpdateType||a.A14.default}get mountedCallChaining(){return this.currentMountedCallChaining||this.parentMountedCallChaining}get refreshCallChaining(){return this.currentRefreshCallChaining||this.parentRefreshCallChaining}get submitCallChaining(){return this.parentSubmitCallChaining}get validatorCallChaining(){return this.parentValidatorCallChaining}get filter(){return this.internalFilter}get domain(){return this.internalDomain}refreshCondition(){var e,t,i,r,o,n;let l;this.inline?(null===(e=this.metadataRuntimeContext.parentContext)||void 0===e?void 0:e.handle)!==a._wm&&(l=this.metadataRuntimeContext.view.filter):l=this.metadataRuntimeContext.view.filter;const s=c.LQ.concatByAnd(null===(t=this.viewAction)||void 0===t?void 0:t.filter,null===(i=this.view)||void 0===i?void 0:i.filter,null===(r=this.rootRuntimeContext.viewTemplate)||void 0===r?void 0:r.filter,this.getDsl().filter,l);null===(o=this.setViewFilter)||void 0===o||o.call(this,s),this.internalDomain=c.LQ.concatByAnd(null===(n=this.viewAction)||void 0===n?void 0:n.domain,this.getDsl().domain)}refreshConditionContext(){var e;return null===(e=this.view)||void 0===e?void 0:e.context}initialize(e){super.initialize(e),this.currentViewMode=e.viewMode,this.currentMountedCallChaining=e.mountedCallChaining,this.currentRefreshCallChaining=e.refreshCallChaining;const{dataSourceConfig:t}=(0,a.RbF)(e,{key:"dataSourceConfig",prefix:"datasource"});return this.dataSourceConfig=t,this}isExpandView(){var e,t,i,r,o;return(null===(i=null===(t=null===(e=this.metadataRuntimeContext)||void 0===e?void 0:e.childrenContext)||void 0===t?void 0:t[0])||void 0===i?void 0:i.handle)===(null===(o=null===(r=this.rootRuntimeContext)||void 0===r?void 0:r.parentContext)||void 0===o?void 0:o.handle)}$$beforeCreated(){super.$$beforeCreated(),this.notify(w.Mv.ON_VIEW_BEFORE_CREATED)}$$created(){super.$$created(),this.notify(w.Mv.ON_VIEW_CREATED)}$$beforeMount(){super.$$beforeMount(),this.$router=(0,S.KA)().router,this.currentMountedCallChaining||this.parentMountedCallChaining&&this.automatic||(this.currentMountedCallChaining=new c.Wl),this.currentRefreshCallChaining||this.parentRefreshCallChaining&&this.automatic||(this.currentRefreshCallChaining=new c.Wl),this.notify(w.Mv.ON_VIEW_BEFORE_MOUNT)}$$mounted(){var e,t,i,r,o;super.$$mounted(),null===(e=this.currentMountedCallChaining)||void 0===e||e.hook(this.path,()=>(0,n.sH)(this,void 0,void 0,function*(){yield this.mountedProcess()}),c.Wl.MAX_PRIORITY),null===(t=this.parentMountedCallChaining)||void 0===t||t.hook(this.path,()=>(0,n.sH)(this,void 0,void 0,function*(){this.currentMountedCallChaining?yield this.currentMountedCallChaining.syncCall():yield this.mountedProcess()}),T.Ai),this.parentMountedCallChaining&&this.automatic||null===(i=this.currentMountedCallChaining)||void 0===i||i.syncCall(),null===(r=this.currentRefreshCallChaining)||void 0===r||r.hook(this.path,(e,t)=>(0,n.sH)(this,void 0,void 0,function*(){!1!==t&&(yield this.$$executeRefreshCallChaining(e))}),c.Wl.MAX_PRIORITY),null===(o=this.parentRefreshCallChaining)||void 0===o||o.hook(this.path,(e,t)=>(0,n.sH)(this,void 0,void 0,function*(){!1!==t&&(this.currentRefreshCallChaining?yield this.currentRefreshCallChaining.syncCall(...e||[]):yield this.$$executeRefreshCallChaining(e))}),T.Ai),this.notify(w.Mv.ON_VIEW_MOUNTED)}$$beforeUpdate(){super.$$beforeUpdate(),this.notify(w.Mv.ON_VIEW_BEFORE_UPDATE)}$$updated(){super.$$updated(),this.notify(w.Mv.ON_VIEW_UPDATED)}$$beforeUnmount(){super.$$beforeUnmount(),this.notify(w.Mv.ON_VIEW_BEFORE_UNMOUNT)}$$unmounted(){var e,t;super.$$unmounted(),null===(e=this.mountedCallChaining)||void 0===e||e.unhook(this.path),null===(t=this.refreshCallChaining)||void 0===t||t.unhook(this.path),this.notify(w.Mv.ON_VIEW_UNMOUNTED)}$$executeRefreshCallChaining(e){return(0,n.sH)(this,void 0,void 0,function*(){yield this.refreshProcess()})}notify(e){try{const{view:t}=this;(null===t||void 0===t?void 0:t.name)&&w.Xn.publish(e,`${t.name}`,this)}catch(t){console.error(t)}}}function A(e,t={},i=[],r,o,n,l={}){const c=new s.kWY(d.fh);if(e){const r=(0,a.if5)(e,l,t,i,n);r&&(c.setConditionBodyData(r.getConditionBodyData()),c.and(r))}return r&&c.and(new s.kWY(r)),o&&c.and(new s.kWY(o)),c}function k(e){return(0,m.A)(e)?new s.kWY(e):e}function D(...e){let t;for(const i of e)i&&(t?t.and(k(i)):t=k(i));return t}function F(e,t=" ",i=d.Ht.ASC){let[r,o]=e.split(t);return o||(o=i),o=o.toUpperCase(),o||console.error("invalid direction",o),r||console.error("no field in sort"),[r,o]}(0,n.Cg)([p.x0.Reactive()],E.prototype,"internalDataSourceProvider",void 0),(0,n.Cg)([p.x0.SubContext(T.Un)],E.prototype,"reloadFormData$",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"isDataSourceProvider",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("viewMode")],E.prototype,"parentViewMode",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"currentViewMode",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],E.prototype,"viewMode",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("submitType")],E.prototype,"parentSubmitType",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"currentSubmitType",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],E.prototype,"submitType",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("relationUpdateType")],E.prototype,"parentRelationUpdateType",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"currentRelationUpdateType",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],E.prototype,"relationUpdateType",null),(0,n.Cg)([p.x0.Reactive()],E.prototype,"dataSourceConfig",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("mountedCallChaining")],E.prototype,"parentMountedCallChaining",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"currentMountedCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],E.prototype,"mountedCallChaining",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("refreshCallChaining")],E.prototype,"parentRefreshCallChaining",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"currentRefreshCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],E.prototype,"refreshCallChaining",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("submitCallChaining")],E.prototype,"parentSubmitCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],E.prototype,"submitCallChaining",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("validatorCallChaining")],E.prototype,"parentValidatorCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],E.prototype,"validatorCallChaining",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("filter")],E.prototype,"internalFilter",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("setFilter")],E.prototype,"setViewFilter",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"filter",null),(0,n.Cg)([p.x0.Reactive()],E.prototype,"internalDomain",void 0),(0,n.Cg)([p.x0.Reactive()],E.prototype,"domain",null);const R=",",O=",",N=" ",$=d.Ht.ASC;class M extends E{constructor(){super(...arguments),this.sortList=void 0}getData(){return this.dataSource}setData(e,t){this.reloadDataSource(e),this.reloadActiveRecords([]);const{dataSource:i}=this;if(i){const e=this.generatorPagination();e.current=t||1,e.total=i.length,e.totalPageSize=(0,h.A)(i.length/e.pageSize)}}fieldWidgetMounted(e){}fieldWidgetUnmounted(e){}get searchSortedDataSource(){let{dataSource:e}=this;const{searchCondition:t,sortList:i}=this;return e&&(!this.usingSearchCondition&&this.isDataSourceProvider||t&&(e=I.filter(e,t)),this.isDataSourceProvider||(null===i||void 0===i?void 0:i.length)&&c.Hd.sort(e,i.map(e=>{let t="asc";return e.direction===d.Ht.DESC&&(t="desc"),{field:e.sortField,direction:t}}))),e}get showDataSource(){let{searchSortedDataSource:e}=this,{pagination:t}=this;if(!this.isDataSourceProvider&&this.showPagination){t||(t={current:1,pageSize:this.defaultPageSize});const{current:i,pageSize:r}=t,o=r*i,n=o-r;e=null===e||void 0===e?void 0:e.slice(n,o)}return e}get sortable(){return c.Xx.ofNullable(c.TM.toBoolean(this.getDsl().sortable)).orElse(!1)}get ordering(){const e=this.getDsl().ordering;if(e){const t=e.split(O).filter(e=>!(0,g.A)(e));return t.map(e=>{const[t,i]=F(e,N,$);return{sortField:t,direction:i}})}}get sortConfig(){let e=this.getDsl().sortConfig||{};return e.remote||(e.remote=!0),e}get defaultPageSizeOptions(){return Object.keys(u.ap5).filter(e=>"number"===typeof u.ap5[e]).map(e=>u.ap5[e])}get showPagination(){return this.paginationStyle!==u.qF6.HIDDEN&&c.Xx.ofNullable(c.TM.toBoolean(this.getDsl().showPagination)).orElse(!0)}get paginationStyle(){const{paginationStyle:e}=this.getDsl();return e||u.qF6.STANDARD}getPaginationStyle(){return this.paginationStyle}get emptyText(){return this.getDsl().emptyText||(0,a.cAb)("暂无数据")}get emptyImage(){return this.getDsl().emptyImage||void 0}get pageSizeOptions(){const e=this.getDsl().pageSizeOptions;let t=[];return t="string"===typeof e?e.split(","):e||[],t.length?t.map(e=>c.A5.toNumber(e)):this.defaultPageSizeOptions}getPagination(){return this.pagination||{total:0,current:1}}get defaultPageSize(){return(0,C.$j)(this.getDsl().defaultPageSize)}get loadFunctionNamespace(){let e=this.getDsl().loadFunctionNamespace;if(!e){const{model:t}=this;e=t.model}if(e)return e;throw new Error("Invalid load function namespace")}get loadFunctionFun(){var e;return c.Xx.ofNullable(this.getDsl().load).orElse(null===(e=this.viewAction)||void 0===e?void 0:e.load)}fetchData(e){return(0,n.sH)(this,void 0,void 0,function*(){return a.F1e.repairRecords(yield this.load(()=>(0,n.sH)(this,void 0,void 0,function*(){return this.$$fetchData(e)})))})}$$fetchData(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=this.generatorCondition(e,this.usingSearchCondition);this.usingSearchCondition&&this.generatorSearchCondition(t);const i=this.generatorPagination(),r=this.generatorQuerySort(),o=this.generatorQueryVariables(),n=this.generatorQueryContext(),a=yield this.queryPage(t,i,r,o,n);return i.total=a.totalElements,i.totalPageSize=a.totalPages,a.content})}submitCacheProcess(e){const{submitCache:t,pagination:i}=this;if(!this.usingSearchCondition&&t){const{createRecords:r,updateRecords:o}=t.getOperatorResult();let n=0;if(this.showPagination&&i&&r.length){let t,o;t=1===i.current?0:(i.current-1)*i.pageSize-i.total;for(let a=t;a>=0&&a<r.length&&e.length<i.pageSize;a++){const t=r[a];if(void 0===o){const e=this.generatorCondition();o=this.internalGeneratorSearchCondition(e),o||(o=null)}t?o?I.filter([t],o).length?e.push(t):n++:e.push(t):console.warn("Submit cache exist empty record.",this)}}for(let i=0;i<e.length;i++){const r=e[i];for(const n of o)if(t.isEquals(r,n)){e[i]=n;break}}this.showPagination&&i&&(i.total+=r.length-n)}}repairPaginationAfterDelete(){var e;this.pagination&&!(null===(e=this.showDataSource)||void 0===e?void 0:e.length)&&this.pagination.current>1&&this.onPaginationChange(this.pagination.current-1,this.pagination.pageSize)}onPaginationChange(e,t){var i;let{pagination:r}=this;r||(r={},this.pagination=r),r.current=e,r.pageSize=t,this.inline||null===(i=this.$router)||void 0===i||i.push({segments:[{path:"page",parameters:{currentPage:(0,v.A)(e),pageSize:(0,v.A)(t)},extra:{preserveParameter:!0}}]}),this.refreshProcess()}onSortChange(e){const t=[],i=[];null===e||void 0===e||e.forEach(({sortField:e,direction:r})=>{var o,n;if(e){r=r||d.Ht.ASC;const l=null===(o=this.rootRuntimeContext.getModelField(e))||void 0===o?void 0:o.modelField;if(l&&(0,a.HOt)(l)){const o=l.sortFields||(null===(n=l.referencesModel)||void 0===n?void 0:n.labelFields);o&&o.length&&o.forEach(o=>{c.MZ.append(t,`${e}.${o}`),c.MZ.append(i,r)})}else c.MZ.append(t,e),c.MZ.append(i,r)}});const r=[];for(let n=0;n<t.length;n++)r.push({sortField:t[n],direction:i[n]});if(r.length||r.push(...this.ordering||[]),this.sortList=r,this.inline)return void this.refreshProcess();const o={};r.length?(o.sortField=t.join(R),o.direction=i.join(R)):(o.sortField=null,o.direction=null),this.$router.push({segments:[{path:"page",parameters:o,extra:{preserveParameter:!0}}]}),this.refreshProcess()}get selectable(){return c.Xx.ofNullable(this.getDsl().selectable).map(c.TM.toBoolean).orElse(!0)}get selectMode(){var e,t;return(null===(t=null===(e=this.getDsl().selectMode)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||u.MIu.checkbox}onCheckedChange(e,t){this.reloadActiveRecords(a.F1e.repairRecords(e,{fillDraftId:!1}))}onCheckedAllChange(e,t,i){e?this.reloadActiveRecords(t):this.reloadActiveRecords([])}onRadioChange(e,t){this.reloadActiveRecords(a.F1e.repairRecords(e))}executeSearchExpression(e,t){var i,r,o;return(0,a.AEW)(t,(null===(i=null===e||void 0===e?void 0:e.activeRecords)||void 0===i?void 0:i[0])||{},(null===(r=null===e||void 0===e?void 0:e.rootData)||void 0===r?void 0:r[0])||{},(null===(o=null===e||void 0===e?void 0:e.openerActiveRecords)||void 0===o?void 0:o[0])||{},(null===e||void 0===e?void 0:e.scene)||"")}generatorCondition(e,t){var i;this.refreshCondition();const{model:r,activeRecords:o,rootData:n,openerActiveRecords:l,searchConditions:s,scene:d,parentViewActiveRecords:u}=this;let{domain:p,filter:h}=this;h&&(h=(0,a.GsW)(h,(null===o||void 0===o?void 0:o[0])||{},(null===n||void 0===n?void 0:n[0])||{},(null===l||void 0===l?void 0:l[0])||{},d,(null===u||void 0===u?void 0:u[0])||{})),p&&(p=(0,a.GsW)(p,(null===o||void 0===o?void 0:o[0])||{},(null===n||void 0===n?void 0:n[0])||{},(null===l||void 0===l?void 0:l[0])||{},d,(null===u||void 0===u?void 0:u[0])||{}));const g=this.seekSearchRuntimeContext(),v=A(g,this.generatorSearchBody(),s,h,p,t);e&&(v.and(e),v.setConditionBodyData(Object.assign(Object.assign({},v.getConditionBodyData()),e.getConditionBodyData())));const{submitCache:m}=this;if(!t&&m){const{deleteRecords:e}=m.getOperatorResult();e.length&&(null===(i=r.pks)||void 0===i||i.forEach(t=>{const i=x.Zd.generatorNotInCondition(e,t);i&&v.and(i)}))}const f=Object.assign({},this.initialContext||{});return this.testInitialContext(),c.BF.shallowMerge(f,v.getConditionBodyData()||{}),v.setConditionBodyData(f),v}generatorSearchBody(){const{searchBody:e}=this;if(!e)return;const t=this.seekSearchRuntimeContext(),i=p.x0.select(t.handle),r={};return Object.keys(e).forEach(t=>{if(t.startsWith("__"))return;const o=e[t];if((0,m.A)(o)){const e=this.executeSearchExpression(i,o);null!=e&&(r[t]=e)}else null!=o&&(r[t]=o)}),r}testInitialContext(){c.$1.run(()=>{const e=this.initialContext||{},t=this.seekSearchRuntimeContext().getRequestModelFields(),i=t.map(e=>{var t;return null===(t=null===e||void 0===e?void 0:e.field)||void 0===t?void 0:t.name}),r=Object.keys(e).filter(e=>!i.includes(e)&&"isKeepAlive"!==e);r.length&&c.$1.warn("当前页面的上下文中可能有未拖入到搜索条件的字段",r)})}get usingSearchCondition(){const e=c.TM.toBoolean(this.getDsl().usingSearchCondition);if(null!=e)return e;const{viewMode:t,submitType:i,relationUpdateType:r}=this,{field:o}=this.metadataRuntimeContext;if(o&&(0,a.HOt)(o)){const{store:e,relationFields:t,referenceFields:i}=o;if(e||!(null===t||void 0===t?void 0:t.length)||!(null===i||void 0===i?void 0:i.length))return!0}return t!==l.nE.Lookup&&!!o&&i!==a.TNZ.increment&&[a.A14.default,a.A14.all].includes(r)}generatorSearchCondition(e){const t=this.internalGeneratorSearchCondition(e);t?this.searchCondition=t:this.resetSearchCondition()}internalGeneratorSearchCondition(e){var t;const i=null===e||void 0===e?void 0:e.toString();if(!i||i===d.Qg)return;const r=c.LQ.parse({model:this.model.model,fields:c.Gf.cast(null===(t=this.seekSearchRuntimeContext())||void 0===t?void 0:t.model.modelFields)},i);return r||void 0}resetSearchCondition(){this.searchCondition=void 0}seekSearchRuntimeContext(){var e;const t=this.model.model;if(t){const i=null===(e=a.HxA.getOthers(this.rootHandle))||void 0===e?void 0:e.find(e=>e.model.model===t&&e.view.type===l.qi.Search);if(i)return i}return this.rootRuntimeContext}generatorPagination(){let{pagination:e}=this;e||(e={},this.pagination=e);let{current:t,pageSize:i}=e;return t=(0,f.A)(t)||1,i=(0,f.A)(i)||this.defaultPageSize,e.current=t,e.pageSize=i,e}generatorQuerySort(){return this.sortList||[]}generatorQueryVariables(e){var t;return e=Object.assign(Object.assign({},e||{}),(null===(t=this.metadataRuntimeContext.view)||void 0===t?void 0:t.context)||{}),e.scene||(e.scene=this.scene||this.getUrlParameters().action),this.rootRuntimeContext.generatorVariables(e)}generatorQueryContext(e){return e=Object.assign({},e||{}),e.__queryParams=Object.assign(Object.assign({},e.__queryParams||{}),{scene:this.scene||this.getUrlParameters().action}),e}generatorRequestFields(){const e=this.rootRuntimeContext.getRequestModelFields(),t=this.seekSearchRuntimeContext().getRequestModelFields();return Object.values([...e,...t].reduce((e,t)=>(e[t.field.data]||(e[t.field.data]=t),e),{}))}queryPage(e,t,i,r,o){var s,u,p,h;return(0,n.sH)(this,void 0,void 0,function*(){const{field:n}=this.metadataRuntimeContext;if(n&&(0,a.Pig)(n)){const a=null===(u=null===(s=this.metadataRuntimeContext.view)||void 0===s?void 0:s.initialValue)||void 0===u?void 0:u[0];return a?this.relationM2MQueryPage(n,a,e,t,i,r,o):{content:[],totalPages:0,totalElements:0}}if(c.TM.isFalse(this.loadFunctionFun)){if(this.isDataSourceProvider=!1,this.isExpandView())return{content:this.activeRecords||[],totalPages:0,totalElements:0};const e=null===(p=this.viewAction)||void 0===p?void 0:p.contextType;switch(e){case l.og.Single:{const e=null===(h=this.initialValue)||void 0===h?void 0:h[0];let t;return t=e?[e]:[],{content:t,totalPages:0,totalElements:0}}case l.og.Batch:case l.og.SingleAndBatch:return{content:this.initialValue||[],totalPages:0,totalElements:0};default:return{content:[],totalPages:0,totalElements:0}}}const g=this.generatorRequestFields();return a.cqT.queryPage(this.model,{requestFields:g,responseFields:g,fun:this.loadFunctionFun,currentPage:t.current,pageSize:this.showPagination?t.pageSize:-1,sort:i,condition:e.toString()===d.fh?"":e,variables:r,context:o})})}relationM2MQueryPage(e,t,i,r,o,l,s){var c;return(0,n.sH)(this,void 0,void 0,function*(){const n=null===(c=this.metadataRuntimeContext.parentContext)||void 0===c?void 0:c.getRequestModelFields(),u=this.rootRuntimeContext.getRequestModelFields()||[];return a.cqT.relationQueryPage(e,t,this.model,{requestFields:n||u,responseFields:u,currentPage:r.current,pageSize:this.showPagination?r.pageSize:-1,sort:o,condition:i.toString()===d.fh?"":i,variables:l,context:s})})}mountedProcess(){return(0,n.sH)(this,void 0,void 0,function*(){const{dataSource:e}=this;if(this.isDataSourceProvider||!e||this.loadFunctionFun){this.isDataSourceProvider=!0;const e=yield this.fetchData();this.submitCacheProcess(e),this.reloadDataSource(e)}else if(this.showPagination){const t=this.generatorPagination();t.total=e.length,t.totalPageSize=(0,h.A)(e.length/t.pageSize)}this.reloadActiveRecords([])})}refreshProcess(e){var t,i;return(0,n.sH)(this,void 0,void 0,function*(){const r=null===(t=this.rootRuntimeContext.view.context)||void 0===t?void 0:t.rootConditionBodyData;r&&(e||(e=new s.kWY(d.fh)),e.setConditionBodyData(r));let{isDataSourceProvider:o}=this;if(o||this.dataSource||(this.isDataSourceProvider=!0,o=this.isDataSourceProvider),o||this.automatic&&!this.parentRefreshProcess){const t=yield this.fetchData(e);this.submitCacheProcess(t),this.reloadDataSource(t),this.repairPaginationAfterDelete()}else{const t=this.generatorCondition(e,this.usingSearchCondition);yield null===(i=this.parentRefreshProcess)||void 0===i?void 0:i.call(this,t),this.generatorSearchCondition(t);const{dataSource:r,searchCondition:o,searchSortedDataSource:n}=this;if(r){let e=r;!this.usingSearchCondition&&this.isDataSourceProvider||o&&(e=n||[]);const t=this.generatorPagination();t.total=e.length,t.totalPageSize=(0,h.A)(e.length/t.pageSize)}}this.reloadActiveRecords([])})}$$beforeMount(){var e;super.$$beforeMount();const{currentPage:t,pageSize:i,sortField:r,direction:o}=this.urlParameters;let{pagination:n,sortList:a}=this;if(n||!t&&!i||(n={current:(0,f.A)(t),pageSize:(0,f.A)(i)},this.pagination=n),!a&&r&&o){a=[];const e=r.split(R),t=o.split(R);if(e.length&&t.length&&e.length===t.length){this.sortConfig.defaultSort=[];for(let i=0;i<e.length;i++)a.push({sortField:e[i],direction:t[i]}),this.sortConfig.defaultSort.push({field:e[i],order:t[i].toLowerCase()})}this.sortList=a}!a&&(null===(e=this.ordering)||void 0===e?void 0:e.length)&&(this.sortList=this.ordering)}$$mounted(){var e,t;super.$$mounted(),null===(e=this.submitCallChaining)||void 0===e||e.callBefore(()=>new a.StG(this.activeRecords),{force:!0,immutable:!1}),null===(t=this.checkboxAllCallChaining)||void 0===t||t.hook(this.path,e=>{const t=c.TM.toBoolean(null===e||void 0===e?void 0:e[0])||!1;this.onCheckedAllChange(t,this.showDataSource||[])})}$$unmounted(){var e;super.$$unmounted(),null===(e=this.checkboxAllCallChaining)||void 0===e||e.unhook(this.path)}$$executeRefreshCallChaining(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=this.generatorPagination(),{condition:i,currentPage:r,pageSize:o}=(0,a.KxQ)(e);t&&((0,y.A)(r)||(t.current=r),(0,y.A)(o)||(t.pageSize=o)),yield this.refreshProcess(i)})}}(0,n.Cg)([p.x0.Method(),p.x0.Provide()],M.prototype,"fieldWidgetMounted",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],M.prototype,"fieldWidgetUnmounted",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject()],M.prototype,"checkboxAllCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject()],M.prototype,"searchBody",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject()],M.prototype,"searchConditions",void 0),(0,n.Cg)([p.x0.Reactive()],M.prototype,"searchCondition",void 0),(0,n.Cg)([p.x0.Reactive()],M.prototype,"searchSortedDataSource",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"showDataSource",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"sortable",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"ordering",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"sortConfig",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"defaultPageSizeOptions",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"sortList",void 0),(0,n.Cg)([p.x0.Reactive()],M.prototype,"showPagination",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"paginationStyle",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"emptyText",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"emptyImage",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"pageSizeOptions",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"pagination",void 0),(0,n.Cg)([p.x0.Reactive()],M.prototype,"defaultPageSize",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"loadFunctionNamespace",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"loadFunctionFun",null),(0,n.Cg)([p.x0.Method()],M.prototype,"onPaginationChange",null),(0,n.Cg)([p.x0.Method()],M.prototype,"onSortChange",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"selectable",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"selectMode",null),(0,n.Cg)([p.x0.Method()],M.prototype,"onCheckedChange",null),(0,n.Cg)([p.x0.Method()],M.prototype,"onCheckedAllChange",null),(0,n.Cg)([p.x0.Method()],M.prototype,"onRadioChange",null),(0,n.Cg)([p.x0.Reactive()],M.prototype,"usingSearchCondition",null),(0,n.Cg)([p.x0.Method(),p.x0.Inject("refreshProcess")],M.prototype,"parentRefreshProcess",void 0),(0,n.Cg)([p.x0.Method()],M.prototype,"refreshProcess",null);class I{static filter(e,t){return this.rsqlNodeToCondition(e,t)}static rsqlNodeToCondition(e,t){const{children:i}=t,r=i.filter(e=>{var t;return e.children&&e.children.length||(null===(t=e.value)||void 0===t?void 0:t.field)}),o=[];return r.forEach(e=>{var t,i;if(0===e.children.length){const{selector:t,operator:i,field:r,args:n}=e.value,a=this.buildRsqlToObjectItem({value:n[0],operator:i.symbol,ttype:r?r.ttype:null});o.push({[t]:a})}else if(1===(null===(t=e.value)||void 0===t?void 0:t.type)){const t=null===(i=e.children[0].value)||void 0===i?void 0:i.selector,r=e.children.map(e=>{const{operator:t,field:i,args:r}=e.value;return this.buildRsqlToObjectItem({value:r[0],operator:t.symbol,ttype:i?i.ttype:null})});o.push({[t]:r})}}),this.getFilterResultWithConditionArr(e,o)}static buildRsqlToObjectItem({value:e,operator:t,ttype:i}){return{value:this.getValueByTType(e,i),operator:t,ttype:i}}static getFilterResultWithConditionArr(e,t){const i=[];return t.forEach(e=>{Object.keys(e).forEach(t=>{i.push(i=>{const r=e[t];if(Array.isArray(r)){const[e,o]=t.split("."),n=(0,b.A)(i,e,[]).map(e=>e[o]);return null!==n&&r.some(e=>this.executeOperator(e,n))}let o=null;if([l.m1.ManyToMany,l.m1.OneToMany].includes(r.ttype)){const[e,r]=t.split(".");o=(0,b.A)(i,e,[]).map(e=>e[r])}else o=(0,b.A)(i,t,null);return this.executeOperator(r,o)})})}),i.reduce((e,t)=>null===e||void 0===e?void 0:e.filter(t),e)}static executeOperator(e,t){if(null===t)return!1;const i=this.getValueByTType(t,e.ttype);if(e.operator===s.JhY.GREATER_THAN)return i>e.value;if(e.operator===s.JhY.GREATER_THAN_OR_EQUAL)return i>=e.value;if(e.operator===s.JhY.LESS_THAN)return i<e.value;if(e.operator===s.JhY.LESS_THAN_OR_EQUAL)return i<e.value;if([l.m1.ManyToMany,l.m1.OneToMany].includes(e.ttype))return i.includes(e.value);if(e.operator===s.JhY.LIKE)return i.indexOf(e.value)>-1;if(e.operator===s.JhY.NOT_LIKE)return-1===i.indexOf(e.value);if(e.operator===s.JhY.STARTS)return i.startsWith(e.value);if(e.operator===s.JhY.NOT_STARTS)return!i.startsWith(e.value);if(e.operator===s.JhY.ENDS)return i.endsWith(e.value);if(e.operator===s.JhY.NOT_ENDS)return!i.endsWith(e.value);if(e.operator===s.JhY.IS_NULL)return null===i;if(e.operator===s.JhY.NOT_NULL)return null!==i;if(e.operator===s.JhY.EQUAL)return i===e.value;if(e.operator===s.JhY.NOT_EQUAL)return i!==e.value;throw new TypeError(`搜索失败，不支持${e.operator}搜索`)}static getValueByTType(e,t){switch(t){case l.m1.Date:case l.m1.DateTime:return new Date(e).getTime();default:return e}}}var L=i(92049),_=i(89610),P=i(34963);class j extends E{constructor(){super(...arguments),this.enableScrollToErrorField=!0,this.fieldWidgetMap=new Map}get submitCallChaining(){return this.currentSubmitCallChaining||this.parentSubmitCallChaining}get validatorCallChaining(){return this.currentValidatorCallChaining||this.parentValidatorCallChaining}get cols(){let e=c.A5.toNumber(this.getDsl().cols);return(0,y.A)(e)&&(e=this.parentCols),(0,y.A)(e)&&(e=1),e}get formData(){var e;return(null===(e=this.activeRecords)||void 0===e?void 0:e[0])||{}}getData(){return this.formData}setData(e){this.setCurrentDataSource(e),this.activeRecords=this.dataSource}get loadFunctionNamespace(){var e;const t=this.getDsl().loadFunctionNamespace||(null===(e=this.viewAction)||void 0===e?void 0:e.resModel)||this.model.model;if(t)return t;throw new Error("Invalid load function namespace")}get loadFunctionFun(){var e;return c.Xx.ofNullable(this.getDsl().load).orElse(null===(e=this.viewAction)||void 0===e?void 0:e.load)}initialize(e){return super.initialize(e),this.currentSubmitCallChaining=e.submitCallChaining,this.currentValidatorCallChaining=e.validatorCallChaining,this}fetchData(e){return(0,n.sH)(this,void 0,void 0,function*(){return a.F1e.repairRecords(yield this.load(()=>(0,n.sH)(this,void 0,void 0,function*(){const t=this.generatorCondition(e),i=this.generatorQueryVariables(),r=this.generatorQueryContext();let o;return o=t?yield this.queryOneByWrapper(t,i,r):yield this.queryData(i,r),o})))[0]})}generatorCondition(e){this.refreshCondition();const t=this.refreshConditionContext(),{filter:i,domain:r}=this;let o=D(i,r,e);return t&&(o||(o=new s.kWY(d.fh)),o.setConditionBodyData(Object.assign(Object.assign({},o.getConditionBodyData()||{}),t))),o}generatorQueryVariables(e){var t;return e=Object.assign(Object.assign({},e||{}),(null===(t=this.metadataRuntimeContext.view)||void 0===t?void 0:t.context)||{}),e.scene||(e.scene=this.scene||this.getUrlParameters().action),this.rootRuntimeContext.generatorVariables(e)}generatorQueryContext(e){return e=Object.assign({},e||{}),e.__queryParams=Object.assign(Object.assign({},e.__queryParams||{}),{scene:this.scene||this.getUrlParameters().action}),e}get useConstruct(){const{viewAction:e}=this;if(e){const{contextType:t,model:i,resModel:r}=e,{type:o}=this.model;return i!==r||o&&[l.e3.TRANSIENT].includes(o)||[l.og.ContextFree,l.og.SingleAndBatch,l.og.Batch].includes(t)}return!0}queryData(e,t){var i,r,o;return(0,n.sH)(this,void 0,void 0,function*(){const{useConstruct:n,initialValue:s,loadFunctionFun:d}=this;let u,p,h;const g=(null===(i=this.viewAction)||void 0===i?void 0:i.contextType)||l.og.Single;if(this.inline)switch(g){case l.og.Single:if(c.TM.isFalse(d))return(null===s||void 0===s?void 0:s[0])||{};p=null===(r=null===s||void 0===s?void 0:s[0])||void 0===r?void 0:r.id;break;case l.og.SingleAndBatch:case l.og.Batch:h=null===s||void 0===s?void 0:s.map(e=>e.id).filter(e=>!!e);break}else switch(g){case l.og.Single:p=this.urlParameters.id;break;case l.og.SingleAndBatch:case l.og.Batch:h=null===(o=this.urlParameters.ids)||void 0===o?void 0:o.split(c.MZ.ARRAY_DEFAULT_SEPARATOR);break}if(n||!d&&!p){let i;p&&(i={id:p}),h&&(i=h.map(e=>({id:e}))),[u]=a.F1e.repairRecords(yield this.queryConstruct(i,e,t))}else this.testInitialContext(),[u]=a.F1e.repairRecords(yield this.queryOne(Object.assign({id:p},this.initialContext||{}),e,t));return u})}queryConstruct(e,t,i){var r,o;return(0,n.sH)(this,void 0,void 0,function*(){if(c.TM.isFalse(this.loadFunctionFun))return this.isExpandView()&&(null===(r=this.activeRecords)||void 0===r?void 0:r[0])||{};const{viewAction:n}=this;let s,d=!0;if(n){const{model:e,contextType:t}=n,i=this.model.model;if(i&&e&&i!==e)switch(d=!1,t){case l.og.Batch:case l.og.SingleAndBatch:s=this.initialValue;break;case l.og.ContextFree:d=!0;break}}if(!s)if((0,L.A)(e))s=e;else{const t=yield this.rootRuntimeContext.getInitialValue(),i=(null===(o=this.initialValue)||void 0===o?void 0:o[0])||{};this.testInitialContext(),s=Object.assign(Object.assign(Object.assign(Object.assign({},t),i),e||{}),this.initialContext||{})}const u=this.rootRuntimeContext.getRequestModelFields();return(yield a.cqT.constructOne(this.model,s,{requestFields:u,responseFields:u,fun:this.loadFunctionFun,isSameModel:d,variables:t,context:i}))||{}})}testInitialContext(){c.$1.run(()=>{const e=this.initialContext||{},t=this.rootRuntimeContext.getRequestModelFields(),i=t.map(e=>{var t;return null===(t=null===e||void 0===e?void 0:e.field)||void 0===t?void 0:t.name}),r=Object.keys(e).filter(e=>!i.includes(e)&&"isKeepAlive"!==e);r.length&&c.$1.warn("当前页面的上下文中可能有未拖入到页面的字段",r)})}queryOne(e,t,i){var r;return(0,n.sH)(this,void 0,void 0,function*(){if(c.TM.isFalse(this.loadFunctionFun))return this.isExpandView()&&(null===(r=this.activeRecords)||void 0===r?void 0:r[0])||{};const o=this.rootRuntimeContext.getRequestModelFields();return(yield a.cqT.queryOne(this.model,e,{requestFields:o,responseFields:o,fun:this.loadFunctionFun,variables:t,context:i}))||{}})}queryOneByWrapper(e,t,i){var r;return(0,n.sH)(this,void 0,void 0,function*(){if(c.TM.isFalse(this.loadFunctionFun))return this.isExpandView()&&(null===(r=this.activeRecords)||void 0===r?void 0:r[0])||{};const o=this.rootRuntimeContext.getRequestModelFields();return(yield a.cqT.queryOneByWrapper(this.model,{requestFields:o,responseFields:o,fun:this.loadFunctionFun,condition:e,variables:t,context:i}))||{}})}submit(){return(0,n.sH)(this,void 0,void 0,function*(){return this.submitCallChaining?this.submitCallChaining.syncCall():new a.StG(this.formData)})}validator(){return(0,n.sH)(this,void 0,void 0,function*(){if(this.validatorCallChaining){const e=yield this.validatorCallChaining.call();return e||!1}return!0})}mountedProcess(){return(0,n.sH)(this,void 0,void 0,function*(){let e=this.dataSource;(this.isDataSourceProvider||!e||this.loadFunctionFun)&&(this.isDataSourceProvider=!0,e=yield this.fetchData(),this.reloadDataSource(e)),this.reloadActiveRecords(e),this.repairViewMode()})}repairViewMode(){if(this.parentMountedCallChaining){const e=this.formData.id,t=c.Xx.ofNullable(this.rootRuntimeContext.handle).map(e=>p.x0.select(e)).map(e=>e.getOperator());e?t.ifPresent(e=>{e.getViewMode()===l.nE.Create&&this.setViewMode(l.nE.Editor)}):t.ifPresent(e=>{e.getViewMode()===l.nE.Editor&&e.setViewMode(l.nE.Create)})}}refreshProcess(e){var t;return(0,n.sH)(this,void 0,void 0,function*(){const{isDataSourceProvider:i}=this;let r;i||this.automatic&&!this.parentRefreshProcess?(r=yield this.fetchData(e),this.reloadDataSource(r)):(yield null===(t=this.parentRefreshProcess)||void 0===t?void 0:t.call(this,e),r=this.parentDataSource),this.reloadActiveRecords(r),this.repairViewMode()})}$$beforeMount(){super.$$beforeMount(),this.currentSubmitCallChaining||this.parentSubmitCallChaining||(this.currentSubmitCallChaining=new c.Wl),this.currentValidatorCallChaining||this.parentValidatorCallChaining||(this.currentValidatorCallChaining=new c.Wl)}$$mounted(){var e,t,i;if(super.$$mounted(),null===(e=this.submitCallChaining)||void 0===e||e.callBefore(()=>{const{formData:e}=this,t={};return Object.values(a.Cbz).forEach(i=>{c.BF.safeSetter(t,e,i)}),new a.StG(t)},{force:!0,immutable:!1}),null===(t=this.validatorCallChaining)||void 0===t||t.callBefore(()=>(this.notify(w.Mv.ON_VIEW_VALIDATE_START),!0),{force:!0,immutable:!1}),null===(i=this.validatorCallChaining)||void 0===i||i.callAfter((e,t,i)=>{var r;const o=(0,T.WC)(e,t,i),{sendErrorMessage:n}=(0,a.tHq)(e);if(o)this.notify(w.Mv.ON_VIEW_VALIDATE_SUCCESS);else{const e=this.getFieldWidgets(!0).find(e=>{const t=e.validatorInfo;return!!t&&(0,C.t6)(t)});if(e){if(n){const{validatorInfo:t}=e;t&&u.Xbm.error(`${t.displayName||(null===(r=e.field)||void 0===r?void 0:r.label)} ${t.message}`)}this.tryScrollToFieldWidget(e)}this.notify(w.Mv.ON_VIEW_VALIDATE_FAILED)}return this.notify(w.Mv.ON_VIEW_VALIDATE_END),o},{force:!0,immutable:!1}),this.parentMountedCallChaining&&!this.inline){const e={},{id:t}=this.urlParameters;t&&(e.id=t,this.reloadActiveRecords([e]))}}$$executeRefreshCallChaining(e){return(0,n.sH)(this,void 0,void 0,function*(){const{condition:t}=(0,a.KxQ)(e);yield this.refreshProcess(t)})}tryScrollToFieldWidget(e){const{enableScrollToErrorField:t}=a.r44.getConfig();if(!t||!this.enableScrollToErrorField)return;const i=document.querySelector(`[data-name="${e.itemData}"]`);i&&i.scrollIntoView()}fieldWidgetMounted(e){this.fieldWidgetMap.set(e.path,{widget:e,index:this.fieldWidgetMap.size})}fieldWidgetUnmounted(e){this.fieldWidgetMap.delete(e.path)}getFieldWidgets(e=!1){const t=this.fieldWidgetMap.values();let i=t.next();if(e){const e=[];while(!i.done)e.push(i.value),i=t.next();return e.sort((e,t)=>e.index-t.index).map(e=>e.widget)}const r=[];while(!i.done)r.push(i.value.widget),i=t.next();return r}onFieldEvent(e,t,i){if(!(0,m.A)(e)&&!(0,L.A)(e))return;let r;if((0,m.A)(t)){if(!w.Fv[t]||!(0,_.A)(i))return;r={[t]:i}}else{if(!(0,P.A)(t))return;r=t}const o=this.getFieldWidgets(),n=e=>{const t=o.find(t=>t.itemData===e);t&&t.on(r)};"*"===e?o.forEach(e=>{e.on(r)}):(0,L.A)(e)?e.forEach(e=>{n(e)}):n(e)}}(0,n.Cg)([p.x0.Reactive()],j.prototype,"currentSubmitCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],j.prototype,"submitCallChaining",null),(0,n.Cg)([p.x0.Reactive()],j.prototype,"currentValidatorCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],j.prototype,"validatorCallChaining",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject("cols")],j.prototype,"parentCols",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],j.prototype,"cols",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],j.prototype,"formData",null),(0,n.Cg)([p.x0.Reactive()],j.prototype,"enableScrollToErrorField",void 0),(0,n.Cg)([p.x0.Reactive()],j.prototype,"loadFunctionNamespace",null),(0,n.Cg)([p.x0.Reactive()],j.prototype,"loadFunctionFun",null),(0,n.Cg)([p.x0.Method(),p.x0.Inject("refreshProcess")],j.prototype,"parentRefreshProcess",void 0),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],j.prototype,"refreshProcess",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],j.prototype,"fieldWidgetMounted",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],j.prototype,"fieldWidgetUnmounted",null);class V extends E{mountedProcess(){return(0,n.sH)(this,void 0,void 0,function*(){})}refreshProcess(){return(0,n.sH)(this,void 0,void 0,function*(){})}}var B=i(83247);let H=class extends p.Lw{};H=(0,n.Cg)([B.DF.Base("EditorField",["viewType","widget","ttype","multi","model","name"])],H);var W=i(77991),U=i(68786),q=i(82499),z=i(25195),G=i(20641),K=i(50953),X=i(43937);const Q=350,Y=300,J=Symbol("OioDefaultFormContext"),Z=e=>{(0,G.Gt)(J,e)},ee=()=>(0,G.WQ)(J,{getTriggerContainer:e=>{var t;const i=e,r=i.closest(".oio-table"),o=(null===r||void 0===r?void 0:r.clientHeight)||0;if(r&&o<Q)return document.body;const n=i.closest(".oio-modal"),a=i.parentNode;if(n){const e=(null===(t=n.querySelector(".ant-modal-body"))||void 0===t?void 0:t.clientHeight)||0,i=(null===a||void 0===a?void 0:a.closest(".oio-select"))?Y:Q;if(e<i)return document.body}return a||document.body}}),te=(0,G.pM)({name:"DefaultForm",mixins:[W.t],components:{OioForm:u.ENJ},inheritAttrs:!1,slots:["default"],props:Object.assign(Object.assign({},z.YCR),{template:{type:Object},setFormInstance:{type:Function},formData:{type:Object,default:()=>{}}}),setup(e){const t=(0,K.KR)(),i=(0,K.KR)(),r=ee();return Z(Object.assign(Object.assign({},r),{getTriggerContainer:e=>r.getTriggerContainer?r.getTriggerContainer(e):t.value?t.value:e.parentNode||document.body})),(0,G.sV)(()=>{var t;null===(t=e.setFormInstance)||void 0===t||t.call(e,i.value)}),{origin:t,formRef:i}},render(){var e,t;const{template:i}=this,{default:r}=z.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]),o=(0,X.fy)(i,r);return(0,G.bF)("div",Object.assign(Object.assign({},z.$pj.collectionBasicProps(this.$attrs,c.MZ.append([`${q.Nf}-default-form`],c.Gf.cast(null===(e=this.template)||void 0===e?void 0:e.class)),c.Gf.cast(null===(t=this.template)||void 0===t?void 0:t.style))),{ref:"origin"}),[(0,G.bF)(u.ENJ,Object.assign(Object.assign({},z.$pj.convert(z.YCR,c.Gf.cast(this))),{ref:"formRef",wrapperClassName:c.MZ.append([`${q.Nf}-default-form-wrapper`],this.wrapperClassName).join(" ")}),{default:()=>o})])}}),ie=te,re=ie;var oe=i(89284);class ne extends j{constructor(){super(...arguments),this.labelCol={},this.wrapperCol={}}getFormInstance(){return this.formInstance}setFormInstance(e){this.formInstance=e}get layout(){var e,t,i,r,o,n,a,l;return(null===(t=null===(e=this.getDsl().layout)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||(null===(o=null===(r=null===(i=this.metadataRuntimeContext.viewTemplate)||void 0===i?void 0:i.direction)||void 0===r?void 0:r.toLowerCase)||void 0===o?void 0:o.call(r))||z.Hbc[null===(l=null===(a=null===(n=this.metadataRuntimeContext.viewTemplate)||void 0===n?void 0:n.layout)||void 0===a?void 0:a.toUpperCase)||void 0===l?void 0:l.call(a)]||z.Hbc.vertical}initialize(e){return e.slotNames||(e.slotNames=[oe.zi]),super.initialize(e),this.setComponent(re),this}}(0,n.Cg)([p.x0.Method()],ne.prototype,"setFormInstance",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject()],ne.prototype,"dataPath",void 0),(0,n.Cg)([p.x0.Reactive()],ne.prototype,"labelCol",void 0),(0,n.Cg)([p.x0.Reactive()],ne.prototype,"wrapperCol",void 0),(0,n.Cg)([p.x0.Reactive()],ne.prototype,"layout",null);var ae=i(87756),le=i(55543),se=i(90033),de=i(53751);const ce=["title"],ue={class:"gallery-common-item-content"};function pe(e,t,i,r,o,n){return(0,G.bo)(((0,G.uX)(),(0,G.CE)("div",{class:(0,se.C4)(["gallery-common-item",e.showLabel?"":"gallery-common-item-hide-label"])},[e.showLabel?((0,G.uX)(),(0,G.CE)("div",{key:0,class:"gallery-common-item-label",title:e.label},(0,se.v_)(e.label),9,ce)):(0,G.Q3)("",!0),(0,G.Lk)("div",ue,[(0,G.RG)(e.$slots,"default"),(0,G.RG)(e.$slots,"itemComponent")])],2)),[[de.aG,!e.invisible]])}const he={label:{type:[String,Boolean],default:void 0},labelInvisible:{type:Boolean,default:void 0},invisible:{type:Boolean,default:!1}},ge=(0,G.pM)({name:"DefaultGalleryItem",inheritAttrs:!1,props:Object.assign({},he),setup(e){const t=(0,G.EW)(()=>!!e.label);return{showLabel:t}}});var ve=i(66262);const me=(0,ve.A)(ge,[["render",pe]]),fe=me;(0,le.O)({viewType:l.qi.Gallery},fe);var ye=i(13193),be=i(75896),Ce=i(20903),xe=i(63312),we=i(46996),Se=i(31095),Te=i(3281);function Ee(e){return Array.isArray(e)}class Ae extends M{constructor(){super(...arguments),this.columnWidgetMap=new Map}getTableInstance(){return this.tableInstance}setTableInstance(e){this.tableInstance=e}reloadActiveRecords(e){super.reloadActiveRecords(e),this.reloadTableInstanceActiveRecords()}reloadTableInstanceActiveRecords(){var e,t,i,r;switch(this.selectMode){case u.MIu.checkbox:null===(e=this.tableInstance)||void 0===e||e.resetCheckboxRow(this.activeRecords||[]);break;case u.MIu.radio:{const e=null===(t=this.activeRecords)||void 0===t?void 0:t[0];e?null===(i=this.tableInstance)||void 0===i||i.setRadioRow(e):null===(r=this.tableInstance)||void 0===r||r.clearRadioRow();break}}}initialize(e){e.slotNames||(e.slotNames=[oe.zi]),super.initialize(e);const{expandContext:t}=(0,a.RbF)(e,{key:"expandContext",prefix:"expandContext"});return this.expandContext=t,this}get height(){let e=u.WbJ.px(this.getDsl().height);return this.inline&&!e&&(e="300px"),e}get minHeight(){return u.WbJ.px(this.getDsl().minHeight)}get maxHeight(){return u.WbJ.px(this.getDsl().maxHeight)}get sortable(){return super.sortable}get editable(){return this.createMode||c.TM.toBoolean(this.getDsl().editable)}filterEditable(e,t,i){return!0}get editorTrigger(){var e,t;return(null===(t=null===(e=this.getDsl().editorTrigger)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||be.As.dblclick}get editorMode(){var e,t;return this.createMode?be.Vk.row:(null===(t=null===(e=this.getDsl().editorMode)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||be.Vk.cell}editRow(e,t){return(0,n.sH)(this,void 0,void 0,function*(){this.createMode=e!==Te.U.EXIST,this.tableRowEditMode=e;const{record:i,action:r}=t;(0,G.dY)(()=>{var e;null===(e=this.tableInstance)||void 0===e||e.setEditRow(i),this.cachedEditActiveRecords=(0,Ce.A)(i),this.currentTriggerCreateAction=r})})}get editorCloseTrigger(){var e,t;return(null===(t=null===(e=this.getDsl().editorCloseTrigger)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||be.Iy.auto}get editorShowIcon(){return c.Xx.ofNullable(this.getDsl().editorShowIcon).map(c.TM.toBoolean).orElse(!0)}get currentEditorContext(){return this.lastedCurrentEditorContext}activeEditorBefore(e){var t;const{field:i}=e.column;let r=!0;if(i){const t=this.getColumnWidgets().find(e=>e.itemData===i);if(t&&t.editable&&t.editorTrigger!==be.As.manual&&t.editorMode===be.Vk.cell){const{row:i,rowIndex:o,origin:n}=e;r=t.cellEditable({key:be.Kl.getKey(i),data:i,index:o,origin:n})}}if(!r)return!1;const o=null===(t=this.tableInstance)||void 0===t?void 0:t.getActiveEditorRecord();return!o||this.editorCloseTrigger!==be.Iy.manual}activeEditor(e){const{editableMap:t}=e;e.row=(0,Ce.A)(e.row),this.getColumnWidgets(!0).forEach((i,r)=>{t[i.path]=this.filterEditable(e,i,r)}),this.lastedCurrentEditorContext=e}removeRecordFormDataSource(e){var t;return(0,n.sH)(this,void 0,void 0,function*(){const{data:i}=e,r=null===(t=this.dataSource)||void 0===t?void 0:t.filter(e=>e.__draftId!==i.__draftId);return this.reloadDataSource(r)})}rowEditorClosedBefore(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=(0,xe.A)(Object.assign({},e.data),y.A);if((0,we.A)(t,this.cachedEditActiveRecords)&&this.tableRowEditMode===Te.U.CREATE)return(null===e||void 0===e?void 0:e.data)&&(yield this.removeRecordFormDataSource(e)),this.createMode=!1,this.cachedEditActiveRecords=void 0,this.currentTriggerCreateAction=void 0,!1;const i=yield this.rowEditorClosedForValidator(e);return i||!1})}rowEditorClosed(e){return(0,n.sH)(this,void 0,void 0,function*(){if(!e)return!0;let t=yield this.rowEditorClosedBefore(e);if(!t)return!1;const i=yield this.rowEditorClosedForSubmit(e);if(this.inline)t&&i&&(this.createMode?this.createSubviewFieldWidget(e,i):this.updateSubviewFieldWidget(e,i));else if(i)try{t=this.createMode?yield this.rowEditorClosedForCreate(e,i):yield this.rowEditorClosedForUpdate(e,i)}catch(r){console.error(r),t=!1}return t&&(yield this.rowEditorClosedAfterProcess(e),this.editorMode!==be.Vk.cell&&(this.lastedCurrentEditorContext=void 0)),!t&&(null===e||void 0===e?void 0:e.data)&&(yield this.removeRecordFormDataSource(e)),this.createMode=!1,this.cachedEditActiveRecords=void 0,this.currentTriggerCreateAction=void 0,t})}rowEditorClosedForValidator(e){var t;return(0,n.sH)(this,void 0,void 0,function*(){let e=yield null===(t=this.validatorCallChaining)||void 0===t?void 0:t.call();return null==e&&(e=!0),e})}rowEditorClosedForSubmit(e){return(0,n.sH)(this,void 0,void 0,function*(){const{editorMode:t,editorCloseTrigger:i}=this;switch(t){case be.Vk.row:switch(i){case be.Iy.manual:return this.$rowEditorClosedForSubmit(e);case be.Iy.auto:return e.data;default:console.error("Invalid editor close trigger.",i)}return;case be.Vk.cell:return this.$rowEditorClosedForSubmit(e);default:console.error("Invalid editor mode.",t)}})}updateSubviewFieldWidget(e,t){c.Xx.ofNullable(this.metadataRuntimeContext.field).filter(e=>(0,a._6l)(e)).ifPresent(t=>{c.Xx.ofNullable(this.metadataRuntimeContext.handle).map(p.x0.select).map(e=>e.getParent()).ifPresent(i=>{const r=i.dataSource,{submitCache:o}=t,n=this.metadataRuntimeContext.extendData.subviewSubmitCache;r&&(o&&a.F1e.operator(r,o).updateByEntity(e.data),n&&a.F1e.operator(r,n).updateByEntity(e.data)),i.flushDataSource(!1)})})}createSubviewFieldWidget(e,t){c.Xx.ofNullable(this.metadataRuntimeContext.field).filter(e=>(0,a._6l)(e)).ifPresent(t=>{c.Xx.ofNullable(this.metadataRuntimeContext.handle).map(p.x0.select).map(e=>e.getParent()).ifPresent(i=>{const r=i.dataSource,{submitCache:o}=t,n=this.metadataRuntimeContext.extendData.subviewSubmitCache;r&&(o&&a.F1e.operator(r,o).push(e.data),n&&a.F1e.operator(r,n).push(e.data)),i.flushDataSource(!1)})})}$rowEditorClosedForSubmit(e){var t,i;return(0,n.sH)(this,void 0,void 0,function*(){let r={};if(this.editorMode===be.Vk.cell){const{field:t}=e.origin.column;t&&(r[t]=e.data[t])}else r=null===(i=yield null===(t=this.submitCallChaining)||void 0===t?void 0:t.syncCall())||void 0===i?void 0:i.records;return null==r||(0,g.A)(r)?(console.warn("Invalid update data."),e.data):r})}get rowEditorCreateFun(){return this.getDsl().rowEditorCreateFun}get rowEditorUpdateFun(){return this.getDsl().rowEditorUpdateFun}rowEditorClosedForUpdate(e,t){return(0,n.sH)(this,void 0,void 0,function*(){const{currentEditorContext:i}=this;if(!i)return!0;if(Ee(t))return console.error("Invalid data format.",t),!0;const{model:r}=this,o=x.Zd.generatorPksObject(r,i.row);return o?this.$rowEditorClosedForUpdate(e,Object.assign(Object.assign({},t),o)):(u.$xc.error((0,a.cAb)("错误"),(0,a.cAb)("行内编辑无法保存未定义主键的模型数据")),!1)})}$rowEditorClosedForUpdate(e,t){return(0,n.sH)(this,void 0,void 0,function*(){const{model:i,rowEditorUpdateFun:r}=this;let o=a.MLz.updateFunction;if(r&&(o=yield a.N2X.get(i.model,r)),!o)return s.PyZ.error(`${(0,a.cAb)("找不到指定更新函数")}: ${r}`),console.error("Invalid function definition.",i.model,r),!1;const n=yield this.executeRowEditorUpdate(o,t);return yield this.refreshRowEditorUpdate(e,t,n),!0})}rowEditorClosedForCreate(e,t){return(0,n.sH)(this,void 0,void 0,function*(){const{currentEditorContext:i}=this;if(!i)return!0;if(Ee(t))return console.error("Invalid data format.",t),!0;const{model:r}=this;return r.pks&&r.pks.forEach(e=>Reflect.deleteProperty(t,e)),this.$rowEditorClosedForCreate(e,t)})}$rowEditorClosedForCreate(e,t){return(0,n.sH)(this,void 0,void 0,function*(){const{model:i,rowEditorCreateFun:r}=this;let o=a.MLz.createFunction;if(r&&(o=yield a.N2X.get(i.model,r)),!o)return s.PyZ.error(`${(0,a.cAb)("找不到指定创建函数")}: ${r}`),console.error("Invalid function definition.",i.model,r),!1;const n=yield this.executeRowEditorUpdate(o,t);return yield this.refreshRowEditorUpdate(e,t,n),!0})}executeRowEditorUpdate(e,t){var i;return(0,n.sH)(this,void 0,void 0,function*(){const{rootRuntimeContext:r,model:o}=this,n=r.getRequestModelFields();return this.currentTriggerCreateAction&&this.currentTriggerCreateAction.sessionPath?a.cHX.INSTANCE.simpleExecute(o,e,{requestFields:n,variables:{path:null===(i=this.currentTriggerCreateAction)||void 0===i?void 0:i.sessionPath}},t):a.cHX.INSTANCE.simpleExecute(o,e,{requestFields:n},t)})}refreshRowEditorUpdate(e,t,i){const{currentEditorContext:r,dataSource:o}=this;if(r&&o&&i&&(0,P.A)(i)&&!(0,we.A)(i,t)){const t=e.data;t&&(Object.entries(i).forEach(([e,i])=>{t[e]=i}),this.updateActiveRecordByData(t))}}rowEditorClosedAfterProcess(e){return(0,n.sH)(this,void 0,void 0,function*(){const{dataSource:e,currentEditorContext:t}=this;if(t&&!t.submit){const i=t.row;e&&(e[t.rowIndex]=i,this.reloadDataSource([...e])),this.updateActiveRecordByData(i)}})}updateActiveRecordByData(e){const{activeRecords:t}=this;if(t){const i=be.Kl.getKey(e),r=t.findIndex(e=>be.Kl.getKey(e)===i);-1!==r&&(t[r]=e,this.reloadActiveRecords([...t]))}}executeExpression(e,t,i){var r,o;return ye.r4.run({activeRecords:[e||{}],rootRecord:(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:this.scene},t,i)}fieldWidgetMounted(e){this.columnWidgetMap.set(e.path,{widget:e,index:this.columnWidgetMap.size})}fieldWidgetUnmounted(e){this.columnWidgetMap.delete(e.path)}getColumnWidgets(e=!1){const t=this.columnWidgetMap.values();let i=t.next();if(e){const e=[];while(!i.done)e.push(i.value),i=t.next();return e.sort((e,t)=>e.index-t.index).map(e=>e.widget)}const r=[];while(!i.done)r.push(i.value.widget),i=t.next();return r}initUserPrefer(){var e,t;this.userPreferEventManager=Se.zm.get(this.rootHandle||this.currentHandle),this.inline?this.userPrefer={}:(this.userPrefer=Se.bc.parsePreferForTable(null===(t=null===(e=this.metadataRuntimeContext.view)||void 0===e?void 0:e.extension)||void 0===t?void 0:t.userPreference)||{},this.userPreferEventManager.onSave(this.$saveUserPrefer.bind(this))),this.userPreferEventManager.setData(this.userPrefer),this.userPreferEventManager.onReload(this.$reloadUserPrefer.bind(this),c.Wl.MAX_PRIORITY)}reloadUserPrefer(e){var t;null===(t=this.userPreferEventManager)||void 0===t||t.reload(e)}$reloadUserPrefer(e){var t;this.userPrefer=Object.assign(Object.assign({},this.userPrefer||{}),e),null===(t=this.userPreferEventManager)||void 0===t||t.setData(this.userPrefer)}$saveUserPrefer(e){return(0,n.sH)(this,void 0,void 0,function*(){const t=e.viewName||this.metadataRuntimeContext.view.name;if(t){const i=Object.assign(Object.assign({},e),{model:e.model||this.metadataRuntimeContext.model.model,viewName:t});yield Se.bc.savePreferForTable(i)}})}$$beforeMount(){super.$$beforeMount(),this.initUserPrefer()}$$mounted(){var e,t;super.$$mounted(),null===(e=this.submitCallChaining)||void 0===e||e.callBefore(()=>this.currentEditorContext?new a.StG({}):new a.StG(this.activeRecords),{force:!0,immutable:!1}),null===(t=this.editRowCallChaining)||void 0===t||t.hook(this.path,e=>this.editRow(null===e||void 0===e?void 0:e[0],null===e||void 0===e?void 0:e[1]))}$$unmounted(){var e,t;super.$$unmounted(),null===(e=this.userPreferEventManager)||void 0===e||e.dispose(),null===(t=this.editRowCallChaining)||void 0===t||t.unhook(this.path)}}(0,n.Cg)([p.x0.Reactive(),p.x0.Provide("tableForceEditable")],Ae.prototype,"createMode",void 0),(0,n.Cg)([p.x0.Method()],Ae.prototype,"setTableInstance",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],Ae.prototype,"getFieldWidgetComponent",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"expandContext",void 0),(0,n.Cg)([p.x0.Reactive()],Ae.prototype,"height",null),(0,n.Cg)([p.x0.Reactive()],Ae.prototype,"minHeight",null),(0,n.Cg)([p.x0.Reactive()],Ae.prototype,"maxHeight",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"sortable",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"editable",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"editorTrigger",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"editorMode",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject()],Ae.prototype,"editRowCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"editorCloseTrigger",null),(0,n.Cg)([p.x0.Reactive()],Ae.prototype,"editorShowIcon",null),(0,n.Cg)([p.x0.Reactive()],Ae.prototype,"lastedCurrentEditorContext",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"currentEditorContext",null),(0,n.Cg)([p.x0.Method()],Ae.prototype,"activeEditorBefore",null),(0,n.Cg)([p.x0.Method()],Ae.prototype,"activeEditor",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],Ae.prototype,"rowEditorClosedBefore",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],Ae.prototype,"rowEditorClosed",null),(0,n.Cg)([p.x0.Reactive()],Ae.prototype,"rowEditorCreateFun",null),(0,n.Cg)([p.x0.Reactive()],Ae.prototype,"rowEditorUpdateFun",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],Ae.prototype,"fieldWidgetMounted",null),(0,n.Cg)([p.x0.Method(),p.x0.Provide()],Ae.prototype,"fieldWidgetUnmounted",null),(0,n.Cg)([p.x0.Reactive(),p.x0.Provide()],Ae.prototype,"userPrefer",void 0),(0,n.Cg)([p.x0.Provide(),p.x0.Method()],Ae.prototype,"reloadUserPrefer",null);var ke=i(98165),De=i(89349),Fe=i(50056);i(49839);class Re extends o.a_{constructor(){super(...arguments),this.defaultAllInvisible=!0}showActionNamesProcess(){const e=new Set;return this.getChildren().forEach(t=>{var i;const r=!(0,p.Jf)(c.Gf.cast(t));if(r){const r=null===(i=t.action)||void 0===i?void 0:i.name;r&&e.add(r)}}),[...e]}resetShowActionNames(){this.showActionNames=this.showActionNamesProcess()}$$mounted(){super.$$mounted(),this.resetShowActionNames()}resetInvisible(){super.resetInvisible(),this.resetShowActionNames()}}(0,n.Cg)([p.x0.Reactive(),p.x0.Inject()],Re.prototype,"mountedCallChaining",void 0),(0,n.Cg)([p.x0.Reactive(),p.x0.Inject()],Re.prototype,"refreshCallChaining",void 0),(0,n.Cg)([p.x0.Reactive()],Re.prototype,"showActionNames",void 0);var Oe=i(92964),Ne=i(79685)},92273:(e,t,i)=>{i.d(t,{SJ:()=>A});var r=i(15215),o=i(16022),n=i(83247),a=i(25195),l=i(47444),s=i(97859),d=i(91702),c=i(77679),u=i(7950),p=i(78422),h=i(70164),g=i(30717),v=i(20641),m=i(53751),f=i(42132),y=i(83671);const b="action-bar",C="more-action-selector";function x(e,t,i){const r=[C];let o=g.VQ.primary;t&&(r.push(`${C}-inline`),o=g.VQ.link);const{buttonType:n,allMounted:l}=i,s=(0,v.bF)(g._5z,{class:r,type:n||o,icon:"oinone-menu-caidanxiala",iconPlacement:g.H_c.AFTER,onClick:(0,m.D$)(()=>{},["prevent"])},{default:()=>(0,p.cAb)("更多")});return(0,v.bF)(y.A,{trigger:[a.zho.click,a.zho.hover],allMounted:l},{default:()=>e,trigger:()=>[s]})}const w=(0,v.pM)({name:"DefaultActionBar",components:{DownOutlined:u.A},inheritAttrs:!1,props:{currentHandle:{type:String},template:{type:Object},dataSource:{type:Array},activeRecords:{type:Array},viewType:{type:String},invisible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},justify:{type:String},isFloat:{type:Boolean,default:!1},activeCount:{type:Number},buttonType:{type:String},operatorColumnDirection:{type:String},showActionNames:{type:Array},allMounted:{type:Function},moreActionTriggers:{type:Array},moreActionRender:{type:Function},selectMode:{type:String},onSelectModeChange:{type:Function},onCheckboxAll:{type:Function}},setup(e){(0,l.Ll)({allMounted:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)},allMountedUpdate:()=>{var t;null===(t=e.allMounted)||void 0===t||t.call(e)}});const t=(0,v.EW)(()=>{let t=e.activeCount;return(0,s.A)(t)&&(t=e.inline?c.zA.THREE:c.zA.FIVE),t}),i=(0,v.EW)(()=>e.selectMode===a.MIu.checkbox),r=(0,v.EW)(()=>{var t,i;const r=(null===(t=e.dataSource)||void 0===t?void 0:t.length)||0,o=(null===(i=e.activeRecords)||void 0===i?void 0:i.length)||0;return{checked:r===o,indeterminate:o>=1&&o<r,disabled:0===r,count:o}}),o=t=>{var i,r;t?null===(i=e.onSelectModeChange)||void 0===i||i.call(e,a.MIu.checkbox):null===(r=e.onSelectModeChange)||void 0===r||r.call(e,void 0)};return{activeCount:t,allowSelected:i,checkboxAllState:r,updateValueAllowSelected:o}},render(){var e,t,i,r,n,l,s,d;const u=[b,"oio-scrollbar"];this.inline&&u.push(`${b}-inline`);const y=(null===(t=null===(e=this.operatorColumnDirection)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||c.ZU.horizontal,C=(null===(r=null===(i=this.buttonType)||void 0===i?void 0:i.toLowerCase)||void 0===r?void 0:r.call(i))||g.VQ.link;u.push(`${b}-${y}`),u.push(`${b}-${C}`);const w=new f.k(this.showActionNames,this.activeCount);w.do(a.$pj.collectionSlots(this.$slots,[{origin:"default",isNotNull:!0}]).default());const{hasMore:S,showActionFlags:T,moreActions:E,moreActionFlags:A,otherVNodes:k}=w;let{showActions:D}=w;if(S&&T[T.length-1]&&E.length&&A.some(e=>e)){const e=D[D.length-1];D.push((0,v.bF)("div",{key:(null===(l=null===(n=e.props)||void 0===n?void 0:n.dslDefinition)||void 0===l?void 0:l.name)||(0,o._N)(),class:"more-action-item"},[...k,(this.moreActionRender||x)(E,this.inline,{buttonType:this.buttonType,operatorColumnDirection:y,allMounted:this.allMounted,moreActionTriggers:this.moreActionTriggers})]))}else D=[...D,...E,...k];this.viewType!==h.qi.Gallery||this.inline||D.push((0,v.bF)("div",{class:"gallery-action-bar-operators"},[(0,v.bF)("div",{class:"gallery-action-bar-batch-selected"},[(0,v.bF)("span",{},(0,p.cAb)("批量管理")),(0,v.bF)(g.GR6,{checked:this.allowSelected,"onUpdate:checked":this.updateValueAllowSelected})]),(0,v.bo)((0,v.bF)(g.dvV,{checked:this.checkboxAllState.checked,indeterminate:this.checkboxAllState.indeterminate,disabled:this.checkboxAllState.disabled,"onUpdate:checked":this.onCheckboxAll},{default:()=>`${(0,p.cAb)("全选")} (${this.checkboxAllState.count})`}),[[m.aG,this.allowSelected]])]));const F={};return this.justify&&(F.justifyContent=this.justify),this.isFloat&&(F.position="sticky",F.bottom="0px",F.top="0px",F.zIndex="1"),(0,v.bo)((0,v.bF)("div",Object.assign({},a.$pj.collectionBasicProps(this.$attrs,o.MZ.append(u,o.Gf.cast(null===(s=this.template)||void 0===s?void 0:s.class)),Object.assign(Object.assign({},F),a.WbJ.parse(null===(d=this.template)||void 0===d?void 0:d.style)))),D),[[m.aG,!this.invisible]])}}),S=w,T=S;let E=class extends d.ZY{initialize(e){return super.initialize(e),this.setComponent(T),this.inline=e.inline||!1,this.moreActionRender=e.moreActionRender,this}get isFloat(){const{isFloat:e}=this.getDsl();return e}get activeCount(){var e;let{activeCount:t}=this.getDsl();if((0,s.A)(t)&&(t=null===(e=this.metadataRuntimeContext.viewTemplate)||void 0===e?void 0:e.activeCount,(0,s.A)(t)))return;const i=o.A5.toNumber(t);return(0,s.A)(i)?c.zA[t]:i}get buttonType(){var e,t;return null===(t=null===(e=this.getDsl().buttonType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)}get justify(){if(null!=this.popupScene)return;const{justify:e}=this.getDsl();if(e){const t=a.QW9[e.toUpperCase()];if(t)return a.QW9.START===t?"flex-start":a.QW9.END===t?"flex-end":t}return e}get moreActionTriggers(){var e,t;const i=null===(t=(e=this.getDsl()).moreActionTriggers)||void 0===t?void 0:t.call(e);return i?i.split(","):[a.zho.click,a.zho.hover]}onSelectModeChange(e){var t;this.reloadActiveRecords([]),null===(t=this.selectModeCallChaining)||void 0===t||t.call(e)}onCheckboxAll(e){var t;null===(t=this.checkboxAllCallChaining)||void 0===t||t.call(e)}};(0,r.Cg)([l.x0.Reactive(),l.x0.Inject()],E.prototype,"popupScene",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Provide()],E.prototype,"inline",void 0),(0,r.Cg)([l.x0.Reactive()],E.prototype,"isFloat",null),(0,r.Cg)([l.x0.Reactive()],E.prototype,"activeCount",null),(0,r.Cg)([l.x0.Reactive(),l.x0.Provide()],E.prototype,"buttonType",null),(0,r.Cg)([l.x0.Reactive()],E.prototype,"justify",null),(0,r.Cg)([l.x0.Reactive()],E.prototype,"moreActionTriggers",null),(0,r.Cg)([l.x0.Method()],E.prototype,"moreActionRender",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject()],E.prototype,"selectMode",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject()],E.prototype,"selectModeCallChaining",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject()],E.prototype,"checkboxAllCallChaining",void 0),(0,r.Cg)([l.x0.Method()],E.prototype,"onSelectModeChange",null),(0,r.Cg)([l.x0.Method()],E.prototype,"onCheckboxAll",null),E=(0,r.Cg)([n.DF.ClassFactory(d.a_.Token({widget:["actionBar","action-bar","ActionBar"]}))],E);let A=class extends E{initialize(e){return super.initialize(e),this.rowIndex=e.rowIndex,this}get activeCount(){return this.inline?(0,s.A)(this.parentInlineActiveCount)?super.activeCount:this.parentInlineActiveCount:(0,s.A)(this.parentActiveCount)?super.activeCount:this.parentActiveCount}get buttonType(){var e,t;return o.Xx.ofNullable(super.buttonType).orElse(null===(t=null===(e=this.operatorColumnButtonType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))}};(0,r.Cg)([l.x0.Provide(),l.x0.Reactive()],A.prototype,"rowIndex",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject("activeCount")],A.prototype,"parentActiveCount",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject("inlineActiveCount")],A.prototype,"parentInlineActiveCount",void 0),(0,r.Cg)([l.x0.Reactive()],A.prototype,"activeCount",null),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject()],A.prototype,"operatorColumnDirection",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Inject()],A.prototype,"operatorColumnButtonType",void 0),(0,r.Cg)([l.x0.Reactive(),l.x0.Provide()],A.prototype,"buttonType",null),A=(0,r.Cg)([n.DF.ClassFactory(d.a_.Token({widget:["actionBar","action-bar","ActionBar","action-column","ActionColumn","actionColumn","row-action","RowAction","rowAction","row-actions","RowActions","rowActions"],inline:!0}))],A);let k=class extends E{initialize(e){var t;super.initialize(e);const{node:i}=e;return this.node=i,i?(this.subPath=i.key,this.setCurrentActiveRecords(null===(t=i.value)||void 0===t?void 0:t.data)):this.setCurrentActiveRecords([{}]),this}};(0,r.Cg)([l.x0.Reactive()],k.prototype,"node",void 0),k=(0,r.Cg)([n.DF.ClassFactory(d.a_.Token({widget:"TreeNodeActions",inline:!0}))],k)},92964:(e,t,i)=>{i.d(t,{L:()=>l});var r=i(15215),o=i(78422),n=i(70164),a=i(39423);class l extends a.a0{constructor(){super(...arguments),this.moduleName=n.vL.BASE,this.isoStorageKey="",this.translateBrowserTitle=!0}beforeMount(){const e=Object.create(null,{beforeMount:{get:()=>super.beforeMount}});return(0,r.sH)(this,void 0,void 0,function*(){!1!==o.r44.getConfig().enableI18n&&(0,o.LEb)(this.moduleName,this.isoStorageKey).then(()=>{var e;const t=null===(e=(0,o.IPu)())||void 0===e?void 0:e.title;this.translateBrowserTitle&&t&&(document.title=(0,o.cAb)(t)),this.forceUpdate()}),e.beforeMount.call(this)})}}},97685:(e,t,i)=>{i.d(t,{Q:()=>c});var r=i(25195),o=i(20641);const n=(0,o.pM)({name:"DefaultTeleport",inheritAttrs:!1,props:{teleport:{type:String,required:!0},visible:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0}},render(){var e,t;const i={};this.visible||(i.style={display:"none"});const n={};return this.disabled?n.disabled=!0:n.to=this.teleport,(0,o.bF)("div",i,[(0,o.bF)(o.Im,n,(null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))||[])],r.Yno.STABLE_FRAGMENT)}}),a=n,l=a;var s=i(15215),d=i(47444);class c extends d.Lw{constructor(){super(...arguments),this.visible=!1,this.disabled=!1}initialize(e){return super.initialize(e),this.setComponent(l),this.teleport=e.teleport,this.visible=e.visible||!1,this.teleport?this.disabled=e.disabled||!1:this.disabled=!0,this}isVisible(){return this.visible}show(){this.visible=!0}hide(){this.visible=!1}getTeleport(){return this.teleport}setTeleport(e){this.teleport=e,e||(this.disabled=!0)}isDisabled(){return this.disabled}enable(){this.disabled=!1}disable(){this.disabled=!0}}(0,s.Cg)([d.x0.Reactive()],c.prototype,"teleport",void 0),(0,s.Cg)([d.x0.Reactive()],c.prototype,"visible",void 0),(0,s.Cg)([d.x0.Reactive()],c.prototype,"disabled",void 0)},98165:(e,t,i)=>{i.d(t,{mx:()=>C,S8:()=>q,wY:()=>U});var r=i(15215),o=i(16022),n=i(30717),a=i(47444),l=i(9703),s=i(97859),d=i(48182),c=i(50953),u=i(77679),p=i(32093),h=i(35902),g=i(75896),v=i(20641),m=i(77991);const f=(0,v.pM)({name:"DefaultTableColumn",mixins:[m.t],components:{OioColumn:g.io},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},g.Ad),g.N_),g.Iw),{currentHandle:{type:String},template:{type:Object},setTableInstance:{type:Function},columnType:{type:String},itemData:{type:String},sortable:{type:Boolean,default:!1},invisible:{type:Boolean,default:!1},invisibleContent:{type:[Boolean,Function],default:void 0},existExpandRow:{type:Boolean},treeNode:{type:Boolean,default:void 0},wrapperToFieldAction:{type:Function}}),setup(e){const t=(0,g.$d)(),i=(0,v.EW)(()=>{if(!e.existExpandRow)return e.fixed}),r=t=>[(0,v.bF)("span",{class:"oio-column-header-title"},e.label)],o=t=>{var i,r,o;if(e.editorMode===g.Vk.table&&e.editable)return null===(i=e.renderEditSlot)||void 0===i?void 0:i.call(e,t);const n=null===(r=e.renderDefaultSlot)||void 0===r?void 0:r.call(e,t);return null==n?[]:null===(o=e.wrapperToFieldAction)||void 0===o?void 0:o.call(e,n,t)};return(0,v.sV)(()=>{var i;null===(i=e.setTableInstance)||void 0===i||i.call(e,t)}),{fixed:i,defaultRenderHeaderSlot:r,renderDefaultSlot:o}},render(){const{currentHandle:e,template:t,columnType:i,label:r,align:o,headerAlign:n,footerAlign:a,width:l,minWidth:s,fixed:d,itemData:c,sortable:u,invisible:p,invisibleContent:h,treeNode:m,resizable:f,editable:y,cellEditable:b,editorTrigger:C,editorMode:x,editorCloseTrigger:w,rowEditorClosedByEnter:S,rowEditorClosedByCancel:T,editorConfirm:E,editorConfirmPosition:A,editorCondition:k,editorEnterText:D,editorCancelText:F,className:R,headerClassName:O,renderDefaultSlot:N,renderEditSlot:$,renderContentSlot:M,renderHeaderSlot:I,defaultRenderHeaderSlot:L}=this;let _=I||L,P=N;"checkbox"!==i&&"radio"!==i||(_=void 0,P=void 0);const j=x===g.Vk.table;return(0,v.bF)(g.io,{type:i,label:r,align:o,headerAlign:n,footerAlign:a,width:l,minWidth:s,fixed:d,field:c,resizable:f,treeNode:m,sortable:u,invisible:p,invisibleContent:h,editable:y,cellEditable:b,editorTrigger:C,editorMode:j?g.Vk.row:x,editorCloseTrigger:w,rowEditorClosedByEnter:S,rowEditorClosedByCancel:T,editorConfirm:E,editorConfirmPosition:A,editorCondition:k,editorEnterText:D,editorCancelText:F,className:R,headerClassName:O,renderDefaultSlot:P,renderEditSlot:$,renderContentSlot:M,renderHeaderSlot:_,componentData:{params:{handle:e,template:t}}})}}),y=f,b=y;class C extends h.M{getTableInstance(){return this.tableInstance}setTableInstance(e){this.tableInstance=e}initialize(e){var t;super.initialize(e);const i=null===(t=this.getFieldWidgetComponent)||void 0===t?void 0:t.call(this);return i?this.setComponent((0,c.ux)(i)):this.setComponent(b),this}getValue(e){return e.data[this.itemName]}setValue(e,t){e.data[this.itemName]=t}compute(e){return this.getValue(e)}get columnType(){return this.getDsl().columnType}get width(){return this.getDsl().width}get minWidth(){return this.getDsl().minWidth}get label(){return this.getDsl().label}get align(){var e,t;return null===(t=null===(e=this.getDsl().align)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)}get required(){return this.getDsl().required}get headerAlign(){var e,t;return null===(t=null===(e=this.getDsl().headerAlign)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)}get footerAlign(){var e,t;return null===(t=null===(e=this.getDsl().footerAlign)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)}get fixed(){return this.getDsl().fixed}className(e){return this.getDsl().className}headerClassName(e){return this.getDsl().headerClassName}footerClassName(e){return this.getDsl().footerClassName}get resizable(){return o.TM.toBoolean(this.getDsl().resizable)}get sortable(){const e=o.TM.toBoolean(this.getDsl().sortable);return null==e?this.tableSortable||!1:e}get invisible(){return this.clientInvisible||o.TM.toBoolean(this.getDsl().invisible)||!1}get readonly(){return o.TM.toBoolean(this.getDsl().readonly)||!1}get clientInvisible(){return!this.isSupportCurrentClient}invisibleContent(e){return o.TM.toBoolean(this.getDsl().invisibleContent)||!1}get editable(){if(this.tableForceEditable)return this.tableForceEditable;if(this.readonly)return!1;const{editable:e,independentlyEditable:t}=this.getDsl(),i=o.Xx.ofNullable(e).orElse(t);let r=o.TM.toBoolean(i);if(null==r&&(r=this.tableEditable||!1,!r&&(0,l.A)(i)&&(r=!0)),r){const e=this.currentEditorContext;if(!e)return!0;r=e.editableMap[this.path]||!1}return r}cellEditable(e){return!0}rowEditorClosedByEnter(e){var t;return(0,r.sH)(this,void 0,void 0,function*(){if(e&&!(yield this.editorValidateConfirm(e)))return!1;let i=yield null===(t=this.tableRowEditorClosed)||void 0===t?void 0:t.call(this,e);return null==i&&(i=!0),i})}rowEditorClosedByCancel(e){var t;return(0,r.sH)(this,void 0,void 0,function*(){this.currentEditorContext&&(this.currentEditorContext.submit=!1);let i=yield null===(t=this.tableRowEditorClosed)||void 0===t?void 0:t.call(this,e);return null==i&&(i=!0),i})}editorEnableConfirm(e){const t=o.TM.toBoolean(this.getDsl().editorEnableConfirm);return!!(0,s.A)(t)||t}editorConfirmType(e){const{editorConfirmType:t}=this.getDsl();if(t){const e=n.xvQ[t];return e||void 0}return n.xvQ.POPPER}editorConfirm(e){if(this.editorEnableConfirm(e)&&this.editorConfirmType(e)===n.xvQ.POPPER)return this.editorConfirmText(e)}editorCondition(e){var t;return(0,r.sH)(this,void 0,void 0,function*(){if(o.BF.isNotEmpty(this.editorConfirm(e))){if(!(yield null===(t=this.tableRowEditorClosedBefore)||void 0===t?void 0:t.call(this,e)))return;return!0}return!1})}editorConfirmText(e){return o.Xx.ofNullable(this.getDsl().editorConfirmText||this.getDsl().editorConfirm).map(d.A).orElse(void 0)}editorConfirmPosition(e){return(0,u.fv)(this.getDsl().editorConfirmPosition)||n.Jd8.BM}editorEnterText(e){const{editorEnterText:t}=this.getDsl();if(t)return t}editorCancelText(e){const{editorCancelText:t}=this.getDsl();if(t)return t}editorValidateConfirm(e){var t;return(0,r.sH)(this,void 0,void 0,function*(){if(this.editorEnableConfirm(e)&&this.editorConfirmType(e)===n.xvQ.MODAL){const i=this.editorConfirmText(e);if(i)return!!(yield null===(t=this.tableRowEditorClosedBefore)||void 0===t?void 0:t.call(this,e))&&(0,p.u2)({confirm:i,enterText:this.editorEnterText(e),cancelText:this.editorCancelText(e)})}return!0})}get treeNode(){let e=o.TM.toBoolean(this.getDsl().treeNode);return null==e&&this.tableExpandTreeFieldColumn&&this.tableExpandTreeFieldColumn===this.itemData&&(e=!0),e}}(0,r.Cg)([a.x0.Method()],C.prototype,"setTableInstance",null),(0,r.Cg)([a.x0.Method(),a.x0.Inject()],C.prototype,"getFieldWidgetComponent",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"submitCallChaining",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"validatorCallChaining",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"tableForceEditable",void 0),(0,r.Cg)([a.x0.Reactive()],C.prototype,"columnType",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"width",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"minWidth",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"label",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"align",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"required",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"headerAlign",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"footerAlign",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"fixed",null),(0,r.Cg)([a.x0.Method()],C.prototype,"className",null),(0,r.Cg)([a.x0.Method()],C.prototype,"headerClassName",null),(0,r.Cg)([a.x0.Method()],C.prototype,"footerClassName",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"resizable",null),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject("sortable")],C.prototype,"tableSortable",void 0),(0,r.Cg)([a.x0.Reactive()],C.prototype,"sortable",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"invisible",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"readonly",null),(0,r.Cg)([a.x0.Reactive()],C.prototype,"clientInvisible",null),(0,r.Cg)([a.x0.Method()],C.prototype,"invisibleContent",null),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"existExpandRow",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject("editable")],C.prototype,"tableEditable",void 0),(0,r.Cg)([a.x0.Reactive()],C.prototype,"editable",null),(0,r.Cg)([a.x0.Method()],C.prototype,"cellEditable",null),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"editorTrigger",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"editorMode",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"editorCloseTrigger",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],C.prototype,"currentEditorContext",void 0),(0,r.Cg)([a.x0.Method(),a.x0.Inject("rowEditorClosedBefore")],C.prototype,"tableRowEditorClosedBefore",void 0),(0,r.Cg)([a.x0.Method(),a.x0.Inject("rowEditorClosed")],C.prototype,"tableRowEditorClosed",void 0),(0,r.Cg)([a.x0.Method()],C.prototype,"rowEditorClosedByEnter",null),(0,r.Cg)([a.x0.Method()],C.prototype,"rowEditorClosedByCancel",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorEnableConfirm",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorConfirmType",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorConfirm",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorCondition",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorConfirmText",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorConfirmPosition",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorEnterText",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorCancelText",null),(0,r.Cg)([a.x0.Method()],C.prototype,"editorValidateConfirm",null),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject("expandTreeFieldColumn")],C.prototype,"tableExpandTreeFieldColumn",void 0),(0,r.Cg)([a.x0.Reactive()],C.prototype,"treeNode",null);var x=i(78422),w=i(48798),S=i(13193),T=i(70164),E=i(82499),A=i(25195),k=i(98916),D=i(21879),F=i(89610),R=i(429),O=i(34963),N=i(53751),$=i(87547),M=i(87271),I=i(89349),L=i(31095),_=i(94261);const P="default-column-quick-operation";function j(e,t,i,r){const o=(0,x.cAb)(e);return(0,v.bF)("div",{class:n.MZC.append([`${P}-item`],r),title:o,onClick:i},[(0,v.bF)(n.Lky,{icon:t,size:14}),(0,v.bF)("span",{},o)])}const V=(0,v.pM)({name:"DefaultQuickOperationColumn",components:{APopover:_.A},props:{table:{type:Object,required:!0},column:{type:Object,required:!0},sortable:{type:Boolean,default:void 0},handleOrderByASC:{type:Function},handleOrderByDESC:{type:Function},handleClearOrder:{type:Function},handleFreezeLeft:{type:Function},handleFreezeRight:{type:Function},handleClearFreeze:{type:Function},handleClearAllFreeze:{type:Function},handleHide:{type:Function}},setup(e){const t=(0,c.KR)(!1),i=e=>{t.value=e},o=e=>(...i)=>(0,r.sH)(this,void 0,void 0,function*(){const r=yield e(...i);return(null==r||r)&&(t.value=!1),r}),n=o(()=>{var t;return null===(t=e.handleOrderByASC)||void 0===t?void 0:t.call(e,e.table,e.column)}),a=o(()=>{var t;return null===(t=e.handleOrderByDESC)||void 0===t?void 0:t.call(e,e.table,e.column)}),l=o(()=>{var t;return null===(t=e.handleClearOrder)||void 0===t?void 0:t.call(e,e.table,e.column)}),s=o(()=>{var t;return null===(t=e.handleFreezeLeft)||void 0===t?void 0:t.call(e,e.table,e.column)}),d=o(()=>{var t;return null===(t=e.handleFreezeRight)||void 0===t?void 0:t.call(e,e.table,e.column)}),u=o(()=>{var t;return null===(t=e.handleClearFreeze)||void 0===t?void 0:t.call(e,e.table,e.column)}),p=o(()=>{var t;return null===(t=e.handleClearAllFreeze)||void 0===t?void 0:t.call(e,g.dL.all)}),h=o(()=>{var t;return null===(t=e.handleHide)||void 0===t?void 0:t.call(e,e.table,e.column)});return{visible:t,onUpdateVisible:i,handleOrderByASC:n,handleOrderByDESC:a,handleClearOrder:l,handleFreezeLeft:s,handleFreezeRight:d,handleClearFreeze:u,handleClearAllFreeze:p,handleHide:h}},render(){const{$slots:e,column:t,sortable:i,visible:r,onUpdateVisible:o,handleOrderByASC:a,handleOrderByDESC:l,handleClearOrder:s,handleFreezeLeft:d,handleFreezeRight:c,handleClearFreeze:u,handleClearAllFreeze:p,handleHide:h}=this,{trigger:g}=A.$pj.collectionSlots(e,["trigger"]);let m;m=g?g():[(0,v.bF)(n.Lky,{icon:"oinone-gengduo11",size:16})];const f=(0,v.bF)(_.A,{visible:r,overlayClassName:`${P}-overlay`,placement:"bottomRight","onUpdate:visible":o},{default:()=>m,content:()=>{const{fixed:e,order:r}=t,o=[];return i&&("asc"===r?o.push(j("取消排序","oinone-quxiaopaixu",s),j("降序","oinone-jiangxu",l)):"desc"===r?o.push(j("升序","oinone-shengxu",a),j("取消排序","oinone-quxiaopaixu",s)):o.push(j("升序","oinone-shengxu",a),j("降序","oinone-jiangxu",l))),e?(o.push(j("取消冻结","oinone-quxiaodongjie",u)),o.push(j("取消全部冻结","oinone-quxiaodongjie",p))):o.push(j("冻结左侧至此列","oinone-dongjiezuoce",d),j("冻结右侧至此列","oinone-dongjieyouce",c)),o.push(j("隐藏此列","oinone-yincangcilie",h)),[(0,v.bF)("div",{class:`${P}-wrapper`},o)]}});return(0,v.bF)("span",{class:P},[f])}}),B=V,H=B;var W=i(25575);class U extends C{renderHeaderSlot(e){var t,i;const r=[(0,v.bF)("span",{class:"oio-column-header-title"},this.label)],o=this.renderQuickOperation(e);o&&r.push(o);const n=e.origin,a=null===n||void 0===n?void 0:n.$table,l=a.getColumns(),s=n.$columnIndex===l.length-1;return s&&r.push((0,v.bF)(W.A,{widget:"user-prefer",subPath:"user-prefer",dslDefinition:{simple:null===(i=null===(t=a.props)||void 0===t?void 0:t.customConfig)||void 0===i?void 0:i.usingSimpleUserPrefer}})),r}renderQuickOperation(e){var t,i;return(0,v.bF)(H,{table:null===(t=e.origin)||void 0===t?void 0:t.$table,column:null===(i=e.origin)||void 0===i?void 0:i.column,sortable:this.sortable,handleOrderByASC:this.handleOrderByASC,handleOrderByDESC:this.handleOrderByDESC,handleClearOrder:this.handleClearOrder,handleFreezeLeft:this.handleFreezeLeft,handleFreezeRight:this.handleFreezeRight,handleClearFreeze:this.handleClearFreeze,handleClearAllFreeze:this.handleClearAllFreeze,handleHide:this.handleHide})}handleOrderByASC(e,t){const{field:i}=t;e.sort(i,"asc");const r={column:t,field:i,property:i,order:t.order,sortList:e.getSortColumns()};e.dispatchEvent("sort-change",r,null)}handleOrderByDESC(e,t){const{field:i}=t;e.sort(i,"desc");const r={column:t,field:i,property:i,order:t.order,sortList:e.getSortColumns()};e.dispatchEvent("sort-change",r,null)}handleClearOrder(e,t){const{field:i}=t;e.clearSort();const r={column:t,field:i,property:i,order:t.order,sortList:e.getSortColumns()};e.dispatchEvent("sort-change",r,null)}handleFreezeLeft(e,t){return(0,r.sH)(this,void 0,void 0,function*(){const{field:i}=t;i&&(yield this.consumerUserPreferManager((t,o)=>(0,r.sH)(this,void 0,void 0,function*(){const r=g.Kl.getFlatAllColumns(e.getTableColumn().collectColumn),o=[];for(let e=0;e<r.length;e++){const t=r[e].field;if(t&&(o.push(t),t===i))break}const n=o;yield t.save({fieldLeftFixed:n}),yield t.reload({fieldLeftFixed:n})})))})}handleFreezeRight(e,t){return(0,r.sH)(this,void 0,void 0,function*(){const{field:i}=t;i&&(yield this.consumerUserPreferManager((t,o)=>(0,r.sH)(this,void 0,void 0,function*(){const r=g.Kl.getFlatAllColumns(e.getTableColumn().collectColumn),o=[];for(let e=r.length-1;e>=0;e--){const t=r[e].field;if(t&&(o.push(t),t===i))break}const n=o;yield t.save({fieldRightFixed:n}),yield t.reload({fieldRightFixed:n})})))})}handleClearFreeze(e,t){return(0,r.sH)(this,void 0,void 0,function*(){const{field:e}=t;e&&(yield this.consumerUserPreferManager((t,i)=>(0,r.sH)(this,void 0,void 0,function*(){let r=i.fieldLeftFixed||[];const o=r.findIndex(t=>t===e);if(o>=0)return r=[...r],r.splice(o,1),yield t.save({fieldLeftFixed:0===r.length?null:r}),void(yield t.reload({fieldLeftFixed:r}));let n=i.fieldRightFixed||[];const a=n.findIndex(t=>t===e);a>=0&&(n=[...n],n.splice(a,1),yield t.save({fieldRightFixed:0===n.length?null:n}),yield t.reload({fieldRightFixed:n}))})))})}handleClearAllFreeze(e=g.dL.all){return(0,r.sH)(this,void 0,void 0,function*(){yield this.consumerUserPreferManager((t,i)=>(0,r.sH)(this,void 0,void 0,function*(){const i={},r={};switch(e){case g.dL.left:i.fieldLeftFixed=null,r.fieldLeftFixed=[];break;case g.dL.right:i.fieldRightFixed=null,r.fieldRightFixed=[];break;case g.dL.all:i.fieldLeftFixed=null,r.fieldLeftFixed=[],i.fieldRightFixed=null,r.fieldRightFixed=[];break}yield t.save(i),yield t.reload(r)}))})}handleHide(e,t){return(0,r.sH)(this,void 0,void 0,function*(){yield this.consumerUserPreferManager((i,o)=>(0,r.sH)(this,void 0,void 0,function*(){if(!o.fieldPrefer)return;const{field:r}=t;if(o.fieldPrefer.includes(r))return void e.hideColumn(t);const n=[...o.fieldPrefer,r];yield i.save({fieldPrefer:n}),yield i.reload({fieldPrefer:n})}))})}consumerUserPreferManager(e){const t=L.zm.getNullable(this.rootHandle||this.currentHandle);if(!t)return;const i=t.getData();return i?e(t,i):void 0}}(0,r.Cg)([a.x0.Method()],U.prototype,"renderHeaderSlot",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleOrderByASC",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleOrderByDESC",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleClearOrder",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleFreezeLeft",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleFreezeRight",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleClearFreeze",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleClearAllFreeze",null),(0,r.Cg)([a.x0.Method()],U.prototype,"handleHide",null),(0,r.Cg)([a.x0.Method()],U.prototype,"consumerUserPreferManager",null);class q extends U{constructor(){super(...arguments),this.$$innerWidgetType=a.VX.Field,this.viewMode=T.nE.Editor,this.ownEventListeners={}}get field(){const e=this.runtimeField;if(!e)throw new Error("Invalid field define.");return e}initialize(e){return super.initialize(e),this.runtimeField=e.field,this}get columnType(){return this.isExpandOperationField?"expand":super.columnType}get minWidth(){return o.Xx.ofNullable(this.getDsl().minWidth).orElseGet(()=>this.computeDefaultMinWidth())}get width(){const{fieldWidth:e}=this.userPrefer||{};return(0,p.tA)(e,this.itemData,super.width||this.cellWidth)}get fixed(){const e=this.userPrefer||{};return(0,p.n4)(e,this.itemData,super.fixed)}get isExpandOperationField(){return this.expandOperationField===this.itemData}getTableAutoWidth(){const e=super.width||this.cellWidth;if("auto"===e){const{label:e,sortable:t}=this,i=(0,I.uM)();let r=Object.assign(Object.assign({},I.Gm),{sortable:t});return i&&(r=Object.assign(Object.assign({},r),i)),r.min=this.cellMinWidth||r.min,(0,I.Fw)(e,r)}}getTableForCellMinWidth(){const e=this.getTableAutoWidth();return!(0,s.A)(this.cellMinWidth)&&e?Math.max(this.cellMinWidth,e):(0,s.A)(this.cellMinWidth)?e||void 0:this.cellMinWidth}computeDefaultMinWidth(){var e,t;const i=this.getTableForCellMinWidth();if(i)return i;let r=null===(t=null===(e=(0,I.uM)())||void 0===e?void 0:e.column)||void 0===t?void 0:t.minWidth;if(null==r)return I.Gm.min;if((0,k.A)(r)){if(!r)return I.Gm.min;r=void 0}if((0,l.A)(r)||(0,D.A)(r))return A.WbJ.px(r);const{label:o,sortable:n}=this;if((0,F.A)(r))return r(o,Object.assign(Object.assign({},I.Gm),{sortable:n}));let a;return a=null==r?Object.assign(Object.assign({},I.Gm),{sortable:n}):Object.assign(Object.assign(Object.assign({},I.Gm),r),{sortable:n}),(0,I.Fw)(o,a)}className(e){const{field:t}=this,i=[`${E.Nf}-column-${t.ttype.toLowerCase()}`];return(0,x.s$u)(t)&&i.push(`${E.Nf}-column-${t.relatedTtype.toLowerCase()}`),this.isExpandOperationField&&i.push(`${E.Nf}-column-expandable`),o.MZ.append(i,super.className(e)).join(" ")}get sortable(){if(this.isExpandOperationField)return!1;const e=o.TM.toBoolean(this.getDsl().sortable);if(null==e){if(!this.tableSortable)return!1;const{field:e,relationSortFields:t}=this,{store:i}=e;if((0,x.HOt)(e)){const{relationStore:r}=e;return!i&&(!!r&&(!!t&&!!t.length))}return i}return e||!1}get relationSortFields(){}get invisible(){return this.clientInvisible||this.dslInvisible||this.userPreferInvisible}get dslInvisible(){const{invisible:e}=this.getDsl();if((0,k.A)(e))return e;if((0,l.A)(e)){const t=this.executeExpression(void 0,e,!1);return!!(0,k.A)(t)&&t}return!1}get required(){let{required:e}=this.getDsl();if((0,s.A)(e)&&(e=!1),(0,k.A)(e))return e;if((0,l.A)(e)){if(o.TM.isStringBoolean(e))return!!o.TM.toBoolean(e);const t=this.currentEditorContext;if(t)return!!this.executeExpression(t.row,e,!1)}return!1}get userPreferInvisible(){var e,t;return this.userPrefer&&(null===(t=null===(e=this.userPrefer)||void 0===e?void 0:e.fieldPrefer)||void 0===t?void 0:t.includes(this.itemData))||!1}invisibleContent(e){const{invisibleContent:t}=this.getDsl();if((0,k.A)(t))return t;if((0,l.A)(t)){const i=this.executeExpression(e.data,t,!1);return!!(0,k.A)(i)&&i}return!1}get editable(){return!this.isExpandOperationField&&(this.rootViewRuntimeContext.runtimeContext.view.type!==T.qi.Detail&&super.editable)}cellEditable(e){const{editable:t,independentlyEditable:i}=this.getDsl(),r=o.Xx.ofNullable(t).orElse(i),n=o.TM.toBoolean(r);if(null==n&&(0,l.A)(r)){const t=this.executeExpression(e.data,r,!1);return!!(0,k.A)(t)&&t}return!0}compute(e){const t=this.getCompute(e.data);if(null==t||""===t)return this.getValue(e);let i;(0,k.A)(t)?i=t:(i=this.executeExpression(e.data,t),"number"===typeof i&&(0,R.A)(i)&&(i=0));const r=JSON.stringify(i)===JSON.stringify(this.getValue(e));return"object"===typeof i&&r?this.getValue(e):(!(0,x.s$u)(this.field)||r&&!(0,T.Po)(i)||(i=this.getValue(e)),this.setValue(e,i),i)}getCompute(e){const{field:t}=this;if(!(0,x.s$u)(t))return t.compute;let i=S.A8.activeRecord.toString();if(t.related&&t.related.length>0){const r=t.related[0],o=e[r];if(t.multi&&t.related.length>1&&Array.isArray(o)){const e=t.related[1];return i=`LIST_FIELD_VALUES(${i}.${r},'','${e}')`,i}for(const e of t.related)i=`${i}.${e}`;return i}}editorConfirmText(e){return o.Xx.ofNullable(super.editorConfirmText(e)).map(t=>this.executeExpression(e.data,t)).orElse(void 0)}renderEditSlot(e){if(this.invisible||!this.template)return[];const t=e.origin.column,i=[e.data],r=(0,v.bF)(M.c,Object.assign(Object.assign({},this.template),{dslDefinition:Object.assign(Object.assign({},this.template),{placeholder:t.title||this.template.placeholder}),parentHandle:this.getHandle(),dataSource:i,activeRecords:i,rowIndex:e.index,inline:!0}));return r?[r]:[]}isExpressionString(e){return"string"!==typeof e||!/^[a-zA-Z]+$/.test(e)&&!/^[\u4e00-\u9fa5]+$/.test(e)}executeExpression(e,t,i){var r,o,n;return null===t||void 0===t?"boolean"===typeof i?i:i||t:this.isExpressionString(t)?S.r4.run({activeRecords:[e||{}],rootRecord:(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:this.scene,parentRecord:(null===(n=this.parentViewActiveRecords)||void 0===n?void 0:n[0])||{}},t,i):t}$$beforeCreated(){super.$$beforeCreated(),this.notify(w.Mv.ON_FIELD_BEFORE_CREATED)}$$created(){super.$$created(),this.notify(w.Mv.ON_FIELD_CREATED)}$$beforeMount(){super.$$beforeMount(),this.notify(w.Mv.ON_FIELD_BEFORE_MOUNT)}$$mounted(){var e;super.$$mounted(),null===(e=this.fieldWidgetMounted)||void 0===e||e.call(this,this),this.notify(w.Mv.ON_FIELD_MOUNTED)}$$beforeUpdate(){super.$$beforeUpdate(),this.notify(w.Mv.ON_FIELD_BEFORE_UPDATE)}$$updated(){super.$$updated(),this.notify(w.Mv.ON_FIELD_UPDATED)}$$beforeUnmount(){super.$$beforeUnmount(),this.notify(w.Mv.ON_FIELD_BEFORE_UNMOUNT)}$$unmounted(){var e;super.$$unmounted(),null===(e=this.fieldWidgetUnmounted)||void 0===e||e.call(this,this),this.notify(w.Mv.ON_FIELD_UNMOUNTED)}on(e,t){let i;if((0,l.A)(e)){if(!(0,F.A)(t))return;i={[e]:t}}else{if(!(0,O.A)(e))return;i=e}Object.entries(i).forEach(([e,t])=>{const i=w.Fv[e];i&&(this.ownEventListeners[i]&&this.ownEventListeners[i].push(t),this.ownEventListeners[i]=[t])})}notify(e){try{this.ownEventListeners[e]&&this.ownEventListeners[e].forEach(e=>e(this));const{view:t,field:i}=this;(null===i||void 0===i?void 0:i.name)&&(null===t||void 0===t?void 0:t.name)&&w.Xn.publish(e,`${t.name}:${i.name}`,this)}catch(t){console.log(t)}}executeAction(e){var t;const{clickActionName:i}=this.getDsl(),{index:r}=e,o=null===(t=this.getSibling())||void 0===t?void 0:t.find(e=>{var t;return(null===(t=e)||void 0===t?void 0:t.rowIndex)===r});if(o){const e=o.getChildrenWidget(),t=null===e||void 0===e?void 0:e.filter(e=>{if(e instanceof $.j){const{action:t}=e;return i===(null===t||void 0===t?void 0:t.name)}return!1}),n=t.find(e=>{var t;return(null===(t=e.getParent())||void 0===t?void 0:t.rowIndex)===r});n instanceof $.j&&!n.disabled&&n.getOperator().click()}}handleClick(e,t){const{clickMethod:i}=this.getDsl();i.toLowerCase()===t.type&&this.executeAction(e)}wrapperToFieldAction(e,t){return this.wrapperToFiledAction(e,t)}wrapperToFiledAction(e,t){if("string"!==typeof e)return e;const{enableClick:i}=this.getDsl();return i?[(0,v.bF)("div",{class:"default-table-hyperlinks",onClick:(0,N.D$)(this.handleClick.bind(this,t),["stop"]),onDblclick:(0,N.D$)(this.handleClick.bind(this,t),["stop"])},[(0,v.bF)("a",{},e)])]:e}renderDefaultSlot(e){return(0,d.A)(this.compute(e))}}(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],q.prototype,"viewType",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],q.prototype,"currentEditorContext",void 0),(0,r.Cg)([a.x0.Reactive(),a.x0.Provide()],q.prototype,"viewMode",void 0),(0,r.Cg)([a.x0.Reactive()],q.prototype,"runtimeField",void 0),(0,r.Cg)([a.x0.Reactive()],q.prototype,"field",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"columnType",null),(0,r.Cg)([a.x0.Inject()],q.prototype,"cellWidth",void 0),(0,r.Cg)([a.x0.Inject()],q.prototype,"cellMinWidth",void 0),(0,r.Cg)([a.x0.Reactive()],q.prototype,"minWidth",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"width",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"fixed",null),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],q.prototype,"expandOperationField",void 0),(0,r.Cg)([a.x0.Reactive()],q.prototype,"isExpandOperationField",null),(0,r.Cg)([a.x0.Method()],q.prototype,"className",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"sortable",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"relationSortFields",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"invisible",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"dslInvisible",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"required",null),(0,r.Cg)([a.x0.Reactive(),a.x0.Inject()],q.prototype,"userPrefer",void 0),(0,r.Cg)([a.x0.Reactive()],q.prototype,"userPreferInvisible",null),(0,r.Cg)([a.x0.Method()],q.prototype,"invisibleContent",null),(0,r.Cg)([a.x0.Reactive()],q.prototype,"editable",null),(0,r.Cg)([a.x0.Method()],q.prototype,"cellEditable",null),(0,r.Cg)([a.x0.Method()],q.prototype,"editorConfirmText",null),(0,r.Cg)([a.x0.Method()],q.prototype,"renderEditSlot",null),(0,r.Cg)([a.x0.Method(),a.x0.Inject()],q.prototype,"fieldWidgetMounted",void 0),(0,r.Cg)([a.x0.Method(),a.x0.Inject()],q.prototype,"fieldWidgetUnmounted",void 0),(0,r.Cg)([a.x0.Method()],q.prototype,"wrapperToFieldAction",null),(0,r.Cg)([a.x0.Method()],q.prototype,"renderDefaultSlot",null)},98475:(e,t,i)=>{i.d(t,{M_:()=>u,a_:()=>p,Qn:()=>w,jp:()=>E,PJ:()=>O});var r=i(15215),o=i(78422),n=i(54908),a=i(83247),l=i(39423),s=i(47444),d=i(77679),c=i(35902);let u=class extends c.j{constructor(){super(...arguments),this.$$innerWidgetType=s.VX.Action}get viewMode(){return this.parentViewMode}get action(){const e=this.runtimeAction;if(!e)throw new Error("Invalid action define.");return e}get isAsync(){return!0}get isDialog(){return this.popupScene===d.N3.dialog}get isDrawer(){return this.popupScene===d.N3.drawer}get isInnerPopup(){return this.popupScene===d.N3.inner}initialize(e){return super.initialize(e),this.runtimeAction=e.action,this}load(e,...t){const i=Object.create(null,{load:{get:()=>super.load}});return(0,r.sH)(this,void 0,void 0,function*(){return this.isAsync?i.load.call(this,e,...t):e(...t)})}$$beforeMount(){if(super.$$beforeMount(),!this.$matched){const{matched:e}=(0,n.yE)();this.$matched=e}this.$router||(this.$router=(0,l.KA)().router)}};(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],u.prototype,"viewType",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("viewMode")],u.prototype,"parentViewMode",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],u.prototype,"viewMode",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],u.prototype,"submitType",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],u.prototype,"relationUpdateType",void 0),(0,r.Cg)([s.x0.Reactive()],u.prototype,"action",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"isAsync",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],u.prototype,"popupScene",void 0),(0,r.Cg)([s.x0.Reactive()],u.prototype,"isDialog",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"isDrawer",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"isInnerPopup",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],u.prototype,"submitCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],u.prototype,"validatorCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],u.prototype,"refreshCallChaining",void 0),u=(0,r.Cg)([a.DF.Base(o.TWi,["viewType","actionType","target","widget","model","viewName","name"])],u);let p=class extends c.j{constructor(){super(...arguments),this.$$innerWidgetType=s.VX.Element}get viewType(){var e;return(null===(e=this.view)||void 0===e?void 0:e.type)||this.parentViewType}};(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("viewType"),(0,r.Sn)("design:type",Object)],p.prototype,"parentViewType",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide(),(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],p.prototype,"viewType",null),p=(0,r.Cg)([a.DF.Base("Element",["viewType","widget","inline","model","viewName"])],p);var h=i(48798),g=i(13193),v=i(70164),m=i(25195),f=i(66401),y=i(9703),b=i(89610),C=i(34963),x=i(87756);let w=class extends x.T3{constructor(){super(...arguments),this.$$innerWidgetType=s.VX.Field,this.defaultComputeTrigger=[m._Vw.BLUR],this.ownEventListeners={}}get field(){const e=this.runtimeField;if(!e)throw new Error("Invalid field define.");return e}get label(){const e=super.label;return(0,f.A)(e)&&(g.r4.isExpressionStr(this.getDsl().label)||g.r4.hasKeywords(this.getDsl().label))?"":super.label||this.field.label||this.field.displayName}get required(){return this.viewType!==v.qi.Detail&&super.required}get readonly(){return this.viewType!==v.qi.Search&&(this.viewType===v.qi.Detail||super.readonly)}initialize(e){return super.initialize(e),this.runtimeField=e.field,this}get isSkipValidator(){return this.viewType===v.qi.Search||super.isSkipValidator}validatorSpecific(e){const t=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){if(this.isSkipValidator)return this.validatorSkip();if(this.required&&(0,v.KU)(e))return this.validatorError();const i=this.getDsl().patternType,r=this.executeExpression(i);let{pattern:n,tips:a=""}=this.getDsl();if(n=this.executeExpression(n,n),!(0,v.KU)(r)){const e=r,t=o.C_M.get(e);(0,f.A)(t)||(n=t.pattern,a=t.errorMsg)}if(n&&!(0,v.Po)(e)){let t;const i=n.match(/^(\/.*\/)(.*)?$/);if(i){const e=i[1],r=i[2];t=new RegExp(e.slice(1,-1),r)}else t=new RegExp(n);if(!t.test(e))return this.validatorError(this.executeExpression(a,a)||(0,o.cAb)("校验失败"))}return t.validator.call(this)})}change(e){super.change(e),this.notify(h.Mv.ON_FIELD_CHANGE)}focus(){super.focus(),this.notify(h.Mv.ON_FIELD_FOCUS)}blur(){super.blur(),this.notify(h.Mv.ON_FIELD_BLUR)}executeValidator(){const e=Object.create(null,{executeValidator:{get:()=>super.executeValidator}});return(0,r.sH)(this,void 0,void 0,function*(){this.notify(h.Mv.ON_FIELD_VALIDATE_START);const t=yield e.executeValidator.call(this);return(0,d.mO)(t)?this.notify(h.Mv.ON_FIELD_VALIDATE_SUCCESS):(0,d.t6)(t)&&this.notify(h.Mv.ON_FIELD_VALIDATE_FAILED),this.notify(h.Mv.ON_FIELD_VALIDATE_END),t})}submit(e){return o.pFK.DEFAULT(this.field,this.itemName,e,this.value)}validator(){return this.validatorSpecific(this.getValue())}get computeTrigger(){const{computeTrigger:e}=this.getDsl();return!(0,f.A)(e)&&(0,y.A)(e)?e.split(",").map(e=>e.trim().toLowerCase()):this.defaultComputeTrigger}executeCompute(e){}$$beforeCreated(){super.$$beforeCreated(),this.notify(h.Mv.ON_FIELD_BEFORE_CREATED)}$$created(){super.$$created(),this.notify(h.Mv.ON_FIELD_CREATED)}$$beforeMount(){super.$$beforeMount(),this.notify(h.Mv.ON_FIELD_BEFORE_MOUNT)}$$mounted(){var e;super.$$mounted(),null===(e=this.fieldWidgetMounted)||void 0===e||e.call(this,this),this.notify(h.Mv.ON_FIELD_MOUNTED)}$$beforeUpdate(){super.$$beforeUpdate(),this.notify(h.Mv.ON_FIELD_BEFORE_UPDATE)}$$updated(){super.$$updated(),this.notify(h.Mv.ON_FIELD_UPDATED)}$$beforeUnmount(){super.$$beforeUnmount(),this.notify(h.Mv.ON_FIELD_BEFORE_UNMOUNT)}$$unmounted(){var e;super.$$unmounted(),null===(e=this.fieldWidgetUnmounted)||void 0===e||e.call(this,this),this.notify(h.Mv.ON_FIELD_UNMOUNTED)}on(e,t){let i;if((0,y.A)(e)){if(!(0,b.A)(t))return;i={[e]:t}}else{if(!(0,C.A)(e))return;i=e}Object.entries(i).forEach(([e,t])=>{const i=h.Fv[e];i&&(this.ownEventListeners[i]&&this.ownEventListeners[i].push(t),this.ownEventListeners[i]=[t])})}notify(e){try{this.ownEventListeners[e]&&this.ownEventListeners[e].forEach(e=>e(this));const{view:t,field:i}=this;(null===i||void 0===i?void 0:i.name)&&(null===t||void 0===t?void 0:t.name)&&h.Xn.publish(e,`${t.name}:${i.name}`,this)}catch(t){console.log(t)}}};(0,r.Cg)([s.x0.Reactive()],w.prototype,"field",null),(0,r.Cg)([s.x0.Reactive()],w.prototype,"label",null),(0,r.Cg)([s.x0.Reactive()],w.prototype,"required",null),(0,r.Cg)([s.x0.Reactive()],w.prototype,"readonly",null),(0,r.Cg)([s.x0.Method()],w.prototype,"change",null),(0,r.Cg)([s.x0.Method()],w.prototype,"focus",null),(0,r.Cg)([s.x0.Method()],w.prototype,"blur",null),(0,r.Cg)([s.x0.Reactive()],w.prototype,"computeTrigger",null),(0,r.Cg)([s.x0.Method(),s.x0.Inject()],w.prototype,"fieldWidgetMounted",void 0),(0,r.Cg)([s.x0.Method(),s.x0.Inject()],w.prototype,"fieldWidgetUnmounted",void 0),w=(0,r.Cg)([a.DF.Base(Symbol("Field"),["viewType","ttype","multi",{key:"widget",weight:999},"model","viewName","name"])],w);var S=i(16022),T=i(97859);let E=class extends c.j{constructor(){super(...arguments),this.defaultAllInvisible=!0}get viewType(){var e;return(null===(e=this.view)||void 0===e?void 0:e.type)||this.parentViewType}get formData(){var e;return(null===(e=this.activeRecords)||void 0===e?void 0:e[0])||{}}get isDialog(){return this.popupScene===d.N3.dialog}get isDrawer(){return this.popupScene===d.N3.drawer}get cols(){let e=S.A5.toNumber(this.getDsl().cols);return(0,T.A)(e)&&(e=this.parentCols),(0,T.A)(e)&&(e=1),e}get help(){return this.getDsl().help}invisibleProcess(e){return"boolean"===typeof e?e:!!this.executeExpression(e,!1)}executeLabelExpression(e){return g.r4.isExpressionStr(e)?this.executeExpression(g.r4.getExpressionStr(e)):g.r4.hasKeywords(e)?this.executeExpression(e):e}executeExpression(e,t){var i,r;return g.r4.run({activeRecords:[this.formData||{}],rootRecord:(null===(i=this.rootData)||void 0===i?void 0:i[0])||{},openerRecord:(null===(r=this.openerActiveRecords)||void 0===r?void 0:r[0])||{},scene:this.scene},e,t)}};(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("viewType")],E.prototype,"parentViewType",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],E.prototype,"viewType",null),(0,r.Cg)([s.x0.Reactive()],E.prototype,"formData",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject()],E.prototype,"popupScene",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("cols")],E.prototype,"parentCols",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],E.prototype,"cols",null),(0,r.Cg)([s.x0.Reactive()],E.prototype,"help",null),E=(0,r.Cg)([a.DF.Base("Pack",["viewType","widget","inline","model","viewName"])],E);var A=i(62121),k=i(20903),D=i(20641),F=i(42222),R=i(74905);let O=class extends c.j{constructor(){super(...arguments),this.$$innerWidgetType=s.VX.View,this.defaultAllInvisible=!0}get viewMode(){var e,t;return this.currentViewMode||(null===(e=this.getDsl().mode)||void 0===e?void 0:e.toUpperCase())||(null===(t=this.metadataRuntimeContext.viewAction)||void 0===t?void 0:t.resViewMode)||this.parentViewMode||v.nE.Create}getViewMode(){return this.viewMode}setViewMode(e){this.currentViewMode=e}setFilter(e){this.filter=e}get submitType(){var e,t;return this.currentSubmitType||(null===(t=null===(e=this.getDsl().submitType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||this.parentSubmitType||o.TNZ.default}get relationUpdateType(){var e,t;return this.currentRelationUpdateType||(null===(t=null===(e=this.getDsl().relationUpdateType)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))||this.parentRelationUpdateType||o.A14.default}get mountedCallChaining(){return this.currentMountedCallChaining||this.parentMountedCallChaining}get refreshCallChaining(){return this.currentRefreshCallChaining||this.parentRefreshCallChaining}get submitCallChaining(){return this.currentSubmitCallChaining||this.parentSubmitCallChaining}get validatorCallChaining(){return this.currentValidatorCallChaining||this.parentValidatorCallChaining}initialize(e){var t;super.initialize(e),this.setComponent(F.A),this.viewType=null===(t=e.type)||void 0===t?void 0:t.toUpperCase(),this.metadataHandle||console.warn("metadataHandle was missing");const{dataSourceConfig:i}=(0,o.RbF)(e,{key:"dataSourceConfig",prefix:"datasource"});return this.dataSourceConfig=i,this}cloneParentDataSource(){this.setCurrentDataSource((0,k.A)(this.parentDataSource))}addVisibleArea(){var e;const t=null===(e=(0,D.nI)())||void 0===e?void 0:e.vnode.el;if(!t)return;const{currentHandle:i}=this,r=(0,A.D6)();r.visibleArea.set(i,(0,A.sf)(i,t))}clearVisibleArea(){const e=(0,D.nI)();if(!e)return;const{currentHandle:t}=this,i=(0,A.D6)();i.visibleArea.delete(t)}$$beforeMount(){var e;super.$$beforeMount(),this.currentMountedCallChaining=new S.Wl,this.currentRefreshCallChaining=new S.Wl,this.currentSubmitCallChaining=new S.Wl,this.currentValidatorCallChaining=new S.Wl,(null===(e=this.dataSourceConfig)||void 0===e?void 0:e.clone)&&this.cloneParentDataSource()}$$mounted(){var e,t;if(super.$$mounted(),this.automatic&&this.parentMountedCallChaining&&this.currentMountedCallChaining?this.parentMountedCallChaining.hook(this.path,e=>(0,r.sH)(this,void 0,void 0,function*(){var t;yield null===(t=this.currentMountedCallChaining)||void 0===t?void 0:t.syncCall(...e||[])}),R.EC):null===(e=this.currentMountedCallChaining)||void 0===e||e.syncCall(),this.parentRefreshCallChaining&&this.currentRefreshCallChaining){let e=!1;this.currentRefreshCallChaining.callBefore((...t)=>{var i;const{refreshParent:r}=(0,o.KxQ)(t);return!r||(e=!0,null===(i=this.parentRefreshCallChaining)||void 0===i||i.syncCall(...t||[]),!1)},{immutable:!0}),this.parentRefreshCallChaining.hook(this.path,(t,i)=>(0,r.sH)(this,void 0,void 0,function*(){var r;if(!1===i)return;const n=(0,o.KxQ)(t);e&&(e=!1,n.refreshParent=!1),yield null===(r=this.currentRefreshCallChaining)||void 0===r?void 0:r.syncCall(n,...(t||[]).slice(1)||[])}),R.EC)}this.parentSubmitCallChaining&&this.currentSubmitCallChaining&&this.parentSubmitCallChaining.hook(this.path,e=>{var t;return null===(t=this.currentSubmitCallChaining)||void 0===t?void 0:t.syncCall(...e||[])},R.EC),null===(t=this.currentValidatorCallChaining)||void 0===t||t.callAfter(R.WC),this.parentValidatorCallChaining&&this.currentValidatorCallChaining&&this.parentValidatorCallChaining.hook(this.path,e=>{var t;return null===(t=this.currentValidatorCallChaining)||void 0===t?void 0:t.call(...e||[])},R.EC),this.addVisibleArea()}$$unmounted(){var e,t,i,r;super.$$unmounted(),null===(e=this.parentMountedCallChaining)||void 0===e||e.unhook(this.path),null===(t=this.parentRefreshCallChaining)||void 0===t||t.unhook(this.path),null===(i=this.parentSubmitCallChaining)||void 0===i||i.unhook(this.path),null===(r=this.parentValidatorCallChaining)||void 0===r||r.unhook(this.path),this.clearVisibleArea()}$$unmountedAfterProperties(){super.$$unmountedAfterProperties(),o.HxA.delete(this.currentHandle)}$$activated(){super.$$activated(),this.addVisibleArea()}$$deactivated(){super.$$deactivated(),this.clearVisibleArea()}};(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"viewType",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("viewMode")],O.prototype,"parentViewMode",void 0),(0,r.Cg)([s.x0.Reactive()],O.prototype,"currentViewMode",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"viewMode",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"filter",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"setFilter",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("submitType")],O.prototype,"parentSubmitType",void 0),(0,r.Cg)([s.x0.Reactive()],O.prototype,"currentSubmitType",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"submitType",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("relationUpdateType")],O.prototype,"parentRelationUpdateType",void 0),(0,r.Cg)([s.x0.Reactive()],O.prototype,"currentRelationUpdateType",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"relationUpdateType",null),(0,r.Cg)([s.x0.Reactive()],O.prototype,"dataSourceConfig",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("mountedCallChaining")],O.prototype,"parentMountedCallChaining",void 0),(0,r.Cg)([s.x0.Reactive()],O.prototype,"currentMountedCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"mountedCallChaining",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("refreshCallChaining")],O.prototype,"parentRefreshCallChaining",void 0),(0,r.Cg)([s.x0.Reactive()],O.prototype,"currentRefreshCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"refreshCallChaining",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("submitCallChaining")],O.prototype,"parentSubmitCallChaining",void 0),(0,r.Cg)([s.x0.Reactive()],O.prototype,"currentSubmitCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"submitCallChaining",null),(0,r.Cg)([s.x0.Reactive(),s.x0.Inject("validatorCallChaining")],O.prototype,"parentValidatorCallChaining",void 0),(0,r.Cg)([s.x0.Reactive()],O.prototype,"currentValidatorCallChaining",void 0),(0,r.Cg)([s.x0.Reactive(),s.x0.Provide()],O.prototype,"validatorCallChaining",null),O=(0,r.Cg)([a.DF.Base("BaseView",["type","widget"])],O)},98504:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(20641);function o(e,t,i,o,n,a){const l=(0,r.g2)("oio-date-range-picker"),s=(0,r.g2)("default-form-item");return(0,r.uX)(),(0,r.Wv)(s,{name:e.itemName,invisible:e.invisible,colon:e.colon,layout:e.layout,label:e.label,help:e.help,hint:e.hint,required:e.required,"validate-trigger":e.validateTrigger,"validator-info":e.validatorInfo},{default:(0,r.k6)(()=>[(0,r.bF)(l,{value:e.realValue,"default-value":e.defaultValue,format:e.format,"date-format":e.dateFormat,"value-format":e.valueFormat,placeholder:e.placeholder,"allow-clear":e.allowClear,readonly:e.readonly,disabled:e.disabled,"close-panel-change":e.closePanelChange,"open-panel-change":e.openPanelChange,"get-trigger-container":e.getTriggerContainer,"popper-class":"vxe-table--ignore-clear","onUpdate:value":e.change,onBlur:e.blur,onFocus:e.focus},null,8,["value","default-value","format","date-format","value-format","placeholder","allow-clear","readonly","disabled","close-panel-change","open-panel-change","get-trigger-container","onUpdate:value","onBlur","onFocus"])]),_:1},8,["name","invisible","colon","layout","label","help","hint","required","validate-trigger","validator-info"])}var n=i(30717),a=i(25195),l=i(91702),s=i(41844);const d=(0,r.pM)({name:"DefaultDateRangePicker",components:{OioDateRangePicker:n.ThA,DefaultFormItem:l.Te},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a.BO3),l.jW),l.R7),l.Dn),s.g),{itemName:{type:String}}),setup(e){const t=(0,l.sX)();return Object.assign(Object.assign({},(0,s.I)(e)),{getTriggerContainer:e.getPopupContainer||t.getTriggerContainer})}});var c=i(66262);const u=(0,c.A)(d,[["render",o]]),p=u},99537:(e,t,i)=>{i.d(t,{B:()=>T,a:()=>u});var r=i(15215),o=i(78422),n=i(13193),a=i(16022),l=i(25195),s=i(47444),d=i(12606),c=i(77679);class u extends d.N{get options(){return this.getAvailableOptions()}getAvailableOptions(){return this.fullOptions||[]}get autocorrection(){return a.TM.toBoolean(this.getDsl().autocorrection)}get optionLabel(){return this.getDsl().optionLabel}get orientation(){const e=this.getDsl().orientation;if(e)return e}onSelectedChange(e){const{fullOptionsMap:t}=this;if(!t)return void console.error("full options uninitialized.");if(this.selectedValue=e,!e)return void super.change(null);const i=t.get(e);if(null==i)return console.error("the value is not included in the full options.",t,e),void super.change(null);super.change(i.data)}validator(){const e=Object.create(null,{validator:{get:()=>super.validator}});return(0,r.sH)(this,void 0,void 0,function*(){const t=yield e.validator.call(this);if(!(0,c.mO)(t))return t;const{selectedValue:i}=this;return i||!this.required||this.invisible?this.validatorSuccess():this.validatorError(`${this.field.label}${(0,o.cAb)("必填")}`)})}get loadFullOptions(){return a.TM.toBoolean(this.getDsl().loadFullOptions)}get loadPageSize(){let e=a.A5.toNumber(this.getDsl().loadPageSize);return null==e&&(e=100),e}get loadMaxTotalPage(){let e=a.A5.toNumber(this.getDsl().loadMaxTotalPage);return null==e&&(e=-1),e}mountedProcess(){return(0,r.sH)(this,void 0,void 0,function*(){const{loadPageSize:e,loadFullOptions:t}=this,i=yield this.queryPage({currentPage:1,pageSize:e,condition:this.domain});t?yield this.fillFullOptionsForAll(i,e):this.fillFullOptionsForFirstPage(i)})}fillFullOptionsForFirstPage(e){this.generatorFullOptions(e.content),this.backfillSelectedValues()}fillFullOptionsForAll(e,t){return(0,r.sH)(this,void 0,void 0,function*(){const{totalPages:i,content:r}=e;let o=this.loadMaxTotalPage;if(o<=0&&(o=i),i<=1||1===o)return this.generatorFullOptions(r),void this.backfillSelectedValues();const n=[];for(let e=2;e<=o;e++)n.push(this.queryPage({currentPage:e,pageSize:t,condition:this.domain,context:{batch:!0}}).then(e=>e.content));const a=yield Promise.all(n);a.forEach(e=>r.push(...e)),this.generatorFullOptions(r),this.backfillSelectedValues()})}generatorKey(e){var t;const i=null===(t=this.referencesModel)||void 0===t?void 0:t.pks;if(i)return i.map(t=>e[t]).join("#")}generatorFullOptions(e){const t=[],i=new Map;for(const r of e){const e=this.generatorKey(r);if(!e)continue;const o={key:e,value:e,label:this.executeExpressionByItem(r,this.optionLabel,e)||e,data:r};t.push(o),i.set(e,o)}this.fullOptions=t,this.fullOptionsMap=i}backfillSelectedValues(){const{value:e}=this;if(!e)return;const t=this.generatorKey(e);t?this.selectedValue=t:console.warn("record pk is null.",e)}queryPage(e){return(0,r.sH)(this,void 0,void 0,function*(){return o.cqT.queryPage(this.referencesModel,Object.assign(Object.assign({},e),{requestFields:o.g6N.convertRequestFields(this.referencesModel.modelFields)}))})}executeExpressionByItem(e,t,i){var r,o;return null===t||void 0===t?"boolean"===typeof i?i:i||t:"string"===typeof t&&/^[a-zA-Z]+$/.test(t)?t:n.r4.run({activeRecords:[e],rootRecord:(null===(r=this.rootData)||void 0===r?void 0:r[0])||{},openerRecord:(null===(o=this.openerActiveRecords)||void 0===o?void 0:o[0])||{},scene:this.scene},t,i)}defaultConstructDataTrigger(){return[l.HCy.CHANGE]}defaultClearFieldsTrigger(){return[l.HCy.CHANGE]}}(0,r.Cg)([s.x0.Reactive()],u.prototype,"selectedValue",void 0),(0,r.Cg)([s.x0.Reactive()],u.prototype,"fullOptions",void 0),(0,r.Cg)([s.x0.Reactive()],u.prototype,"options",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"autocorrection",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"optionLabel",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"orientation",null),(0,r.Cg)([s.x0.Method()],u.prototype,"onSelectedChange",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"loadFullOptions",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"loadPageSize",null),(0,r.Cg)([s.x0.Reactive()],u.prototype,"loadMaxTotalPage",null);var p=i(20641),h=i(90033);const g={class:"form-enum-radio"},v={key:0,class:"not-readonly"};function m(e,t,i,r,o,n){const a=(0,p.g2)("a-radio"),l=(0,p.g2)("a-radio-group");return(0,p.uX)(),(0,p.CE)("div",g,[!e.readonly||e.readonly&&e.disabled?((0,p.uX)(),(0,p.CE)("div",v,[(0,p.bF)(l,{value:e.selectedValue,disabled:e.disabled,onChange:e.onChange},{default:(0,p.k6)(()=>[((0,p.uX)(!0),(0,p.CE)(p.FK,null,(0,p.pI)(e.options,t=>((0,p.uX)(),(0,p.Wv)(a,{key:t.key,value:t.value,onBlur:e.blur},{default:(0,p.k6)(()=>[(0,p.eW)((0,h.v_)(t.label),1)]),_:2},1032,["value","onBlur"]))),128))]),_:1},8,["value","disabled","onChange"])])):(0,p.Q3)("",!0)])}var f=i(21228),y=i(59831),b=i(91702);const C=["1","2","3"].map(e=>({key:e,value:e,label:`${(0,o.cAb)("选项")}${e}`,data:{}})),x=(0,p.pM)({name:"DefaultRadio",components:{ARadioGroup:f.A,ARadio:y.Ay},inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},b.jW),b.R7),{options:{type:Array},orientation:{type:String},selectedValue:{type:String},onSelectedChange:{type:Function},_FROM_UI_DESIGNER:{type:Boolean}}),setup(e){const{readonly:t,disabled:i}=(0,b.P1)(e,!0),r=(0,p.EW)(()=>e._FROM_UI_DESIGNER?C:e.options||[]),o=t=>{var i,r,o;const{target:{value:n}}=t;null===(i=e.onSelectedChange)||void 0===i||i.call(e,n),null===(r=null===t||void 0===t?void 0:t.preventDefault)||void 0===r||r.call(t),null===(o=null===t||void 0===t?void 0:t.stopPropagation)||void 0===o||o.call(t)};return{options:r,readonly:t,disabled:i,onChange:o}}});var w=i(66262);const S=(0,w.A)(x,[["render",m]]),T=S}}]);
//# sourceMappingURL=chunk-b-2c544c6e.fa2e0c21.js.map